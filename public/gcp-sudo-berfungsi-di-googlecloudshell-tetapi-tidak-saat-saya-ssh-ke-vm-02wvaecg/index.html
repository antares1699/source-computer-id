<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>GCP - sudo berfungsi di GoogleCloudShell tetapi tidak saat saya ssh ke vm</title><meta name=description content="Saya membuat VM Google Compute Engine baru (Debian 9) dan membuka shell untuk itu menggunakan shell GoogleCloud. Saya dapat sudo dari jendela shell browser itu.  Saya kemudian mengatur kunci ssh dan ssh..."><link rel=canonical href=https://www.idxstack.com/gcp-sudo-berfungsi-di-googlecloudshell-tetapi-tidak-saat-saya-ssh-ke-vm-02wvaecg/><meta property="og:title" content="GCP - sudo berfungsi di GoogleCloudShell tetapi tidak saat saya ssh ke vm"><meta property="og:description" content="Saya membuat VM Google Compute Engine baru (Debian 9) dan membuka shell untuk itu menggunakan shell GoogleCloud. Saya dapat sudo dari jendela shell browser itu.  Saya kemudian mengatur kunci ssh dan ssh..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/gcp-sudo-berfungsi-di-googlecloudshell-tetapi-tidak-saat-saya-ssh-ke-vm-02wvaecg/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="GCP - sudo berfungsi di GoogleCloudShell tetapi tidak saat saya ssh ke vm"><meta name=twitter:description content="Saya membuat VM Google Compute Engine baru (Debian 9) dan membuka shell untuk itu menggunakan shell GoogleCloud. Saya dapat sudo dari jendela shell browser itu.  Saya kemudian mengatur kunci ssh dan ssh..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>GCP - sudo berfungsi di GoogleCloudShell tetapi tidak saat saya ssh ke vm</h1><div itemprop=text><p>Saya membuat VM Google Compute Engine baru (Debian 9) dan membuka shell untuk itu menggunakan shell GoogleCloud. Saya dapat <code>sudo</code> dari jendela shell browser itu.</p><p>Saya kemudian mengatur kunci ssh dan ssh saya ke dalam vm. Demi pembahasan, nama pengguna saya adalah "user123". Saya ssh ke vm GCP saya menggunakan:</p><p><code>ssh user123@1.2.3.4</code></p><p>Dengan 1.2.3.4 adalah alamat IP eksternal GCP saya. Saya kemudian masuk.</p><p>Jadi sebagai pengguna <code>user123</code> di <strong>GoogleCloudShell</strong> <code>sudo</code> berfungsi, tetapi saat masuk melalui <strong>ssh</strong> sebagai <code>user123</code>, saya dimintai kata sandi.</p><pre><code>We trust you have received the usual lecture from the local System
Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

[sudo] password for user123:
</code></pre><p>Secara alami, saya tidak ingin atau perlu mengatur kata sandi, saya perlu sudo untuk mengizinkan akun pengguna <code>user123</code> ini ke sudo. Tapi itu berfungsi saat masuk ke GoogleCloudShell .... Hum ... Saya akan melacaknya tapi itu pertanyaan saya.</p><p>CATATAN: Karena saya memiliki root di file <strong>GoogleCloudShell</strong> (via sudo), saya harus dapat menemukan apa yang perlu saya lakukan dan memperbaikinya.</p><p><strong>Apa langkah selanjutnya yang perlu saya ambil agar sudo dapat berfungsi saat masuk melalui ssh?</strong></p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/331605/pats target=_blank rel="nofollow noopener"><span itemprop=name>PatS</span></a>
—
<a href=https://superuser.com/questions/1399934/gcp-sudo-works-in-googlecloudshell-but-not-when-i-ssh-into-vm target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div>Saya tidak yakin apa yang terjadi, tetapi saya menyiapkan VM lain dan semuanya berfungsi dengan baik. Saya bisa <code>sudo</code> setelah saya ssh ke vm menggunakan <b>ssh pengguna123 @ gcp-host</b> serta dari GoogleCloudShell. Saya mungkin menghapus pertanyaan ini jika tidak ada yang menganggapnya berguna.</div><div>— <a href=https://superuser.com/users/331605/pats target=_blank rel="nofollow noopener">PatS</a></div></li><li class=list-group-item><div>Hum ... Plotnya kental. Sesuatu mengacaukan file ~ / .ssh / authorized_keys saya dan ketika saya membuatnya kembali. Saya tidak bisa sudo ketika saya <b>ssh</b> ke dalam GCP vm. Saya pasti melakukan sesuatu dengan cara yang salah (cara yang tidak disukai GCP).</div><div>— <a href=https://superuser.com/users/331605/pats target=_blank rel="nofollow noopener">PatS</a></div></li><li class=list-group-item><div>Saya menutup GoogleCloudShell saya dan membukanya kembali. Ketika saya melakukannya, lingkungan GCP menambahkan dua kunci ssh GCP (untuk mendukung GoogleCloudShell, saya menduga). Ketika kunci tersebut ada, saya dapat <code>sudo</code> saat masuk dari <b>ssh</b> .</div><div>— <a href=https://superuser.com/users/331605/pats target=_blank rel="nofollow noopener">PatS</a></div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>2</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>6</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>6</div><div class=card-body><div itemprop=text><p>Saya akan memberi Anda 2 jawaban.</p><p>Pertama, cloud shell mengelola metadata instance untuk Anda di belakang layar, dan memungkinkan sudo tanpa kata sandi untuk semua pengguna yang ditambahkan ke proyek dengan cara ini. Gunakan google untuk menyiapkan pengguna Anda</p><p><a href=https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys rel="nofollow noopener" target=_blank>https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys</a>
<a href=https://cloud.google.com/compute/docs/instances/managing-instance-access rel="nofollow noopener" target=_blank>https://cloud.google.com/compute/docs/instances/managing-instance-access</a></p><p>Tambahkan akun pengguna yang Anda inginkan melalui konsol proyek. Ini akan menyebarkan pengguna tersebut ke semua host dalam proyek Anda.</p><p>Kedua, yang Anda inginkan adalah mengatur sudo tanpa kata sandi. Anda dapat (menggunakan visudo) mengedit / etc / sudoers atau membuat file baru di bawah /etc/sudoers.d dan menambahkan baris seperti ini:</p><pre><code>user123       ALL = (ALL) NOPASSWD: ALL
</code></pre><p>Anda dapat melihat bahwa google melakukannya dengan keanggotaan grup di grup google-sudoers</p><pre><code>timmy@instance-1:~$ sudo cat /etc/sudoers.d/google_sudoers 
%google-sudoers ALL=(ALL:ALL) NOPASSWD:ALL
timmy@instance-1:~$ id
uid=1000(timmy) gid=1001(timmy) groups=1001(timmy),4(adm),30(dip),44(video),46(plugdev),1000(google-sudoers)
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/gcp-sudo-berfungsi-di-googlecloudshell-tetapi-tidak-saat-saya-ssh-ke-vm-02wvaecg/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/889444/timmy-browne target=_blank rel="nofollow noopener"><span itemprop=name>Timmy Browne</span></a>
—
<a href=https://superuser.com/a/1400281 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>1</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>1</div><div class=card-body><div itemprop=text><p>Setelah membuat mesin komputasi GCP, Anda tidak perlu melakukan hal khusus agar sudo berfungsi dari ssh. Anda jelas perlu menggunakan GCP Console dan menambahkan kunci Anda seperti yang disebutkan @TimmyBrowne dalam postingannya. Lihat <a href=https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys rel="nofollow noopener" target=_blank>https://cloud.google.com/compute/docs/instances/adding-removing-ssh-keys</a> .</p><p>Setelah kunci publik ssh Anda dimasukkan ke dalam instance GCP Compute Engine, Anda dapat ssh ke dalam instance Anda. Tetapi Anda harus menggunakan nama pengguna yang benar.</p><p>Misalnya, jika nama pengguna GCP saya adalah fredsmith, dan IP eksternal GCP saya adalah 5.6.7.8, maka perintah ssh saya akan terlihat seperti ini:</p><p><code>ssh fredsmith@5.6.7.8</code></p><p>Dan jelas, kunci ssh pribadi Anda harus cocok dengan kunci publik yang Anda masukkan ke dalam meta-data ssh untuk instance Anda.</p><p>Setelah masuk, Anda dapat menjalankan sudo dan berfungsi karena GCP telah menyiapkan instance ini dengan kredensial Anda (fredsmith) dan telah menempatkan Anda (fredsmith) ke dalam grup yang diperlukan sehingga sudo berfungsi yang untuk GCP tampaknya adalah google-sudoers.</p><p>Jika Anda ingin membuat pengguna lain dan mengizinkan pengguna tersebut memiliki hak sudo, lihat jawaban @TimmyBrowne saat dia menjelaskan ini.</p><p>Saya masih tidak yakin mengapa saya mendapatkan hasil yang tidak konsisten dimana kadang-kadang saya bisa sudo dan di lain waktu saya tidak bisa karena file authorized_keys saya dihapus, tetapi saya tidak memiliki cukup informasi untuk melanjutkan ini lebih jauh.</p><p>Karena Timmy Browne menjawab pertanyaanku seperti yang dia pahami, dan sepertinya itu benar. Saya akan memberinya pujian atas jawaban ini, tetapi ingin memposting jawaban saya sehingga jika orang lain melihat perilaku yang sama ini, mereka dapat memberikan suara positif pada jawaban ini dan mudah-mudahan kami dapat melacaknya.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/gcp-sudo-berfungsi-di-googlecloudshell-tetapi-tidak-saat-saya-ssh-ke-vm-02wvaecg/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/331605/pats target=_blank rel="nofollow noopener"><span itemprop=name>PatS</span></a>
—
<a href=https://superuser.com/a/1401175 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/bagaimana-cara-mengisi-seri-besar-lebih-dari-10000-baris-di-microsoft-excel-tanpa-menyeret-atau-memilih-sel-thos5rsb/>Bagaimana cara mengisi seri besar (lebih dari 10.000 baris) di Microsoft Excel tanpa menyeret atau memilih sel?</a></div></li><li class=list-group-item><div><a href=/apa-arti-39bit39-dalam-os-tyjl06wk/>Apa arti 'bit' dalam OS</a></div></li><li class=list-group-item><div><a href=/fedora-21-permata-ubah-direktur-yang-dapat-dilaksanakan-oqmzsy8z/>Fedora 21 - Permata: ubah DIREKTUR YANG DAPAT DILAKSANAKAN</a></div></li><li class=list-group-item><div><a href=/ekstensi-pgcrypto-diinstal-tetapi-fungsinya-tidak-tersedia-en9uuzqh/>Ekstensi pgcrypto diinstal tetapi fungsinya tidak tersedia</a></div></li><li class=list-group-item><div><a href=/mengekstrak-satu-trek-audio-dari-video-dengan-beberapa-aliran-audio-gkit8uxc/>Mengekstrak satu trek audio dari video dengan beberapa aliran audio</a></div></li><li class=list-group-item><div><a href=/manfaat-amp-kepraktisan-mesin-virtual-tutup-8ewxntyk/>Manfaat & Kepraktisan Mesin Virtual [tutup]</a></div></li><li class=list-group-item><div><a href=/ubuntu-tidak-dapat-meningkatkan-kemampuan-apt-get-tkxihdyu/>Ubuntu tidak dapat meningkatkan kemampuan apt-get</a></div></li><li class=list-group-item><div><a href=/apa-alasan-komputer-melambat-secara-bertahap-setelah-penggunaan-berbulan-bulan-duplikat-tzyp5w4j/>Apa alasan komputer melambat secara bertahap setelah penggunaan berbulan-bulan? [duplikat]</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-mengosongkan-ruang-yang-digunakan-oleh-unduhan-microsoft-store-yang-tidak-lengkap-zhj7fkny/>Bagaimana cara mengosongkan ruang yang digunakan oleh unduhan Microsoft Store yang tidak lengkap?</a></div></li><li class=list-group-item><div><a href=/mengapa-saya-tidak-bisa-membungkus-teks-di-sekitar-gambar-yang-dikelompokkan-di-word-rfz1hbny/>Mengapa saya tidak bisa membungkus teks di sekitar gambar yang dikelompokkan di Word?</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>