<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Bagaimana cara mengikuti perangkat blokir di Linux?</title><meta name=description content="Saya mencoba mendapatkan hanya 1024 byte terakhir dari / dev / sda2. Ketika saya melakukan sudo tail -c 1024 /dev/sda2 | hd, prompt berhenti sampai saya menekan Ctrl-C. Namun, ketika saya tail..."><link rel=canonical href=https://www.idxstack.com/bagaimana-cara-mengikuti-perangkat-blokir-di-linux-zk2bwv3l/><meta property="og:title" content="Bagaimana cara mengikuti perangkat blokir di Linux?"><meta property="og:description" content="Saya mencoba mendapatkan hanya 1024 byte terakhir dari / dev / sda2. Ketika saya melakukan sudo tail -c 1024 /dev/sda2 | hd, prompt berhenti sampai saya menekan Ctrl-C. Namun, ketika saya tail..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/bagaimana-cara-mengikuti-perangkat-blokir-di-linux-zk2bwv3l/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Bagaimana cara mengikuti perangkat blokir di Linux?"><meta name=twitter:description content="Saya mencoba mendapatkan hanya 1024 byte terakhir dari / dev / sda2. Ketika saya melakukan sudo tail -c 1024 /dev/sda2 | hd, prompt berhenti sampai saya menekan Ctrl-C. Namun, ketika saya tail..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Bagaimana cara mengikuti perangkat blokir di Linux?</h1><div itemprop=text><p>Saya mencoba mendapatkan hanya 1024 byte terakhir dari / dev / sda2. Ketika saya melakukan <code>sudo tail -c 1024 /dev/sda2 | hd</code>, prompt berhenti sampai saya menekan Ctrl-C. Namun, ketika saya <code>tail -c 1024 ddfilecopyofsda2 | hd</code>, saya segera mendapatkan output yang bagus dari file 1024 byte terakhir. Saya membaca di sini ( <a href=https://unix.stackexchange.com/questions/60034/what-are-character-special-and-block-special-files-in-a-unix-system target=_blank rel="nofollow noopener">https://unix.stackexchange.com/questions/60034/what-are-character-special-and-block-special-files-in-a-unix-system</a> ) bahwa "Blokir perangkat biasanya dapat dicari", jadi apa yang saya lewatkan?</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/409147/clearcom0 target=_blank rel="nofollow noopener"><span itemprop=name>clearcom0</span></a>
—
<a href=https://superuser.com/questions/1267402/how-do-i-tail-a-block-device-in-linux target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>1</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>10</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>10</div><div class=card-body><div itemprop=text><p>Berikut salah satu cara untuk mendapatkan 1024 byte terakhir dari perangkat blok:</p><pre><code>last_bytes() { sudo dd if=$2 iflag=skip_bytes skip=$(($(sudo blockdev --getsize64 $2) - $1)) bs=1M ; } ; last_bytes 1024 DEVICE
</code></pre><p>Ganti <code>DEVICE</code> dengan jalur perangkat. Dalam kasus Anda, Anda akan menggunakan <code>/dev/sda2</code>.</p><hr><p>Sekarang untuk pertanyaan yang lebih menarik untuk dijawab…</p><h2 class=h4>Mengapa <code>tail -c 1024 /dev/sda2</code> mencari di seluruh disk?</h2><p>Alasannya adalah bagaimana <code>tail</code> diimplementasikan. Ketika <code>tail</code> mengetahui ukuran file yang dibaca, ia tahu persis berapa banyak yang harus dicari. Jika tidak, ia harus membaca file atau streaming sepenuhnya untuk mengetahui seberapa jauh menghitung mundur.</p><p>Dengan pipa, masuk akal, seperti <code>cat /dev/sda2 | tail -c 1024</code>. <code>tail</code> menerima konten sebagai aliran dan tidak memiliki cara untuk mengetahui kapan data akan berakhir.</p><p>Anda mungkin berharap <code>tail -c 1024 /dev/sda2</code> dapat mengetahui ukuran <code>/dev/sda2</code>, tetapi sebenarnya, ketika<pre><code>last_bytes() { sudo dd if=$2 iflag=skip_bytes skip=$(($(sudo blockdev --getsize64 $2) - $1)) bs=1M ; } ; last_bytes 1024 DEVICE
</code></pre>mencari <code>/dev/sda2</code>, itu dibuka sebagai perangkat blok dan bukan file biasa.</p><p>Detail implementasinya adalah <code>tail</code> panggilan <a href=https://linux.die.net/man/2/fstat rel="nofollow noopener" target=_blank><code>fstat()</code></a> untuk mendapatkan informasi tentang file tersebut.</p><h3 class=h5><code>tail</code> pada file biasa</h3><p>Berikut adalah bagian yang relevan dari <code>strace</code> dari contoh <code>tail</code> membuka file:</p><pre><code>21:30:27 open("/var/log/syslog", O_RDONLY) = 3
21:30:27 fstat(3, {st_dev=makedev(0, 22), st_ino=4715, st_mode=S_IFREG|0640, st_nlink=1, st_uid=104, st_gid=4, st_blksize=131072, st_blocks=54, st_size=175500, st_atime=2017/11/10-21:28:39.243133398, st_mtime=2017/11/10-21:30:20.438031639, st_ctime=2017/11/10-21:30:20.438031639}) = 0
21:30:27 lseek(3, 0, SEEK_CUR)          = 0
21:30:27 lseek(3, 174476, SEEK_SET)     = 174476
</code></pre><p><code>fstat()</code> menyediakan <code>st_size=175500</code>. Sekarang <code>tail</code> hanya perlu menghitung mundur 1024 byte:</p><blockquote><p>175500 - 1024 = 174476</p><p>… Dan inilah tepatnya yang dilakukan <code>tail</code>:</p><pre><code>lseek(3, 174476, SEEK_SET)     = 174476
</code></pre></blockquote><h3 class=h5><code>tail</code> pada perangkat blok</h3><p><code>fstat()</code> tidak mengembalikan ukuran kali ini !:</p><pre><code>21:29:43 open("/dev/sda", O_RDONLY)     = 3
21:29:43 fstat(3, {st_dev=makedev(0, 6), st_ino=17488, st_mode=S_IFBLK|0660, st_nlink=1, st_uid=0, st_gid=6, st_blksize=4096, st_blocks=0, st_rdev=makedev(8, 0), st_atime=2017/11/10-09:21:15.643998960, st_mtime=2017/11/10-09:21:15.555998962, st_ctime=2017/11/10-09:21:15.555998962}) = 0
</code></pre><p>Dengan tidak adanya <code>st_size</code>, <code>tail</code> tidak dapat mengetahui seberapa jauh harus dicari, jadi defaultnya adalah membaca seluruh perangkat blok sampai akhir.</p><p>Inilah sebabnya mengapa Anda biasanya harus menggunakan alat perangkat blok seperti <code>dd</code> untuk memanipulasi perangkat blok daripada alat yang ditujukan untuk file biasa seperti <code>tail</code>.</p><hr><p>Anda mungkin bertanya, "Bagaimana <code>blockdev --getsize64</code> mendapatkan ukuran perangkat blok dengan cepat?"</p><p>Inilah <code>sudo strace -vvvfts1000 blockdev --getsize64 /dev/sda</code>:</p><pre><code>21:53:15 open("/dev/sda", O_RDONLY)     = 3
21:53:15 ioctl(3, BLKGETSIZE64, [512110190592]) = 0
</code></pre><p><code>blockdev</code> dimaksudkan untuk mendapatkan ioctls perangkat blok, dan <code>BLKGETSIZE64</code> mendapatkan ukuran perangkat blok.</p><hr><p>Adapun <em>Mengapa</em> <code>tail</code> tidak melakukan <code>BLKGETSIZE64</code>, saya tidak tahu. Itu <a href=https://git.savannah.gnu.org/cgit/coreutils.git/tree/src/tail.c rel="nofollow noopener" target=_blank>Kode sumber</a> acara:</p><pre><code>#define IS_TAILABLE_FILE_TYPE(Mode) \
  (S_ISREG (Mode) || S_ISFIFO (Mode) || S_ISSOCK (Mode) || S_ISCHR (Mode))
</code></pre><p>Saya hanya tahu dari baris itu bahwa tanpa <a href=https://www.gnu.org/software/libc/manual/html_node/Testing-File-Type.html rel="nofollow noopener" target=_blank><code>S_ISBLK()</code></a> , penulis tidak bermaksud <code>tail</code> untuk mendukung perangkat blokir.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/bagaimana-cara-mengikuti-perangkat-blokir-di-linux-zk2bwv3l/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/83694/deltik target=_blank rel="nofollow noopener"><span itemprop=name>Deltik</span></a>
—
<a href=https://superuser.com/a/1267407 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>Saya berharap saya dapat memberi suara positif pada jawaban ini sekitar 5 kali! Terima kasih atas penjelasannya yang mendetail!</div><div>— <a href=https://superuser.com/users/409147/clearcom0 target=_blank rel="nofollow noopener">clearcom0</a></div></li><li class=list-group-item><div>Catatan GNU dd sejak 8.16 (2012-03-26) mendukung opsi <code>iflag=skip_bytes</code>. Hal ini memungkinkan seseorang untuk secara efisien melewati bagian input yang berubah-ubah sementara tidak bergantung pada ukuran blok yang digunakan untuk I / O. Seseorang sering ingin menggunakan <code>bs</code> besar untuk efisiensi.</div><div>— <a href=https://superuser.com/users/11613/pixelbeat target=_blank rel="nofollow noopener">pixelbeat</a></div></li><li class=list-group-item><div>Terima kasih @pixelbeat! Saya telah memperbarui jawaban saya untuk menggunakan <code>dd iflag=skip_bytes</code> sebagai gantinya.</div><div>— <a href=https://superuser.com/users/83694/deltik target=_blank rel="nofollow noopener">Deltik</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/bagaimana-cara-menambahkan-beberapa-string-di-kepala-file-yang-baru-dibuat-secara-otomatis-di-vim-cfpvij0j/>Bagaimana cara menambahkan beberapa string di kepala file yang baru dibuat secara otomatis di VIM?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menjalankan-jaringan-cloud-anda-sendiri-di-rumah-obdhx8ve/>Bagaimana cara menjalankan jaringan cloud Anda sendiri di rumah?</a></div></li><li class=list-group-item><div><a href=/kelola-arsip-e-book-besar-tutup-wvz8xji5/>Kelola Arsip E-Book Besar [tutup]</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-memastikan-keaslian-sebuah-gambar-5trcxhwi/>Bagaimana cara memastikan keaslian sebuah gambar?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menyimpan-semua-tab-di-jendela-firefox-duplikat-avqcbb2m/>Bagaimana cara menyimpan semua tab di jendela FireFox? [duplikat]</a></div></li><li class=list-group-item><div><a href=/bagaimana-file-dan-aplikasi-linux-diatur-wbmuspv9/>Bagaimana file dan aplikasi Linux diatur?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menonaktifkan-sembulan-otentikasi-ubuntu-yang-digunakan-untuk-meningkatkan-hak-istimewa-usr736j8/>Bagaimana cara menonaktifkan sembulan Otentikasi Ubuntu yang digunakan untuk meningkatkan hak istimewa?</a></div></li><li class=list-group-item><div><a href=/pembuat-kueri-mysql-seperti-access-dalam-design-view-ditutup-6zt7ujk8/>Pembuat kueri MySQL? (seperti Access dalam Design View) [ditutup]</a></div></li><li class=list-group-item><div><a href=/di-linux-bagaimana-cara-mendapatkan-39quote39-back-tic-melalui-shell-menjadi-sed-6ztc5r39/>Di linux bagaimana cara mendapatkan 'quote' back-tic melalui shell menjadi sed.</a></div></li><li class=list-group-item><div><a href=/beberapa-versi-net-qskpqrgb/>Beberapa versi .NET</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>