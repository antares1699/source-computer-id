<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Bagaimana cara menggunakan ENV {SYSTEMD_USER_WANTS} = dalam aturan udev?</title><meta name=description content="Saya ingin menyiapkan docked.target di systemd tingkat pengguna saya. Idenya adalah menjalankan beberapa layanan untuk mengkonfigurasi tampilan eksternal saya.  Saat ini saya memiliki ini sebagai aturan saya:  SUBSYSTEM==&#34;usb&#34;, ACTION==&#34;add&#34;, ENV{ID_VENDOR}==&#34;17ef&#34;, ENV{ID_MODEL}==&#34;100a&#34;, SYMLINK+=&#34;tp_mini_dock&#34;,..."><link rel=canonical href=https://www.idxstack.com/bagaimana-cara-menggunakan-env-systemd-user-wants-dalam-aturan-udev-sx7gvwdr/><meta property="og:title" content="Bagaimana cara menggunakan ENV {SYSTEMD_USER_WANTS} = dalam aturan udev?"><meta property="og:description" content="Saya ingin menyiapkan docked.target di systemd tingkat pengguna saya. Idenya adalah menjalankan beberapa layanan untuk mengkonfigurasi tampilan eksternal saya.  Saat ini saya memiliki ini sebagai aturan saya:  SUBSYSTEM==&#34;usb&#34;, ACTION==&#34;add&#34;, ENV{ID_VENDOR}==&#34;17ef&#34;, ENV{ID_MODEL}==&#34;100a&#34;, SYMLINK+=&#34;tp_mini_dock&#34;,..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/bagaimana-cara-menggunakan-env-systemd-user-wants-dalam-aturan-udev-sx7gvwdr/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Bagaimana cara menggunakan ENV {SYSTEMD_USER_WANTS} = dalam aturan udev?"><meta name=twitter:description content="Saya ingin menyiapkan docked.target di systemd tingkat pengguna saya. Idenya adalah menjalankan beberapa layanan untuk mengkonfigurasi tampilan eksternal saya.  Saat ini saya memiliki ini sebagai aturan saya:  SUBSYSTEM==&#34;usb&#34;, ACTION==&#34;add&#34;, ENV{ID_VENDOR}==&#34;17ef&#34;, ENV{ID_MODEL}==&#34;100a&#34;, SYMLINK+=&#34;tp_mini_dock&#34;,..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Bagaimana cara menggunakan ENV {SYSTEMD_USER_WANTS} = dalam aturan udev?</h1><div itemprop=text><p>Saya ingin menyiapkan <code>docked.target</code> di systemd tingkat pengguna saya. Idenya adalah menjalankan beberapa layanan untuk mengkonfigurasi tampilan eksternal saya.</p><p>Saat ini saya memiliki ini sebagai aturan saya:</p><pre><code>SUBSYSTEM=="usb", ACTION=="add", ENV{ID_VENDOR}=="17ef", ENV{ID_MODEL}=="100a", SYMLINK+="tp_mini_dock", TAG+="systemd", ENV{SYSTEMD_USER_WANTS}="docked.target"
</code></pre><p>Aturan terdeteksi dengan baik (saya dapat melihat <code>dev-tp_mini_dock.device</code> saat saya berlabuh).</p><p>Saya kemudian memilikinya di <code>~/.config/systemd/user/docked.target</code> (juga mencoba <code>/etc/systemd/user</code> tidak berhasil):</p><pre><code>[Unit]
Description=Docked to ThinkPad Mini Dock
BindTo=dev-tp_mini_dock.device
</code></pre><p>Tapi ini tidak dimulai saat saya merapat. Namun, jika saya memulai <code>docked.target</code> secara manual saat dipasang ke dok, ini berhenti seperti yang diharapkan saat saya melepas sambungan.</p><p>Namun, jika saya menggunakan <code>ENV{SYSTEMD_WANTS}="docked.target"</code> dan meletakkan file di <code>/etc/systemd/system/docked.target</code>, target mulai seperti yang diharapkan saat saya berlabuh. Masalahnya kemudian, adalah bahwa instance tingkat pengguna saya tidak tahu tentang layanan / target tingkat sistem.</p><p>Ada pemikiran? Saya telah melihat beberapa pertanyaan lain di internet, dan yang hampir persis seperti pertanyaan saya: <a href="https://bbs.archlinux.org/viewtopic.php?pid=1600019" rel="nofollow noopener" target=_blank>https://bbs.archlinux.org/viewtopic.php?pid=1600019</a></p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/221209/aiguofer target=_blank rel="nofollow noopener"><span itemprop=name>aiguofer</span></a>
—
<a href=https://superuser.com/questions/1033270/how-do-i-use-envsystemd-user-wants-in-udev-rule target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>3</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>3</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>3</div><div class=card-body><div itemprop=text><p>Anda dapat mencoba mengganti <code>SYSTEMD_USER_WANTS</code> dengan <code>MANAGER_USER_WANTS</code>. Saya tidak 100% yakin tentang perubahan nama ini, tetapi setidaknya pada <code>systemd-226</code> tidak ada lagi penyebutan <code>SYSTEMD_USER_WANTS</code> di sumber dan tampaknya diganti dengan <code>MANAGER_USER_WANTS</code>. Setidaknya itu berhasil untuk saya untuk kasus serupa.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/bagaimana-cara-menggunakan-env-systemd-user-wants-dalam-aturan-udev-sx7gvwdr/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/579237/pavel-procopiuc target=_blank rel="nofollow noopener"><span itemprop=name>Pavel Procopiuc</span></a>
—
<a href=https://superuser.com/a/1061648 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>2</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>2</div><div class=card-body><div itemprop=text><p>Meskipun saya masih tidak tahu cara kerja <code>ENV{SYSTEMD_USER_WANTS}</code>, saya berhasil menyelesaikan masalah khusus saya setelah membaca <a href=http://blog.tjll.net/systemd-for-device-activation-and-media-archiving/ rel="nofollow noopener" target=_blank>blog ini</a> .</p><p>Ternyata saya dapat memasang target sebagai ketergantungan pada perangkat. Saya mengubah file unit saya <code>~/.config/systemd/user/docked.target</code> menjadi:</p><pre><code>[Unit]
Description=Docked to ThinkPad Mini Dock
BindsTo=dev-tp_mini_dock.device
After=dev-tp_mini_dock.device

[Install]
WantedBy=dev-tp_mini_dock.device
</code></pre><p>dan aturan udev saya untuk:</p><pre><code>SUBSYSTEM=="usb", ACTION=="add", ENV{ID_VENDOR}=="17ef", ENV{ID_MODEL}=="100a", SYMLINK+="tp_mini_dock", TAG+="systemd"
</code></pre><p>dan kemudian aktifkan dengan <code>systemctl --user enable docked.target</code>.</p><p>Sekarang, ketika saya menggalangkannya, aturan udev membuat perangkat systemd, yang pada gilirannya memulai target. Kemudian opsi <code>BindsTo</code> memastikan bahwa ketika perangkat menghilang (dicabut) target dihentikan.</p><p>Saya harus melakukan sihir yang tidak masuk akal agar ini berfungsi ketika saya masuk dengan dok sudah terpasang. Orang akan membayangkan bahwa menambahkan <code>default.target</code> ke <code>WantedBy</code> dan <code>After</code> saja sudah cukup ... Saya akan menambahkan tautan ke blog setelah saya tulis itu.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/bagaimana-cara-menggunakan-env-systemd-user-wants-dalam-aturan-udev-sx7gvwdr/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/221209/aiguofer target=_blank rel="nofollow noopener"><span itemprop=name>aiguofer</span></a>
—
<a href=https://superuser.com/a/1033967 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>1</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-2><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>1</div><div class=card-body><div itemprop=text><p>Man ... Masalah itu membuatku mual juga, sungguh menyebalkan!</p><p>Dalam kasus saya, saya ingin mendengarkan acara HDMI (monitor hotplug), dan saya menemukan trik untuk mengatasi masalah ini. Saya berpikir, baiklah, jika <code>udev</code> ini entah bagaimana mengetahui bahwa ia memulai layanan dengan nama ini atau itu dan menolak untuk melakukannya lagi, maka mari kita membuatnya percaya bahwa ia memulai layanan baru setiap saat. Semua mata tertuju pada acara <code>udev</code> yang sesuai:</p><pre><code>UDEV  [19214.534185] change   /devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0 (drm)
ACTION=change
DEVLINKS=/dev/dri/by-path/pci-0000:01:00.0-card
DEVNAME=/dev/dri/card0
DEVPATH=/devices/pci0000:00/0000:00:01.0/0000:01:00.0/drm/card0
DEVTYPE=drm_minor
HOTPLUG=1
ID_FOR_SEAT=drm-pci-0000_01_00_0
ID_PATH=pci-0000:01:00.0
ID_PATH_TAG=pci-0000_01_00_0
MAJOR=226
MINOR=0
SEQNUM=3364
SUBSYSTEM=drm
USEC_INITIALIZED=3280572
</code></pre><p>dan perhatikan <code>SEQNUM</code>. Itu berubah di setiap acara baru dan itulah yang kami inginkan:</p><pre><code>ACTION=="change", SUBSYSTEM=="drm", ENV{HOTPLUG}=="1", ENV{SYSTEMD_USER_WANTS}+="monitor-hotplug@$env{SEQNUM}.service", TAG+="systemd"
</code></pre><p>Bekerja seperti pesona bahkan untuk <code>~/.config/systemd/user/monitor-hotplug@.service</code>. Mudah-mudahan, acara Anda juga memiliki <code>SEQNUM</code> atau yang serupa.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/bagaimana-cara-menggunakan-env-systemd-user-wants-dalam-aturan-udev-sx7gvwdr/#answer-2 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/166253/alexander-shukaev target=_blank rel="nofollow noopener"><span itemprop=name>Alexander Shukaev</span></a>
—
<a href=https://superuser.com/a/1401322 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/bagaimana-targz-semuanya-di-bawah-xx-mb-1hwezzrc/>Bagaimana tar.gz semuanya di bawah xx MB?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menyimpan-semua-tab-di-jendela-firefox-duplikat-avqcbb2m/>Bagaimana cara menyimpan semua tab di jendela FireFox? [duplikat]</a></div></li><li class=list-group-item><div><a href=/pindahkan-semua-jenis-file-ke-folder-baru-di-windows-7-aumiwvzq/>Pindahkan semua jenis file ke folder baru di windows 7</a></div></li><li class=list-group-item><div><a href=/diff-bagaimana-anda-hanya-membandingkan-n-karakter-pertama-di-setiap-baris-njwbmpvk/>Diff: Bagaimana Anda hanya membandingkan n karakter pertama di setiap baris?</a></div></li><li class=list-group-item><div><a href=/apa-perbedaan-antara-quotnorton-antivirusquot-dan-quotsymantec-antivirusquot-ukuxqmen/>apa perbedaan antara "Norton AntiVirus" dan "Symantec antivirus"</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menghapus-semua-pengaturan-wi-fi-lama-di-windows-7-tiidwwq0/>Bagaimana cara menghapus semua pengaturan Wi-fi lama di Windows 7?</a></div></li><li class=list-group-item><div><a href=/menghapus-instalan-program-di-windows-esw6ixjp/>Menghapus instalan program di Windows</a></div></li><li class=list-group-item><div><a href=/hdd-amp-ssd-linux-tautan-pengaturan-ulang-yang-keras-kh92qkqt/>HDD & SSD Linux: Tautan pengaturan ulang yang keras</a></div></li><li class=list-group-item><div><a href=/ttl-saat-menanyakan-data-apa-pun-dengan-dig-u28jfawk/>TTL saat menanyakan data apa pun dengan dig</a></div></li><li class=list-group-item><div><a href=/apakah-ninite-merupakan-solusi-trusuted-untuk-manajemen-paket-awal-pada-instalasi-baru-bersih-windows-7-64bit-4ekmtvyw/>Apakah Ninite merupakan solusi trusuted untuk manajemen paket awal pada instalasi baru / bersih Windows 7 64Bit?</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>