<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Mengimpor variabel dalam satu skrip shell dari yang lain tanpa menjalankan skrip shell yang dirujuk</title><meta name=description content="Saya memiliki 2 skrip shell, file1.sh dan file2.sh  file1.sh  #!/usr/bin/env bash export var1=&#34;/data/share&#34;export var2='password'echo &#34;Hello&#34;  file2.sh  #!/usr/bin/env bash source file1.shecho $var1echo $var2  Ketika saya menjalankan file2.sh, saya mendapatkan..."><link rel=canonical href=https://www.idxstack.com/mengimpor-variabel-dalam-satu-skrip-shell-dari-yang-lain-tanpa-menjalankan-skrip-shell-yang-dirujuk-6lye6nvu/><meta property="og:title" content="Mengimpor variabel dalam satu skrip shell dari yang lain tanpa menjalankan skrip shell yang dirujuk"><meta property="og:description" content="Saya memiliki 2 skrip shell, file1.sh dan file2.sh  file1.sh  #!/usr/bin/env bash export var1=&#34;/data/share&#34;export var2='password'echo &#34;Hello&#34;  file2.sh  #!/usr/bin/env bash source file1.shecho $var1echo $var2  Ketika saya menjalankan file2.sh, saya mendapatkan..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/mengimpor-variabel-dalam-satu-skrip-shell-dari-yang-lain-tanpa-menjalankan-skrip-shell-yang-dirujuk-6lye6nvu/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mengimpor variabel dalam satu skrip shell dari yang lain tanpa menjalankan skrip shell yang dirujuk"><meta name=twitter:description content="Saya memiliki 2 skrip shell, file1.sh dan file2.sh  file1.sh  #!/usr/bin/env bash export var1=&#34;/data/share&#34;export var2='password'echo &#34;Hello&#34;  file2.sh  #!/usr/bin/env bash source file1.shecho $var1echo $var2  Ketika saya menjalankan file2.sh, saya mendapatkan..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Mengimpor variabel dalam satu skrip shell dari yang lain tanpa menjalankan skrip shell yang dirujuk</h1><div itemprop=text><p>Saya memiliki 2 skrip shell, file1.sh dan file2.sh</p><p><strong>file1.sh</strong></p><pre><code>#!/usr/bin/env bash 
export var1="/data/share"
export var2='password'
echo "Hello"
</code></pre><p><strong>file2.sh</strong></p><pre><code>#!/usr/bin/env bash 
source file1.sh
echo $var1
echo $var2
</code></pre><p>Ketika saya menjalankan file2.sh, saya mendapatkan output berikut</p><pre><code>Hello
/data/share
password
</code></pre><p>Tapi keluaran yang saya harapkan adalah</p><pre><code>/data/share
password
</code></pre><p>file1.sh dijalankan saat dirujuk di file2.sh. Bagaimana cara mengimpor variabel sendirian di file2.sh tanpa menjalankan file1.sh?</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/524226/mathew target=_blank rel="nofollow noopener"><span itemprop=name>Mathew</span></a>
—
<a href=https://superuser.com/questions/1090391/importing-variables-in-one-shell-script-from-another-without-executing-the-refer target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div>Kamu tidak boleh melakukan itu. <code>source</code> berarti mengeksekusi. Solusi paling jelas adalah meletakkan definisi variabel di file konfigurasi dan mengambilnya di kedua skrip.</div><div>— <a href=https://superuser.com/users/599802/michael-vehrs target=_blank rel="nofollow noopener">Michael Vehrs</a></div></li><li class=list-group-item><div>Bisa echo baris dengan <code>[[ $1 == "SourceIt" ]] & echo "Hello"</code> ini setelah itu Anda bisa mendapatkan var dari script. Gunakan ini seperti ini <code>/path/of/file.sh SourceIt</code></div><div>— <a href=https://superuser.com/users/452074/makgun target=_blank rel="nofollow noopener">makgun</a></div></li><li class=list-group-item><div>7 pertanyaan dan <a href="http://superuser.com/users/524226/mathew?tab=activity&sort=accept" target=_blank rel="nofollow noopener">0 Menerima</a> . Silakan lihat di: <a href=http://superuser.com/help/someone-answers target=_blank rel="nofollow noopener">Apa yang harus saya lakukan ketika seseorang menjawab pertanyaan saya?</a></div><div>— <a href=https://superuser.com/users/340330/cyrus target=_blank rel="nofollow noopener">Cyrus</a></div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>2</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>4</div><div class=card-body><div itemprop=text><p>Ada tiga opsi yang saya gunakan ketika saya memiliki skrip bash yang saya ingin berperilaku berbeda ketika bersumber vs. ketika dijalankan (atau dengan kata lain memiliki item data dalam skrip yang ingin saya akses tanpa mengeksekusi kode apa pun pada saat itu. waktu). Komentar tersebut sedikit menyinggung mereka.</p><h3 class=h5>Opsi Satu</h3><p>Tentukan kapan menjadi sumber dan akhiri 'sourcing' pada waktu yang tepat</p><p>Pisahkan skrip menjadi dua bagian, keluar dari skrip saat bersumber sebelum ke detik bawah</p><p>Buat bagian atas skrip dengan definisi (fungsi / tugas variabel / dll), tetapi tidak ada eksekusi kode langsung.</p><p>Tepat sebelum bagian kode yang dapat dieksekusi dimulai, letakkan logika yang akan keluar dari skrip jika mendeteksi itu bersumber.
Segmen kode berikut akan melakukan ini:</p><p><br><strong>file1.sh</strong></p><pre><code>#!/usr/bin/env bash
export var1="/data/share"
export var2='password'    
# --- End Definitions Section ---    
# check if we are being sourced by another script or shell
[[ "${#BASH_SOURCE[@]}" -gt "1" ]] &amp;&amp; { return 0; }
# --- Begin Code Execution Section ---
echo "Hello"
echo $var1
echo $var2 
</code></pre><p><br><strong>file2.sh</strong><br></p><pre><code>#!/usr/bin/env bash 
source file1.sh
echo "$var1"
echo "$var2"
</code></pre><p><br><strong>Output dari menjalankan ./file2.sh</strong><br></p><pre><code>$ ./file2.sh 
/data/share
password
</code></pre><h3 class=h5>Opsi Dua</h3><p>Yang ini biasanya hanya digunakan dalam situasi yang kompleks, dan untuk contoh khusus ini berlebihan. Saya membuat fungsi di file yang ingin saya sumber, dan di fungsi itu menentukan apa yang harus tersedia untuk pemanggil. Dalam hal ini adalah dua variabel yang diekspor. Biasanya saya menggunakan mode ini ketika saya memiliki array asosiatif, yang sebaliknya hampir tidak mungkin untuk dibagikan. Selain itu, file tmp harus dihapus oleh pemanggil; tapi saya tidak melakukannya dalam kasus ini:</p><p><br><strong>file1.sh</strong></p><pre><code>#!/usr/bin/env bash 
export var1="/data/share"
export var2='password'
exportCfg() {
  tmpF=$(mktemp)
  declare -p var1 var2 &gt; "$tmpF"
  echo "$tmpF"
}
if [ "$1" == "export" ]; then
  exportCfg;
  exit 0;
fi

echo "Hello"
echo $var1
echo $var2
</code></pre><p><br><strong>file2.sh</strong></p><pre><code>#!/usr/bin/env bash 
source $(./file1.sh export)


echo "$var1"
echo "$var2"
</code></pre><p>Output dari menjalankan file2.sh sama seperti di atas</p><h3 class=h5>Pilihan 3</h3><p>Cara umum terakhir saya menangani ini hanyalah dengan file perpustakaan yang hanya menyimpan definisi, dan tidak memiliki kode yang akan dieksekusi ketika bersumber atau langsung dijalankan.
Ini hanyalah masalah membagi kode Anda. Saya memiliki sekelompok 'libs' bash yang berisi fungsi yang sering digunakan, dan berdasarkan proyek biasanya menyiapkan perpustakaan kecil yang dapat bersumber untuk menyimpan data konfigurasi (konstanta). Jika data itu termasuk array yang dihuni, maka saya juga akan menggunakan versi Opsi 2.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mengimpor-variabel-dalam-satu-skrip-shell-dari-yang-lain-tanpa-menjalankan-skrip-shell-yang-dirujuk-6lye6nvu/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/250153/argonauts target=_blank rel="nofollow noopener"><span itemprop=name>Argonauts</span></a>
—
<a href=https://superuser.com/a/1091016 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>2</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>2</div><div class=card-body><div itemprop=text><p>Jika semua variabel Anda diekspor dengan cara yang sama ( <em>ekspor foo = bar</em> ), lalu Anda dapat menggunakan semuanya dengan mudah <em>pesta</em> fitur substitusi proses:</p><pre><code>source &lt;(grep '^export .*=' file1.sh)
</code></pre><p>Ekstrak halaman manual:</p><blockquote><p>Proses Substitusi
Proses substitusi didukung pada sistem yang mendukung pipa bernama (FIFOs) atau metode / dev / fd penamaan file terbuka. Ini mengambil bentuk
&lt;(daftar) atau> (daftar). Daftar proses dijalankan dengan input atau outputnya terhubung ke FIFO atau beberapa file di / dev / fd. Nama file ini adalah
diteruskan sebagai argumen ke perintah saat ini sebagai hasil dari perluasan. Jika formulir> (daftar) digunakan, menulis ke file akan memberikan masukan
untuk daftar. Jika formulir &lt;(daftar) digunakan, file yang diteruskan sebagai argumen harus dibaca untuk mendapatkan keluaran daftar.</p></blockquote></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mengimpor-variabel-dalam-satu-skrip-shell-dari-yang-lain-tanpa-menjalankan-skrip-shell-yang-dirujuk-6lye6nvu/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/565560/a-loiseau target=_blank rel="nofollow noopener"><span itemprop=name>A. Loiseau</span></a>
—
<a href=https://superuser.com/a/1091060 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/tidak-dapat-melihat-karakter-cina-di-vim-b80gs437/>Tidak dapat melihat karakter Cina di VIM</a></div></li><li class=list-group-item><div><a href=/apakah-klien-telnet-merupakan-ancaman-keamanan-pada-windows-8mysgja6/>Apakah klien telnet merupakan ancaman keamanan pada Windows?</a></div></li><li class=list-group-item><div><a href=/tmux-mengatur-warna-jendela-yang-diubah-28fbpyrp/>Tmux mengatur warna jendela yang diubah</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-membuat-chrome-memblokir-semua-pop-up-d3sskf54/>Bagaimana cara membuat Chrome memblokir semua pop-up?</a></div></li><li class=list-group-item><div><a href=/apakah-mungkin-untuk-mengosongkan-bilah-pencarian-firefox-secara-otomatis-1fy0qr3n/>Apakah mungkin untuk mengosongkan bilah pencarian firefox secara otomatis?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-mengetahui-konfigurasi-raid-pc-saya-jkz3jlar/>Bagaimana cara mengetahui konfigurasi RAID PC saya</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menghentikan-pesan-email-saya-ditandai-sebagai-sudah-dibaca-ketika-klien-pop-mengunduhnya-yktqcijy/>Bagaimana cara menghentikan pesan email saya ditandai sebagai sudah dibaca ketika klien POP mengunduhnya?</a></div></li><li class=list-group-item><div><a href=/apakah-ada-perbedaan-antara-kabel-lan-yang-menghubungkan-dua-pc-dan-satu-yang-menghubungkan-pc-ke-router-tafv1dfu/>Apakah ada perbedaan antara kabel LAN yang menghubungkan dua PC dan satu yang menghubungkan PC ke router?</a></div></li><li class=list-group-item><div><a href=/virtualbox-menjembatani-adaptor-tidak-diinstal-pada-host-windows-7-gjrfur19/>VirtualBox menjembatani adaptor tidak diinstal pada host Windows 7</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-mengetahui-jumlah-baris-dokumen-dalam-folder-menggunakan-skrip-shell-kvvo49rw/>Bagaimana cara mengetahui jumlah baris dokumen dalam folder menggunakan skrip shell?</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>