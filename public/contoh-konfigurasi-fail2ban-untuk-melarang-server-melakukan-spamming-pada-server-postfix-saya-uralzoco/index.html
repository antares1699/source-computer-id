<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Contoh konfigurasi fail2ban untuk melarang server melakukan spamming pada server postfix saya?</title><meta name=description content="Saya memiliki server email kecil di rumah dan aturan pemfilteran yang cukup ketat. Saya menggunakan logwatch dan dapat melihat bahwa 80 hingga 90% koneksi ditolak oleh aturan pemfilteran terbatas saya. Sebagian besar..."><link rel=canonical href=https://www.idxstack.com/contoh-konfigurasi-fail2ban-untuk-melarang-server-melakukan-spamming-pada-server-postfix-saya-uralzoco/><meta property="og:title" content="Contoh konfigurasi fail2ban untuk melarang server melakukan spamming pada server postfix saya?"><meta property="og:description" content="Saya memiliki server email kecil di rumah dan aturan pemfilteran yang cukup ketat. Saya menggunakan logwatch dan dapat melihat bahwa 80 hingga 90% koneksi ditolak oleh aturan pemfilteran terbatas saya. Sebagian besar..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/contoh-konfigurasi-fail2ban-untuk-melarang-server-melakukan-spamming-pada-server-postfix-saya-uralzoco/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Contoh konfigurasi fail2ban untuk melarang server melakukan spamming pada server postfix saya?"><meta name=twitter:description content="Saya memiliki server email kecil di rumah dan aturan pemfilteran yang cukup ketat. Saya menggunakan logwatch dan dapat melihat bahwa 80 hingga 90% koneksi ditolak oleh aturan pemfilteran terbatas saya. Sebagian besar..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Contoh konfigurasi fail2ban untuk melarang server melakukan spamming pada server postfix saya?</h1><div itemprop=text><p>Saya memiliki server email kecil di rumah dan aturan pemfilteran yang cukup ketat. Saya menggunakan logwatch dan dapat melihat bahwa 80 hingga 90% koneksi ditolak oleh aturan pemfilteran terbatas saya. Sebagian besar hasil penolakan dari rbl_client.</p><p>Saya putus asa mencari contoh file konfigurasi fail2ban yang menunjukkan cara memfilter IP yang melakukan spamming ke server saya. Saya berharap pemblokiran akan berlangsung lama (mis. 1 bulan).</p><p>Saya juga mengalami upaya SYN flooding di server email saya yang saya blokir menggunakan aturan firewall yang ditetapkan secara manual. Bisakah fail2ban mendeteksi ini juga?</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/15894/chmike target=_blank rel="nofollow noopener"><span itemprop=name>chmike</span></a>
—
<a href=https://superuser.com/questions/576751/example-of-fail2ban-configuration-to-ban-servers-spamming-my-postfix-server target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div>Saya rasa itu bukan ide yang bagus. Saya akan terkejut jika sejumlah besar alamat tersebut digunakan kembali. Mengapa membuat lebih banyak aturan iptables sampah?</div><div>— <a href=https://superuser.com/users/192715/alex-p target=_blank rel="nofollow noopener">Alex P.</a></div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>2</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>6</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>6</div><div class=card-body><div itemprop=text><p>Saya baru saja bosan dengan semua spammer RBL yang mengisi log saya, jadi saya telah mengatur Postfix saya untuk melarang mereka.</p><p>Setelah melakukannya, beban turun karena jumlahnya banyak!</p><p>Ketahuilah bahwa Anda harus menerapkan beberapa cara untuk membersihkan daftar terlarang.</p><p>Saya berencana untuk memulai kembali fail2ban setiap minggu.</p><p>Lihat aturan ini: <a href=http://www.fail2ban.org/wiki/index.php/Postfix rel="nofollow noopener" target=_blank>http://www.fail2ban.org/wiki/index.php/Postfix</a></p><p>Tambahkan mereka di: /etc/fail2ban/filter.d/postfix.conf (itu ada di Sistem Debian!)</p><p>Juga bagus untuk membaca ini (cari fail2ban): <a href=http://workaround.org/ispmail/squeeze/sysadmin-niceties rel="nofollow noopener" target=_blank>http://workaround.org/ispmail/squeeze/sysadmin-niceties</a> (beberapa cuplikan dari sana).</p><p>Pendeknya:</p><ol><li><p>Di set jail.conf:</p><pre><code>[postfix]
enabled  = true
</code></pre></li><li><p>Baik untuk dilakukan jika Anda menggunakan dovecot (dari tautan di atas):
Buat /etc/fail2ban/filter.d/dovecot-pop3imap.conf dan tambahkan:</p><pre><code>[Definition]
failregex = (?: pop3-login|imap-login): .*(?:Authentication failure|Aborted login \   (auth failed|Aborted login \(tried to use disabled|Disconnected \(auth failed).*rip=(?P&lt;host&gt;\S*),.*
ignoreregex =
</code></pre></li><li><p>Tambahkan bagian di jail.conf atau jail.local:</p><pre><code>[dovecot-pop3imap]
enabled = true
port = pop3,pop3s,imap,imaps
filter = dovecot-pop3imap
logpath = /var/log/mail.log
</code></pre></li><li><p>Mulai ulang fail2ban dan periksa iptables -nvL jika rantai untuk postfix dan kurir ditambahkan.
HATI-HATI: Ini untuk sistem berbasis Debian. Periksa jalur file untuk RH atau lainnya.</p></li></ol></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/contoh-konfigurasi-fail2ban-untuk-melarang-server-melakukan-spamming-pada-server-postfix-saya-uralzoco/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/217791/anton-valqk target=_blank rel="nofollow noopener"><span itemprop=name>Anton Valqk</span></a>
—
<a href=https://superuser.com/a/600365 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>Pengguna menyebutkan ini server email di rumah. Selama dovecot berada di belakang firewall router, tidak perlu pemeriksaan fail2ban untuk itu. Jika dia di luar itu lebih baik menggunakan VPN. Dia mungkin berarti koneksi SMTP mengirim spam.</div><div>— <a href=https://superuser.com/users/47628/bshea target=_blank rel="nofollow noopener">bshea</a></div></li><li class=list-group-item><div>Saya akan merekomendasikan Anda mengatur fail2ban untuk menggunakan ipset dan kemudian Anda dapat mengatur waktunya secara otomatis untuk Anda.</div><div>— <a href=https://superuser.com/users/213252/cybernard target=_blank rel="nofollow noopener">cybernard</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>4</div><div class=card-body><div itemprop=text><p>Cara yang lebih baik adalah dengan menggunakan Postfix untuk memfilter IP menggunakan daftar blokir.</p><p>Lihat <a href=http://www.postfix.org/postconf.5.html#smtpd_recipient_restrictions rel="nofollow noopener" target=_blank>http://www.postfix.org/postconf.5.html#smtpd_recipient_restrictions</a> untuk menolak menggunakan daftar blokir.</p><p>Jika Anda benar-benar ingin, Anda dapat menggunakan filter Fail2Ban seperti f2b-postfix-rbl ( <a href=https://github.com/fail2ban/fail2ban/blob/0.11/config/filter.d/postfix.conf rel="nofollow noopener" target=_blank>postfix-rbl.conf</a> ) untuk memfilter log email untuk entri daftar blokir / daftar hitam. Ini kemudian akan memasukkan entri baru ke dalam iptables dan kami akan diblokir selama waktu larangan tertentu.</p><p>Seperti yang disebutkan, ini mungkin tidak akan banyak membantu karena skrip / bot / mailer hanya akan berpindah setelah kegagalan pertama dan mencoba Anda lagi pada hari yang berbeda dari IP yang berbeda. <strong>Juga, ini mubazir karena Anda dapat memfilter menggunakan MTA seperti yang disebutkan di atas.</strong></p><p>Berikut adalah contoh dari beberapa daftar blokir yang dapat Anda tambahkan di bawah postfix untuk memblokir IP yang masuk daftar hitam.<br></p><p>/etc/main.cf:</p><pre><code>smtpd_recipient_restrictions =
    permit_mynetworks,
    permit_sasl_authenticated,
    reject_unauth_destination,
    reject_unlisted_recipient,
    reject_invalid_hostname,
    reject_non_fqdn_sender,
    reject_non_fqdn_recipient,
    reject_unknown_sender_domain,
    reject_unauth_pipelining,
    check_client_access hash:/etc/postfix/blacklist,
#Some DNS BL's - high availability:
    reject_rbl_client zen.spamhaus.org,
    reject_rbl_client bl.spamcop.net,
    reject_rbl_client dul.dnsbl.sorbs.net,
#Some country-wide IP blocks:
    #reject_rbl_client cn.countries.nerd.dk,
    #reject_rbl_client tw.countries.nerd.dk,
    #reject_rbl_client lr.countries.nerd.dk,
    #reject_rbl_client ng.countries.nerd.dk,
    #reject_rbl_client ro.countries.nerd.dk,
    #reject_rbl_client ua.countries.nerd.dk,
    #reject_rbl_client kr.countries.nerd.dk,
    #finalize and throw at postgrey if passes above:
    #check_policy_service inet:[::1]:10023,
    permit
</code></pre><p>Jika Anda bersikeras untuk memproses daftar blokir fail2ban, pastikan Anda mengaktifkannya di bawah /etc/failban/jail.local:</p><pre><code>[postfix-rbl]

enabled  = true
port     = smtp,465,submission
filter   = postfix-rbl
logpath  = /var/log/mail.log
</code></pre><p>Untuk menggunakan rbl "mode" di bawah versi yang lebih baru, gantikan baris filter dengan:</p><pre><code>filter    = postfix[mode=rbl]
</code></pre><p>Pada versi sebelumnya saya harus mengubah milik saya untuk mendeteksi "554 5.7.1" untuk mengambil log postfix yang ditolak melalui filter "postifx-rbl". Versi filter yang lebih baru sepertinya memindai ini <a href=https://github.com/fail2ban/fail2ban/issues/1634 rel="nofollow noopener" target=_blank>perubahan</a> di bawah versi "mode" rbl yang lebih baru.</p><p>Sejauh SYN flood - <a href=https://serverfault.com/a/640894/92023 target=_blank rel="nofollow noopener">Lihat ini</a> .</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/contoh-konfigurasi-fail2ban-untuk-melarang-server-melakukan-spamming-pada-server-postfix-saya-uralzoco/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/47628/bshea target=_blank rel="nofollow noopener"><span itemprop=name>bshea</span></a>
—
<a href=https://superuser.com/a/1168969 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>fail2ban dan blacklist seperti spamhaus melakukan dua fungsi berbeda. yang satu tidak lebih baik dari yang lain. fail2ban memonitor log Anda untuk pola penggunaan berbahaya. daftar hitam dikelola oleh otoritas pusat dan menyertakan pengirim spam menurut kiriman. keduanya merupakan alat yang berguna.</div><div>— <a href=https://superuser.com/users/164539/111 target=_blank rel="nofollow noopener">111</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/svchostexe-menggunakan-90-ram-jiw0eyqy/>SVCHOST.EXE menggunakan 90% RAM</a></div></li><li class=list-group-item><div><a href=/apa-kepanjangan-dari-nmbd-sqhdukg7/>Apa kepanjangan dari nmbd?</a></div></li><li class=list-group-item><div><a href=/tambahan-tamu-header-kernel-tidak-ditemukan-untuk-kernel-target-umo9us98/>Tambahan tamu: Header kernel tidak ditemukan untuk kernel target</a></div></li><li class=list-group-item><div><a href=/fedora-21-permata-ubah-direktur-yang-dapat-dilaksanakan-oqmzsy8z/>Fedora 21 - Permata: ubah DIREKTUR YANG DAPAT DILAKSANAKAN</a></div></li><li class=list-group-item><div><a href=/sambungkan-ke-layanan-https-menggunakan-klien-hanya-http-7brpnv2t/>Sambungkan ke layanan https menggunakan klien hanya-http</a></div></li><li class=list-group-item><div><a href=/penggantian-baterai-cr-48-eqeuypn9/>Penggantian Baterai Cr-48</a></div></li><li class=list-group-item><div><a href=/apakah-semua-kartu-jaringan-menggunakan-frekuensi-yang-sama-untuk-mengirim-sinyal-ke-kabel-ihqudumn/>Apakah semua kartu jaringan menggunakan frekuensi yang sama untuk mengirim sinyal ke kabel?</a></div></li><li class=list-group-item><div><a href=/dapatkah-administrator-domain-windows-melihat-kata-sandi-pengguna-qrwi7skt/>Dapatkah administrator domain Windows melihat kata sandi pengguna?</a></div></li><li class=list-group-item><div><a href=/mengontrol-catu-daya-amplifier-dari-squeezebox-squeezecenter-oz7vpesw/>Mengontrol catu daya amplifier dari Squeezebox / SqueezeCenter</a></div></li><li class=list-group-item><div><a href=/cara-menanyakan-beberapa-ekstensi-menggunakan-pencarian-windows-7-kcuiib2b/>Cara menanyakan beberapa ekstensi menggunakan pencarian Windows 7</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>