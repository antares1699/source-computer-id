<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Bagaimana NAT bekerja untuk protokol non-standar atau tidak umum (atau mentah)</title><meta name=description content="Untuk info port pengguna TCP dan UDP NAT. Untuk protokol lain seperti ICMP dapat menggunakan trik khusus protokol. Apa yang terjadi jika protokol IP yang digunakan tidak dipenuhi atau dikenali?  Bisakah paket..."><link rel=canonical href=https://www.idxstack.com/bagaimana-nat-bekerja-untuk-protokol-non-standar-atau-tidak-umum-atau-mentah-d7moiizd/><meta property="og:title" content="Bagaimana NAT bekerja untuk protokol non-standar atau tidak umum (atau mentah)"><meta property="og:description" content="Untuk info port pengguna TCP dan UDP NAT. Untuk protokol lain seperti ICMP dapat menggunakan trik khusus protokol. Apa yang terjadi jika protokol IP yang digunakan tidak dipenuhi atau dikenali?  Bisakah paket..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/bagaimana-nat-bekerja-untuk-protokol-non-standar-atau-tidak-umum-atau-mentah-d7moiizd/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Bagaimana NAT bekerja untuk protokol non-standar atau tidak umum (atau mentah)"><meta name=twitter:description content="Untuk info port pengguna TCP dan UDP NAT. Untuk protokol lain seperti ICMP dapat menggunakan trik khusus protokol. Apa yang terjadi jika protokol IP yang digunakan tidak dipenuhi atau dikenali?  Bisakah paket..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Bagaimana NAT bekerja untuk protokol non-standar atau tidak umum (atau mentah)</h1><div itemprop=text><p>Untuk info port pengguna TCP dan UDP NAT. Untuk protokol lain seperti ICMP dapat menggunakan trik khusus protokol. Apa yang terjadi jika protokol IP yang digunakan tidak dipenuhi atau dikenali?</p><p>Bisakah paket seperti itu bahkan meninggalkan antarmuka target? Jika ya, apa yang terjadi? Apakah IP sumber baru saja diubah? Apa yang terjadi dalam perjalanan pulang? Apakah mungkin paket pengembalian bisa masuk ke ip yang salah? Bahkan mungkin <em>semua</em> ips tersedia?</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/624557/andrew-parker target=_blank rel="nofollow noopener"><span itemprop=name>Andrew Parker</span></a>
—
<a href=https://superuser.com/questions/1108210/how-does-nat-work-for-non-standard-or-uncommon-protocols-or-raw-up target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>2</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>8</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>8</div><div class=card-body><div itemprop=text><blockquote><p>Untuk info port pengguna TCP dan UDP NAT. Untuk protokol lain seperti ICMP dapat menggunakan trik khusus protokol.</p></blockquote><p>Nah, TCP dan UDP yang sama <em>adalah</em> juga "trik khusus protokol" - semuanya tidak berbeda dengan "ID permintaan" ICMP Echo, atau "SPI" IPsec. (NAT sendiri adalah 'trik'.)</p><blockquote><p>Bisakah paket seperti itu bahkan meninggalkan antarmuka target? Jika ya, apa yang terjadi? Apakah IP sumber baru saja diubah?</p></blockquote><p>Biasanya ya. Kebanyakan NAT akan melewati paket tersebut meskipun mereka tidak mengenali protokol dalam, karena masih memiliki peluang lebih besar untuk bekerja daripada "lepaskan semuanya".</p><blockquote><p>Apa yang terjadi dalam perjalanan pulang?</p></blockquote><p>Tergantung pada apakah NAT benar-benar melacak paket keluar. (Ini bervariasi.)</p><p>Meskipun NAT tidak memahami cara mengekstrak port atau ID dari protokol dalam, NAT masih dapat melacak <em>jenis protokol</em> , yang mungkin cukup untuk beberapa situasi. (Setiap paket IP memiliki bidang jenis protokol, jadi yang Anda sebut "IP mentah" hanyalah kasus "jenis protokol IP tidak dikenal".)</p><p>Misalnya, koneksi TCP (protokol IP 6) dan Ping ICMP (protokol IP 1, ICMP tipe 8) akan dilacak sebagai:</p><ul><li><code>host 192.168.1.2 (as 42.0.2.1) → 62.205.132.12</code>, <code>proto 6</code>, <code>port 21445 → 80</code></li><li><code>host 192.168.1.2 (as 42.0.2.1) → 62.205.132.12</code>, <code>proto 1</code>, <code>type 8 code 0 id 1227</code></li></ul><p>Sedangkan protokol yang tidak dikenal seperti a <a href=https://en.wikipedia.org/wiki/6in4 rel="nofollow noopener" target=_blank>Terowongan 6in4</a> akan dilacak sebagai:</p><ul><li><code>host 192.168.1.2 (as 42.0.2.1) → 62.205.132.12</code>, <code>proto 41</code>, <code>—</code></li></ul><p>Karena itu, <em>semua</em> paket protokol masuk-41 akan diteruskan kembali ke <code>192.168.1.2</code>. Ini berarti bahwa satu komputer masih dapat menggunakan protokol, tetapi dua komputer sekaligus mungkin tidak bisa. (Sama seperti dengan UDP, <em>beberapa</em> NAT juga memeriksa alamat IP sumber, tetapi banyak yang hanya peduli dengan protokol & port.)</p><p>Meskipun saya menggunakan 6in4 pada contoh di atas, hal yang sama juga akan terjadi dengan <em>semua</em> protokol yang tidak dipahami NAT, bahkan jika mereka <em>melakukan</em> memiliki port (misalnya UDP-Lite atau SCTP).</p><ul><li>Selain: Jika router Anda kebetulan menjalankan Linux, Anda dapat menjalankan <code>conntrack -L</code> atau <code>cat /proc/net/nf_conntrack</code> untuk melihat semua status yang sedang dilacak. Beberapa router bahkan menampilkan ini di UI web mereka.</li></ul><p>Akhirnya, jika NAT <em>tidak</em> simpan semua status, maka paket diasumsikan ditujukan ke router itu sendiri (sama seperti dengan paket masuk yang tidak terlacak lainnya), dan biasanya dijatuhkan ke lantai.</p><blockquote><p>Apakah mungkin paket pengembalian bisa masuk ke ip yang salah?</p></blockquote><p>Dalam kasus yang paling sederhana, tidak. Entah NAT dapat mengasosiasikan paket kembali dengan beberapa status yang diketahui, atau tidak bisa, tetapi itu <em>biasa</em> membuat sampah secara acak. (Biasanya.)</p><p>Namun, jika dua komputer di belakang LAN mencoba menggunakan protokol yang sama ke host jarak jauh yang sama, maka status mereka <em>bisa</em> konflik. Yang mana yang menang dapat bervariasi - baik status terlama digunakan hingga kedaluwarsa (jadi balasan untuk kedua komputer terus ke yang pertama), atau mereka terus menimpa satu sama lain setiap beberapa saat (yaitu, membalikkan jepit di antara keduanya). Ini adalah situasi di mana NAT dinamis pasti tidak dirancang untuk ...</p><blockquote><p>Mungkin bahkan semua ips tersedia?</p></blockquote><p>Tidak. Itu mungkin dalam teori - mis. beberapa orang melakukan ini dengan konfigurasi penerusan port statis untuk Wake-on-LAN - tetapi melakukannya secara default tidak akan terlalu berguna. Jika ada, itu akan membuat LAN Anda lebih rentan terhadap paket palsu.</p><p>(Padahal, kebetulan, begitulah sebenarnya cara kerja Ethernet switching - paket untuk MAC yang tidak dikenal dibanjiri melalui semua port fisik.)</p><hr><p>Sebagai catatan tambahan, ini sebenarnya tidak spesifik untuk NAT IPv4. Pelacakan negara bagian merupakan bagian integral dari a <em>firewall stateful</em> , digunakan oleh IPv4 dan IPv6. Bahkan tanpa NAT / PAT, pelacakan status juga memungkinkan firewall menerima semuanya secara otomatis <em>dikenal</em> paket dan tolak yang tidak dikenal.</p><p>Jadi ketika orang mengklaim bahwa "NAT menambahkan keamanan", mereka sebenarnya berbicara tentang konfigurasi firewall yang biasanya menyertainya (dan dapat digunakan dengan baik tanpa NAT).</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/bagaimana-nat-bekerja-untuk-protokol-non-standar-atau-tidak-umum-atau-mentah-d7moiizd/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener"><span itemprop=name>user1686</span></a>
—
<a href=https://superuser.com/a/1108226 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>Terima kasih, sangat membantu. Ini menyentuh sebagian besar poin penting yang saya pikirkan. Hal yang paling menarik bagi saya - yang menurut saya mungkin terjadi - adalah konflik dengan dua host yang mencoba menggunakan protokol yang sama. Kasus penggunaan utama yang saya pikirkan adalah koneksi klien ke VPN. Saya khawatir bahwa dalam beberapa situasi (memang, mungkin jarang), paling banter akan ada masalah keandalan dan paling buruk ada potensi celah keamanan. Kedengarannya pemahaman saya tentang NAT cukup bagus dan jika saya perlu mengatakan secara konkret apa yang akan terjadi, saya harus menggali kode kernel.</div><div>— <a href=https://superuser.com/users/624557/andrew-parker target=_blank rel="nofollow noopener">Andrew Parker</a></div></li><li class=list-group-item><div>Selain itu, dengan risiko menjadi subjektif, beberapa petunjuk ke sumber kebenaran pasti akan membantu, mis. dokumen linux atau file sumber tertentu.</div><div>— <a href=https://superuser.com/users/624557/andrew-parker target=_blank rel="nofollow noopener">Andrew Parker</a></div></li><li class=list-group-item><div>Mungkin ada masalah keandalan dengan PPTP (karena GRE kekurangan port - tetapi PPTP seharusnya sudah mati), dan terkadang dengan IPsec (meskipun sebagian besar klien mendukung NAT-T melalui UDP saat ini). Banyak produk VPN lainnya menjalankan semuanya melalui UDP dan tidak memiliki masalah, meskipun mereka memang perlu sering-sering melakukan ping ke server untuk menghindari kedaluwarsa status.</div><div>— <a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener">user1686</a></div></li><li class=list-group-item><div>Untuk NAT yang diterapkan di Linux, lihat <code>net/netfilter/nf_conntrack*.c</code> (tempat pelacakan status diterapkan) dan alat <code>conntrack</code> (untuk memeriksa dengan tepat status apa yang diketahui saat ini).</div><div>— <a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener">user1686</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>2</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>2</div><div class=card-body><div itemprop=text><p>NAT adalah topik yang menarik.</p><p>Ada tiga jenis NAT:</p><ul><li>Statis</li><li>Dinamis</li><li>MENEPUK</li></ul><p>PAT adalah yang digunakan sebagian besar router konsumen, jadi mari kita gunakan yang satu itu.</p><p>Bayangkan saya memiliki tata letak ini di rumah:</p><pre><code>Router   192.168.0.1
PC 1     192.168.0.2
PC 2     192.168.0.3
External IP 1.1.1.1 (Lets assume I have that one)
</code></pre><p>Kedua komputer saya ingin terhubung ke www.superuser.com yang memiliki ip 151.101.65.69.</p><p>Saya memuat browser saya di PC1 dan mengetik www.superuser.com dan hal berikut terjadi:</p><ul><li>Komputer saya meminta server DNS saya untuk menyelesaikan www.superuser.com menjadi IP</li><li>Server DNS hadir kembali dengan 151.101.65.69</li><li>Komputer saya membuka nomor port sumber acak, katakanlah 40000 dalam kasus ini.</li><li>Komputer saya Mengirim paket ke 151.101.65.69 dari sumber 192.168.0.2 dan menempatkan nomor urut 1 di atasnya.</li><li>Router mencegat paket itu, dan mengubah sumber dari 192.168.0.2 ke 1.1.1.1 kami dan mencatat bahwa itu berasal dari 192.168.0.2:40000.</li><li>Pengguna super mendapatkan paket tersebut, dan mengirimkan respons ke 1.1.1.1</li><li>Router menerima respon, melihat nomor urut dan berkata "Aha, itu untuk 192.168.0.2, saya lebih baik mengirimkannya ke port 40000, dia mengharapkannya.</li></ul><p>Pada saat yang sama PC 2 dapat pergi ke proses yang sama, tetapi kemungkinan besar akan memilih port yang terpisah. Router menyimpan catatan nomor port ini dan mengacak lalu lintas sesuai kebutuhan ke tujuan yang benar.</p><p>Router akan menyimpan tabel seperti ini:</p><pre><code>Source              Destination
192.168.0.2:40000   151.101.65.69:80
192.168.0.3:56944   151.101.65:69:80
</code></pre><p>Sekarang Anda bertanya, "Tapi Lister, apa yang terjadi jika nomor port acak yang Anda pilih sudah digunakan? Anda telah merusak Lister sistem!" Tidak apa-apa, router akan menambah nomor port dalam daftarnya ke yang tersedia berikutnya, tetapi akan ingat untuk mengirim kembali informasi pada port yang benar ke PC.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/bagaimana-nat-bekerja-untuk-protokol-non-standar-atau-tidak-umum-atau-mentah-d7moiizd/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/623674/lister target=_blank rel="nofollow noopener"><span itemprop=name>Lister</span></a>
—
<a href=https://superuser.com/a/1108225 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>Pertanyaannya kebanyakan tentang protokol di mana perangkat NAT <i>tidak tahu</i> bagaimana cara mengekstrak port dari (atau di mana port atau request-ID tidak ada sama sekali).</div><div>— <a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener">user1686</a></div></li><li class=list-group-item><div>Ahh ya, saya telah menulis jawaban yang bagus untuk pertanyaan yang sedikit salah melihat jawaban Anda.</div><div>— <a href=https://superuser.com/users/623674/lister target=_blank rel="nofollow noopener">Lister</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/tindakan-pencegahan-apa-yang-harus-saya-ambil-sebelum-memperbarui-bios-qpbju89s/>Tindakan pencegahan apa yang harus saya ambil sebelum memperbarui BIOS?</a></div></li><li class=list-group-item><div><a href=/bagaimana-aplikasi-mengingat-otentikasi-untuk-beberapa-saat-kjtd34ht/>Bagaimana aplikasi mengingat otentikasi untuk beberapa saat?</a></div></li><li class=list-group-item><div><a href=/seberapa-besar-pengaruh-aero-terhadap-masa-pakai-baterai-wvo9otwl/>Seberapa besar pengaruh Aero terhadap masa pakai baterai?</a></div></li><li class=list-group-item><div><a href=/kirim-perintah-telnet-di-dalam-terowongan-ssh-kaug5rqp/>Kirim perintah Telnet di dalam Terowongan SSH</a></div></li><li class=list-group-item><div><a href=/virtualbox-tidak-dapat-membuat-bridged-networking-berfungsi-host-win7-pxqugz6n/>VirtualBox: Tidak dapat membuat Bridged Networking berfungsi (host Win7)</a></div></li><li class=list-group-item><div><a href=/apa-perbedaan-antara-run-registry-key-dan-startup-folder-di-start-menu-nag503yb/>Apa perbedaan antara Run registry key dan Startup Folder (di Start Menu)?</a></div></li><li class=list-group-item><div><a href=/ubah-direktori-xampp-apache-htdocs-untuk-mengakses-localhost-dari-ubuntu-dan-windows-1qdumlho/>Ubah direktori xampp apache htdocs untuk mengakses localhost dari ubuntu dan windows</a></div></li><li class=list-group-item><div><a href=/menginstal-windows-7-dari-usb-di-thinkpad-t61-lwx1da9x/>Menginstal Windows 7 dari USB di Thinkpad T61</a></div></li><li class=list-group-item><div><a href=/cara-menangguhkan-bash-dalam-bash-z567kmjo/>Cara menangguhkan bash dalam bash</a></div></li><li class=list-group-item><div><a href=/server-1270013128-membutuhkan-nama-pengguna-dan-kata-sandi-server-mengatakan-cntlm-untuk-orang-tua-vllfvsxv/>Server 127.0.0.1:3128 membutuhkan nama pengguna dan kata sandi. Server mengatakan: cntlm untuk orang tua</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>