<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Dapatkan stdout dan stderr yang digabungkan dan dipisahkan</title><meta name=description content="Saya mencari cara untuk menjalankan program Prog dan berakhir dengan 3 file:  Stdout Prog  Stderr Prog  Baik stdout dan stderr Prog digabungkan seperti yang akan ditampilkan di layar jika tidak ada pengalihan...."><link rel=canonical href=https://www.idxstack.com/dapatkan-stdout-dan-stderr-yang-digabungkan-dan-dipisahkan-mcezvubj/><meta property="og:title" content="Dapatkan stdout dan stderr yang digabungkan dan dipisahkan"><meta property="og:description" content="Saya mencari cara untuk menjalankan program Prog dan berakhir dengan 3 file:  Stdout Prog  Stderr Prog  Baik stdout dan stderr Prog digabungkan seperti yang akan ditampilkan di layar jika tidak ada pengalihan...."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/dapatkan-stdout-dan-stderr-yang-digabungkan-dan-dipisahkan-mcezvubj/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Dapatkan stdout dan stderr yang digabungkan dan dipisahkan"><meta name=twitter:description content="Saya mencari cara untuk menjalankan program Prog dan berakhir dengan 3 file:  Stdout Prog  Stderr Prog  Baik stdout dan stderr Prog digabungkan seperti yang akan ditampilkan di layar jika tidak ada pengalihan...."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Dapatkan stdout dan stderr yang digabungkan dan dipisahkan</h1><div itemprop=text><p>Saya mencari cara untuk menjalankan program <code>Prog</code> dan berakhir dengan 3 file:</p><ol><li>Stdout <code>Prog</code></li><li>Stderr <code>Prog</code></li><li>Baik stdout dan stderr <code>Prog</code> digabungkan seperti yang akan ditampilkan di layar jika tidak ada pengalihan.</li></ol><p>Apakah ada kombinasi pengalihan, pipa, dll. Yang dapat mencapai hal ini?</p><p>Catatan: Saya biasanya menggunakan bash.</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/179209/angew-is-no-longer-proud-of-so target=_blank rel="nofollow noopener"><span itemprop=name>Angew is no longer proud of SO</span></a>
—
<a href=https://superuser.com/questions/517256/obtain-both-merged-and-separated-stdout-and-stderr target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>3</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>4</div><div class=card-body><div itemprop=text><p>Sejauh yang saya tahu, tidak ada cara elegan untuk melakukan ini (untuk cara yang tidak elegan yang berhasil tetapi tidak cantik, gulir ke bawah hingga akhir jawaban saya). Saya ragu Anda dapat melakukan yang lebih baik dari:</p><pre><code>$ command &gt;stdout.txt 2&gt;stderr.txt &amp;&amp; cat stdout.txt stderr.txt &gt; both.txt
</code></pre><p>Ada <a href=https://unix.stackexchange.com/q/9646/22222 target=_blank rel="nofollow noopener">berbagai</a> <a href=http://www.catonmat.net/blog/bash-one-liners-explained-part-three/ rel="nofollow noopener" target=_blank>keren</a> <a href=http://www.linuxquestions.org/questions/linux-software-2/bash-how-to-redirect-output-to-file-and-still-have-it-on-screen-412611/ rel="nofollow noopener" target=_blank>Trik</a> Anda dapat menggunakan tetapi tidak satupun dari mereka tampaknya berhasil menghasilkan 3 file lebih baik dari yang di atas. Masalah utamanya adalah file <code>both.txt</code> tidak akan menampilkan pesan (STDERR dan STDOUT) dalam urutan yang benar. Ini karena (seperti yang dijelaskan <a href=http://www.catonmat.net/blog/bash-one-liners-explained-part-three/ rel="nofollow noopener" target=_blank>sini</a> ):</p><blockquote><p>Saat Anda mengarahkan kedua output standar dan kesalahan standar ke hal yang sama
file, Anda mungkin mendapatkan beberapa hasil yang tidak diharapkan. Ini karena fakta
bahwa STDOUT adalah aliran yang di-buffer sedangkan STDERR selalu tidak di-buffer.
Ini berarti bahwa setiap karakter STDERR ditulis secepatnya
tersedia saat STDOUT menulis hal-hal dalam batch. Saat STDOUT dan
STDERR menuju ke file yang sama Anda mungkin melihat pesan kesalahan muncul
lebih cepat dari yang Anda harapkan dalam kaitannya dengan yang sebenarnya
keluaran dari program atau skrip Anda. Bukan hal yang perlu diwaspadai
tentang tetapi hanyalah efek samping dari aliran yang disangga vs. aliran yang tidak disangga,
Anda hanya perlu mengingatnya.</p></blockquote><p>Alternatif terbaik yang bisa saya temukan adalah menggunakan subkulit bash, agak rumit dan <em>masih</em> tidak menampilkan keluaran dalam urutan yang benar. Saya membuat skrip Perl sederhana, <code>test.pl</code> yang mencetak "OUT" ke <code>STDOUT</code> dan "ERR" ke <code>STDERR</code>, mengulangi proses tersebut 3 kali:</p><pre><code>#/usr/bin/perl 
for($i=0; $i&lt;=2; $i++){
    print STDOUT "OUT\n"; 
    print STDERR "ERR\n"
}
</code></pre><p>Outputnya yang normal dan tidak dialihkan adalah:</p><pre><code>$ ./test.pl
OUT
ERR
OUT
ERR
OUT
ERR
</code></pre><p>Untuk mengarahkan keluaran, saya menjalankan:</p><pre><code>(./test.pl 2&gt; &gt;(tee error.txt) &gt; &gt;(tee out.txt)) &gt; both.txt 
</code></pre><p>Ini menggunakan <code>tee</code>, sebuah program yang akan mencetak inputnya ke layar <em>dan</em> ke nama file. Jadi, saya mengarahkan <code>STDERR</code> dan meneruskannya sebagai masukan ke <code>tee</code>, menyuruhnya menulisnya ke file <code>error.txt</code>. Demikian pula dengan <code>STDOUT</code> dan file <code>out.txt</code>. Saya menempatkan semuanya dalam subkulit (<code>(...)</code>) sehingga saya dapat menangkap <em>semua</em> dari outputnya dan dialihkan ke <code>both.txt</code>.</p><p>Sekarang, ini berfungsi karena ia membuat 3 file, satu dengan <code>STDERR</code>, satu dengan <code>STDOUT</code> dan satu lagi dengan keduanya. Namun, seperti yang dijelaskan di atas, ini menyebabkan pesan muncul dalam urutan yang salah di <code>both.txt</code>:</p><pre><code>$ cat both.txt 
ERR
ERR
ERR
OUT
OUT
OUT
</code></pre><p>Satu-satunya cara untuk mengatasi ini yang dapat saya temukan adalah menambahkan waktu itu dicetak ke setiap baris keluaran dan kemudian menyortir, tetapi itu semakin <em>serius</em> berbelit-belit dan, di tempat Anda, saya akan bertanya pada diri sendiri apakah itu benar-benar berharga:</p><pre><code> $(./test.pl \
   2&gt; &gt;(while read n; do echo `date +%N`" $n"; echo "$n" &gt;&gt;error.txt; done) \
    &gt; &gt;(while read n; do echo `date +%N`" $n"; echo "$n" &gt;&gt; out.txt; done )) \
 | gawk '{print $2}'&gt; both.txt 
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/dapatkan-stdout-dan-stderr-yang-digabungkan-dan-dipisahkan-mcezvubj/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/151431/terdon target=_blank rel="nofollow noopener"><span itemprop=name>terdon</span></a>
—
<a href=https://superuser.com/a/517905 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>Terima kasih atas jawabannya. Saya sudah mencoba pendekatan Anda dan Kevin; menerima milikmu untuk ide cap waktu. Hal yang menarik adalah bahwa output berakhir dalam (hampir) urutan yang benar dalam file gabungan <i>tanpa</i> stamping dan sortasi. Mungkinkah karena <code>Prog</code> sebenarnya adalah skrip Python yang melakukan <code>Popen()</code> dan keluarannya sendiri berasal dari proses yang dimunculkan? Dan BTW, bagaimana terminal menghindari buffering stdout?</div><div>— <a href=https://superuser.com/users/179209/angew-is-no-longer-proud-of-so target=_blank rel="nofollow noopener">Angew is no longer proud of SO</a></div></li><li class=list-group-item><div>Maaf, @Agnew, mencapai batas STDOUT / STDERR saya foo :), tidak tahu.</div><div>— <a href=https://superuser.com/users/151431/terdon target=_blank rel="nofollow noopener">terdon</a></div></li><li class=list-group-item><div>Saya tidak percaya bahwa menulis cap waktu akan (selalu) membantu. Karena Stdout dapat menunda dan mengakumulasi data, tindakan yang diambil oleh re-direct (termasuk menambahkan stempel waktu) dapat ditunda. Stempel waktu akan menunjukkan kapan data ditulis ke file keluaran, yang belum tentu sama dengan saat peristiwa itu terjadi.</div><div>— <a href=https://superuser.com/users/144147/kevin-fegan target=_blank rel="nofollow noopener">Kevin Fegan</a></div></li><li class=list-group-item><div>@Kevin, memang, tetapi perbedaan waktu relatif antara STDOUT dan STDERR harus dipertahankan. Intinya adalah menjaga urutan yang sama, tidak tahu persis kapan setiap baris dicetak.</div><div>— <a href=https://superuser.com/users/151431/terdon target=_blank rel="nofollow noopener">terdon</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>2</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>2</div><div class=card-body><div itemprop=text><p>1) buat dua skrip:</p><pre><code>getout.sh
geterr.sh
</code></pre><p>getout.sh akan menerima Stdout.<br>Script akan menulis data ke f1.txt dan juga menulis data yang sama ke file f12.txt</p><p>geterr.sh akan menerima Stderr.<br>Script akan menulis data ke f2.txt dan juga menulis data yang sama ke file f12.txt</p><p>Saya tidak yakin bahwa mungkin untuk mempertahankan urutan persis data yang ditulis ke file: f12.txt secara andal. Ini karena penulisan ke Stdout di-buffer oleh sistem operasi dan penulisan ke Stderr terjadi hampir secara real-time. Ini dapat (akan) menunda data Stdout agar tidak terlihat oleh skrip. Efeknya adalah:</p><pre><code>a. For some data written to Stdout BEFORE data written to 
   Stderr, the data written to f12.txt from Stderr may 
   precede the data written by Stdout.  
b. Some data written to Stdout will be accumulated with 
   other data written earlier or later. As the script sees it, 
   these data lines may all appear at the same time (together).  
c. Because of (b), for some data written to Stderr in-between 
   multiple data writes to Stdout, the data written to f12.txt 
   from Stderr may precede the whole group of data written to Stdout.  
d. Because of all this, including timestamps with the data 
   written to f12.txt will not preserve the order that events happened.  
</code></pre><p>2) buat 2 pipa bernama:</p><pre><code>% mknod pout p
% mknod perr p
</code></pre><p>3) biarkan skrip "mendengarkan" ke pipa:</p><pre><code>% ./getout.sh &lt; pout &amp;
% ./geterr.sh &lt; perr &amp;
</code></pre><p>4) Mulai program Anda (Prog) seperti ini:</p><pre><code>% Prog 1&gt; pout 2&gt; perr
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/dapatkan-stdout-dan-stderr-yang-digabungkan-dan-dipisahkan-mcezvubj/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/144147/kevin-fegan target=_blank rel="nofollow noopener"><span itemprop=name>Kevin Fegan</span></a>
—
<a href=https://superuser.com/a/517673 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>Bagus, belum memikirkan pipa bernama. Namun, Anda dapat melakukan hal yang sama tanpa pipa bernama (dan, dengan langkah yang lebih sedikit) dengan menggunakan sub-shell seperti yang telah saya lakukan dalam jawaban saya. Selain itu, Anda masih memiliki masalah baris yang tidak muncul dalam urutan yang benar di f12.txt tetapi Anda dapat memperbaikinya dengan membuat dua skrip menambahkan <code>date</code> ke keluaran dan pengurutannya.</div><div>— <a href=https://superuser.com/users/151431/terdon target=_blank rel="nofollow noopener">terdon</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>0</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-2><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>0</div><div class=card-body><div itemprop=text><p>Untuk memisahkannya menjadi beberapa file:</p><pre><code>./Prog 1&gt; stdout.log 2&gt; stderr.log
</code></pre><p>Untuk menggabungkannya menjadi file yang sama:</p><pre><code>./Prog 1&gt;&gt; combine.log 2&gt;&gt; combine.log
</code></pre><p>Ada cara 'singkat' untuk melakukan penggabungan untuk bash, tetapi cara di atas lebih aman jika Anda menggunakan sh.</p><hr><p>Tergantung pada seberapa akurat kebutuhan kombinasi Anda, berikut ini mungkin berfungsi atau tidak</p><pre><code>touch stdout.log
touch stderr.log
tail -f stdout.log &gt;&gt; combine.log &amp;
tail -f stderr.log &gt;&gt; combine.log &amp;
./Prog 1&gt;&gt; stdout.log 2&gt;&gt; stderr.log ; pkill tail
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/dapatkan-stdout-dan-stderr-yang-digabungkan-dan-dipisahkan-mcezvubj/#answer-2 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/170017/john-siu target=_blank rel="nofollow noopener"><span itemprop=name>John Siu</span></a>
—
<a href=https://superuser.com/a/517468 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=2>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=2><ul class="list-group list-group-flush"><li class=list-group-item><div>Terima kasih; Saya tahu ini. Namun, saya membutuhkan cara untuk "melakukan keduanya secara bersamaan". Artinya, miliki semua stdout.log, stderr.log, dan kombinasikan.log saat proses selesai.</div><div>— <a href=https://superuser.com/users/179209/angew-is-no-longer-proud-of-so target=_blank rel="nofollow noopener">Angew is no longer proud of SO</a></div></li><li class=list-group-item><div>Perbarui jawaban saya untuk menggabungkan.log</div><div>— <a href=https://superuser.com/users/170017/john-siu target=_blank rel="nofollow noopener">John Siu</a></div></li><li class=list-group-item><div>Pada beberapa versi shell, <code>1> combine.log 2> combine.log</code> akan membuang keluaran standar ke dalam bit bucket dan hanya menangkap stderr pada <code>combine.log</code>.</div><div>— <a href=https://superuser.com/users/150988/scott target=_blank rel="nofollow noopener">Scott</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/ekspor-hanya-aturan-yang-dipilih-dari-outlook-fpxeqtb4/>Ekspor hanya aturan yang dipilih dari Outlook</a></div></li><li class=list-group-item><div><a href=/file-terkunci-di-flash-drive-nbopd7qq/>File Terkunci di Flash Drive</a></div></li><li class=list-group-item><div><a href=/masuk-sidik-jari-tidak-berfungsi-di-win10-yhxmyewi/>Masuk sidik jari tidak berfungsi di win10</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-membuat-lebar-panel-tmux-diperbaiki-dvv7afks/>Bagaimana cara membuat lebar panel tmux diperbaiki?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-mematikan-led-di-bagian-depan-laptop-saya-asus-k501lx-nh52-ehrmbm0g/>Bagaimana cara mematikan LED di bagian depan laptop saya (ASUS K501LX-NH52)?</a></div></li><li class=list-group-item><div><a href=/apa-pintasan-keyboard-untuk-menghapus-pemformatan-di-office-2008-mac-sgqlihg7/>Apa pintasan keyboard untuk menghapus pemformatan di Office 2008 Mac?</a></div></li><li class=list-group-item><div><a href=/dd-bagaimana-cara-mengekstrak-sub-bagian-dari-file-dengan-2-offset-7ae0h9on/>dd - bagaimana cara mengekstrak sub-bagian dari file dengan 2 offset?</a></div></li><li class=list-group-item><div><a href=/sed-untuk-windows-ycfa0xuf/>Sed untuk windows</a></div></li><li class=list-group-item><div><a href=/menggunakan-ffmpeg-untuk-mengekstrak-segmen-di-tengah-video-panjang-cdx77w1m/>Menggunakan ffmpeg untuk mengekstrak segmen di tengah video panjang</a></div></li><li class=list-group-item><div><a href=/svn-mungkinkah-perubahan-menyebar-ke-versi-file-yang-berbeda-8gub7v6w/>SVN: Mungkinkah perubahan menyebar ke versi file yang berbeda?</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>