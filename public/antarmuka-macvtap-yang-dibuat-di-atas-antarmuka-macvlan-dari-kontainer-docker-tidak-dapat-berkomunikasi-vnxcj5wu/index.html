<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>antarmuka macvtap yang dibuat di atas antarmuka macvlan dari kontainer Docker tidak dapat berkomunikasi</title><meta name=description content="Saya memiliki kasus penggunaan di mana saya membuat jaringan Docker macvlan (mode jembatan default) &amp;amp; menghubungkan jaringan ini ke wadah Docker yang sedang berjalan (misalnya C1). Jadi wadah akan memiliki antarmuka macvlan..."><link rel=canonical href=https://www.idxstack.com/antarmuka-macvtap-yang-dibuat-di-atas-antarmuka-macvlan-dari-kontainer-docker-tidak-dapat-berkomunikasi-vnxcj5wu/><meta property="og:title" content="antarmuka macvtap yang dibuat di atas antarmuka macvlan dari kontainer Docker tidak dapat berkomunikasi"><meta property="og:description" content="Saya memiliki kasus penggunaan di mana saya membuat jaringan Docker macvlan (mode jembatan default) &amp;amp; menghubungkan jaringan ini ke wadah Docker yang sedang berjalan (misalnya C1). Jadi wadah akan memiliki antarmuka macvlan..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/antarmuka-macvtap-yang-dibuat-di-atas-antarmuka-macvlan-dari-kontainer-docker-tidak-dapat-berkomunikasi-vnxcj5wu/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="antarmuka macvtap yang dibuat di atas antarmuka macvlan dari kontainer Docker tidak dapat berkomunikasi"><meta name=twitter:description content="Saya memiliki kasus penggunaan di mana saya membuat jaringan Docker macvlan (mode jembatan default) &amp;amp; menghubungkan jaringan ini ke wadah Docker yang sedang berjalan (misalnya C1). Jadi wadah akan memiliki antarmuka macvlan..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>antarmuka macvtap yang dibuat di atas antarmuka macvlan dari kontainer Docker tidak dapat berkomunikasi</h1><div itemprop=text><p>Saya memiliki kasus penggunaan di mana saya membuat jaringan Docker macvlan (mode jembatan default) & menghubungkan jaringan ini ke wadah Docker yang sedang berjalan (misalnya C1). Jadi wadah akan memiliki antarmuka macvlan baru (misalnya eth1).</p><pre><code>docker network create -d macvlan --subnet=172.16.16.0/24 --gateway=172.16.16.1 -o parent=ens224 macvlan-ens224
docker network connect macvlan-ens224 C1
</code></pre><p>Di dalam container C1, saya membuat antarmuka macvtap menggunakan antarmuka macvlan (eth1) & IP yang ditetapkan.</p><pre><code>ip link add link eth1 name mymacvtap0 type macvtap mode private
ip addr add 172.17.17.2/24 dev mymacvtap0
ip link set up dev mymacvtap0
</code></pre><p>Sekarang, Ketika saya melakukan ping ke beberapa IP subnet 172.17.17.2/24 dari dalam kontainer, permintaan ARP disiarkan menggunakan alamat MAC sumber antarmuka macvtap kontainer. Target IP mengirimkan balasan ARP. Balasan ARP mencapai antarmuka fisik ens224 (dilihat dari tcpdump). Tapi Balasan tidak pernah sampai ke dalam wadah.</p><p>Seseorang tolong tunjukkan apa yang saya lewatkan di sini?</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/178464/xemx target=_blank rel="nofollow noopener"><span itemprop=name>XemX</span></a>
—
<a href=https://superuser.com/questions/1205346/macvtap-interface-created-on-top-of-macvlan-interface-of-a-docker-container-cann target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>1</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>6</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>6</div><div class=card-body><div itemprop=text><p>ini adalah skema utama bagaimana driver macvlan bekerja:</p><pre><code>                                    +---------------+
                                    | network stack |
                                    +---------------+
                                        |  |  |  |
                              +---------+  |  |  +------------------+
                              |            |  +------------------+  |
                              |            +------------------+  |  |
                              |                               |  |  |
                              |            aa  +----------+   |  |  |
                              | eth0     +-----| macvlan0 |---+  |  |
                              |         /      +----------+      |  |
 Wire   +------+       +---------------+   bb  +----------+      |  |
--------| eth0 |------/ if dst mac is /--------| macvlan1 |------+  |
        +------+     +---------------+ \       +----------+         |
                                        \  cc  +----------+         |
                                         +-----| macvlan2 |---------+
                                               +----------+
</code></pre><p>Seperti yang dapat Anda lihat, jenis antarmuka ini bekerja dengan prinsip berikut:
itu mendengarkan pada kartu jaringan fisik dan hanya menangkap alamat-mac sendiri.</p><p>Jika Anda akan menambahkan antarmuka lain di bagian bawah macvlan. Misalnya bridge atau antarmuka macvlan / macvtap lainnya, ini akan mentransfer lalu lintas apa pun darinya ke jaringan eksternal, tetapi bukan sisi sebaliknya. Karena itu menangkap lalu lintas hanya untuk alamat-mac sendiri.</p><p>Untuk mengatasi masalah Anda, Anda harus menggunakan linux bridge dan menghubungkan container Anda ke bridge melalui pasangan veth-interfaces.</p><p>Anda harus menggunakan antarmuka macvlan / macvtap hanya jika itu titik akhir.</p><p>Di sini Anda bisa mendapatkan info lebih lanjut tentang jenis antarmuka ini:</p><ul><li><a href=http://suhu0426.github.io/Web/Presentation/20150203/index.html#macvlan rel="nofollow noopener" target=_blank>Jaringan virtual: TUN / TAP, MacVLAN, dan MacVTap</a></li><li><a href=https://superuser.com/a/765078/327550 target=_blank rel="nofollow noopener">Cara menyiapkan jaringan virtual <code>veth</code></a></li></ul></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/antarmuka-macvtap-yang-dibuat-di-atas-antarmuka-macvlan-dari-kontainer-docker-tidak-dapat-berkomunikasi-vnxcj5wu/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/327550/kvaps target=_blank rel="nofollow noopener"><span itemprop=name>kvaps</span></a>
—
<a href=https://superuser.com/a/1243630 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>tautan pertama tidak dapat diakses.</div><div>— <a href=https://superuser.com/users/858540/allenwang target=_blank rel="nofollow noopener">allenwang</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/jalankan-safari-dari-baris-perintah-dengan-parameter-url-gpfsjx8h/>Jalankan Safari dari baris perintah dengan parameter URL</a></div></li><li class=list-group-item><div><a href=/kapan-aman-untuk-membiarkan-revo-uninstaller-membersihkan-sisa-makanan-pxawmc6k/>Kapan aman untuk membiarkan Revo Uninstaller membersihkan sisa makanan?</a></div></li><li class=list-group-item><div><a href=/snapshot-teraman-dari-harddisk-yang-gagal-spudhkhw/>Snapshot teraman dari harddisk yang gagal?</a></div></li><li class=list-group-item><div><a href=/antarmuka-apa-yang-digunakan-saat-menghubungkan-lcd-di-laptop-ietidwog/>Antarmuka apa yang digunakan saat menghubungkan LCD di laptop</a></div></li><li class=list-group-item><div><a href=/memilih-motherboard-yang-kompatibel-dengan-linux-mx6w1qw8/>Memilih motherboard yang kompatibel dengan linux</a></div></li><li class=list-group-item><div><a href=/sinkronkan-folder-pengguna-antar-komputer-s9fsw4jv/>Sinkronkan folder pengguna antar komputer</a></div></li><li class=list-group-item><div><a href=/apakah-ada-perintah-untuk-mematikan-layar-di-ubuntu-hrghjbrd/>Apakah ada perintah untuk mematikan layar di Ubuntu?</a></div></li><li class=list-group-item><div><a href=/mengapa-saya-perlu-mencadangkan-itunes-1syrn4pd/>Mengapa saya perlu mencadangkan iTunes?</a></div></li><li class=list-group-item><div><a href=/notepad-cara-memotong-semua-teks-setelah-karakter-tertentu-mq6trqkw/>Notepad ++ Cara memotong semua teks setelah karakter tertentu</a></div></li><li class=list-group-item><div><a href=/file-vimrc-unik-pengguna-untuk-server-sebagai-pengguna-root-q14q4ykr/>File .vimrc unik pengguna untuk server sebagai pengguna root</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>