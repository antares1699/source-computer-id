<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Mengenai Unix Move Command</title><meta name=description content="Saya perlu menulis Tran.sh Skrip Shell Unix yang memindahkan file input csv dari folder / exp / files ke direktori / exp / ready.  File input csv ditulis ke folder /exp/files oleh..."><link rel=canonical href=https://www.idxstack.com/mengenai-unix-move-command-epvm51ao/><meta property="og:title" content="Mengenai Unix Move Command"><meta property="og:description" content="Saya perlu menulis Tran.sh Skrip Shell Unix yang memindahkan file input csv dari folder / exp / files ke direktori / exp / ready.  File input csv ditulis ke folder /exp/files oleh..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/mengenai-unix-move-command-epvm51ao/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mengenai Unix Move Command"><meta name=twitter:description content="Saya perlu menulis Tran.sh Skrip Shell Unix yang memindahkan file input csv dari folder / exp / files ke direktori / exp / ready.  File input csv ditulis ke folder /exp/files oleh..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Mengenai Unix Move Command</h1><div itemprop=text><p>Saya perlu menulis Tran.sh Skrip Shell Unix yang memindahkan file input csv dari folder / exp / files ke direktori / exp / ready.</p><p>File input csv ditulis ke folder <code>/exp/files</code> oleh server FTP yang perilakunya tidak dapat saya ubah sepele. Dalam skrip shell <code>tran.sh</code> saya perlu memastikan sebelum melakukan pemindahan file input csv dari / exp / files direktori tidak ada lagi proses lain yang menulis ke file tersebut.</p><p>Bagaimana saya bisa melakukannya.</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/38993/user38993 target=_blank rel="nofollow noopener"><span itemprop=name>user38993</span></a>
—
<a href=https://superuser.com/questions/112275/regarding-unix-move-command target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div>BTW - mengetahui bahwa ini adalah server FTP (sebagai lawan dari proses sewenang-wenang) benar-benar mengubah kumpulan jawaban yang sesuai; Saya pasti punya alasan untuk memperbarui milik saya. Harap berikan lebih banyak informasi dalam pertanyaan Anda di lain waktu.</div><div>— User</div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>5</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>3</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>3</div><div class=card-body><div itemprop=text><p>Tidak ada cara portabel untuk melakukannya. Anda dapat mencoba <code>fuser</code>, <code>lsof</code>, <code>inotify</code>, <code>FAM</code>, dan lainnya.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mengenai-unix-move-command-epvm51ao/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/26316/ignacio-vazquez-abrams target=_blank rel="nofollow noopener"><span itemprop=name>Ignacio Vazquez-Abrams</span></a>
—
<a href=https://superuser.com/a/112276 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>jawaban yang bagus, langsung ke intinya. saya pikir Anda bisa menambahkan fasih dan gamin juga</div><div>— <a href=https://superuser.com/users/15896/matt-joiner target=_blank rel="nofollow noopener">Matt Joiner</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>3</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>3</div><div class=card-body><div itemprop=text><p>Coba gunakan <code>fuser [FILE]</code>. Ini akan mengembalikan bukan nol jika file tidak digunakan.</p><p>Berikut beberapa contoh kode yang akan menunggu file siap dipindahkan:</p><pre><code>#!/bin/sh

FROMDIR='/exp/files'
DESTDIR='/exp/ready'

function move_file_if_ready () {
    if [ -f "$1" ]; then
        while fuser "$1" 2&gt;/dev/null 1&gt;&amp;2 ; do
            sleep 1
        done

        mv "$1" "$DESTDIR"
    fi
}

for "$fn" in "$FROMDIR"/*.csv; do
    move_file_if_ready "$fn"
done
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mengenai-unix-move-command-epvm51ao/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/23634/amphetamachine target=_blank rel="nofollow noopener"><span itemprop=name>amphetamachine</span></a>
—
<a href=https://superuser.com/a/112277 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>Lumayan, tapi masih punya kondisi balapan.</div><div>— <a href=https://superuser.com/users/1711/dmckee-ex-moderator-kitten target=_blank rel="nofollow noopener">dmckee --- ex-moderator kitten</a></div></li><li class=list-group-item><div>Terima kasih banyak. tiga proses aplikasi jarak jauh sedang mem-ftp file input ke direktori ini. Jadi saya akan dapat mengetahui dengan perintah fuser ini jika mereka menulis ke file tersebut.</div><div>— User</div></li><li class=list-group-item><div>@dmckee - Benar tentang kondisi balapan, tetapi saya berasumsi bahwa proses penulisannya hanya menahan pegangan file terbuka cukup lama untuk menulis padanya, lalu menutupnya, tidak pernah membukanya lagi.</div><div>— <a href=https://superuser.com/users/23634/amphetamachine target=_blank rel="nofollow noopener">amphetamachine</a></div></li><li class=list-group-item><div>Terima kasih banyak. Saya berencana untuk memeriksa apakah baris terakhir di dalam file csv diterima dan memvalidasi file tersebut</div><div>— User</div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>3</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-2><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>3</div><div class=card-body><div itemprop=text><p>Anda dapat menggunakan lsof</p><pre><code>r=$(lsof /exp/files )
if [ ! -z "$r" ] ;then
  mv /exp/files/*csv /exp/ready
fi
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mengenai-unix-move-command-epvm51ao/#answer-2 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/31894/user31894 target=_blank rel="nofollow noopener"><span itemprop=name>user31894</span></a>
—
<a href=https://superuser.com/a/112278 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=2>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=2><ul class="list-group list-group-flush"><li class=list-group-item><div>Terima kasih banyak. tiga proses aplikasi jarak jauh sedang mem-ftp file input ke direktori ini. Jadi saya akan dapat mengetahui dengan perintah lsof ini jika mereka menulis ke file tersebut.</div><div>— User</div></li><li class=list-group-item><div>Tetapi dengan tiga proses (dengan asumsi independen) menulis ke file direktori, maka ini tidak akan bergerak kecuali ketiganya selesai. Lebih modular menggunakan fuser, dan mengujinya pada basis per file.</div><div>— <a href=https://superuser.com/users/23634/amphetamachine target=_blank rel="nofollow noopener">amphetamachine</a></div></li><li class=list-group-item><div>Terima kasih banyak. Saya berencana untuk memeriksa apakah baris terakhir di dalam file csv diterima dan memvalidasi file tersebut.</div><div>— User</div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>2</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-3><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>2</div><div class=card-body><div itemprop=text><p>Cara yang Benar untuk melakukannya adalah dengan menyebabkan proses penulisan file dan mengganti nama atau memindahkannya atas kemauannya sendiri ketika selesai dengan penulisan. Yang lainnya rentan terhadap kondisi balapan dan / atau masalah izin.</p><p>Beberapa contoh khusus kasus masalah:</p><ul><li>Jika proses pemindahan file dijalankan sebagai pengguna yang berbeda dengan lsof / fuser / etc, informasinya tidak dijamin selesai</li><li>Jika proses yang melakukan penulisan adalah skrip shell, itu mungkin menelurkan subproses yang membuka file, membiarkannya ditutup, menelurkan subproses lain, dll. Dalam skenario ini, fuser dan alat serupa dapat secara sah menampilkan file sebagai tidak diakses bahkan jika subproses lebih lanjut akan dimulai untuk menulis ke sana nanti.</li></ul><p>Kondisi balapan lain yang lebih halus mungkin ada juga - dan terlepas dari itu, fuser dan semacamnya bukanlah alat POSIX dan tidak tersedia di semua tempat.</p><p>Mengharuskan sebagai masalah protokol bahwa proses penulisan file memindahkannya ke lokasi akhir saat penyelesaian itu sendiri; itu satu-satunya pendekatan yang aman dan portabel.</p><p>EDIT: Telah diklarifikasi bahwa file ditulis bukan dengan proses sewenang-wenang (yang mungkin menutup dan membukanya kembali) tetapi oleh server FTP. Pada kasus ini, <a href=http://inotify.aiken.cz/ rel="nofollow noopener" target=_blank>incron</a> dapat digunakan untuk menjalankan skrip arbitrer setiap kali file ditutup di direktori ini.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mengenai-unix-move-command-epvm51ao/#answer-3 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/31769/charles-duffy target=_blank rel="nofollow noopener"><span itemprop=name>Charles Duffy</span></a>
—
<a href=https://superuser.com/a/112279 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=3>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=3><ul class="list-group list-group-flush"><li class=list-group-item><div>Terima kasih banyak atas infonya. Masalahnya adalah tiga proses aplikasi jarak jauh memasukkan file ke direktori ini. Jadi saya tidak boleh memindahkan file saat mereka menulisnya di direktori / exp / files ini</div><div>— User</div></li><li class=list-group-item><div>@arav - Anda dapat menyiasatinya (artinya, <i>saya</i> mengatasi ini) dengan server sftp kustom. (Milik saya ditulis dengan Python menggunakan pustaka Paramiko; ada ftpdlib untuk menulis server FTP standar dengan Python juga, meskipun ada banyak alasan untuk menghindari FTP).</div><div>— User</div></li><li class=list-group-item><div>@arav - ... yang mengatakan, bagi saya sepertinya solusi bebas kondisi balapan lain yang akan bekerja untuk Anda adalah menggunakan inotifywatch atau incron untuk menjalankan skrip pilihan Anda setiap kali pembaruan selesai.</div><div>— User</div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>0</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-4><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>0</div><div class=card-body><div itemprop=text><p>Saya rasa Anda tidak dapat melakukan ini tanpa mengubah proses yang membuat file-file ini. Setiap kali kami memiliki tugas seperti ini di sistem kami, kami memastikan bahwa proses yang membuat file membuatnya dapat dieksekusi di bagian paling akhir. Jadi proses yang akan memindahkan atau pasca-proses dengan cara lain file tersebut dapat memeriksa bit yang dapat dieksekusi untuk memastikan proses asal telah selesai bekerja dengan file.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mengenai-unix-move-command-epvm51ao/#answer-4 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/622606/sha target=_blank rel="nofollow noopener"><span itemprop=name>sha</span></a>
—
<a href=https://superuser.com/a/112280 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=4>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=4><ul class="list-group list-group-flush"><li class=list-group-item><div>Masalahnya adalah tiga proses aplikasi jarak jauh memasukkan file ke direktori ini. Jadi saya dapat memeriksa bahwa tiga proses aplikasi jarak jauh telah selesai.</div><div>— User</div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/cara-memetakan-satu-elemen-array-yang-dipisahkan-oleh-baris-baru-menjadi-array-baru-dengan-banyak-elemen-esv0z9tc/>Cara memetakan satu elemen array yang dipisahkan oleh baris baru menjadi array baru dengan banyak elemen</a></div></li><li class=list-group-item><div><a href=/ip-lokal-statis-atau-dinamis-berdasarkan-lokasi-fisik-w1r5tvpu/>IP Lokal Statis atau Dinamis berdasarkan Lokasi Fisik</a></div></li><li class=list-group-item><div><a href=/pelengkapan-otomatis-zsh-untuk-eksekusi-baru-di-path-x9tubpf1/>pelengkapan otomatis zsh untuk eksekusi baru di PATH</a></div></li><li class=list-group-item><div><a href=/semua-elemen-jendela-hilang-t5iozwkp/>Semua elemen jendela hilang</a></div></li><li class=list-group-item><div><a href=/tentukan-jenis-pantomim-saat-mengunduh-file-8ykhcdg4/>Tentukan jenis pantomim saat mengunduh file</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-membuat-salinan-slide-lengkap-di-powerpoint-dengan-pintasan-keyboard-jt0kkzyv/>Bagaimana cara membuat salinan slide lengkap di PowerPoint dengan pintasan keyboard?</a></div></li><li class=list-group-item><div><a href=/bagaimana-anda-mencetak-file-yang-dapat-dicetak-di-windows-10-dengan-baris-perintah-ienjlilo/>Bagaimana Anda mencetak file yang dapat dicetak di Windows 10 dengan baris perintah?</a></div></li><li class=list-group-item><div><a href=/hardlink-di-ntfs-dengan-windows-raukoetl/>hardlink di ntfs dengan windows</a></div></li><li class=list-group-item><div><a href=/skrip-autohotkey-tidak-berjalan-saat-startup-og1tcwrz/>Skrip Autohotkey tidak berjalan saat startup</a></div></li><li class=list-group-item><div><a href=/sistem-file-mirip-raid-untuk-kumpulan-hard-disk-yang-heterogen-wuiyk49f/>Sistem file mirip RAID untuk kumpulan hard disk yang heterogen</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>