<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Mencoba mencetak nama pengguna pada message of the day (MOTD)</title><meta name=description content="Saya menguji skrip sederhana yang mencetak pesan selamat datang untuk pengguna yang masuk di server.  Naskah:  #!/bin/sh_user=$(whoami)_hostname=$(hostname)_currdate=$(date)echo &#34;#===================================================#&#34;echo &#34;          Welcome $_user to $_hostname server&#34;echo &#34;          Curr...."><link rel=canonical href=https://www.idxstack.com/mencoba-mencetak-nama-pengguna-pada-message-of-the-day-motd-tjblokgv/><meta property="og:title" content="Mencoba mencetak nama pengguna pada message of the day (MOTD)"><meta property="og:description" content="Saya menguji skrip sederhana yang mencetak pesan selamat datang untuk pengguna yang masuk di server.  Naskah:  #!/bin/sh_user=$(whoami)_hostname=$(hostname)_currdate=$(date)echo &#34;#===================================================#&#34;echo &#34;          Welcome $_user to $_hostname server&#34;echo &#34;          Curr...."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/mencoba-mencetak-nama-pengguna-pada-message-of-the-day-motd-tjblokgv/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mencoba mencetak nama pengguna pada message of the day (MOTD)"><meta name=twitter:description content="Saya menguji skrip sederhana yang mencetak pesan selamat datang untuk pengguna yang masuk di server.  Naskah:  #!/bin/sh_user=$(whoami)_hostname=$(hostname)_currdate=$(date)echo &#34;#===================================================#&#34;echo &#34;          Welcome $_user to $_hostname server&#34;echo &#34;          Curr...."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Mencoba mencetak nama pengguna pada message of the day (MOTD)</h1><div itemprop=text><p>Saya menguji skrip sederhana yang mencetak pesan selamat datang untuk pengguna yang masuk di server.</p><p>Naskah:</p><pre><code>#!/bin/sh
_user=$(whoami)
_hostname=$(hostname)
_currdate=$(date)

echo "#===================================================#"
echo "          Welcome $_user to $_hostname server"
echo "          Curr. time: $_currdate"
echo "          Have a nice day!"
echo " "
echo  "#==================================================#"
</code></pre><p>Saya menyimpan skrip di <strong>/etc/update-motd.d/</strong> , sehingga muncul pesan setelah pengguna login. <strong>Masalahnya adalah</strong> bahwa var <code>_user</code> selalu muncul sebagai " <strong>akar</strong> "dan saya tidak dapat menemukan cara untuk mendapatkan nama pengguna dari pengguna. Saya sedang menguji ini melalui SSH.</p><p>Ada yang bisa membantu saya?
Terima kasih! :)</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/505071/tzlima target=_blank rel="nofollow noopener"><span itemprop=name>tzlima</span></a>
—
<a href=https://superuser.com/questions/981897/trying-to-print-username-at-message-of-the-day-motd target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>3</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>7</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>7</div><div class=card-body><div itemprop=text><p>Jawaban Grawity salah. Dia menyatakan bahwa motd adalah file global, tetapi OP dengan jelas menyatakan dia bekerja di /etc/update-motd.d/.</p><p>/etc/update-motd.d/ memungkinkan MOTD yang dibuat secara dinamis dan dapat menjalankan skrip atau aplikasi yang sebenarnya.</p><p>Yang beeing berkata, saya menghadapi masalah yang sama seperti Anda. Masalahnya adalah bahwa selama pelaksanaan MOTD, hak istimewa belum jatuh ke akun pengguna, jadi semua skrip dijalankan sebagai root.</p><p>Saya berhasil menemukan solusi yang berfungsi pada mesin Debian. Saya tidak mencobanya di distribusi lain. Apa solusi saya untuk mengambil nama pengguna dari output 'ps', karena sshd menunjukkan nama pengguna, seperti:</p><pre><code>root      4179  0.0  0.0  93984  5952 ?        Ss   10:44   0:00 sshd: johndoe [priv] 
</code></pre><p>Skrip kecil saya 'mencari kembali' di pohon proses untuk menemukan proses yang berisi nama pengguna.</p><pre><code>PPID1=`cat /proc/$PPID/status | grep PPid | awk '{ print $2 }'`
PPID2=`cat /proc/$PPID1/status | grep PPid | awk '{ print $2 }'`
USERNAME=`ps -x | grep $PPID2 | awk '{ print $6 }' |  sed "s/[[:digit:].-]//g"`
</code></pre><p>Nama pengguna sekarang ada di variabel $ USERNAME.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mencoba-mencetak-nama-pengguna-pada-message-of-the-day-motd-tjblokgv/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/282989/rudy-broersma target=_blank rel="nofollow noopener"><span itemprop=name>Rudy Broersma</span></a>
—
<a href=https://superuser.com/a/1178598 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>Bekerja di Ubuntu Zesty</div><div>— <a href=https://superuser.com/users/458577/grammargeek target=_blank rel="nofollow noopener">Grammargeek</a></div></li><li class=list-group-item><div>Ini berfungsi pada Raspbian (dengan zsh) ketika jawaban yang diterima tidak.</div><div>— <a href=https://superuser.com/users/648516/alex-meuer target=_blank rel="nofollow noopener">Alex Meuer</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>3</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>3</div><div class=card-body><div itemprop=text><p>Tidak boleh. Motd adalah a <em>global</em> file, dibagikan di antara pengguna (itu / etc / motd), dan diperbarui hanya saat reboot (dan sesekali saya kira). Jadi tidak mungkin ada pengguna tertentu atau khusus sesi.</p><p>Sebagai gantinya, tambahkan pesan Anda ke <code>/etc/profile</code> untuk ditampilkan oleh shell:</p><pre><code>if [ -t 1 ] &amp;&amp; [ ! -f ~/.hushlogin ]; then
    echo "Welcome to $(hostname), $(whoami)!"
    echo "$(ddate). Have a nice day."
fi
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mencoba-mencetak-nama-pengguna-pada-message-of-the-day-motd-tjblokgv/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener"><span itemprop=name>user1686</span></a>
—
<a href=https://superuser.com/a/981899 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>Terima kasih atas jawaban Anda @grawity. Saya seorang pemula dalam skrip. Bisakah Anda menjelaskan kepada saya, tolong, pernyataan if Anda?</div><div>— <a href=https://superuser.com/users/505071/tzlima target=_blank rel="nofollow noopener">tzlima</a></div></li><li class=list-group-item><div>@tzlima: Bacalah seluruh halaman manual <code>test</code> (alias <code>[</code>), atau shell <code>bash</code>. Pemeriksaan pertama adalah apakah keluaran ke terminal (untuk menghindari kekacauan <i>batch</i> koneksi dengan pesan sampah); yang kedua adalah apakah pengguna telah memilih untuk <i>menyembunyikan</i> motd dengan membuat file <code>~/.hushlogin</code>.</div><div>— <a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener">user1686</a></div></li><li class=list-group-item><div>@grawity tidak tepat dengan mengatakan bahwa ini adalah file global. Ya, ini adalah file global, tetapi ini adalah file global yang dibaca oleh pengguna yang log in. Masalah yang dilihat oleh OP bukanlah bahwa ini adalah file global; masalahnya adalah ketika motd ditampilkan, itu ditampilkan sebagai root pengguna dan bukan pengguna yang masuk. Namun, solusi yang ditawarkan baik-baik saja. saya <i>berpikir</i> pada saat motd ditampilkan, tidak ada variabel untuk pengguna yang login. (Saya mencoba menemukannya juga.)</div><div>— <a href=https://superuser.com/users/764244/ray target=_blank rel="nofollow noopener">Ray</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>1</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-2><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>1</div><div class=card-body><div itemprop=text><p>Mengikuti tidak akan berfungsi untuk login lokal, tetapi sekali lagi motd saya tidak muncul di login lokal untuk saya dan OP sedang mencari solusi terkait SSH; jadi inilah mantra ajaib untuk menangkap nama pengguna dari pengguna terbaru yang telah masuk melalui SSH ke variabel dalam skrip motd.</p><pre><code>_user="$(grep 'sshd' /var/log/auth.log | awk '/Accepted publickey for/{print $9}' | tail -1)"
</code></pre><blockquote><p>Koreksi, <code>grep</code> sepertinya tidak diperlukan ...</p></blockquote><pre><code>_user="$(awk '/Accepted publickey for/ {print $9}' /var/log/auth.log | tail -1)"
</code></pre><p>Meskipun saya tidak yakin apa yang akan dilaporkan jika / ketika dua atau lebih pengguna masuk pada saat yang bersamaan; jadi jangan mengandalkannya untuk keamanan atau untuk menjaga privasi.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/mencoba-mencetak-nama-pengguna-pada-message-of-the-day-motd-tjblokgv/#answer-2 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/666508/s0ands0 target=_blank rel="nofollow noopener"><span itemprop=name>S0AndS0</span></a>
—
<a href=https://superuser.com/a/1365495 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=2>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=2><ul class="list-group list-group-flush"><li class=list-group-item><div>bagi saya itu berhasil setelah mengintip ke dalam file log dan menyesuaikan string pencarian di skrip ke <code>_user="$(grep 'sshd' /var/log/auth.log | awk '/session opened for user/{print $11}' | tail -1)"</code></div><div>— <a href=https://superuser.com/users/291919/tymric target=_blank rel="nofollow noopener">Tymric</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/apa-artinya-jika-laptop-windows-anda-menampilkan-quotpertimbangkan-untuk-mengganti-baterai-andaquot-s6b3lcy0/>Apa artinya jika laptop Windows Anda menampilkan "Pertimbangkan untuk Mengganti Baterai Anda"?</a></div></li><li class=list-group-item><div><a href=/sumproduct-dengan-kondisi-3chvu97f/>SUMPRODUCT dengan kondisi</a></div></li><li class=list-group-item><div><a href=/today-berfungsi-dengan-waktu-tertentu-yd5vrupr/>TODAY () berfungsi dengan waktu tertentu</a></div></li><li class=list-group-item><div><a href=/perlu-memulihkan-data-dari-laptop-sebelum-mengirimnya-untuk-diperbaiki-sg93qxvl/>Perlu memulihkan data dari laptop sebelum mengirimnya untuk diperbaiki</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-memperbarui-tanggal-akses-terakhir-file-dan-folder-di-windows-7-xrkpw50c/>Bagaimana cara memperbarui tanggal akses terakhir file dan folder di windows 7?</a></div></li><li class=list-group-item><div><a href=/fedora-21-permata-ubah-direktur-yang-dapat-dilaksanakan-oqmzsy8z/>Fedora 21 - Permata: ubah DIREKTUR YANG DAPAT DILAKSANAKAN</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-mengubah-port-ssh2-default-di-eclipse-q1syjjsm/>Bagaimana cara mengubah port SSH2 default di ECLIPSE?</a></div></li><li class=list-group-item><div><a href=/setara-dengan-latex-quoteqnarrayquot-di-editor-persamaan-microsoft-word-2007-vuajqpnv/>Setara dengan LaTeX "eqnarray" di editor persamaan Microsoft Word 2007?</a></div></li><li class=list-group-item><div><a href=/apakah-ada-alat-manajemen-baterai-acer-yang-membatasi-pengisian-baterai-haruskah-saya-repot-repot-i3rsfefa/>Apakah ada alat manajemen baterai Acer yang membatasi pengisian baterai? Haruskah saya repot-repot?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menghapus-membatalkan-unix-set-c-di-zsh-1vd3h6ca/>Bagaimana cara menghapus (membatalkan) unix set -C di zsh?</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>