<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Coerce scp (1), sftp (1), atau rsync (1) untuk mentransfer pipa bernama</title><meta name=description content="Saya bermaksud untuk mentransfer backup penuh dan inkremental dari subvolume btrfs saya ke layanan pengarsipan tape. Layanan memperlihatkan titik akhir FTP dan SSH. Jika saya diizinkan untuk menjalankan perintah sewenang-wenang pada titik..."><link rel=canonical href=https://www.idxstack.com/coerce-scp-1-sftp-1-atau-rsync-1-untuk-mentransfer-pipa-bernama-7sy7ekag/><meta property="og:title" content="Coerce scp (1), sftp (1), atau rsync (1) untuk mentransfer pipa bernama"><meta property="og:description" content="Saya bermaksud untuk mentransfer backup penuh dan inkremental dari subvolume btrfs saya ke layanan pengarsipan tape. Layanan memperlihatkan titik akhir FTP dan SSH. Jika saya diizinkan untuk menjalankan perintah sewenang-wenang pada titik..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/coerce-scp-1-sftp-1-atau-rsync-1-untuk-mentransfer-pipa-bernama-7sy7ekag/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Coerce scp (1), sftp (1), atau rsync (1) untuk mentransfer pipa bernama"><meta name=twitter:description content="Saya bermaksud untuk mentransfer backup penuh dan inkremental dari subvolume btrfs saya ke layanan pengarsipan tape. Layanan memperlihatkan titik akhir FTP dan SSH. Jika saya diizinkan untuk menjalankan perintah sewenang-wenang pada titik..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Coerce scp (1), sftp (1), atau rsync (1) untuk mentransfer pipa bernama</h1><div itemprop=text><p>Saya bermaksud untuk mentransfer backup penuh dan inkremental dari subvolume btrfs saya ke layanan pengarsipan tape. Layanan memperlihatkan titik akhir FTP dan SSH. Jika saya diizinkan untuk menjalankan perintah sewenang-wenang pada titik akhir SSH, maka saya akan melakukan hal berikut untuk melakukan pencadangan tambahan:</p><pre><code>btrfs send -p $LAST_SUBVOLUME $NEXT_SUBVOLUME | compress | encrypt |
    ssh -p $PORT $USER@$ENDPOINT "cat &gt; $SUBVOLUME.$YYYYMMDD.btrfs.bz2.gpg"
</code></pre><p>Saya, bagaimanapun, tidak diperbolehkan melakukan itu:</p><pre><code>$ ssh -p $PORT $USER@$ENDPOINT
Last login: Mon Jan  3 01:23:45 2067 from 123.456.789.123

This account is restricted by rssh.
Allowed commands: scp sftp rsync 

If you believe this is in error, please contact your system administrator.

Connection to some.remote.endpoint closed.
</code></pre><p>Jadi yang saya pikirkan untuk dilakukan adalah menggunakan protokol SCP untuk transfer. Namun, biner <code>scp</code> saya menolak untuk mentransfer pipa bernama:</p><pre><code>$ scp -P $PORT &lt;(btrfs send -p $LAST_SUBVOLUME $NEXT_SUBVOLUME | compress | encrypt) \
    $USER@$ENDPOINT:$SUBVOLUME.$YYYYMMDD.btrfs.bz2.gpg
/dev/fd/63: not a regular file
</code></pre><p><s>Ironisnya, ternyata, <a href=https://bugs.launchpad.net/ubuntu/+source/openssh/+bug/275418 rel="nofollow noopener" target=_blank><code>scp</code> dulu melakukan hal yang benar</a> . Saya kira tidak semua orang mengira mentransfer pipa bernama bisa waras / berguna.</s> <strong>EDIT (03-06-2017):</strong> Ini adalah observasi yang salah. Sebagaimana dicatat oleh Kenster, protokol SCP tidak mengizinkan pengiriman file dengan ukuran yang tidak diketahui.</p><p><strong>UPDATE (2017-06-04):</strong> Saya juga mencoba mentransfer data menggunakan protokol SFTP. Rupanya, protokol FTP mengizinkan pengiriman file dengan ukuran yang tidak diketahui, sebagaimana dibuktikan dengan dukungan untuk data perpipaan di <code>ftp</code> ( <a href=http://www.krazyworks.com/using-ftp-with-pipes/ rel="nofollow noopener" title="Using FTP with pipes | KrazyWorks" target=_blank>tautan</a> ) dan <code>ncftpput</code> ( <a href=http://www.ncftp.com/ncftp/doc/ncftpput.html rel="nofollow noopener" title="ncftpput(1) manual page" target=_blank>tautan</a> , bagian Deskripsi, paragraf terakhir) biner. Saya tidak menemukan dukungan seperti itu pada klien SFTP yang saya coba (<code>sftp</code>, <code>lftp</code>), yang mungkin merupakan indikasi bahwa SFTP (tidak seperti FTP) tidak mendukung pengiriman file dengan ukuran yang tidak diketahui (bertentangan dengan apa yang saya kira, SFTP bukan hanya FTP tunelled melalui SSH; itu adalah protokol yang berbeda).</p><p><strong>UPDATE (2017-06-05):</strong> Menurut draf internet protokol SFTP versi 3 ( <a href=https://filezilla-project.org/specs/draft-ietf-secsh-filexfer-02.txt rel="nofollow noopener" title="SSH File Transfer Protocol" target=_blank>tautan</a> ), setiap paket level aplikasi harus menentukan panjang payload sebelum payload ( <a href=https://filezilla-project.org/specs/draft-ietf-secsh-filexfer-02.txt rel="nofollow noopener" title="SSH File Transfer Protocol" target=_blank>tautan</a> , Bagian 3). Namun, SFTP mendukung pencarian dalam file tertulis ( <a href=https://filezilla-project.org/specs/draft-ietf-secsh-filexfer-02.txt rel="nofollow noopener" title="SSH File Transfer Protocol" target=_blank>tautan</a> , Bagian 6.4) dengan dukungan eksplisit untuk penulisan di luar akhir file saat ini. Oleh karena itu, jika memungkinkan untuk menggunakan buffer kecil di sisi klien dan mengirim file dengan ukuran yang tidak diketahui dalam potongan berukuran kecil yang diketahui:</p><pre><code>#!/bin/bash
# &lt;Exchange SSH_FXP_INIT requests.&gt;
# &lt;Send an SSH_FXP_OPEN request.&gt;
CHUNK_SIZE=32768
OFFSET=0
IFS=''; while read -r -N $CHUNK_SIZE CHUNK; do
  ACTUAL_SIZE=`cat &lt;&lt;&lt;"$CHUNK" | head -c -1 | wc -c`
  # &lt;Send an SSH_FXP_WRITE request with payload $CHUNK of size
  # $ACTUAL_SIZE at offset $OFFSET.&gt;
  OFFSET=$(($OFFSET+$ACTUAL_SIZE))
done &lt; &lt;(command)
# &lt;Send an SSH_FXP_CLOSE request.&gt;
</code></pre><p>Namun, melakukan komunikasi secara manual melalui cangkang akan sangat menyakitkan. Saya mencari klien SFTP yang memperlihatkan fungsionalitas semacam ini.</p><h1 class=h3>Referensi</h1><ul><li><a href=https://unix.stackexchange.com/questions/291272/can-you-scp-sftp-or-rsync-a-pipe target=_blank rel="nofollow noopener">Bisakah Anda scp, sftp, atau rsync, pipa? - Unix & Linux Stack Exchange</a></li><li><a href=https://serverfault.com/questions/400203/how-to-pipe-data-to-sftp-connection target=_blank rel="nofollow noopener">ssh - bagaimana cara menyalurkan data ke koneksi sftp? - Kesalahan Server</a></li><li><a href=http://www.krazyworks.com/using-ftp-with-pipes/ rel="nofollow noopener" title="Using FTP with pipes | KrazyWorks" target=_blank>Menggunakan FTP dengan pipa | KrazyWorks</a></li><li><a href=http://www.ncftp.com/ncftp/doc/ncftpput.html rel="nofollow noopener" title="ncftpput(1) manual page" target=_blank><code>ncftpput(1)</code> halaman manual</a></li><li><a href=https://filezilla-project.org/specs/draft-ietf-secsh-filexfer-02.txt rel="nofollow noopener" title="SSH File Transfer Protocol" target=_blank>Protokol Transfer File SSH</a></li></ul></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener"><span itemprop=name>Witiko</span></a>
—
<a href=https://superuser.com/questions/1215633/coerce-scp1-sftp1-or-rsync1-into-transferring-a-named-pipe target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div>Saya tidak melihat bahwa <code>scp</code> digunakan untuk menangani pipa. Laporan bug yang Anda tautkan menunjukkan bahwa itu digunakan untuk menggantung tanpa batas pada pipa; sekarang malah memperingatkan Anda. Kedengarannya seperti pelaporan kesalahan yang lebih baik, bukan perubahan perilaku yang mendasarinya.</div><div>— <a href=https://superuser.com/users/424595/user4556274 target=_blank rel="nofollow noopener">user4556274</a></div></li><li class=list-group-item><div>Yah, saya kira itu telah digantung tepat karena akan mulai membaca pipa bernama seperti file biasa.</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>3</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>3</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>3</div><div class=card-body><div itemprop=text><p><code>lftp</code> 4.6.1 dan yang lebih baru seharusnya dapat melakukan ini: <a href=https://github.com/lavv17/lftp/issues/104 rel="nofollow noopener" target=_blank>https://github.com/lavv17/lftp/issues/104</a></p><p>Sayangnya, perintah yang disarankan dalam masalah yang ditautkan tidak berfungsi, tetapi perintah yang sedikit dimodifikasi berfungsi:</p><pre><code>lftp -p $port sftp://$user:$pass@$host -e "put /dev/stdin -o $filename"
</code></pre><p>Karena a <a href=https://unix.stackexchange.com/a/205067/33227 target=_blank rel="nofollow noopener">bug</a> , Anda harus memberikan sesuatu di bidang sandi jika Anda menggunakan agen SSH. Tapi string acak apa pun bisa digunakan.</p><p>Perintah ini membaca dari <code>/dev/stdin</code>. Jika Anda harus menggunakan pipa dengan nama yang berbeda, saya rasa itu akan bekerja juga - jika tidak, Anda selalu dapat <code>cat named-pipe | lftp ...</code>.</p><p>Saya telah menguji <code>lftp</code> dengan unggahan> 100 GB tanpa masalah.</p><hr><p><code>rclone</code> juga mendukung SFTP, dan seharusnya dapat mengunggah dari input yang disalurkan dengan perintah <code>rcat</code>, yang akan dirilis pada 1,38 (versi berikutnya).</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/coerce-scp-1-sftp-1-atau-rsync-1-untuk-mentransfer-pipa-bernama-7sy7ekag/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/117590/bob target=_blank rel="nofollow noopener"><span itemprop=name>Bob</span></a>
—
<a href=https://superuser.com/a/1252714 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>Saya mendapatkan kesalahan <code>put: /dev/stdin: cannot seek on data source</code> dengan binari <code>lftp</code> 4.7.4 dan 4.8.1 yang dirilis oleh proyek Debian. Saya perlu memeriksa apakah ini adalah regresi dalam sumbernya, atau apakah ini adalah masalah build. Saya akan membuat ini menjadi jawaban yang diterima setelah saya berhasil mereproduksi hasil Anda.</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li><li class=list-group-item><div>@Witiko Itu menarik - karena saya menguji <code>lftp</code> saat ini di Debian Stretch. Versi paket <code>4.7.4-1</code>. LFTP versi 4.7.4, Readline 7.0, GnuTLS 3.5.8, zlib 1.2.8. Perintah lengkap yang saya jalankan termasuk pipa dari <code>openssl enc</code> melalui <code>pv</code> dan kemudian ke <code>lftp</code>.</div><div>— <a href=https://superuser.com/users/117590/bob target=_blank rel="nofollow noopener">Bob</a></div></li><li class=list-group-item><div>@Witiko Hanya sebagai contoh, <a href=https://gist.github.com/BobVul/86271ddaae2733d0f888875dd52c4d45 rel="nofollow noopener" target=_blank>gist.github.com/BobVul/86271ddaae2733d0f888875dd52c4d45</a></div><div>— <a href=https://superuser.com/users/117590/bob target=_blank rel="nofollow noopener">Bob</a></div></li><li class=list-group-item><div>Anda benar, saya salah menentukan port, yang membuat <code>lftp</code> mengeluarkan pesan kesalahan yang tidak membantu di atas. Terima kasih atas sarannya, sangat dihargai!</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li><li class=list-group-item><div>@Witiko Saya rasa saya tersandung pada ini dalam situasi yang sama persis dengan Anda (<code>zfs send | compress | encrypt | upload</code>) - sebenarnya penelitian Anda yang meyakinkan saya untuk melihat ke jalur SFTP daripada SCP / rsync. Jadi, terima kasih atas pertanyaan yang ditulis dengan sangat baik (dan Kenster atas analisisnya tentang SCP / SFTP). Hanya ingin tahu, apakah remote end Anda juga C14?</div><div>— <a href=https://superuser.com/users/117590/bob target=_blank rel="nofollow noopener">Bob</a></div></li><li class=list-group-item><div>Ya, benar.</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li><li class=list-group-item><div>Dengan LFTP 4.7.4, saya mendapatkan error <code>put: /dev/stdin: cannot seek on data source</code>.</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li><li class=list-group-item><div>@Witiko Apakah ada yang berubah sejak terakhir kali berfungsi?</div><div>— <a href=https://superuser.com/users/117590/bob target=_blank rel="nofollow noopener">Bob</a></div></li><li class=list-group-item><div>Bukan dari pihak saya, dan transfer berfungsi seperti biasa dengan localhost, tetapi sesuatu mungkin telah berubah di C14. Saya akan bermain-main dengan ini selama beberapa minggu ke depan dan melaporkan temuan saya.</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li><li class=list-group-item><div>@Witiko Anda mungkin lebih baik melaporkan masalah ke lftp devs. Mereka mungkin lebih tahu ke mana harus mencari.</div><div>— <a href=https://superuser.com/users/117590/bob target=_blank rel="nofollow noopener">Bob</a></div></li><li class=list-group-item><div>Tentu, saya akan melaporkan di sini hanya jika saya merasa jawabannya akan mendapat manfaat dari temuan saya.</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>6</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>6</div><div class=card-body><div itemprop=text><p>SCP tidak cocok untuk tujuan Anda. Protokol SCP tidak mendukung pengiriman aliran byte berukuran tidak diketahui ke sistem jarak jauh untuk disimpan sebagai file. Pesan protokol SCP untuk mengirim file membutuhkan ukuran file yang akan dikirim terlebih dahulu, diikuti oleh byte yang menyusun file tersebut. Dengan aliran byte yang dibaca dari pipa, Anda biasanya tidak akan tahu berapa banyak byte yang akan dihasilkan pipa sehingga tidak ada cara untuk mengirim pesan protokol SCP termasuk ukuran yang benar.</p><p>(Satu-satunya deskripsi online dari protokol SCP yang dapat saya temukan adalah <a href=https://web.archive.org/web/20170215184048/https://blogs.oracle.com/janp/entry/how_the_scp_protocol_works rel="nofollow noopener" target=_blank>sini</a> dan <a href=https://github.com/net-ssh/net-scp/blob/master/lib/net/scp.rb rel="nofollow noopener" target=_blank>sini</a> . Fokus pada deskripsi pesan "C".)</p><p>Protokol SFTP <em>bisa</em> digunakan untuk hal semacam ini. Sejauh yang saya tahu, utilitas baris perintah <code>sftp</code> normal tidak mendukung membaca pipa dan menyimpannya sebagai file jarak jauh. Tetapi ada pustaka SSH / SFTP untuk sebagian besar bahasa pemrograman modern (perl, python, ruby, C #, Java, C, dll). Jika Anda tahu cara menggunakan salah satu bahasa ini, seharusnya mudah untuk menulis utilitas yang melakukan apa yang Anda butuhkan.</p><p>Jika Anda terjebak dengan skrip shell, sangat mungkin untuk memalsukan cukup banyak protokol SCP untuk mentransfer file. Berikut contohnya:</p><pre><code>#!/bin/bash
cmd='cat /etc/group'

size=$($cmd | wc -c)    
{
        echo C0644 $size some-file
        $cmd
        echo -n -e '\000'
} | ssh user@host scp -v -p -t /some/directory
</code></pre><p>Ini akan membuat <code>some-file</code> pada <code>/some/directory</code> pada sistem jarak jauh dengan izin 644. Isi file akan menjadi apa pun yang <code>$cmd</code> tulis ke keluaran standarnya. Perhatikan bahwa Anda menjalankan perintah dua kali, dengan konsumsi sumber daya dan efek samping apa pun yang menyiratkannya. Dan perintahnya <em>harus</em> menghasilkan jumlah byte yang sama setiap kali.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/coerce-scp-1-sftp-1-atau-rsync-1-untuk-mentransfer-pipa-bernama-7sy7ekag/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/54530/kenster target=_blank rel="nofollow noopener"><span itemprop=name>Kenster</span></a>
—
<a href=https://superuser.com/a/1215719 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>Saya akan sangat senang untuk melakukan dua operan - yang pertama untuk mengetahui ukurannya dan yang kedua untuk melakukan pengiriman melalui scp; ini bukan solusi yang paling elegan, tetapi incremental backup semuanya akan di-cache di RAM. Perpustakaan adalah pilihan, tapi saya berharap saya bisa melakukan ini dari shell.</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li><li class=list-group-item><div>Terima kasih atas penelitian yang dilakukan untuk menulis skrip shell itu. Bagi saya, ini adalah jawaban yang memuaskan untuk pertanyaan awal. Namun, saya masih akan menjelajahi rute SFTP, karena perbedaan kecepatan antara single-pass dan two-pass akan terlihat untuk backup yang lebih besar.</div><div>— <a href=https://superuser.com/users/136765/witiko target=_blank rel="nofollow noopener">Witiko</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>2</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-2><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>2</div><div class=card-body><div itemprop=text><p>Jika Anda bisa menulis perl, Anda bisa mencoba menggunakan <a href=https://metacpan.org/pod/Net::SFTP::Foreign rel="nofollow noopener" target=_blank>Net :: SFTP :: Asing</a> yang dapat mentransfer file dari deskriptor file terbuka melalui SFTP:</p><pre><code>#!/usr/bin/perl
# untested!
use Net::SFTP::Foreign;
my $user = ...;
my $host = ...;
my $remote_path = ...;
my $btrfs_cmd = 'btrfs send -p $LAST_SUBVOLUME $NEXT_SUBVOLUME';
my $sftp = Net::SFTP::Foreign-&gt;new("$user\@$host", ...);
open my($pipe), "$btrfs_cmd | compress | encrypt |"
    or die $!;
$sftp-&gt;put($fh, $remote_path);
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/coerce-scp-1-sftp-1-atau-rsync-1-untuk-mentransfer-pipa-bernama-7sy7ekag/#answer-2 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/42742/salva target=_blank rel="nofollow noopener"><span itemprop=name>salva</span></a>
—
<a href=https://superuser.com/a/1262071 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/mengapa-beberapa-tampilan-komputer-awal-melingkar-rjtjfojy/>Mengapa beberapa tampilan komputer awal melingkar?</a></div></li><li class=list-group-item><div><a href=/bagaimana-menjahit-halaman-halaman-web-menjadi-satu-halaman-untuk-dicetak-tzdkinah/>Bagaimana menjahit (halaman) halaman web menjadi satu halaman untuk dicetak</a></div></li><li class=list-group-item><div><a href=/bagaimana-enkripsi-bittorrent-mencegah-serangan-man-in-the-middle-bmmfggw8/>Bagaimana enkripsi Bittorrent mencegah serangan man-in-the-middle?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menerapkan-trek-audio-ke-video-tanpa-suara-h264-mp4-tanpa-kehilangan-cwztlax3/>Bagaimana cara menerapkan trek audio ke video tanpa suara h264 / mp4 tanpa kehilangan?</a></div></li><li class=list-group-item><div><a href=/terjadi-masalah-saat-mengedit-bash-profile-bash-39-r39-perintah-tidak-ditemukan-yxgydfkv/>Terjadi masalah saat mengedit ~ / .bash_profile: -bash: $ '\ r': perintah tidak ditemukan</a></div></li><li class=list-group-item><div><a href=/periksa-dua-kondisi-dalam-dua-kolom-berbeda-di-excel-dan-hitung-kecocokan-hr1zkgnj/>periksa dua kondisi dalam dua kolom berbeda di excel dan hitung kecocokan</a></div></li><li class=list-group-item><div><a href=/repositori-lintas-platform-yang-dihosting-sendiri-untuk-file-besar-ditutup-brhwl7j3/>Repositori lintas platform yang dihosting sendiri untuk file besar [ditutup]</a></div></li><li class=list-group-item><div><a href=/tiga-monitor-1920x1200-ditutup-9en72sfp/>Tiga monitor 1920x1200 [ditutup]</a></div></li><li class=list-group-item><div><a href=/hentikan-pekerjaan-cron-untuk-interval-waktu-tertentu-fzulcp2t/>Hentikan pekerjaan Cron untuk interval waktu tertentu</a></div></li><li class=list-group-item><div><a href=/kecepatan-lambat-pada-samsung-ssd-pm800-256gb-pada-lenovo-w500-pzgxmxgi/>Kecepatan lambat pada Samsung SSD PM800 256gb pada Lenovo W500</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>