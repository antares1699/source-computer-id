<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Bagaimana perangkat PCI diakses?</title><meta name=description content="Saya punya 2 pertanyaan terkait bus PCI:  Bagaimana driver perangkat mengakses perangkat pada bus PCI? Apakah cukup untuk menulis ke wilayah memori yang dialokasikan untuk perangkat (mov memory_space_allocated_for_dev, something, jika perangkat adalah..."><link rel=canonical href=https://www.idxstack.com/bagaimana-perangkat-pci-diakses-gr5cc94z/><meta property="og:title" content="Bagaimana perangkat PCI diakses?"><meta property="og:description" content="Saya punya 2 pertanyaan terkait bus PCI:  Bagaimana driver perangkat mengakses perangkat pada bus PCI? Apakah cukup untuk menulis ke wilayah memori yang dialokasikan untuk perangkat (mov memory_space_allocated_for_dev, something, jika perangkat adalah..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/bagaimana-perangkat-pci-diakses-gr5cc94z/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Bagaimana perangkat PCI diakses?"><meta name=twitter:description content="Saya punya 2 pertanyaan terkait bus PCI:  Bagaimana driver perangkat mengakses perangkat pada bus PCI? Apakah cukup untuk menulis ke wilayah memori yang dialokasikan untuk perangkat (mov memory_space_allocated_for_dev, something, jika perangkat adalah..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Bagaimana perangkat PCI diakses?</h1><div itemprop=text><p>Saya punya 2 pertanyaan terkait bus PCI:</p><p>Bagaimana driver perangkat mengakses perangkat pada bus PCI? Apakah cukup untuk menulis ke wilayah memori yang dialokasikan untuk perangkat (<code>mov memory_space_allocated_for_dev, something</code>, jika perangkat adalah memori yang dipetakan, atau <code>out io_space_allocated for_dev, something</code> jika tidak) (apakah perangkat keras akan menerjemahkan upaya ini untuk mengakses lokasi memori ke rangkaian perintah PCI pada bus PCI, dll.?).</p><p>Apakah benar bahwa setelah mengatur semua perangkat di semua bus PCI (mis. Mengalokasikan ruang memori, menghitung bus, dll.), Driver perangkat tidak perlu mengetahui apakah bus PCI ada atau decoding memori dilakukan dengan decoder sederhana (seperti di komputer lama ) (mis. mereka hanya menulis dan membaca dari beberapa lokasi memori untuk mengakses perangkat)?</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/604691/maplaz target=_blank rel="nofollow noopener"><span itemprop=name>maplaz</span></a>
—
<a href=https://superuser.com/questions/1087635/how-are-pci-devices-accessed target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>2</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>7</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>7</div><div class=card-body><div itemprop=text><p>Perangkat PCI (e) yang dipetakan memori akan memiliki BAR (register alamat dasar) yang memungkinkan host mengetahui berapa banyak memori yang harus dialokasikan untuk perangkat tersebut. BIOS (dan OS selanjutnya) akan mengalokasikan ruang memori yang diminta ke perangkat target - bukan memori <strong>alamat</strong> , bit fisik tidak dialokasikan. Selain itu, ini umumnya akan menjadi <strong>ingatan fisik</strong> alamat, bukan alamat memori virtual. Kernel Linux akan mengatur akses ke perangkat ini dengan fungsi seperti mmap () yang memungkinkan pemetaan memori fisik ke alamat memori virtual.</p><p>Misalnya, Anda memiliki perangkat PCIe yang mengontrol 8 LED. Sebagai pembuat perangkat, saya dapat meminta BAR yang sangat kecil dari 1K ruang alamat. BIOS dapat memberi saya alamat fisik pada sistem 32-bit dari 0xE000_0000 hingga 0xE000_0400 (catatan tambahan: Anda harus melihat di sini sekarang mengapa sistem 32-bit dan GPU dengan VRAM besar tidak bekerja sama dengan baik).</p><p>Sekarang, jika saya menulis katakan 0xF0 ke lokasi memori 0xE000_0000 dengan penulisan satu byte, itu akan menyalakan LED 7 hingga 4, dan membiarkan 3 hingga 0 mati. Itu saja - ini adalah I / O yang dipetakan dengan memori sederhana. Menambahkan pada lapisan abstraksi, di Linux, Anda akan menggunakan subsistem PCI yang sangat baik dan menulis driver yang dimuat untuk string ID Vendor + ID Perangkat tertentu. Anda kemudian dapat menulis aplikasi userspace yang memanggil driver kernel tersebut, di mana panggilan mmap () dapat memetakan memori ke dalam userspace, memungkinkan aplikasi userspace Anda untuk membaca / menulis byte pada beberapa alamat memori virtual yang akan diterjemahkan dan berakhir. dalam ruang memori fisik tempatnya.</p><p>x86 tentu saja memiliki ruang I / O, dan perilakunya sangat mirip, kecuali tingkat rendah di kernel, instruksi outb / outw / outl (dan sepupu inputnya) akan digunakan untuk menulis / membaca dari ruang I / O, vs. instruksi baca / tulis memori. Sekali lagi, aplikasi userspace harus berkomunikasi melalui ioctls () dan segmen memori yang dipetakan karena kernel bertanggung jawab atas keamanan / akses ke memori seperti itu.</p><p>Untuk pertanyaan kedua Anda, jenis campuran di atas, tetapi driver PCIe modern untuk Linux akan bersandar pada subsistem PCI untuk banyak hal pemeliharaan rumah tingkat rendah. Anda biasanya menentukan Vendor / ID Perangkat apa yang menjadi tanggung jawab Anda, dan kemudian menulis fungsi .probe () yang menarik IRQ Anda dan melakukan pengaturan perangkat - memori Anda diserahkan kepada Anda.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/bagaimana-perangkat-pci-diakses-gr5cc94z/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/539671/krunal-desai target=_blank rel="nofollow noopener"><span itemprop=name>Krunal Desai</span></a>
—
<a href=https://superuser.com/a/1095067 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>0</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>0</div><div class=card-body><div itemprop=text><p>Sudah lama, tetapi jika saya ingat dengan benar, driver kernel Anda akan menyiapkan perangkat di / dev yang memetakan ke alamat memori yang dialokasikan ke perangkat PCI baik oleh BIOS atau kernel. Program ruang pengguna dengan izin yang sesuai kemudian akan membuka, membaca / menulis / mencari, dan menutup / dev / file itu untuk berinteraksi dengan perangkat PCI. Lihat bab 12 dari Driver Perangkat Linux: <a href=https://lwn.net/Kernel/LDD3/ rel="nofollow noopener" target=_blank>https://lwn.net/Kernel/LDD3/</a></p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/bagaimana-perangkat-pci-diakses-gr5cc94z/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/292524/isaac target=_blank rel="nofollow noopener"><span itemprop=name>Isaac</span></a>
—
<a href=https://superuser.com/a/1087752 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/menyembunyikan-permintaan-saya-dari-firebug-gray2lrl/>Menyembunyikan permintaan saya dari FireBug</a></div></li><li class=list-group-item><div><a href=/hapus-semua-file-sisa-microsoft-visio-2013-6ihifxfz/>Hapus Semua File Sisa Microsoft Visio 2013</a></div></li><li class=list-group-item><div><a href=/di-mana-pengaturan-proxy-disimpan-di-ubuntu-1204-avgup2iy/>Di mana pengaturan proxy disimpan di Ubuntu 12.04?</a></div></li><li class=list-group-item><div><a href=/pisahkan-string-teks-menjadi-kolom-terpisah-di-excel-ywzpcpob/>Pisahkan string teks menjadi kolom terpisah di Excel</a></div></li><li class=list-group-item><div><a href=/hapus-daftar-direktori-yang-panjang-di-prompt-shell-ea1ruasm/>Hapus daftar Direktori yang panjang di prompt shell</a></div></li><li class=list-group-item><div><a href=/bagaimana-saya-bisa-masuk-ke-bios-di-sony-vaio-vpceh25en-saya-rr1jjdkr/>Bagaimana saya bisa masuk ke BIOS di Sony Vaio VPCEH25EN saya</a></div></li><li class=list-group-item><div><a href=/cara-mengatur-variabel-lingkungan-untuk-sesi-gnome-wayland-twbp1835/>Cara mengatur variabel lingkungan untuk sesi Gnome Wayland</a></div></li><li class=list-group-item><div><a href=/membuat-animasi-dari-serangkaian-dokumen-word-mpph67af/>Membuat animasi dari serangkaian dokumen Word</a></div></li><li class=list-group-item><div><a href=/tgz-tidak-mengekstrak-dengan-benar-mpxoxrcz/>.tgz tidak mengekstrak dengan benar</a></div></li><li class=list-group-item><div><a href=/cara-format-usb-dibuat-dengan-menggunakan-win32diskimagerexe-6ujodnvj/>Cara format USB dibuat dengan menggunakan win32DiskImager.exe</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>