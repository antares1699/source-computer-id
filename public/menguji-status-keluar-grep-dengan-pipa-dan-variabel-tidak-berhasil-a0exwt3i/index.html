<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Menguji status keluar grep dengan pipa dan variabel tidak berhasil</title><meta name=description content="Saya perlu perintah bash test sesingkat mungkin (tes braket) untuk mengevaluasi hasil grep pipa dengan variabel sebagai argumen pencarian. Saya menguji, apakah string baru ada di dalam array - memipakan isi array..."><link rel=canonical href=https://www.idxstack.com/menguji-status-keluar-grep-dengan-pipa-dan-variabel-tidak-berhasil-a0exwt3i/><meta property="og:title" content="Menguji status keluar grep dengan pipa dan variabel tidak berhasil"><meta property="og:description" content="Saya perlu perintah bash test sesingkat mungkin (tes braket) untuk mengevaluasi hasil grep pipa dengan variabel sebagai argumen pencarian. Saya menguji, apakah string baru ada di dalam array - memipakan isi array..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/menguji-status-keluar-grep-dengan-pipa-dan-variabel-tidak-berhasil-a0exwt3i/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Menguji status keluar grep dengan pipa dan variabel tidak berhasil"><meta name=twitter:description content="Saya perlu perintah bash test sesingkat mungkin (tes braket) untuk mengevaluasi hasil grep pipa dengan variabel sebagai argumen pencarian. Saya menguji, apakah string baru ada di dalam array - memipakan isi array..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Menguji status keluar grep dengan pipa dan variabel tidak berhasil</h1><div itemprop=text><p>Saya perlu perintah bash test sesingkat mungkin (tes braket) untuk mengevaluasi hasil grep pipa dengan variabel sebagai argumen pencarian. Saya menguji, apakah string baru ada di dalam array - memipakan isi array sebagai baris ke grep dan memeriksa kode keluar. Tapi entah bagaimana itu tidak berhasil. Tidak menemukan nilai dalam larik. Saya telah mencoba dengan berbagai cara tanda kurung, tanda kurung, tanda kutip, titik koma tidak berhasil.
Ada apa disini?</p><pre><code>#! /bin/bash
startLineNrs=();
startLineNrs+=("45");
startLineNrs+=("280");
startLineNrs+=("80");
startLineNr="280";
echo "\$startLineNrs:" ${#startLineNrs[@]};
printf '%s\n' "${startLineNrs[@]}";
[ "$(printf '%s\n' ${startLineNrs[@]} | grep -xq ${startLineNr})" ] &amp;&amp; { echo $?; echo Found ;} || { echo $?; echo Not found ;}
</code></pre><p>Pada dasarnya saya ingin memahami if ... then construct versus the brackets test. Metode if ... then berfungsi:</p><pre><code>if !( printf '%s\n' "${startLineNrs[@]}" | grep -xq "${startLineNr}" ); then startLineNrs+=("$startLineNr") ; fi
</code></pre></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/385226/uldics target=_blank rel="nofollow noopener"><span itemprop=name>uldics</span></a>
—
<a href=https://superuser.com/questions/1305355/testing-grep-exit-status-with-pipe-and-variable-unsuccessful target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div>FYI, <code>$?</code> hanya mengembalikan status keluar terakhir pipa, jika Anda memiliki rangkaian pipa yang lebih panjang Anda mungkin ingin $ PIPESTATUS</div><div>— <a href=https://superuser.com/users/307834/xen2050 target=_blank rel="nofollow noopener">Xen2050</a></div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>2</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>3</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>3</div><div class=card-body><div itemprop=text><p>Untuk membuat perintah <code>&&</code>--<code>||</code> berfungsi, coba:</p><pre><code>printf '%s\n' ${startLineNrs[@]} | grep -xq ${startLineNr}  &amp;&amp; { echo $?; echo Found ;} || { echo $?; echo Not found ;}
</code></pre><p>Catatan:</p><ol><li><p>Perintah uji (<code>[</code>) dan substitusi perintah (<code>$(...)</code>) tidak diperlukan.</p></li><li><p>Kehalusan dari konstruksi <code>a && b || c</code> adalah bahwa <code>c</code> akan dijalankan tidak hanya jika <code>a</code> gagal tetapi juga jika <code>b</code> gagal. Karena <code>b</code> Anda terdiri dari <code>echo</code> pernyataan yang biasanya berhasil, ini biasanya tidak menjadi masalah.</p></li><li><p>Untuk metode lain untuk menguji keanggotaan array, lihat <a href=https://stackoverflow.com/questions/3685970/check-if-a-bash-array-contains-a-value target=_blank rel="nofollow noopener">"Periksa apakah array Bash berisi nilai"</a> .</p></li></ol></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/menguji-status-keluar-grep-dengan-pipa-dan-variabel-tidak-berhasil-a0exwt3i/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/277295/john1024 target=_blank rel="nofollow noopener"><span itemprop=name>John1024</span></a>
—
<a href=https://superuser.com/a/1305360 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>3</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>3</div><div class=card-body><div itemprop=text><p>Cara yang benar untuk menulis pernyataan if Anda adalah:</p><pre><code>if printf '%s\n' "${startLineNrs[@]}" | grep -xq "$startLineNr"; then
  # your logic
fi
</code></pre><p>Masalah dengan pernyataan pengujian Anda <code>[...]</code> adalah bahwa <code>[</code> atau <code>test</code> memperlakukan <code>"$(printf '%s\n' ${startLineNrs[@]} | grep -xq ${startLineNr})</code> sebagai string, dan tidak menjalankannya sebagai substitusi perintah. Karena ini adalah string yang tidak kosong, ini akan selalu bernilai true.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/menguji-status-keluar-grep-dengan-pipa-dan-variabel-tidak-berhasil-a0exwt3i/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/654416/codeforester target=_blank rel="nofollow noopener"><span itemprop=name>codeforester</span></a>
—
<a href=https://superuser.com/a/1305359 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/excel-libreoffice-mengembalikan-true-untuk-if-dan-bukan-ekspresi-kbdpjdko/>Excel / Libreoffice mengembalikan TRUE untuk IF () dan bukan ekspresi</a></div></li><li class=list-group-item><div><a href=/program-kecil-untuk-mengatur-ukuran-jendela-dengan-cepat-untuk-tangkapan-layar-yang-konsisten-untuk-file-bantuan-situs-web-dll-duplikat-qxrgwrit/>Program kecil untuk mengatur ukuran jendela dengan cepat, untuk tangkapan layar yang konsisten untuk file bantuan, situs web, dll.? [duplikat]</a></div></li><li class=list-group-item><div><a href=/apakah-mungkin-untuk-menonaktifkan-virtual-clone-drive-agar-tidak-berjalan-saat-startup-rvmspmjv/>Apakah mungkin untuk menonaktifkan Virtual Clone Drive agar tidak berjalan saat startup?</a></div></li><li class=list-group-item><div><a href=/bagaimana-thunderbird-melindungi-privasi-saya-ceiogfv6/>Bagaimana Thunderbird melindungi privasi saya?</a></div></li><li class=list-group-item><div><a href=/aplikasi-pemecahan-masalah-macet-di-mac-os-x-e5ffh6qh/>Aplikasi Pemecahan Masalah Macet di Mac OS X</a></div></li><li class=list-group-item><div><a href=/apa-itu-winlogonexe-specialsession-vt9hw6xv/>Apa itu winlogon.exe -SpecialSession?</a></div></li><li class=list-group-item><div><a href=/rata-rata-sel-yang-cocok-dengan-kriteria-dan-menghapus-duplikat-di-excel-cs0t4wxg/>Rata-rata sel yang cocok dengan kriteria dan menghapus duplikat di Excel</a></div></li><li class=list-group-item><div><a href=/macports-fink-hombrew-proses-latar-belakang-7g3o0u9q/>Macports, Fink, Hombrew: Proses Latar Belakang?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menambahkan-ruang-di-dalam-sel-di-excel-rmqaqms2/>Bagaimana cara menambahkan ruang di dalam sel di Excel?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-membuat-screensaver-berfungsi-pada-banyak-monitor-qjlappvv/>Bagaimana cara membuat screensaver berfungsi pada banyak monitor?</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>