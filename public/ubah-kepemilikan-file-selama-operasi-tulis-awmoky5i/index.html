<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Ubah kepemilikan file selama operasi tulis</title><meta name=description content="Secara default umask adalah 0022:  usera@cmp$ touch somefile; ls -ltotal 0-rw-r--r-- 1 usera usera 0 2009-09-22 22:30 somefile  Direktori /home/shared/ dimaksudkan untuk file bersama dan harus dimiliki oleh grup root..."><link rel=canonical href=https://www.idxstack.com/ubah-kepemilikan-file-selama-operasi-tulis-awmoky5i/><meta property="og:title" content="Ubah kepemilikan file selama operasi tulis"><meta property="og:description" content="Secara default umask adalah 0022:  usera@cmp$ touch somefile; ls -ltotal 0-rw-r--r-- 1 usera usera 0 2009-09-22 22:30 somefile  Direktori /home/shared/ dimaksudkan untuk file bersama dan harus dimiliki oleh grup root..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/ubah-kepemilikan-file-selama-operasi-tulis-awmoky5i/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ubah kepemilikan file selama operasi tulis"><meta name=twitter:description content="Secara default umask adalah 0022:  usera@cmp$ touch somefile; ls -ltotal 0-rw-r--r-- 1 usera usera 0 2009-09-22 22:30 somefile  Direktori /home/shared/ dimaksudkan untuk file bersama dan harus dimiliki oleh grup root..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Ubah kepemilikan file selama operasi tulis</h1><div itemprop=text><p>Secara default umask adalah 0022:</p><pre><code>usera@cmp$ touch somefile; ls -l
total 0
-rw-r--r-- 1 usera usera 0 2009-09-22 22:30 somefile
</code></pre><p>Direktori <code>/home/shared/</code> dimaksudkan untuk file bersama dan harus dimiliki oleh grup <code>root</code> dan <code>shared</code>. File dibuat di sini oleh <code>user</code> <strong>n</strong> (setiap pengguna) secara otomatis dimiliki oleh grup <code>shared</code>. Ada tugas cron yang menangani perubahan pengguna yang memiliki dan memiliki grup (dari file yang dipindahkan) sekali sehari:</p><pre><code>usera@cmp$ cat /etc/cron.daily/sharedscript

#!/bin/bash

chown -R root:shared /home/shared/
chmod -R 770 /home/shared/
</code></pre><p>Saya sedang menulis <em>sangat besar</em> file ke direktori bersama. Itu membuat saya (<code>usera</code>) sebagai pengguna yang memiliki dan grup <code>shared</code> sebagai pemilik grup. Selama operasi tulis, tugas cron dijalankan, dan saya masih tidak mengalami masalah dalam menyelesaikan proses tulis.</p><p>Kamu melihat. Saya pikir ini akan terjadi:</p><ol><li>Saya sedang menulis file. Izin file dan data kepemilikan untuk file tersebut terlihat seperti ini: <code>-rw-r--r-- usera shared</code></li><li>Pekerjaan cron dimulai! Garis chown diproses dan sekarang file tersebut dimiliki oleh pengguna <code>root</code> dan grup <code>shared</code>.</li><li>Karena grup pemilik hanya memiliki akses baca ke file, saya mendapatkan kesalahan penulisan file! Ledakan! Akhir dari cerita.</li></ol><p>Mengapa operasinya berhasil? Tautan ke beberapa jenis dokumentasi referensi untuk mendukung alasan akan sangat disambut (karena saya dapat menggunakannya untuk mempelajari lebih detail).</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/2618/deleted target=_blank rel="nofollow noopener"><span itemprop=name>Deleted</span></a>
—
<a href=https://superuser.com/questions/45293/change-file-ownership-during-write-operation target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div>Lihat opsi SGID bit dari chmod (dalam jawaban johnathan di bawah). Ini akan menyelamatkan Anda dari keharusan mengatur grup dengan cron.</div><div>— <a href=https://superuser.com/users/4530/chris-nava target=_blank rel="nofollow noopener">Chris Nava</a></div></li><li class=list-group-item><div>@ Chris: Saya tahu tentang itu. Tapi saya butuh sesuatu yang memperbaiki file yang dipindahkan juga.</div><div>— <a href=https://superuser.com/users/2618/deleted target=_blank rel="nofollow noopener">Deleted</a></div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>3</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>7</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>7</div><div class=card-body><div itemprop=text><p>Afaik, <a href=http://www.unix.org/2008edition/ rel="nofollow noopener" target=_blank>POSIX 1003.1</a> hanya membutuhkan fopen untuk mengembalikan kesalahan [EACCES] pada hak istimewa yang tidak memadai. Operasi selanjutnya seperti fputc mungkin mengembalikan kesalahan deskriptor file [EBADF] yang buruk, tetapi menurut saya itu tidak dimaksudkan untuk menutupi perubahan izin saat file terbuka.</p><p>Bertahun-tahun yang lalu, saya bekerja di perusahaan tempat server AIX kami disiapkan sehingga mereka menggunakan properti itu untuk membuat file log lebih aman. Ketika sebuah layanan dimulai, root akan menyentuh /var/log/service.log, lalu menghubungkannya ke serveruser: servergroup, su - start layanan (ini akan membuka file dalam mode append), dan kemudian chown file tersebut kembali ke root. Akibatnya, layanan dapat menambahkan logfile-nya sendiri, tetapi tidak menghapus atau menimpanya, jadi jika penyerang berhasil menyusupi layanan, dia tidak dapat merusak entri log sebelumnya.</p><p>Trik serupa dapat digunakan untuk file sementara: buka file, lalu hapus. Entri direktori hilang dan file tidak terlihat, tetapi karena pegangan file masih terbuka, inode masih ada. Setelah Anda menutup file, jumlah tautan menjadi nol, dan OS mengambil kembali ruang disk.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/ubah-kepemilikan-file-selama-operasi-tulis-awmoky5i/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/10688/wallenborn target=_blank rel="nofollow noopener"><span itemprop=name>wallenborn</span></a>
—
<a href=https://superuser.com/a/45689 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>5</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>5</div><div class=card-body><div itemprop=text><p>Menurut saya alasannya adalah ketika cron masuk, Anda masih memiliki pegangan yang valid untuk file tersebut, sehingga Anda dapat menggunakannya secara normal .. Dengan kata lain, sistem memeriksa hak Anda hanya ketika Anda mencoba membukanya, bukan pada setiap file operasi.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/ubah-kepemilikan-file-selama-operasi-tulis-awmoky5i/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/2226/joril target=_blank rel="nofollow noopener"><span itemprop=name>Joril</span></a>
—
<a href=https://superuser.com/a/45307 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>Ya, saya juga condong ke arah ini. Apakah Anda tahu sumber mana saya dapat membaca lebih lanjut tentang ini? Saya ingin tahu apakah ini portabel di antara semua kesatuan. Jika itu bagian dari standar POSIX.</div><div>— <a href=https://superuser.com/users/2618/deleted target=_blank rel="nofollow noopener">Deleted</a></div></li><li class=list-group-item><div>Saya khawatir saya tidak tahu .. :( Mungkin seseorang di ServerFault akan melakukannya? Saya pikir itu akan menjadi "audiens" yang lebih baik untuk pertanyaan seperti ini ..</div><div>— <a href=https://superuser.com/users/2226/joril target=_blank rel="nofollow noopener">Joril</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>2</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-2><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>2</div><div class=card-body><div itemprop=text><p>Seperti yang dikatakan Joril, hak akses relevan saat file dibuka; mereka tidak diperiksa setelahnya.</p><p>Ingatlah bahwa Anda dapat membuat file untuk menulis dengan 400 (atau 444, atau 000) izin pada file tersebut. Anda memerlukan izin untuk membuat file di direktori, tentu saja, tetapi Anda dapat memiliki akses tulis ke file yang tidak dapat diubah oleh orang lain (kecuali root).</p><p>Perhatikan juga bahwa grup dapat diatur secara default dengan mengatur bit SGID pada direktori holding:</p><pre><code>chmod g+s /home/shared
</code></pre><p>Semua file yang dibuat dalam direktori akan menjadi milik grup yang memiliki <code>/home/shared</code> hingga grup tersebut diubah. Di MacOS X, sistem berperilaku seolah-olah bit SGID disetel di setiap direktori - saat file disalin ke direktori, grup disetel ke grup yang memiliki direktori tersebut.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/ubah-kepemilikan-file-selama-operasi-tulis-awmoky5i/#answer-2 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/3089/jonathan-leffler target=_blank rel="nofollow noopener"><span itemprop=name>Jonathan Leffler</span></a>
—
<a href=https://superuser.com/a/45309 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=2>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=2><ul class="list-group list-group-flush"><li class=list-group-item><div>Saya tahu tentang SGID-bit dan saya menggunakannya. Tetapi itu tidak berfungsi untuk file yang saya buat di tempat lain yang kemudian dipindahkan ke <code>/home/shared</code>, yang diurus oleh cron-job. Tapi itu adalah hal sepele yang bagus dan menarik untuk mempelajari perbedaannya di MacOS X.</div><div>— <a href=https://superuser.com/users/2618/deleted target=_blank rel="nofollow noopener">Deleted</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/jalankan-layanan-windows-tanpa-hak-administrator-9li9mvdh/>Jalankan layanan Windows tanpa hak administrator</a></div></li><li class=list-group-item><div><a href=/apakah-mungkin-untuk-mengikat-kombinasi-tombol-windows-ke-aplikasi-yang-sedang-terbuka-krpqbufq/>Apakah mungkin untuk mengikat kombinasi tombol windows ke aplikasi yang sedang terbuka?</a></div></li><li class=list-group-item><div><a href=/tidak-yakin-cara-mempersingkat-rumus-l0m2gcfk/>Tidak yakin cara mempersingkat rumus</a></div></li><li class=list-group-item><div><a href=/file-umum-linux-antara-dua-folder-yat2rkjm/>file umum linux antara dua folder</a></div></li><li class=list-group-item><div><a href=/algoritme-kunci-simetris-mana-yang-digunakan-ssl-vvzgomoc/>Algoritme kunci simetris mana yang digunakan SSL?</a></div></li><li class=list-group-item><div><a href=/apakah-hdd-5400rpm-memiliki-masa-pakai-lebih-lama-dari-7200rpm-mt4tc03h/>Apakah HDD 5400rpm memiliki masa pakai lebih lama dari 7200rpm?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-memformat-mac-saya-dan-menginstal-snow-leopard-dari-awal-rybsmhcd/>Bagaimana cara memformat Mac saya dan menginstal Snow Leopard dari awal?</a></div></li><li class=list-group-item><div><a href=/mengapa-anydesk-sering-terputus-qvlxmxdf/>Mengapa anydesk sering terputus?</a></div></li><li class=list-group-item><div><a href=/apakah-video-digital-menurun-seiring-waktu-seperti-pita-analog-bseotexx/>Apakah video digital menurun seiring waktu seperti pita analog?</a></div></li><li class=list-group-item><div><a href=/pengalihan-argumen-xargs-pfoeu0un/>pengalihan argumen xargs</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>