<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Merutekan antara 7 (tujuh!) Subnet, 2 di antaranya memiliki IP yang ditetapkan secara dinamis</title><meta name=description content="Saya menggunakan RaspberryPi (Raspbian OS) dalam skema perutean yang sangat kompleks, yang dapat saya kelola hingga jumlah subnet adalah lima :)  Saat ini, saya memiliki antarmuka berikut, seperti yang ditunjukkan oleh ifconfig:..."><link rel=canonical href=https://www.idxstack.com/merutekan-antara-7-tujuh-subnet-2-di-antaranya-memiliki-ip-yang-ditetapkan-secara-dinamis-slivdpdy/><meta property="og:title" content="Merutekan antara 7 (tujuh!) Subnet, 2 di antaranya memiliki IP yang ditetapkan secara dinamis"><meta property="og:description" content="Saya menggunakan RaspberryPi (Raspbian OS) dalam skema perutean yang sangat kompleks, yang dapat saya kelola hingga jumlah subnet adalah lima :)  Saat ini, saya memiliki antarmuka berikut, seperti yang ditunjukkan oleh ifconfig:..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/merutekan-antara-7-tujuh-subnet-2-di-antaranya-memiliki-ip-yang-ditetapkan-secara-dinamis-slivdpdy/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Merutekan antara 7 (tujuh!) Subnet, 2 di antaranya memiliki IP yang ditetapkan secara dinamis"><meta name=twitter:description content="Saya menggunakan RaspberryPi (Raspbian OS) dalam skema perutean yang sangat kompleks, yang dapat saya kelola hingga jumlah subnet adalah lima :)  Saat ini, saya memiliki antarmuka berikut, seperti yang ditunjukkan oleh ifconfig:..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Merutekan antara 7 (tujuh!) Subnet, 2 di antaranya memiliki IP yang ditetapkan secara dinamis</h1><div itemprop=text><p>Saya menggunakan RaspberryPi (Raspbian OS) dalam skema perutean yang sangat kompleks, yang dapat saya kelola hingga jumlah subnet adalah lima :)</p><p>Saat ini, saya memiliki antarmuka berikut, seperti yang ditunjukkan oleh ifconfig:</p><pre><code>eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
    inet 192.168.1.251  netmask 255.255.255.0  broadcast 192.168.1.255
eth0:1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
    inet 192.168.44.1  netmask 255.255.255.0  broadcast 192.168.44.255
    ether b8:27:eb:b9:ca:47  txqueuelen 1000  (Ethernet)
eth0:2: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
    inet 192.168.45.1  netmask 255.255.255.0  broadcast 192.168.45.255
    ether b8:27:eb:b9:ca:47  txqueuelen 1000  (Ethernet)
tun0: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500
    inet 10.35.0.74  netmask 255.255.255.255  destination 10.35.0.73
tun1: flags=4305&lt;UP,POINTOPOINT,RUNNING,NOARP,MULTICAST&gt;  mtu 1500
    inet 10.35.0.18  netmask 255.255.255.255  destination 10.35.0.17
wlan0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
    inet 192.168.42.1  netmask 255.255.255.0  broadcast 192.168.42.255
wlan1: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500
    inet 192.168.46.1  netmask 255.255.255.0  broadcast 192.168.46.255
</code></pre><p><strong>eth0</strong> menyediakan akses internet ke dunia luar (fixed IP)</p><p><strong>tun0</strong> dan <strong>tun1</strong> adalah antarmuka VPN ke server VPN yang berbeda, mereka mendapatkan IP yang ditetapkan secara dinamis dari server masing-masing ( <strong>ini</strong> tampaknya menjadi masalah inti)</p><p><strong>wlan0</strong> dan <strong>wlan1.dll</strong> adalah jaringan wifi (berfungsi sebagai titik akses!) yang harus dirutekan <strong>semua</strong> lalu lintas mereka melalui <strong>tun0</strong> dan <strong>tun1</strong> , masing-masing</p><p><strong>eth0: 1</strong> dan <strong>eth0: 2</strong> adalah antarmuka yang berbagi perangkat keras dengan <strong>eth0</strong> (hanya satu port Ethernet di RaspberryPi) dan harus menyediakan fungsionalitas yang sama seperti <strong>wlan0</strong> dan <strong>wlan1.dll</strong> , tetapi untuk klien kabel.</p><p>Server DHCP dijalankan di RaspberryPi untuk memastikannya <strong>wlan0</strong> dan <strong>wlan1.dll</strong> memberikan alamat di kelasnya masing-masing kepada klien nirkabel mereka. Tidak ada DHCP yang disediakan pada kabel bersama, tentu saja - saya mengkonfigurasi masing-masing <strong>klien</strong> perangkat untuk merutekan lalu lintas mereka baik melalui 192.168.44.1 atau 192.168.45.1, tergantung pada VPN mana (atau tidak ada VPN) yang saya inginkan agar mereka terhubung.</p><p>Jika tidak jelas, berikut semua jaringan yang harus saya tangani:</p><p>eth0, 192.168.1.1/24 (internet hulu)</p><p>eth0: 1, 192.168.44.1/24 (klien kabel hilir melalui tun0)</p><p>eth0: 2, 192.168.45.1/24 (klien kabel hilir melalui tun1)</p><p>tun0, <strong>10.35.0.74/32</strong> (VPN upstream pertama)</p><p>tun1, <strong>10.35.0.18/32</strong> (VPN upstream kedua)</p><p>wlan0, 192.168.42.1/24 (klien nirkabel hilir melalui tun0)</p><p>wlan0, 192.168.46.1/24 (klien nirkabel hilir melalui tun1)</p><p>Perhatikan, ini dia <strong>arus</strong> konfigurasi dengan IP tebal yang disediakan oleh server VPN.</p><p>Masalahnya dilambangkan dengan <strong>mencolok</strong> - IP, yang disediakan oleh server VPN berubah secara dinamis setelah setiap koneksi ulang (bahkan jika tidak, mereka bisa). Bagi saya, cukup mudah untuk mengetahui bahkan perutean multi-arah seperti itu jika semua alamat diperbaiki. Dengan satu VPN, satu nirkabel, dan eth0: 1 juga mudah, sebagai server VPN <strong>mendorong rute default</strong> saat menghubungkan dan sisanya mudah. Bagaimanapun saya tahu untuk mengatur NAT untuk satu wifi yang dialihkan ke satu VPN</p><pre><code>sudo iptables -t nat -A POSTROUTING -o tun0 -j MASQUERADE
</code></pre><p>seperti yang ditunjukkan di sini:</p><p><a href=https://pimylifeup.com/raspberry-pi-vpn-access-point/ rel="nofollow noopener" target=_blank>https://pimylifeup.com/raspberry-pi-vpn-access-point/</a></p><p>Namun, untuk memiliki <strong>dua koneksi VPN</strong> Saya harus mencegah server mengacaukan perutean saya, tentu saja saya dapat melakukannya dengan:</p><pre><code>pull-filter ignore redirect-gateway
</code></pre><p>dalam file konfigurasi klien VPN.</p><p>Setelah saya melakukan ini, saya tersesat. Lalu lintas jelas tidak diarahkan ke <strong>tun0</strong> atau <strong>tun1</strong> . Perbedaan antara server VPN dan saya adalah bahwa server dapat mendorong rute yang tepat sebagai <strong>itu tahu ip yang tepat</strong> antarmuka VPN (server menentukannya), dan saya tidak tahu!</p><p>Saya mencoba menyiapkan perutean menggunakan <strong>iptables</strong> , murni berdasarkan nama perangkat jaringan, tetapi sejauh ini saya tidak berhasil. Adakah yang bisa menyarankan rute yang benar yang dapat saya ambil untuk menyiapkan perutean ini?</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/641913/xmp125a target=_blank rel="nofollow noopener"><span itemprop=name>xmp125a</span></a>
â€”
<a href=https://superuser.com/questions/1511822/routing-between-7-seven-subnets-2-of-them-have-dynamically-assigned-ips target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>1</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>6</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>6</div><div class=card-body><div itemprop=text><blockquote><p>Perbedaan antara server VPN dan saya adalah bahwa server dapat mendorong rute yang tepat karena ia mengetahui ip yang tepat dari antarmuka VPN (server menentukannya), dan saya tidak tahu!</p></blockquote><p>Anda tidak perlu melakukannya. Antarmuka 'tun' yang dibuat oleh klien VPN Anda adalah antarmuka "lapisan 3" dan sama sekali tidak menggunakan alamat gateway rute - Anda akan mendapatkan hasil yang sama hanya dengan merutekan lalu lintas melalui seluruh perangkat. Sebagai contoh:</p><pre><code>ip route add &lt;dstA&gt;/24 dev tun0
ip route add &lt;dstB&gt;/24 dev tun1
</code></pre><p>Atau jika Anda menginginkannya berdasarkan alamat IP klien:</p><pre><code>ip route add 0.0.0.0/0 dev tun0 table 10
ip rule add pref 100 from 192.168.44.0/24 lookup 10
</code></pre><p>(Pada antarmuka lapisan-2 seperti Ethernet, Wi-Fi, atau 'tap', antarmuka yang sama menghubungkan Anda ke beberapa perangkat lokal berdasarkan alamat MAC yang Anda kirimi paket. Alamat 'gateway' atau 'via' yang Anda gunakan. tentukan dalam rute hanya digunakan untuk satu hal: itu diselesaikan ke alamat MAC.</p><p>Antarmuka lapisan-3 seperti 'tun' atau 'ppp', bagaimanapun, tidak memiliki alamat MAC sama sekali - mereka hanya memiliki dua ujung dan tidak ada perbedaan antara host "on-link" dan "jauh". Jadi tidak perlu rute tersebut memiliki gateway, karena apa pun yang Anda kirim, paket selalu mencapai tujuan yang sama, dalam hal ini server VPN.)</p><p>Akhirnya, jika Anda <em>melakukan</em> perlu mengetahui alamat gateway default, Anda dapat meminta klien VPN memberi tahu Anda - mis. OpenVPN mendukung skrip <code>--up</code> yang menerima semua informasi mengenai konfigurasi jaringan.</p><blockquote><p>eth0: 1 dan eth0: 2 adalah antarmuka yang berbagi perangkat keras dengan eth0</p></blockquote><p>Itu adalah kebohongan yang diberitahukan ifconfig kepada Anda karena alasan historis. Antarmuka "alias" ini sebenarnya belum ada di Linux untuk waktu yang lama; saat ini OS mengelolanya sebagai satu antarmuka eth0 yang hanya memiliki beberapa alamat yang ditetapkan padanya.</p><p>Di catatan lain, untuk alasan yang sama seperti di bagian sebelumnya, tidak ada perbedaan nyata antara klien Anda yang menggunakan eth0: 1 dan eth0: 2 sebagai gateway mereka - kedua alamat IP mereka menghasilkan alamat MAC yang sama persis. Paket hanya dapat dibedakan berdasarkan alamat IP sumber klien itu sendiri.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/merutekan-antara-7-tujuh-subnet-2-di-antaranya-memiliki-ip-yang-ditetapkan-secara-dinamis-slivdpdy/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener"><span itemprop=name>user1686</span></a>
â€”
<a href=https://superuser.com/a/1511829 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>Thaks, berhasil! Satu pertanyaan tambahan, jika boleh. Mengapa tabel routing 10? Apakah ini masalah pilihan atau adakah standar yang menentukan apa yang tercantum dalam tabel 10?</div><div>â€” <a href=https://superuser.com/users/641913/xmp125a target=_blank rel="nofollow noopener">xmp125a</a></div></li><li class=list-group-item><div>Tidak, itu nomor acak yang saya pilih. Pilih apa saja antara 1 dan 4294967295, kecuali 253â€“255 (ketiganya memang disediakan untuk tabel built-in seperti 'main'), dan mungkin berikan nama pada / etc / iproute2 / rt_tables.</div><div>â€” <a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener">user1686</a></div></li><li class=list-group-item><div>Terima kasih, saya tahu tentang nomor yang dipesan, saya hanya ingin memeriksa apakah ada sesuatu yang istimewa tentang tabel 10.</div><div>â€” <a href=https://superuser.com/users/641913/xmp125a target=_blank rel="nofollow noopener">xmp125a</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/apakah-hub-usb-c-dua-arah-mungkin-gxqp9ao2/>Apakah hub USB-C dua arah mungkin?</a></div></li><li class=list-group-item><div><a href=/mkfs-tampaknya-perangkat-tidak-ada-apakah-anda-menentukannya-dengan-benar-3oeilpya/>mkfs - Tampaknya perangkat tidak ada; apakah Anda menentukannya dengan benar?</a></div></li><li class=list-group-item><div><a href=/sistem-desktop-tidak-selalu-menekan-bios-frksfwdk/>Sistem desktop tidak selalu menekan BIOS</a></div></li><li class=list-group-item><div><a href=/jadikan-pandoc-mengabaikan-kelas-gaya-css-tausz5rg/>Jadikan pandoc mengabaikan kelas gaya css</a></div></li><li class=list-group-item><div><a href=/bagaimana-anda-menyalin-direktori-di-linux-dalam-situasi-ini-menggunakan-cp-kzgiha2r/>Bagaimana Anda menyalin direktori di Linux dalam situasi ini menggunakan cp?</a></div></li><li class=list-group-item><div><a href=/apa-yang-menambahkan-ip-multicast-ini-ke-tabel-arp-sebagai-entri-statis-mq6p6hfx/>Apa yang menambahkan IP Multicast ini ke tabel ARP, sebagai entri statis?</a></div></li><li class=list-group-item><div><a href=/apakah-berjalan-jalan-dengan-laptop-ssd-saya-dihidupkan-berbahaya-untuk-itu-7lqbom5t/>Apakah berjalan-jalan dengan laptop SSD saya dihidupkan berbahaya untuk itu?</a></div></li><li class=list-group-item><div><a href=/aktifkan-kata-sandi-sederhana-untuk-pengguna-root-di-centos-ow5u9wyh/>Aktifkan kata sandi sederhana untuk pengguna root di CentOS</a></div></li><li class=list-group-item><div><a href=/skrip-bash-mengarahkan-semua-output-ke-file-s8lol8e2/>Skrip Bash mengarahkan semua output ke file</a></div></li><li class=list-group-item><div><a href=/tangkapan-layar-dari-halaman-yang-dapat-digulir-di-chrome-mauzmb5o/>Tangkapan layar dari halaman yang dapat digulir di chrome</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>