<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Teruskan X11 melalui koneksi SSH ke host penampung?</title><meta name=description content="Saya ingin menjalankan aplikasi GUI dalam container dari mesin jarak jauh.  Saya tidak ingin menyelesaikan masalah ini dengan menambahkan host ssh ke wadah karena  Saya sudah memiliki akses ke mesin host melalui..."><link rel=canonical href=https://www.idxstack.com/teruskan-x11-melalui-koneksi-ssh-ke-host-penampung-cszgvzck/><meta property="og:title" content="Teruskan X11 melalui koneksi SSH ke host penampung?"><meta property="og:description" content="Saya ingin menjalankan aplikasi GUI dalam container dari mesin jarak jauh.  Saya tidak ingin menyelesaikan masalah ini dengan menambahkan host ssh ke wadah karena  Saya sudah memiliki akses ke mesin host melalui..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/teruskan-x11-melalui-koneksi-ssh-ke-host-penampung-cszgvzck/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Teruskan X11 melalui koneksi SSH ke host penampung?"><meta name=twitter:description content="Saya ingin menjalankan aplikasi GUI dalam container dari mesin jarak jauh.  Saya tidak ingin menyelesaikan masalah ini dengan menambahkan host ssh ke wadah karena  Saya sudah memiliki akses ke mesin host melalui..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Teruskan X11 melalui koneksi SSH ke host penampung?</h1><div itemprop=text><p>Saya ingin menjalankan aplikasi GUI dalam container dari mesin jarak jauh.</p><p>Saya tidak ingin menyelesaikan masalah ini dengan menambahkan host ssh ke wadah karena</p><ul><li>Saya sudah memiliki akses ke mesin host melalui SSH</li><li>Itu menambah overhead yang tidak perlu</li><li>Itu membuat wadah tidak portabel antara penggunaan jarak jauh dan lokal</li></ul><p>Saya sudah berhasil menjalankan aplikasi GUI di host, tetapi tidak dari dalam penampung. Ini adalah langkah-langkah yang saya ambil sejauh ini:</p><h1 class=h3>Tuan rumah</h1><ul><li><code>xauth +</code> <em>(bukan untuk jangka panjang, tapi berguna untuk menghilangkan kemungkinan masalah)</em></li><li><code>docker-user</code> dengan uid 501000 pada host == <code>docker-user</code> dengan uid 1000 dalam wadah melalui fitur namespace</li><li>File <code>.Xauthority</code> disalin ke folder rumah <code>docker-user</code></li></ul><h1 class=h3>Dockerfile</h1><ul><li>Berbasis alpine</li><li>Menginstal <code>xauth</code> dan, untuk tujuan pengujian, <code>xterm</code></li><li>Membuat <code>docker-user</code> dengan uid / gid yang tepat</li></ul><h1 class=h3>buruh pelabuhan-menulis</h1><ul><li>Variabel lingkungan <code>DISPLAY</code> diteruskan masuk</li><li>Volume <code>/home/docker-user/:/home/docker-user/:ro</code> menyediakan <code>.Xauthority</code> cookie</li><li>Volume <code>/tmp/.X11-unix:/tmp/.X11-unix:ro</code> untuk menyediakan akses soket X11</li><li>Jalankan perintah <code>su - docker-user -c "export DISPLAY=$DISPLAY && xterm"</code><ul><li><code>su</code> digunakan untuk dijalankan sebagai <code>docker-user</code></li><li><code>DISPLAY</code> diteruskan ke konteks <code>su</code></li></ul></li></ul><p>Sayangnya, ini belum cukup. Sementara xterm pada OS host terhubung ke server X lokal saya tanpa masalah, xterm dalam wadah mengatakan <code>Xt error: Can't open display: localhost:10.0</code>.</p><p>Saya telah mengonfirmasi bahwa "localhost: 10.0" benar, localhost ada di wadah <code>/etc/hosts</code>, dan cookie serta soket membuatnya melalui dengan izin yang tepat.</p><p>Apa lagi yang mungkin salah?</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/332854/m-pixel target=_blank rel="nofollow noopener"><span itemprop=name>M-Pixel</span></a>
—
<a href=https://superuser.com/questions/1202611/forward-x11-over-an-ssh-connection-to-containers-host target=_blank rel="nofollow noopener">Sumber</a></div></div></div><hr><h2 class=h4><span itemprop=answerCount>3</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>5</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>5</div><div class=card-body><div itemprop=text><p>Sepertinya Anda melakukan semua hal yang sama yang saya lakukan KECUALI Anda membagikan .Xauthority pada saat pembuatan penampung. Itu berarti jika Anda pernah melakukan ssh -X ke mesin Anda setelah membuat penampung, .Xauthority tidak akan valid lagi. Anda tidak dapat melakukan ssh -X dari terminal lain ke mesin yang sama dan kembali dan menggunakan .Xauthority, ssh -X mengubah .Xauthority setiap saat untuk terminal terbaru. Saya hanya membuatnya berfungsi dengan menyalin .Xauthority setiap kali saya ssh -X ke mesin saya dan mencoba berbagi layar dengan container saya.</p><p>catatan: Saya berbagi perangkat dan id mesin karena saya meneruskan output webcam</p><h2 class=h4>1.Buat container dan beri tahu xhost untuk mengizinkan penerusan dari ID container:</h2><pre><code>sudo docker run -it -d \
    --net=host \
    --env="DISPLAY" \
    --env="QT_X11_NO_MITSHM=1" \
    --volume="/tmp/.X11-unix:/tmp/.X11-unix:rw" \
    --device="/dev/video0:/dev/video0" \
    --volume="/path/to/your/sharedDockerFiles:/root/sharedDockerFiles" \
    --volume="/etc/machine-id:/etc/machine-id" \
    yourdockerrepo/image:tag \
    bash
export containerId=$(docker ps -l -q)
sudo xhost +local:`sudo docker inspect --format='{{ .Config.Hostname }}' $containerId`
sudo docker start $containerId
</code></pre><h2 class=h4>2. Salin .Xauthority dari rumah host ke direktori sharedDockerFiles:</h2><pre><code>sudo cp ~/.Xauthority /path/to/your/sharedDockerFiles
</code></pre><h2 class=h4>3. <strong>Mulai dan pasang wadah Anda</strong></h2><h2 class=h4>4. <strong>Salin .Xauthority di folder bersama Anda ke rumah kontainer Anda</strong></h2><pre><code>sudo cp /root/sharedDockerFiles/.Xauthority ~/
</code></pre><h2 class=h4>5. <strong>(diperlukan sekali): Edit penampung / etc / ssh / ssh_config di bawah Host * untuk memasukkan:</strong></h2><pre><code>   ForwardX11 yes
   X11Forwarding yes
</code></pre><h2 class=h4>6. <strong>Mulai ulang penampung Anda dan pasang kembali dan jalankan aplikasi GUI</strong></h2><h2 class=h4>7. <strong>Jika Anda masih mengalami masalah, pastikan variabel $ DISPLAY di container sama dengan host</strong></h2><pre><code>echo $DISPLAY #do this in the container
exit
echo $DISPLAY #do this in the host, should be the same as container's
#if they aren't equal, start container and:
export DISPLAY= #put the output of your host's $DISPLAY variable here
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/teruskan-x11-melalui-koneksi-ssh-ke-host-penampung-cszgvzck/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/760171/pale-bone target=_blank rel="nofollow noopener"><span itemprop=name>pale bone</span></a>
—
<a href=https://superuser.com/a/1239663 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>1</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>1</div><div class=card-body><div itemprop=text><p>Salin .Xauthority dalam penampung di awal sesi ssh sebelum menggunakan GUI:</p><pre><code>sudo docker exec -i container_name bash -c 'cat &gt; ~/.Xauthority' &lt; ~/.Xauthority
</code></pre><p>Kemudian, Anda dapat meneruskan DISPLAY jika menggunakan 'docker exec'. Misalnya. untuk membuka pesta baru:</p><pre><code>sudo docker exec -it --env="DISPLAY" container_name bash
</code></pre><p><strong>2 kemungkinan penyebab kesalahan lainnya:</strong> (selain jawaban yang diterima)</p><ul><li><p><strong>dasar:</strong> Anda tidak memiliki server ssh atau xauth dalam penampung (untuk ubuntu, jalankan 'apt install openssh-server xauth')</p></li><li><p><strong>yang licik:</strong> Jika wadah Anda <em>nama host</em> berbeda dengan yang ada dari host (misalnya, setel melalui -h badge di 'docker run') Anda akan mendapatkan kesalahan dan Anda harus mengatasinya (misalnya mengatur nama host yang sama atau menambahkan cookie ke xauth)</p></li></ul></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/teruskan-x11-melalui-koneksi-ssh-ke-host-penampung-cszgvzck/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/813637/jure-sencar target=_blank rel="nofollow noopener"><span itemprop=name>Jure Sencar</span></a>
—
<a href=https://superuser.com/a/1266667 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>Solusi ini berhasil untuk saya. Ternyata cukup dengan hanya menyalin file .Xauthority ke container docker tanpa perlu merestartnya.</div><div>— <a href=https://superuser.com/users/306581/nikolay-frick target=_blank rel="nofollow noopener">Nikolay Frick</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>0</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-2><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>0</div><div class=card-body><div itemprop=text><p>Mari kita mulai buruh pelabuhan dengan opsi --net = host. Itu membuat penampung untuk melihat tumpukan jaringan yang sama dari host.</p><p>Sebagai contoh,</p><p>docker run --net = host --rm -ti -u myid -e DISPLAY = "$ DISPLAY" -v /tmp/.X11-unix:/tmp/.X11-unix image: tag BINARY</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/teruskan-x11-melalui-koneksi-ssh-ke-host-penampung-cszgvzck/#answer-2 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/724092/psh target=_blank rel="nofollow noopener"><span itemprop=name>psh</span></a>
—
<a href=https://superuser.com/a/1205206 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/mengapa-internet-explorer-menyegarkan-ketika-saya-mengeklik-quotselalu-izinkan-sembulanquot-8vfv0mzl/>Mengapa Internet Explorer menyegarkan ketika saya mengeklik "selalu izinkan sembulan"?</a></div></li><li class=list-group-item><div><a href=/apakah-robocopy-menyimpan-file-log-secara-default-3lt74mt9/>Apakah Robocopy menyimpan file log secara default?</a></div></li><li class=list-group-item><div><a href=/bagaimana-menemukan-ip-mana-yang-menghantam-situs-web-saya-f8c3tauz/>Bagaimana menemukan ip mana yang menghantam situs web saya?</a></div></li><li class=list-group-item><div><a href=/apakah-mungkin-untuk-menurunkan-versi-ubuntu-jpgqnqjk/>Apakah mungkin untuk menurunkan versi Ubuntu?</a></div></li><li class=list-group-item><div><a href=/saat-caps-lock-ditekan-spasi-mengembalikan-garis-bawah-qdxt8ef6/>Saat caps lock ditekan, spasi mengembalikan garis bawah</a></div></li><li class=list-group-item><div><a href=/apakah-vpn-membuat-koneksi-3g-4g-seluler-lebih-aman-ufkjfxsy/>Apakah VPN membuat koneksi 3g / 4g / seluler lebih aman?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menghapus-program-yang-isinya-sudah-dihapus-bt1pdd8n/>Bagaimana cara menghapus program yang isinya sudah dihapus?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menghapus-riwayat-bilah-alamat-windows-explorer-xqr9orps/>Bagaimana cara menghapus riwayat bilah alamat Windows Explorer</a></div></li><li class=list-group-item><div><a href=/mbr-vs-gpt-pengalamatan-blok-logis-8ktljyfw/>MBR vs GPT (Pengalamatan Blok Logis)</a></div></li><li class=list-group-item><div><a href=/setel-ulang-lebar-scroll-bar-horizontal-di-notepad-geijxdog/>Setel ulang lebar scroll bar horizontal di Notepad ++</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>