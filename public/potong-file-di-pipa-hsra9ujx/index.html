<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Potong file di pipa</title><meta name=description content="Apakah ada cara sederhana untuk memotong file di dalam pipa? Secara khusus, saya ingin memotong empat byte terakhir dari sebuah file sebelum memasukkannya ke proses lain.  Idealnya, saya bisa menulis sesuatu seperti:..."><link rel=canonical href=https://www.idxstack.com/potong-file-di-pipa-hsra9ujx/><meta property="og:title" content="Potong file di pipa"><meta property="og:description" content="Apakah ada cara sederhana untuk memotong file di dalam pipa? Secara khusus, saya ingin memotong empat byte terakhir dari sebuah file sebelum memasukkannya ke proses lain.  Idealnya, saya bisa menulis sesuatu seperti:..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/potong-file-di-pipa-hsra9ujx/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Potong file di pipa"><meta name=twitter:description content="Apakah ada cara sederhana untuk memotong file di dalam pipa? Secara khusus, saya ingin memotong empat byte terakhir dari sebuah file sebelum memasukkannya ke proses lain.  Idealnya, saya bisa menulis sesuatu seperti:..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Potong file di pipa</h1><div itemprop=text><p>Apakah ada cara sederhana untuk memotong file di dalam pipa? Secara khusus, saya ingin memotong empat byte terakhir dari sebuah file sebelum memasukkannya ke proses lain.</p><p>Idealnya, saya bisa menulis sesuatu seperti:</p><p><code>cat input.txt | some-process | truncate --size=-4 | another-process > output.txt</code></p><p>tetapi tampaknya perintah <code>truncate</code> hanya beroperasi "di tempat" pada file di disk.</p></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/27902/kostmo target=_blank rel="nofollow noopener"><span itemprop=name>kostmo</span></a>
—
<a href=https://superuser.com/questions/393482/truncate-file-in-a-pipe target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div><code>cat input.txt | some-process</code> lebih baik ditulis sebagai <code>some_process &lt; input.txt</code>.</div><div>— <a href=https://superuser.com/users/50883/benoit target=_blank rel="nofollow noopener">Benoit</a></div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>6</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>6</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>6</div><div class=card-body><div itemprop=text><p>Ini seperti jika saya menyuruh Anda untuk mengangkat tangan segera setelah saya mengucapkan <em>keempat dari kata terakhir</em> Saya akan mengatakan. Saya tidak akan memberi tahu Anda sebelumnya berapa banyak kata yang akan saya ucapkan.</p><p>Pipa adalah a <em>aliran</em> . Datanya tidak memiliki ukuran, ia hanya memiliki operasi untuk mendapatkan elemen berikutnya darinya dan / atau memasukkan elemen ke dalamnya, dan hasilnya adalah sepotong data atau sinyal bahwa tidak ada lagi data.</p><p>Jadi, kecuali Anda pertama kali mengambil semua data dari aliran, menempatkannya ke dalam buffer, menghitung panjangnya, "memundurkan" aliran, dan kemudian mengambil empat elemen yang lebih sedikit, itu tidak dapat dilakukan.</p><p>EDIT: Saya perlu melakukan lebih banyak pemikiran daripada menghasilkan analogi yang cerdas :) Aliran tidak mengatakan "hentikan saya segera n elemen sebelum yang terakhir", melainkan "kirimkan semua elemen kecuali n terakhir", dan dengan mempertahankan buffer yang hanya terdiri dari n elemen, dan menunggu hingga n elemen pertama diterima sebelum mentransmisikan yang pertama, itu mungkin. Jelas ini tidak akan berfungsi dalam situasi seperti telekomunikasi di mana Anda ingin data dikirim segera setelah diterima seperti yang Anda bisa jika Anda menginginkan n elemen pertama. Dan saya berasumsi <code>truncate</code> tidak melakukannya dengan cara ini.</p><p>(percobaan downvoting diri -1)</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/potong-file-di-pipa-hsra9ujx/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/70484/paul-richter target=_blank rel="nofollow noopener"><span itemprop=name>Paul Richter</span></a>
—
<a href=https://superuser.com/a/393494 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=0>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=0><ul class="list-group list-group-flush"><li class=list-group-item><div>Anda mendapatkan upvote saya, karena jawaban Anda membantu saya menyadari bahwa panjang file / streaming tidak diketahui saat runtime, yang mendorong saya untuk menulis skrip Python.</div><div>— <a href=https://superuser.com/users/27902/kostmo target=_blank rel="nofollow noopener">kostmo</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>5</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-1><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>5</div><div class=card-body><div itemprop=text><p>Saya merasa konyol setelah menulis skrip Python itu.</p><p>Ada perintah shell bawaan <code>head</code> untuk melakukannya:</p><p><code>cat input.txt | some-process | head --bytes=-4 | another-process > output.txt</code></p><p><strong>Edit:</strong> Perintah GNU <code>head</code> memiliki file <a href=http://git.savannah.gnu.org/cgit/coreutils.git/tree/src/head.c#n309 rel="nofollow noopener" target=_blank>implementasi yang serupa secara konseptual</a> (yaitu hemat memori) ke <a href=https://superuser.com/a/393550/27902 target=_blank rel="nofollow noopener">implementasi Python saya</a> di bawah. Satu perbedaan adalah bahwa ia membulatkan ukuran buffer melingkar (<code>N</code>, jumlah byte yang dihilangkan) menjadi kelipatan dari beberapa ukuran buffer standar.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/potong-file-di-pipa-hsra9ujx/#answer-1 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/27902/kostmo target=_blank rel="nofollow noopener"><span itemprop=name>kostmo</span></a>
—
<a href=https://superuser.com/a/393552 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=1>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=1><ul class="list-group list-group-flush"><li class=list-group-item><div>asalkan versi <code>head</code> tidak terlalu tua yang akan berfungsi.</div><div>— <a href=https://superuser.com/users/50883/benoit target=_blank rel="nofollow noopener">Benoit</a></div></li></ul></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>1</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-2><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>1</div><div class=card-body><div itemprop=text><p><code>sed</code> dapat beroperasi pada baris terakhir. Ini mengasumsikan 4 karakter terakhir berada dalam satu baris:</p><pre><code>printf "%s\n" abcdef ghijkl mnopqr | sed '$s/....$//'
</code></pre><p>keluaran</p><pre><code>abcdef
ghijkl
mn
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/potong-file-di-pipa-hsra9ujx/#answer-2 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/4714/glenn-jackman target=_blank rel="nofollow noopener"><span itemprop=name>glenn jackman</span></a>
—
<a href=https://superuser.com/a/393637 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>0</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-3><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>0</div><div class=card-body><div itemprop=text><p>Saya tidak dapat menemukan perintah shell bawaan untuk melakukan ini, jadi saya rasa itu berarti tidak ada solusi "satu baris". Namun, saya dapat menulis skrip Python untuk melakukan apa yang saya butuhkan:</p><pre class="lang-py prettyprint-override"><code>#!/usr/bin/env python
'''
Usage:
pipetruncate.py &lt;N&gt;

Truncates a stream in a pipe at N bytes before the EOF.
Uses memory proportional to N.
'''

import sys

buffer_length = int(sys.argv[1])
circular_buffer = [0]*buffer_length
count = 0
while True:
    ch = sys.stdin.read(1)
    if not len(ch): # EOF
        break

    index = count % buffer_length
    nextchar = circular_buffer[index]
    circular_buffer[index] = ch

    count += 1
    if count > buffer_length:
        sys.stdout.write(nextchar)

sys.stdout.close()</code></pre><p>Lalu saya memohon</p><p><code>cat input.txt | some-process | ./pipetruncate.py 4 | another-process > output.txt</code></p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/potong-file-di-pipa-hsra9ujx/#answer-3 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/27902/kostmo target=_blank rel="nofollow noopener"><span itemprop=name>kostmo</span></a>
—
<a href=https://superuser.com/a/393550 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>0</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-4><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>0</div><div class=card-body><div itemprop=text><p>Menghabiskan sebagian dari pagi hari menulis skrip python juga. Tentu saja, lebih baik Anda menggunakan "kepala" Anda daripada menulis lebih banyak kode. Pokoknya ini versi saya. Ini jelek tapi saya pikir ini adalah skrip python pertama saya:</p><pre><code>#!/usr/bin/python

# stream_trunc: cut the last n bits of a stream

import sys

if len(sys.argv) &lt;&gt; 2:
    print 'Usage: ' + sys.argv[0] + ' &lt;number&gt;'
    exit(1)

num = sys.argv[1]

if num.isdigit() != True:
    print 'Argument should be a number'
    print 'Usage: ' + sys.argv[0] + ' &lt;number&gt;'
    exit(1)

n = int(num)
buf = sys.stdin.read(n)
c = sys.stdin.read(1)

while c != '':
    sys.stdout.write(buf[0])
    buf = buf[1:] + c
    c = sys.stdin.read(1)
</code></pre></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/potong-file-di-pipa-hsra9ujx/#answer-4 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/119923/jorge-juan target=_blank rel="nofollow noopener"><span itemprop=name>Jorge Juan</span></a>
—
<a href=https://superuser.com/a/393580 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class=form-row itemprop=suggestedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>0</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-5><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>0</div><div class=card-body><div itemprop=text><p>Saya heran belum ada yang menyebutkan <code>dd</code>.</p><p>Ini akan membaca 1024 byte input pertama:</p><pre><code>$ dd if=inputfile of=truncated_file count=1024
</code></pre><p>Ini akan melewati 2048 byte input pertama:</p><pre><code>$ dd if=inputfile of=truncated_file skip=2048
</code></pre><p>Dengan menghapus parameter <code>if</code> dan / atau <code>of</code>, <code>dd</code> akan membaca dari STDIN dan menulis ke STDOUT. Artinya, Anda dapat melakukan hal-hal seperti ini:</p><pre><code>$ cat input.txt | dd count=1024 | another-process &gt; output.txt
</code></pre><p>Bergantung pada versi <code>dd</code> yang Anda jalankan, Anda dapat menentukan unit ukuran untuk parameter <code>count</code> dan <code>skip</code> (lihat halaman manual untuk lebih detil).</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/potong-file-di-pipa-hsra9ujx/#answer-5 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/455748/kchr target=_blank rel="nofollow noopener"><span itemprop=name>kchr</span></a>
—
<a href=https://superuser.com/a/1234439 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm show-answer-replies" data-id=5>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 answer-replies-container d-none" data-id=5><ul class="list-group list-group-flush"><li class=list-group-item><div>perhatikan bahwa (di Ubuntu setidaknya, ukuran blok default <code>dd</code>s adalah 512 byte; ini berarti <code>count=1024</code> akan terbaca (1024 * 512) = <i>524288 byte</i> kecuali Anda juga menentukan <code>iflag=count_bytes</code>; hal yang sama berlaku untuk parameter <code>skip=</code>/<code>iflag=skip_bytes</code> dan <code>seek=</code>/<code>oflag=seek_bytes</code>.</div><div>— <a href=https://superuser.com/users/69539/doktor-j target=_blank rel="nofollow noopener">Doktor J</a></div></li></ul></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/kesalahan-folder-terkompresi-zip-tidak-valid-atau-rusak-setelah-mengunduh-file-zip-terkadang-tetapi-tidak-selalu-gqsucfrb/>Kesalahan “Folder terkompresi (zip) tidak valid atau rusak” setelah mengunduh file zip - terkadang, tetapi tidak selalu</a></div></li><li class=list-group-item><div><a href=/menghapus-desktop-dari-alt-tab-di-windows-7-64-bit-duplikat-ftvsr7ms/>Menghapus desktop dari Alt + Tab di Windows 7 64-bit [duplikat]</a></div></li><li class=list-group-item><div><a href=/mengganggu-unisonlog-di-rumah-mac-os-x-na045c9a/>Mengganggu unison.log di rumah Mac OS X.</a></div></li><li class=list-group-item><div><a href=/mengapa-saya-tidak-dapat-membangunkan-laptop-saya-dengan-keyboard-atau-mouse-press-okdylbh2/>Mengapa saya tidak dapat membangunkan laptop saya dengan keyboard atau mouse press?</a></div></li><li class=list-group-item><div><a href=/mikrofon-dikenali-oleh-windows-dan-perangkat-lunak-driver-tetapi-perangkat-lunak-lain-tidak-menerima-input-kpsbeduj/>Mikrofon dikenali oleh windows dan perangkat lunak driver tetapi perangkat lunak lain tidak menerima input</a></div></li><li class=list-group-item><div><a href=/dapatkah-anda-memutakhirkan-laptop-dari-80211b-g-ke-quotaquot-atau-kartu-wlan-yang-kompatibel-dengan-5ghz-fv154ikf/>Dapatkah Anda memutakhirkan laptop dari 802.11b / g ke "a" atau kartu WLAN yang kompatibel dengan 5GHz?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menggambar-kotak-di-bagian-bawah-video-menggunakan-ffmpeg-r2e7mysa/>Bagaimana cara menggambar kotak di bagian bawah video menggunakan FFmpeg?</a></div></li><li class=list-group-item><div><a href=/nonaktifkan-blue-record-light-di-microsoft-lifecam-cinema-s9pd3i63/>Nonaktifkan Blue Record Light di Microsoft LifeCam Cinema</a></div></li><li class=list-group-item><div><a href=/catat-hanya-perubahan-dalam-keluaran-robocopy-scvoemcz/>Catat hanya perubahan dalam keluaran robocopy</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menghilangkan-iklan-desktop-viber-kvauhnrh/>Bagaimana cara menghilangkan iklan desktop Viber</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>