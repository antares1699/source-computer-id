<!doctype html><html lang=id><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><title>Fungsi BASH tidak keluar dari karakter kontrol</title><meta name=description content="Saya memiliki fungsi yang saya gunakan untuk menemukan sesuatu, tetapi sayangnya setiap kali saya memberikannya karakter kontrol ($intVal atau testing : dll) itu tersedak. Saya bertanya-tanya apa perbaikannya?  Saya dapat memahami bahwa..."><link rel=canonical href=https://www.idxstack.com/fungsi-bash-tidak-keluar-dari-karakter-kontrol-1tg6jg69/><meta property="og:title" content="Fungsi BASH tidak keluar dari karakter kontrol"><meta property="og:description" content="Saya memiliki fungsi yang saya gunakan untuk menemukan sesuatu, tetapi sayangnya setiap kali saya memberikannya karakter kontrol ($intVal atau testing : dll) itu tersedak. Saya bertanya-tanya apa perbaikannya?  Saya dapat memahami bahwa..."><meta property="og:type" content="website"><meta property="og:url" content="https://www.idxstack.com/fungsi-bash-tidak-keluar-dari-karakter-kontrol-1tg6jg69/"><meta property="og:site_name" content="IDXStack"><meta property="og:locale" content="id_ID"><meta name=twitter:card content="summary"><meta name=twitter:title content="Fungsi BASH tidak keluar dari karakter kontrol"><meta name=twitter:description content="Saya memiliki fungsi yang saya gunakan untuk menemukan sesuatu, tetapi sayangnya setiap kali saya memberikannya karakter kontrol ($intVal atau testing : dll) itu tersedak. Saya bertanya-tanya apa perbaikannya?  Saya dapat memahami bahwa..."><link rel=stylesheet href=/css/style.min.c181a38d9857323db0ab0ad950bbd049d24d2f1d58d7566522f92aae4e1057df.css><link rel=stylesheet href=/vendor/fontawesome/css/all.min.css></head><body itemscope itemtype=https://schema.org/QAPage><nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container><a href=/ class=navbar-brand>IDXStack</a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav mr-auto"><li class=nav-item><a href=/ class=nav-link>Beranda</a></li></ul><ul class="navbar-nav ml-auto"><li class="nav-item dropdown"><a href=# class="nav-link dropdown-toggle" id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>About</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a href=/about-us class=dropdown-item>About</a>
<a href=/contact class=dropdown-item>Contact</a>
<a href=/disclaimer class=dropdown-item>Disclaimer</a></div></li></ul></div></div></nav><div class="container my-2" itemprop=mainEntity itemscope itemtype=https://schema.org/Question><div class="card shadow-sm mb-2"><div class=card-body><div class=mb-2><span class="badge badge-dark">Komputer</span></div><h1 class=h3 itemprop=name>Fungsi BASH tidak keluar dari karakter kontrol</h1><div itemprop=text><p>Saya memiliki fungsi yang saya gunakan untuk menemukan sesuatu, tetapi sayangnya setiap kali saya memberikannya karakter kontrol (<code>$intVal</code> atau <code>testing :</code> dll) itu tersedak. Saya bertanya-tanya apa perbaikannya?</p><p>Saya dapat memahami bahwa menggunakan <code>$</code> atau <code>%</code> atau <code>:</code> dll di grep tanpa melarikan diri menyebabkan masalah ini, tetapi karena saya meneruskannya dengan referensi, saya tidak yakin bagaimana cara menghindarinya ...</p><p>Bagaimanapun, ini kodenya.</p><pre><code>function ffind()
{
     if [ $1 ] ; then
         find -type f | grep -ir '$1' * | grep -v '.svn'
     else
         echo "'$1' is not a valid resource"
     fi
}
</code></pre><p>Contoh:</p><pre><code>$ ffind $intVal
'' is not a valid resource

$ ffind "testing :"
bash: [: testing: unary operator expected
'testing :' is not a valid resource
</code></pre></div></div><div class="card-footer bg-white d-flex justify-content-between"><div><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>4</span></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/78468/ehime target=_blank rel="nofollow noopener"><span itemprop=name>ehime</span></a>
—
<a href=https://superuser.com/questions/468780/bash-function-not-escaping-control-characters target=_blank rel="nofollow noopener">Sumber</a></div></div></div><div class=form-row><div class="col-2 col-lg-1"></div><div class="col-10 col-lg-11"><div class=mb-2><button class="btn btn-secondary btn-sm" id=showQuestionReplies>Tampilkan Balasan</button></div><div class="card shadow-sm mb-2 d-none" id=questionRepliesContainer><ul class="list-group list-group-flush"><li class=list-group-item><div>Sudahkah Anda mencoba mengubah kutipan tunggal menjadi ganda? "$ 1" bukan '$ 1'. Itu tidak sama dalam bash.</div><div>— <a href=https://superuser.com/users/148049/mnmnc target=_blank rel="nofollow noopener">mnmnc</a></div></li></ul></div></div></div><hr><h2 class=h4><span itemprop=answerCount>1</span> Jawaban</h2><div class=form-row itemprop=acceptedAnswer itemscope itemtype=https://schema.org/Answer><div class="col-12 col-md-2 col-lg-1"><div class="card shadow-sm mb-2 d-none d-md-block"><div class="card-body text-center px-1 py-3"><i class="far fa-heart fa-fw text-danger"></i><span itemprop=upvoteCount>9</span></div></div></div><div class="col-12 col-md-10 col-lg-11"><div class="card mb-2 shadow-sm" id=answer-0><div class="card-header d-block d-md-none"><i class="far fa-heart fa-fw text-danger"></i>9</div><div class=card-body><div itemprop=text><h2 class=h4>Contoh pertama</h2><pre><code>$ ffind $intVal
'' is not a valid resource
</code></pre><p>Ini tidak berhasil karena <strong><code>$foo</code> adalah sintaks untuk variabel</strong> , dan Anda tidak memiliki variabel bernama <code>intVal</code> set, jadi <code>$intVal</code> diterjemahkan ke string kosong. Karena variabel juga tidak dikutip, tidak ada argumen sama sekali yang diteruskan ke <code>ffind</code>.</p><p>Untuk memperbaikinya, keluar dari <code>$</code> - baik <strong><code>\$intVal</code></strong> (garis miring terbalik) atau <strong><code>'$intVal'</code></strong> (kutipan tunggal).</p><p>Jika Anda benar-benar <em>memiliki</em> variabel bernama <code>intVal</code>, bagaimanapun, masukkan <strong>dua kali lipat</strong> kutipan sebagai gantinya - <strong><code>"$intVal"</code></strong> - ini akan memperluas nilai variabel, tetapi tidak akan membaginya.</p><p>Perhatikan bahwa ada <em>mana ada</em> sebagai "melewati referensi" di bash. Hanya ada pass-by-value dan (tricky) pass-by-name.</p><h2 class=h4>Contoh kedua</h2><pre><code>$ ffind "testing :"
bash: [: testing: unary operator expected
'testing :' is not a valid resource
</code></pre><p>Ini tidak berhasil karena <strong>Anda lupa memberi tanda kutip di sekitar <code>$1</code></strong> di baris <code>if [ $1 ]</code>, oleh karena itu memang demikian <strong>tunduk pada pemisahan kata</strong> , dan tiga argumen diteruskan ke <code>[</code> builtin:</p><ul><li>"<code>[</code>"</li><li>"<code>testing</code>"</li><li>"<code>:</code>"</li><li>"<code>]</code>"</li></ul><p>alih-alih dua yang diharapkan:</p><ul><li>"<code>[</code>"</li><li>"<code>testing :</code>"</li><li>"<code>]</code>"</li></ul><p>Contoh # 1 juga terpengaruh oleh ini, karena <code>[ $1 ]</code> dibagi menjadi ("<code>]</code>", "<code>]</code>") dan bukan ("<code>[</code>", "<code>​</code>", "<code>intVal</code>"). Contoh # 1 bekerja secara tidak sengaja, karena ternyata <code>[ ]</code> valid. (Saya tidak tahu itu ...)</p><p>Untuk memperbaiki masalah ini, beri tanda kutip ganda sekitar <code>$1</code> - <code>[ "$1" ]</code>.</p><p><strong>catatan:</strong> Meskipun <code>[</code> adalah standar, ada juga operator <code>[[</code> khusus bash, yang sebenarnya memiliki aturan penguraian yang berbeda dari kode lainnya - khususnya, ia tidak memisahkan variabel yang diperluas. Dalam bash, <code>[[ $1 ]]</code> dan <code>[[ "$1" ]]</code> keduanya setara, tidak seperti alternatif <code>[</code> mereka.</p><h2 class=h4>Lebih banyak bug</h2><p>Fungsi Anda juga memiliki beberapa masalah lain yang tidak ditampilkan dalam contoh.</p><pre><code>find -type f | grep -ir '$1' * | grep -v '.svn'
</code></pre><p>Di baris ini:</p><ol><li><p>Kata <code>'$1'</code> memiliki tanda kutip tunggal di sekitarnya. Artinya itu <em>pesta</em> tidak akan memperluas isinya - Anda benar-benar memberi tahu <em>grep</em> untuk mencari regex <code>$1</code>, dan bukan untuk argumen baris perintah.</p><p>Untuk mengatasinya, gunakan tanda kutip ganda - <code>"$1"</code></p></li><li><p>Pertama <em>grep</em> perintah diberitahu untuk mencari secara rekursif <strong>isi</strong> dari semua file di direktori saat ini (<code>-r</code> dan wildcard <code>*</code>).</p><p>Pada saat yang sama, Anda menyalurkan output <code>find -type f</code> ke <em>grep</em> - sepertinya mencoba untuk memberitahu <em>grep</em> untuk mencari <strong>nama</strong> dari semua file.</p><p>Ini tidak akan berhasil karena <em>grep</em> , seperti kebanyakan filter, tidak akan membaca dari stdin jika diberikan satu atau lebih file untuk dicari. Saya tidak tahu apa yang Anda coba cari - nama file atau konten file - jadi pilih salah satu:</p><ul><li><p>Untuk mencari hanya nama file, pertahankan pipa tetapi hapus spesifikasi file:</p><pre><code> find -type f | grep -i "$1" | ...
</code></pre></li><li><p>Untuk mencari konten file saja, hapus <code>find|</code> sebagai gantinya:</p><pre><code> grep -ir "$1" * | ...
</code></pre></li><li><p>Saya t <em>aku s</em> mungkin untuk menggabungkan keduanya, dengan memberi secara eksplisit <em>grep</em> file "stdin":</p><pre><code> find -type f | grep -i "$1" - * | ...

 find -type f | grep -i "$1" /dev/stdin * | ...
</code></pre><p>(<code>/dev/stdin</code> bekerja dengan semua program Linux, sedangkan <code>-</code> adalah konvensi yang digunakan oleh <em>beberapa</em> program, termasuk grep.)</p></li></ul></li><li><p>Di detik <em>grep</em> perintah, ekspresi reguler pencarian agak terlalu luas. (Ingatlah bahwa ini adalah regex, bukan string tetap.) <code>.svn</code> bahkan akan cocok dengan "<code>not-a-svn-file</code>".</p><p>Untuk mengecualikan direktori <code>.svn</code>, gunakan <code>grep -v "/\.svn/"</code> sebagai gantinya.</p><p>Jika mencari file <em>kandungan</em> (<code>grep -ir ...</code>), bahkan lebih baik lagi jika perintah <code>grep -v</code> dihilangkan seluruhnya, dan tambahkan <code>--exclude-dir=".svn"</code> ke yang pertama.</p></li></ol><h2 class=h4>Anda dapat berhenti membaca pada saat ini</h2><p>Item di bawah ini hanyalah praktik yang baik dalam <em>SH</em> skrip.</p><ol><li><p>Kata kunci <code>function</code> tidak diperlukan: <code>ffind() { ...</code> sudah cukup, dan berfungsi di semua kerangka POSIX (sedangkan <code>function ffind</code> <em>tidak akan</em> ).</p></li><li><p>Jika skrip, program, atau fungsi gagal, ia harus mengembalikan status "gagal" ke induknya. Sesuai kesepakatan, program Unix menganggap <code>0</code> berarti "berhasil" dan yang lainnya "gagal" (meskipun ada pengecualian untuk yang terakhir).</p><p>Untuk mengembalikan status secara eksplisit, gunakan <code>return &lt;num></code> dalam fungsi (atau <code>exit &lt;num></code> dalam skrip mandiri):</p><pre><code>else
    echo "'$1' is not a valid resource" &gt;&amp;2
    return 1
fi
</code></pre></li><li><p>Demikian pula, pesan kesalahan tidak boleh dicampur dengan stdout normal, tetapi ditulis ke <em>stderr</em> (fd # 2) sebagai gantinya, menggunakan operator pengalihan <code>>&</code> (lihat contoh di atas). Dengan cara ini Anda dapat mengarahkan output normal ke sebuah file (mis. <code>ffind intVal > results.txt</code>) sementara masih ada kesalahan yang ditampilkan di layar.</p></li></ol><h2 class=h4>Kode tetap</h2><pre><code>ffind()
{
     if [ "$1" ] ; then
         grep -ir --exclude-dir=".svn" "$1" .
     else
         echo "'$1' is not a valid resource" &gt;&amp;2
         return 1
     fi
}
</code></pre><h2 class=h4>Alat yang lebih baik</h2><p><a href=http://betterthangrep.com/ rel="nofollow noopener" target=_blank>ack</a> mengklaim sebagai "lebih baik dari grep". Menjalankan <code>ack "testing :"</code> akan mencari kode sumber Anda, dan secara otomatis melewati <code>.svn</code> dan direktori serupa.</p></div></div><div class="card-footer text-right bg-white d-flex justify-content-between"><div><a href=https://www.idxstack.com/fungsi-bash-tidak-keluar-dari-karakter-kontrol-1tg6jg69/#answer-0 itemprop=url>Bagikan</a></div><div itemprop=author itemscope itemtype=https://schema.org/Person><a href=https://superuser.com/users/1686/user1686 target=_blank rel="nofollow noopener"><span itemprop=name>user1686</span></a>
—
<a href=https://superuser.com/a/468797 rel="nofollow noopener" target=_blank>Sumber</a></div></div></div></div></div><div class="card shadow-sm my-2"><div class=card-header>Pertanyaan Serupa</div><ul class="list-group list-group-flush"><li class=list-group-item><div><a href=/bagaimana-cara-yang-benar-untuk-menghitung-kualitas-1080p-720p-360p-240p-bhrdwdme/>Bagaimana cara yang benar untuk menghitung kualitas 1080p 720p 360p 240p?</a></div></li><li class=list-group-item><div><a href=/pintasan-keyboard-powerpoint-yang-berguna-jrgfew7p/>Pintasan keyboard PowerPoint yang berguna</a></div></li><li class=list-group-item><div><a href=/cara-menggunakan-fx-autocomplete-di-excel-tanpa-mouse-z491jwt2/>Cara menggunakan fx autocomplete di Excel tanpa mouse</a></div></li><li class=list-group-item><div><a href=/hard-drive-lba-error-bagaimana-cara-melanjutkan-1fwojceq/>Hard drive LBA Error: Bagaimana cara melanjutkan?</a></div></li><li class=list-group-item><div><a href=/bagaimana-cara-menjalankan-openssl-dhparam-dengan-tenang-fnobfkrf/>bagaimana cara menjalankan openssl dhparam dengan tenang?</a></div></li><li class=list-group-item><div><a href=/ekspor-hanya-aturan-yang-dipilih-dari-outlook-fpxeqtb4/>Ekspor hanya aturan yang dipilih dari Outlook</a></div></li><li class=list-group-item><div><a href=/tombol-tengah-mouse-berfungsi-seperti-alt-tab-gzxxht2u/>Tombol tengah mouse berfungsi seperti Alt-Tab</a></div></li><li class=list-group-item><div><a href=/apakah-router-selalu-diperlukan-bahkan-jika-hanya-jaringan-2-mesin-gpuxekmz/>Apakah router selalu diperlukan? Bahkan jika hanya jaringan 2 mesin?</a></div></li><li class=list-group-item><div><a href=/lihat-detail-kalender-orang-lain-di-outlook-2010-e3poxpxh/>Lihat detail kalender orang lain di Outlook 2010</a></div></li><li class=list-group-item><div><a href=/tmux-mengatur-warna-jendela-yang-diubah-28fbpyrp/>Tmux mengatur warna jendela yang diubah</a></div></li></ul></div></div><div class="mt-5 bg-light"><div class=container><div class="py-4 d-flex justify-content-between small text-muted"><div>By using our site, you agree to our <a href=/terms-of-service>Terms of Service</a>, <a href=/privacy-policy>Privacy Policy</a>, and <a href=/cookie-policy>Cookie Policy</a></div><div>Berlisensi di bawah <a href=https://creativecommons.org/licenses/by-sa/4.0/ target=_blank rel="nofollow noopener">CC BY-SA 4.0</a> dengan attribusi</div></div></div></div><script src=/js/jquery-3.5.1.min.js></script><script src=/js/bootstrap.bundle.min.js></script><script>$(document).ready(function(){$("#showQuestionReplies").click(function(){$("#questionRepliesContainer").toggleClass("d-none")}),$(".show-answer-replies").click(function(){var a=$(this).data("id");$(".answer-replies-container[data-id='"+a+"']").toggleClass("d-none")})})</script></body></html>