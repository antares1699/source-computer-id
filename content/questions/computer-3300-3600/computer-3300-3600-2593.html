{"title":"file umum linux antara dua folder","draft":false,"url":"/file-umum-linux-antara-dua-folder-yat2rkjm","votes":"4","answers_count":"4","categories":["Komputer"],"tags":["linux"],"snippet":"Halo saya punya 2 direktori, keduanya berisi pohon direktori dan file. Jika memungkinkan, saya memerlukan skrip yang memverifikasi file umum antara direktori dan jika dia menemukan file umum saya perlu menghapusnya di...","body":"<p> Halo saya punya 2 direktori, keduanya berisi pohon direktori dan file. Jika memungkinkan, saya memerlukan skrip yang memverifikasi file umum antara direktori dan jika dia menemukan file umum saya perlu menghapusnya di DIR2 dan membuat link ke DIR1. </p>\n<p> contoh: </p>\n<ul>\n<li> DIR1 berisi dir abc1, abc2, abc3 dan abc1 berisi file a.txt </li>\n<li> DIR2 berisi dir abc1, abc4, dan abc4 berisi file a.txt </li>\n<li> Script harus menghapus a.txt di DIR2 / abc4 dan membuat link ke DIR1 / abc / a.txt </li>\n</ul>\n<p> Skrip ini lebih disukai dalam format bash, awk, sed atau perl. </p>\n<p> Terima kasih! </p>\n<h3 class=\"h5\"> Contoh struktur file: </h3> <pre><code>$ mkdir -- DIR1/ DIR1/abc1/ DIR1/abc2/ DIR1/abc3/ DIR2/ DIR2/abc1/ DIR2/abc4/\n✔\n\n$ touch -- DIR1/abc3/a.txt DIR2/abc4/a.txt\n✔\n\n$ tree\n.\n├── DIR1\n│   ├── abc1\n│   ├── abc2\n│   └── abc3\n│       └── a.txt\n└── DIR2\n    ├── abc1\n    └── abc4\n        └── a.txt\n\n7 directories, 2 files\n✔\n</code></pre>","source":"https://superuser.com/questions/1025650/linux-common-files-between-two-folders","author":"<a href=\"https://superuser.com/users/544209/marian\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Marian</span></a>","replies":[{"reply":"Apakah Anda meminta seseorang untuk menulis ini untuk Anda? Atau apakah Anda mencari petunjuk tentang cara menulisnya sendiri?","author":"<a href=\"https://superuser.com/users/373176/user2121874\" target=\"_blank\" rel=\"nofollow noopener\">user2121874</a>"}],"answers":[{"answer":"<p> Tidak ada alasan untuk menulis file skrip, ada perintah untuk melakukan ini tanpa skrip. </p>\n\n<p> Perintah <code>diff</code> akan <strong> menunjukkan </strong> Anda perbedaannya: </p> <pre><code> diff -r dir1/ dir2/ \n</code></pre> <p> (<code>-r</code> = Secara rekursif membandingkan subdirektori yang ditemukan, <a href=\"http://linux.die.net/man/1/diff\" rel=\"nofollow noopener\" target=\"_blank\"> lihat Manual </a> ) akan mencetak daftar file yang berada <strong> hanya </strong> di salah satu direktori. </p>\n\n<p> Jika Anda juga ingin memeriksa apakah file dengan nama yang sama juga identik dalam konten, maka Anda harus menggunakan </p> <pre><code>diff --brief -r dir1/ dir2/\n</code></pre> <p> (<code>--brief</code> = Keluarkan hanya jika file berbeda). </p>\n\n<p> Jika Anda ingin melihat perbedaan juga untuk file yang ada di <strong> hanya satu </strong> direktori, memperlakukan rekan-rekan mereka sebagai kosong, Anda dapat menggunakan </p> <pre><code>diff --brief -Nr dir1/ dir2/\n</code></pre> <p> (<code>-N</code> = Perlakukan file yang tidak ada sebagai kosong). </p>\n\n<p> Jika Anda menghendaki <strong> bawa </strong> operasi, perintah </p> <pre><code>cp -Rnl dir1/ dir2/\n</code></pre> <p> akan melakukannya untukmu. Perhatikan bahwa <code>-R</code> = salin direktori secara rekursif (sekali lagi <a href=\"http://linux.die.net/man/1/cp\" rel=\"nofollow noopener\" target=\"_blank\"> dari Manual </a> ), sedangkan <code>-n</code> = jangan menimpa file yang sudah ada. </p>","votes":"6","source":"https://superuser.com/a/1025782","author":"<a href=\"https://superuser.com/users/255732/mariusmatutiae\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">MariusMatutiae</span></a>","replies":[{"reply":"Catatan: Dia ingin membuat tautan, bukan menyalin file sepenuhnya. Saya berasumsi yang dia maksud adalah softlink, tetapi sangat mungkin hardlink akan berfungsi untuknya (selama kedua direktori berada dalam sistem file yang sama). Jadi perintah salin harus: <code>cp -R -n -l dir1&#47; dir2&#47;</code>","author":"<a href=\"https://superuser.com/users/373176/user2121874\" target=\"_blank\" rel=\"nofollow noopener\">user2121874</a>"},{"reply":"@ user2121874 Setuju, saya mengubah posting sesuai saran Anda. Terima kasih.","author":"<a href=\"https://superuser.com/users/255732/mariusmatutiae\" target=\"_blank\" rel=\"nofollow noopener\">MariusMatutiae</a>"},{"reply":"Saya harap Anda tidak keberatan. Saya telah mengedit jawaban Anda dengan memasukkan batasan filesystem tunggal <code>cp -l</code>. Salam.","author":"<a href=\"https://superuser.com/users/373176/user2121874\" target=\"_blank\" rel=\"nofollow noopener\">user2121874</a>"}]},{"answer":"<pre><code>comm -12 &lt;(ls folder1 | sort) &lt;(ls folder2 | sort)\n</code></pre> <p> <code>comm</code> mencetak hasil perbandingan dari dua file. <code>-12</code> memberitahu itu untuk menyembunyikan baris unik dalam file 1 dan file 2. yaitu hanya mencetak baris umum. <code>&lt;(...)</code> membantu membuat eksekusi perintah tersedia sebagai file, substitusi. Di dalam substitusi, buat daftar isi folder, lalu urutkan menurut abjad. </p>\n\n<p> Itu dia. Bisa dimasukkan ke dalam skrip untuk mencari semua subfolder. </p>","votes":"1","source":"https://superuser.com/a/1158045","author":"<a href=\"https://superuser.com/users/676767/quiet-penguin\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">quiet_penguin</span></a>","replies":[]},{"answer":"<p> Ada perintah yang disebut <a href=\"http://www.computerhope.com/unix/tree.htm\" rel=\"nofollow noopener\" target=\"_blank\"> <code>tree</code> </a> yang akan menampilkan struktur direktori. </p>\n\n<p> Anda dapat menyalurkan ini ke file teks lalu melakukan perbandingan dari sana. </p>","votes":"0","source":"https://superuser.com/a/1025771","author":"<a href=\"https://superuser.com/users/393570/burgi\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Burgi</span></a>","replies":[]},{"answer":"<p> Anda harus bisa melakukan ini secara sepele di pesta. Perintah yang Anda cari untuk melakukan perbandingan adalah <code>md5sum</code> atau <code>diff</code>. </p>\n\n<p> Misalnya di sini adalah skrip yang hanya membandingkan md5sums dari dua file yang ditentukan pada baris perintah: </p> <pre><code>#!/bin/bash\n\nFILE_A=\"$1\"\nFILE_B=\"$2\"\n\nif [ \"`md5sum $FILE_A | awk '{print $1}'`\" == \"`md5sum $FILE_B | awk '{print $1}'`\" ] ; then\n    echo \"Same File\"\nelse\n    echo \"Files Differ\"\nfi\n</code></pre> <p> Untuk menjalankan pohon direktori, Anda perlu menggunakan rekursi. Berikut adalah contoh skrip yang saya tulis sejak lama untuk mengganti nama semua file dengan spasi di nama file untuk menggunakan garis bawah, bukan spasi. </p> <pre><code>#!/bin/bash\n\nrename 's/\\ /_/g' ./*\ncurrentdir=`pwd`\n\n### for all files and directories in the current directory.\nfor filename in `ls` ; do\n    ### if \"filename\" is a directory but not a softlink\n    if [ -d $filename ] &amp;&amp; ! [ -h $filename ] ; then\n        cd \"$filename\"\n        $0 ### This causes the script to call itself. Recursion!\n        cd \"$currentdir\"\n    fi\ndone\n</code></pre> <p> Kemudian untuk membuat tautan ke file antar direktori, gunakan <code>ln -s dir1/File1 dir2/</code>. </p>","votes":"0","source":"https://superuser.com/a/1025657","author":"<a href=\"https://superuser.com/users/373176/user2121874\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user2121874</span></a>","replies":[{"reply":"Ini tidak menjawab OP: dia membandingkan dua pohon direktori, yang mungkin berbeda meskipun semua file pada kedua pohon identik, karena mungkin ada file tambahan (atau lebih) di satu pohon yang hilang di pohon lain.","author":"<a href=\"https://superuser.com/users/255732/mariusmatutiae\" target=\"_blank\" rel=\"nofollow noopener\">MariusMatutiae</a>"},{"reply":"Ya, saya sepenuhnya sadar akan hal itu. Saya hanya memberinya bagian dalam yang akan dia gunakan untuk membandingkan file. Saya membiarkannya untuk membungkus bagian dalam itu dalam satu lingkaran dan loop di atas setiap file. Pertanyaannya pada dasarnya adalah &quot;Maukah Anda menulis skrip saya untuk saya?&quot;, Jawaban saya adalah &quot;Tidak, tapi ini hal yang tidak sepele.&quot;","author":"<a href=\"https://superuser.com/users/373176/user2121874\" target=\"_blank\" rel=\"nofollow noopener\">user2121874</a>"},{"reply":"Saya tidak setuju, ini sama sekali bukan bagian yang sulit. Bit yang sulit akan melewati pohon direktori tanpa skrip, dan menjaganya tetap sederhana; jika tidak, <code>find</code> akan melakukannya dengan baik.","author":"<a href=\"https://superuser.com/users/255732/mariusmatutiae\" target=\"_blank\" rel=\"nofollow noopener\">MariusMatutiae</a>"},{"reply":"Nah, OP <b> keinginan </b> sebuah naskah. Saya selalu menganggap pohon direktori berjalan sebagai hal yang sepele dan hanya memerlukan sedikit pemikiran untuk melakukannya dengan benar. Rekursi membuatnya sepele! Mungkin saya harus menyertakan contoh rekursi ...","author":"<a href=\"https://superuser.com/users/373176/user2121874\" target=\"_blank\" rel=\"nofollow noopener\">user2121874</a>"}]}]}
