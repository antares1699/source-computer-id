{"title":"Bagaimana cara membuat lebar panel tmux diperbaiki?","draft":false,"url":"/bagaimana-cara-membuat-lebar-panel-tmux-diperbaiki-dvv7afks","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["tmux"],"snippet":"Katakanlah saya membagi jendela menjadi 2 panel, yang kanan memiliki lebar 20 sel. Tetapi ketika saya mengubah ukuran emulator terminal luar, lebar panel berubah.  Apakah ada cara untuk memperbaikinya? Karena saya ingin...","body":"<p> Katakanlah saya membagi jendela menjadi 2 panel, yang kanan memiliki lebar 20 sel. Tetapi ketika saya mengubah ukuran emulator terminal luar, lebar panel berubah. </p>\n\n<p> Apakah ada cara untuk memperbaikinya? Karena saya ingin menampilkan info yang diformat agar muat untuk 20 sel </p>","source":"https://superuser.com/questions/322609/how-to-make-a-pane-width-of-tmux-fixed","author":"<a href=\"https://superuser.com/users/21134/haohaolee\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">haohaolee</span></a>","replies":[],"answers":[{"answer":"<p> Sejauh yang saya tahu, tmux tidak memiliki pengaturan untuk memperbaiki lebar ke nilai minimum, hanya ke nilai maksimal. Ini karena jendela terminal dapat diubah ukurannya menjadi lebih kecil dari nilai min tmux dan tmux mungkin tidak memiliki cara yang sesuai untuk menangani ini. </p>\n\n<p> Karena itu, jika Anda memiliki panel tmux lain yang terbuka, Anda dapat menambahkan skrip kecil ke PS1 (<code>PS1='$(resizePane $id)other-stuff'</code>) atau PROMPT_COMMAND untuk terus mengubah ukuran panel info yang ingin Anda pertahankan pada lebar 20c saat Anda menggunakan panel lain dalam tmux. Pada dasarnya, 1) Anda dapat membuka program, 2) mengubah ukuran terminal, 3) pindah ke panel lain, 4) ketik <code>Enter</code> dan blam, panel diubah ukurannya. </p>\n\n<p> Anda harus melihat halaman manual untuk </p> <pre><code>resize-pane [-DLRU] [-t target-pane] [adjustment]\n</code></pre> <p> Jika Anda berada di panel yang diinginkan, semua yang harus dilakukan adalah mengecilkan lebar dari kiri -L atau dari kanan -R sebanyak karakter x yang diperlukan untuk mencapai 20. Intinya, jika panel menghadap dinding yang lebih tinggi daripada panel, gunakan arahnya untuk menyusut dan sebaliknya untuk memperbesar. Jika panel saya berada di sebelah kanan dinding, gunakan -R untuk memperkecil lebar dan -L untuk memperbesarnya. </p>\n\n<p> Untuk mendapatkan jumlah karakter yang tepat, Anda perlu mengetahui lebar panel saat ini, yang dapat ditemukan bersama dengan id panel jika Anda mengetik </p> <pre><code>tmux list-panes\n</code></pre> <p> Saya belum yakin bagaimana cara mengetahui nomor panel mana Anda saat ini kecuali dengan <code>Prefix+q</code> atau mengetik </p> <pre><code>tmux display-panes\n</code></pre> <p> Ini akan memberi kita nomor id dari semua panel di jendela saat ini. Jika kita mengetahui id # ($ id) dengan asumsi itu menempel di dinding kanan, kita dapat mengubah ukuran panel menjadi lebar 20 karakter dengan: </p> <pre><code>paneWidths=$(tmux list-panes | awk '{print $2}' | cut -c 2- | cut -f 1 -d'x')\ncurrentWidth=$(echo $paneWidths | sed $id'q;d')\nresizeNum=$(expr $currentWidth - 20)\n\ntmux resize-pane -R -t $id $resizeNum\n</code></pre> <p> Perhatikan bahwa resizeNum tidak boleh negatif. Jika negatif, gunakan sisi lain untuk mengubah ukuran ke nilai absolut resizeNum (ini dapat diotomatiskan, tetapi saya akan menyerahkannya kepada Anda). Juga, jika Anda memasukkan ini ke dalam kode program Anda, Anda dapat mengabaikan bagian &quot;-t $ id&quot;, tetapi saya tidak tahu cara untuk mengotomatiskan pencarian $ id dari dalam program Anda. </p>\n\n<p> Mungkin juga berguna bagi Anda untuk melihat <code>tmux setw main-pane-width</code> <code>tmux setw other-pane-width</code>, yang akan menyetel lebar panel tertentu jika Anda memuat ulang format ubin baru. Untuk memutar format, gunakan <code>Prefix+space</code> </p>\n\n<p> Semoga ini membantu! </p>\n\n<p><strong><em> --- diedit untuk menambahkan info lebih lanjut tentang otomatisasi --- </em></strong></p>\n\n<p> Pikiran saya sebelumnya, adalah Anda membuka panel baru dan menjalankan <code>PS1=\"$(resizePane $id)${PS1}\"</code> lalu tekan <code>ENTER</code> dalam panel lain sehingga Anda dapat terus bekerja di panel ubah ukuran yang baru, tetapi saya telah mempertimbangkan opsi baru yang mungkin berhasil untuk Anda .. . </p>\n\n<p> Saya telah memikirkan kembali ide ini sejak awalnya memposting dan saya pikir ini cukup dapat diotomatiskan jika program yang berjalan memiliki loop yang dapat mengirim perintah shell. Ini karena kita dapat menjalankan program dengan memisahkan jendela. Ini adalah contoh yang saya maksud. Kode berikut </p>\n\n<ol>\n<li> Pengguna menjalankan <code>runCodeSplit.sh</code>, yang </li>\n<li> membagi panel baru secara horizontal (lebar 20c) di sebelah kanan panel terakhir dan menjalankan <code>test.sh</code> </li>\n<li> Masuk Loop </li>\n<li> memeriksa ukuran panel saat ini dan mencoba mengubah ukuran </li>\n<li> Tidur selama 10 detik (tetapi Anda dapat mengubahnya untuk melakukan apa pun yang Anda inginkan) </li>\n<li> mengulangi 3 &amp; 4 10 kali, lalu keluar </li>\n</ol>\n\n<p> runCodeSplit.sh: </p> <pre><code>#!/bin/bash\n# runCodeSplit.sh\n\npaneID=$(tmux list-panes | wc -l)\necho \"pane: $paneID\"\necho $(expr $paneID - 1)\n\n# now, open a new pane and run the func\ntmux split-window -h -l 20 -t $(expr $paneID - 1 ) \"~/test.sh $paneID\"\n</code></pre> <p> test.sh: </p> <pre><code>#!/bin/bash\n# test.sh\nif [[ $# -lt 1 ]] ; then \n    echo \"please provide the pane-number\" \n    exit \nfi\npaneID=$1\ni=0\nwhile [[ i -lt 10 ]] ; do\n    # find the current width and resize it at every loop\n    width=$(tmux list-panes | awk '{print $2}' | cut -c 2- | cut -f 1 -d'x' | sed $(expr $paneID + 1)'q;d')\n    resizeNum=$(expr $width - 20)\n    echo \"$paneID : w $width     r $resizeNum\"\n\n    if [[ $resizeNum -gt 0 ]] ; then\n        tmux resize-pane -R -t $paneID $resizeNum\n    elif [[ $resizeNum -lt 0 ]] ; then\n        tmux resize-pane -L -t $paneID $(expr 0 - $resizeNum)\n    fi \n\n    #now, we can do stuff ... \n    let i++\n    echo \"i= $i / 10\"\n    sleep 10\ndone\nread -p \"Press any key to close this pane ... \" -n1 -s\n</code></pre> <p><strong> CATATAN: </strong> Sayangnya, cara saya menerapkannya di atas, Anda seharusnya hanya menjalankannya sekali per jendela tmux. Masalahnya adalah setiap kali Anda menjalankannya, mereka akan berkumpul di samping satu sama lain, yang pada gilirannya akan membuat mereka bersaing untuk mendapatkan ruang (yang satu akan menyusut yang lain untuk mengembang dan sebaliknya). Anda mungkin dapat mengatasi masalah ini, tetapi saya serahkan kepada Anda untuk mencari tahu. </p>","votes":"4","source":"https://superuser.com/a/322913","author":"<a href=\"https://superuser.com/users/93719/scicalculator\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">scicalculator</span></a>","replies":[{"reply":"Terima kasih atas jawaban rinci. Anda mengatakan gunakan perintah PS atau Prompt untuk mengubah ukuran panel, apakah ini berarti saya harus beralih ke panel itu dan menekan Enter untuk menyesuaikan ukurannya? Apakah ada cara untuk mengetahui peristiwa pergantian terminal? sehingga dapat mengubah ukuran secara otomatis. Karena tmux sendiri dapat merespons perubahan ukuran terminal.","author":"<a href=\"https://superuser.com/users/21134/haohaolee\" target=\"_blank\" rel=\"nofollow noopener\">haohaolee</a>"},{"reply":"Maaf jawaban saya sebelumnya kurang membantu Anda. Saya memikirkan kembali dan menambahkan bagian baru di atas yang memungkinkan Anda mengotomatiskan proses pengubahan ukuran. FYI ini berguna untuk saya juga :)","author":"<a href=\"https://superuser.com/users/93719/scicalculator\" target=\"_blank\" rel=\"nofollow noopener\">scicalculator</a>"},{"reply":"tandai sebagai jawaban. btw, akhirnya saya tidak mengikuti pendekatan ini, karena saya menemukan shell yang saya gunakan - zsh - memiliki kemampuan untuk memanggil kembali ketika ukuran berubah, jadi saya dapat menggunakan tmux resize tepat waktu.","author":"<a href=\"https://superuser.com/users/21134/haohaolee\" target=\"_blank\" rel=\"nofollow noopener\">haohaolee</a>"},{"reply":"FYI: Nomor panel saat ini dapat ditemukan dengan <code>tmux display-message -p &#39;#P&#39;</code>","author":"<a href=\"https://superuser.com/users/111814/peter-v-m%c3%b8rch\" target=\"_blank\" rel=\"nofollow noopener\">Peter V. M&#xF8;rch</a>"}]},{"answer":"<p> Saya akan memposting varietas saya karena tidak akan menyakiti siapa pun, dan mungkin lebih cocok untuk seseorang apa adanya. </p>\n\n<p> Saya menggunakannya untuk mengubah ukuran panel dalam sesi irssi di dalam tmux yang membaca keluaran dari <a href=\"http://wouter.coekaerts.be/irssi/nicklist\" rel=\"nofollow noopener\" target=\"_blank\"> <code>nicklist.pl</code> </a> naskah. Panel sering diubah ukurannya ketika saya memasang terminal yang berbeda, dan harus&gt; 20 kolom lebar agar FIFO berfungsi dengan benar (dan tidak perlu membuatnya lebih lebar, mencuri ruang layar saya). </p>\n\n<p> Abaikan kalkulasi <code>CURRENT_PANE_WIDTH</code> yang berbelit-belit dan gunakan grep + sed satu jika Anda mau. Yang saat ini sebagian besar adalah eksperimen untuk menyimpan skrip sepenuhnya di shell (kecuali panggilan tmux, tentu saja). Ini kemungkinan besar lebih cepat, yang mungkin menarik untuk otomatisasi di mana skrip sering berjalan (saat ini saya menjalankannya sebagai panggilan khusus). </p> <pre><code>#!/bin/sh\nTMUX=\"/usr/bin/tmux\"\nTMUX_SESSION=\"irssi\"\nTMUX_WINDOW=\"0\"\nTMUX_WINDOW_PANE=\"1\"\nDESIRED_PANE_WIDTH=\"20\"\n\nerror()\n{\n    printf '%s: error: %s\\n' \"${0##*/}\" \"${1}\" 1&gt;&amp;2\n    exit ${2}\n}\n\n# Find with grep and sed. More readable and easier to modify.\n#CURRENT_PANE_WIDTH=\"$(${TMUX} list-panes -t \"${TMUX_SESSION}:0 | grep \"^${TMUX_WINDOW_PANE}: \" | sed 's/^'\"${TMUX_WINDOW_PANE}\"': \\[\\([^x]\\+\\).*/\\1/')\"\n\n# Find with shell expansion. Because it can be done!\nCURRENT_PANE_WIDTH=$(${TMUX} list-panes -t \"${TMUX_SESSION}:${TMUX_WINDOW}\" |\\\nwhile read line; do\n    PANE_MATCH=\"${line#${TMUX_WINDOW_PANE}:\\ \\[}\"\n    if [ \"${line}\" != \"${PANE_MATCH}\" ]; then\n        CURRENT_PANE_WIDTH=\"${PANE_MATCH%%x*}\"\n        printf \"${PANE_MATCH%%x*}\"\n        break;\n    fi\ndone)\n\nif [ -z \"${CURRENT_PANE_WIDTH}\" ]; then\n    error 'no matching pane found.' 1\nfi\n\nif ! [ \"${CURRENT_PANE_WIDTH}\" -eq \"${CURRENT_PANE_WIDTH}\" ]; then\n    error 'could not get integer width.' 1\nelif ! [ \"${CURRENT_PANE_WIDTH}\" -eq \"${DESIRED_PANE_WIDTH}\" ]; then\n    RESIZE_NUMBER=$((${CURRENT_PANE_WIDTH} - ${DESIRED_PANE_WIDTH}))\n    if [ ${RESIZE_NUMBER} -ge 0 ]; then\n        DIRECTION=\"R\"\n    else\n        DIRECTION=\"L\"\n        RESIZE_NUMBER=$((-${RESIZE_NUMBER}))\n    fi\n\n    ${TMUX} resize-pane -t \"${TMUX_SESSION}:${TMUX_WINDOW}\" -${DIRECTION} ${RESIZE_NUMBER}\nfi\n</code></pre>","votes":"2","source":"https://superuser.com/a/389001","author":"<a href=\"https://superuser.com/users/49184/daniel-andersson\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Daniel Andersson</span></a>","replies":[{"reply":"Terima kasih. Situasi yang saya hadapi persis sama dengan situasi Anda, saya juga menggunakan irssi dan tmux. Tapi siapa yang harus memanggil skrip ini? Haruskah saya memanggil ini di panel 1?","author":"<a href=\"https://superuser.com/users/21134/haohaolee\" target=\"_blank\" rel=\"nofollow noopener\">haohaolee</a>"},{"reply":"Anda dapat memanggilnya dari mana saja, karena berisi nama sesi tmux, dll. Secara pribadi, saya menulis ulang di atas sebagai plugin irssi - lihat bagian &quot;Perbarui otomatis ukuran panel tmux untuk nicklist.pl&quot; di <a href=\"http://510x.se/notes/posts/Install_and_setup_BitlBee/\" rel=\"nofollow noopener\" target=\"_blank\"> 510x.se/notes/posts/Install_and_setup_BitlBee </a> . Saya telah menggunakan plugin setidaknya selama beberapa minggu, dan itu berfungsi dengan baik di sini.","author":"<a href=\"https://superuser.com/users/49184/daniel-andersson\" target=\"_blank\" rel=\"nofollow noopener\">Daniel Andersson</a>"},{"reply":"Terima kasih banyak. Saya akan memilih jawaban Anda ketika saya memiliki reputasi yang cukup","author":"<a href=\"https://superuser.com/users/21134/haohaolee\" target=\"_blank\" rel=\"nofollow noopener\">haohaolee</a>"}]}]}
