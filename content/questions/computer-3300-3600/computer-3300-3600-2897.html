{"title":"Kamera web Linux (v4l) - membuat setelan &quot;tetap&quot;","draft":false,"url":"/kamera-web-linux-v4l-membuat-setelan-quottetapquot-m9w2axdr","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","debian","webcam","raspberry-pi","v4l2"],"snippet":"Kamera Logitech saya (C300) terdeteksi dengan benar dan ada di / dev / video0. Namun demikian, secara default kontras dan saturasi gambar diatur ke maksimum, yang secara signifikan menurunkan kualitas gambar.Saya...","body":"<p> Kamera Logitech saya (C300) terdeteksi dengan benar dan ada di / dev / video0. Namun demikian, secara default kontras dan saturasi gambar diatur ke maksimum, yang secara signifikan menurunkan kualitas gambar.\nSaya dapat mengubah pengaturan menggunakan guvcview tetapi setelah keluar, pengaturan kembali normal (saya menggunakan mplayer untuk menangkap bingkai). Bagaimana cara membuat perubahan yang saya buat di guvcview permanen? </p>\n\n<p> EDIT: </p>\n\n<p> Sepertinya pengaturan guvcview memang &quot;lengket&quot; - jika saya membukanya lagi, gambarnya tetap sama. Jadi itu adalah sesuatu yang dilakukan program lain untuk inisialisasi webcam (masalah yang sama pada mplayer dan vlc) </p>","source":"https://superuser.com/questions/471597/linux-v4l-webcam-make-settings-stick","author":"<a href=\"https://superuser.com/users/105349/petr\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">petr</span></a>","replies":[],"answers":[{"answer":"<p> Pertama, kabar buruknya: Saat ini tidak ada solusi bawaan untuk melakukan itu di distro mana pun yang saya tahu. </p>\n\n<p> Kabar baiknya adalah solusi seperti itu sangat mudah diterapkan dan dapat disesuaikan untuk banyak masalah serupa: kita hanya perlu menggunakan sedikit udev dan bash. </p>\n\n<p> Pertama, kita memerlukan cara programatik (ramah skrip) untuk menyetel pengaturan ini. Favorit saya adalah <code>v4l2ctrl</code>, karena dapat menyimpan konfigurasi V4L2 dan kemudian memulihkannya sesuai permintaan. Sebagai contoh: </p>\n\n<ol>\n<li> Pertama, ubah pengaturan kamera Anda dengan program apa pun yang Anda suka. Saya sangat merekomendasikan qv4l2 untuk itu, itu luar biasa. </li>\n<li><p> Kemudian, simpan pengaturan kamera ke file. (<code>-d /dev/video0</code> adalah opsional, tetapi berguna jika Anda memiliki lebih dari satu kamera.) </p> <pre><code>v4l2ctrl -d /dev/video0 -s camera-settings.txt\n</code></pre> </li>\n<li><p> Jika Anda mencabut dan memasang kembali pengaturan akan hilang, tetapi sekarang kami dapat memulihkannya: </p> <pre><code>v4l2ctrl -d /dev/video0 -l camera-settings.txt\n</code></pre> </li>\n</ol>\n\n<p> Setelah Anda membuatnya berfungsi seperti itu, saatnya untuk mengotomatiskannya dengan udev. Untuk ini kami akan membuat file aturan yang kami sukai yang cocok dengan kamera. File tersebut dapat disebut <code>/etc/udev/rules.d/99-v4l2-default-settings.rules</code> dan berisi sesuatu seperti ini: </p> <pre><code>SUBSYSTEM==\"video4linux\", ATTR{name}==\"HD Pro Webcam C920\", RUN+=\"/etc/camera-defaults/udev-hook.sh\"\n</code></pre> <p> Di atas akan berjalan sebagai root skrip <code>/etc/camera-defaults/udev-hook.sh</code> yang akan segera kami buat setiap kali perangkat subsistem <code>video4linux</code> yang nama pabrikannya adalah &quot;HD Pro Webcam C920&quot; terdeteksi atau dicabut. </p>\n\n<p> Kami dapat menambahkan banyak filter berbeda ke aturan kami. Anda dapat menggunakan <code>udevadm info -a -p $(udevadm info -q path -n /dev/video0)</code> untuk mendapatkan semua kemungkinan variabel untuk perangkat, serta untuk perangkat induknya. </p>\n\n<p> Terakhir, buat skrip. Ini sesuatu yang sederhana yang akan berhasil. <strong> Berikan izin eksekusi! </strong></p> <pre><code>#!/bin/bash\nset -eu\n\n# Useful for debugging, if you want to check what variables are available:\n# set &gt; /tmp/vars\n\nif [ \"$ACTION\" == \"add\" ]; then\n  v4l2ctrl -d \"$DEVNAME\" -l \"/etc/camera-defaults/camera-settings.txt\"\nfi\n</code></pre> <p> Pindahkan <code>camera-settings.txt</code> ke direktori yang ditentukan, cabut dan pasang kembali. Pengaturan dari file itu seharusnya berhasil dipulihkan. </p>\n\n<p> Kapan pun di masa mendatang Anda perlu menyimpan pengaturan Anda secara permanen, gunakan program favorit Anda untuk menyesuaikannya dan kemudian jalankan: </p> <pre><code>v4l2ctrl -s /etc/camera-defaults/camera-settings.txt\n</code></pre>","votes":"6","source":"https://superuser.com/a/1249461","author":"<a href=\"https://superuser.com/users/370576/alicia\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Alicia</span></a>","replies":[{"reply":"Saya mengkonsolidasikan solusi ini dan menerbitkannya di repositori git: <a href=\"https://git.ao2.it/v4l2-persistent-settings.git/\" rel=\"nofollow noopener\" target=\"_blank\"> git.ao2.it/v4l2-persistent-settings.git </a> Saya juga mencoba bertanya di linux-media untuk melihat apa yang dipikirkan pengembang v4l tentang itu: <a href=\"https://www.spinics.net/lists/linux-media/msg143521.html\" rel=\"nofollow noopener\" target=\"_blank\"> spinics.net/lists/linux-media/msg143521.html </a>","author":"<a href=\"https://superuser.com/users/594906/antonio-ospite\" target=\"_blank\" rel=\"nofollow noopener\">Antonio Ospite</a>"}]},{"answer":"<p> Saya memperbaiki masalah serupa dengan mengikuti langkah-langkah ini (diadaptasi dari <a href=\"http://ubuntuforums.org/showthread.php?t=1300554\" rel=\"nofollow noopener\" target=\"_blank\"> sumber </a> ): </p> <pre><code>$ sudo apt-get install mercurial\n$ hg clone http://linuxtv.org/hg/v4l-dvb\n$ cd v4l-dvb\n$ sudo make menuconfig &lt;-- dont change anything, just \"Exit\" and save changes\n$ sudo emacs v4l/.config &lt;-- change CONFIG_DVB_FIREDTV=m to CONFIG_DVB_FIREDTV=n\n$ make\n$ sudo make install\n$ v4l2ucp &lt;-- Auto Gain off\n</code></pre>","votes":"1","source":"https://superuser.com/a/474550","author":"<a href=\"https://superuser.com/users/151431/terdon\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">terdon</span></a>","replies":[]}]}
