{"title":"docker build --build-arg kehilangan nilai dan mengembang menjadi string kosong","draft":false,"url":"/docker-build-build-arg-kehilangan-nilai-dan-mengembang-menjadi-string-kosong-r3j38ivw","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["ubuntu","docker","build"],"snippet":"Menggunakan buruh pelabuhan versi 1.9.0  Saya memiliki kontainer buruh pelabuhan yang menyediakan cermin terpercaya ubuntu (cermin terpercaya). Saya mencoba membangun wadah kedua dan ingin memperbarui dan menginstal paket dari trusty-mirror.  Dockerfile saya...","body":"<p> Menggunakan buruh pelabuhan versi 1.9.0 </p>\n\n<p> Saya memiliki kontainer buruh pelabuhan yang menyediakan cermin terpercaya ubuntu (cermin terpercaya). Saya mencoba membangun wadah kedua dan ingin memperbarui dan menginstal paket dari trusty-mirror. </p>\n\n<p> Dockerfile saya untuk container kedua memiliki; </p> <pre><code>FROM ubuntu:14.04\n\nRUN sed -i -e s#http://archive.ubuntu.com#${MIRROR}#g \\\n           -e s#http://security.ubuntu.com#${MIRROR}#g \\\n           /etc/apt/sources.list\nRUN cat /etc/apt/sources.list\nRUN apt-get update\nRUN apt-get -y upgrade\nRUN apt-get -y autoremove\n</code></pre> <p> Saya meneruskan informasi CERMIN ke buruh pelabuhan menggunakan <a href=\"https://docs.docker.com/engine/reference/commandline/build/#set-build-time-variables-build-arg\" rel=\"nofollow noopener\" target=\"_blank\"> opsi --build-arg </a> , seperti itu; </p> <pre><code>ip=$(docker inspect --format '{{ .NetworkSettings.IPAddress }}' trusty-mirror 2&gt;/dev/null)\ndocker build --build-arg MIRROR=ftp://$ip\n</code></pre> <p> Saat ini berjalan; </p> <pre><code>+++ docker inspect --format '{{ .NetworkSettings.IPAddress }}' trusty-mirror\n++ ip=172.17.0.2\n++ docker build --build-arg MIRROR=ftp://172.17.0.2 .\nSending build context to Docker daemon 8.192 kB\nStep 1 : FROM ubuntu:14.04\n ---&gt; e9ae3c220b23\nStep 2 : RUN sed -i -e s#http://archive.ubuntu.com#${MIRROR}#g            -e s#http://security.ubuntu.com#${MIRROR}#g            /etc/apt/sources.list\n ---&gt; Using cache\n ---&gt; 76f727c60ef8\nStep 3 : RUN cat /etc/apt/sources.list\n ---&gt; Running in 55ff5ff46467\n# See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to\n# newer versions of the distribution.\n\ndeb /ubuntu/ trusty main restricted\ndeb-src /ubuntu/ trusty main restricted\n\n## Major bug fix updates produced after the final release of the\n## distribution.\ndeb /ubuntu/ trusty-updates main restricted\ndeb-src /ubuntu/ trusty-updates main restricted\n\n## Uncomment the following two lines to add software from the 'universe'\n## repository.\n## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu\n## team. Also, please note that software in universe WILL NOT receive any\n## review or updates from the Ubuntu security team.\ndeb /ubuntu/ trusty universe\ndeb-src /ubuntu/ trusty universe\ndeb /ubuntu/ trusty-updates universe\ndeb-src /ubuntu/ trusty-updates universe\n\n## N.B. software from this repository may not have been tested as\n## extensively as that contained in the main release, although it includes\n## newer versions of some applications which may provide useful features.\n## Also, please note that software in backports WILL NOT receive any review\n## or updates from the Ubuntu security team.\n# deb /ubuntu/ trusty-backports main restricted\n# deb-src /ubuntu/ trusty-backports main restricted\n\ndeb /ubuntu/ trusty-security main restricted\ndeb-src /ubuntu/ trusty-security main restricted\ndeb /ubuntu/ trusty-security universe\ndeb-src /ubuntu/ trusty-security universe\n# deb /ubuntu/ trusty-security multiverse\n# deb-src /ubuntu/ trusty-security multiverse\n ---&gt; b296354b0b9e\nRemoving intermediate container 55ff5ff46467\nStep 5 : RUN apt-get update\n ---&gt; Running in 7251e0ffb6d2\nE: Malformed line 4 in source list /etc/apt/sources.list (URI parse)\nE: The list of sources could not be read.\n</code></pre> <p> Perhatikan bahwa MIRROR build-arg diperluas menjadi &quot;&quot;, yang merusak / etc / apt sources.list dan menyebabkan pembaruan gagal. </p>\n\n<p> Saya telah memeriksa dua kali Dockerfile menggunakan nilai kode keras di Dockerfile; </p> <pre><code>ENV MIRROR=ftp://172.17.0.2\n</code></pre> <p> dan semuanya berjalan seperti yang diharapkan, KECUALI pembuatan buruh pelabuhan gagal dengan; </p> <pre><code>One or more build-args [MIRROR] were not consumed, failing build.\n</code></pre> <p> Apa yang kulewatkan di sini? </p>","source":"https://superuser.com/questions/999383/docker-build-build-arg-loses-value-and-expands-to-empty-string","author":"<a href=\"https://superuser.com/users/258947/cab\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">CAB</span></a>","replies":[],"answers":[{"answer":"<p> Apa yang saya lewatkan adalah Dockerfile yang membutuhkan korespondensi <a href=\"https://docs.docker.com/engine/reference/builder/#arg\" rel=\"nofollow noopener\" target=\"_blank\"> ARG </a> masuk. </p>","votes":"6","source":"https://superuser.com/a/1000155","author":"<a href=\"https://superuser.com/users/258947/cab\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">CAB</span></a>","replies":[]},{"answer":"<p> Dari pada </p>\n\n<blockquote>\n  <p> ENV CERMIN = <a href=\"ftp://172.17.0.2\" rel=\"nofollow noopener\" target=\"_blank\"> ftp://172.17.0.2 </a></p>\n</blockquote>\n\n<p> Kamu bisa gunakan </p>\n\n<blockquote>\n  <p> ARG CERMIN = <a href=\"ftp://172.17.0.2\" rel=\"nofollow noopener\" target=\"_blank\"> ftp://172.17.0.2 </a></p>\n</blockquote>","votes":"2","source":"https://superuser.com/a/1062997","author":"<a href=\"https://superuser.com/users/445430/ji-ruh\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">ji-ruh</span></a>","replies":[]}]}
