{"title":"Tonton dan riwayat mencatat peristiwa Login dan Logout pengguna di Linux","draft":false,"url":"/tonton-dan-riwayat-mencatat-peristiwa-login-dan-logout-pengguna-di-linux-0qbzmdj4","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","login"],"snippet":"Saya ingin menyimpan riwayat login dan logout pengguna di Linux.  Artinya, beri tahu saya jika panggilan sistem yang relevan digunakan untuk acara masuk dan keluar sehingga saya dapat melakukannya dengan mengaitkan panggilan...","body":"<p> Saya ingin menyimpan riwayat login dan logout pengguna di Linux. </p>\n\n<p> Artinya, beri tahu saya jika panggilan sistem yang relevan digunakan untuk acara masuk dan keluar sehingga saya dapat melakukannya dengan mengaitkan panggilan sistem. </p>\n\n<p> Juga, jika ada cara lain di mana kode kepemilikan saya (proses atau utas) dapat menerima peristiwa masuk dan keluar. </p>\n\n<p> Selain itu, jika sudah ada mekanisme pemeliharaan riwayat masuk / keluar di Linux, beri tahu saya di mana saya bisa mendapatkan informasi detailnya. </p>\n\n<p> Terima kasih. </p>\n\n<p> Senang </p>","source":"https://superuser.com/questions/970883/watch-and-history-logging-the-login-and-logout-events-of-users-in-linux","author":"<a href=\"https://superuser.com/users/495066/happy\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Happy</span></a>","replies":[{"reply":"Pencarian riwayat login untuk pengguna tertentu mungkin membantu sebagian atau melengkapi metode lain: <a href=\"http://serverfault.com/questions/305738/how-do-i-extract-login-history\" title=\"how do i extract login history\" target=\"_blank\" rel=\"nofollow noopener\"> serverfault.com/questions/305738/how-do-i-extract-login-history </a>","author":"<a href=\"https://superuser.com/users/485349/stackabstraction\" target=\"_blank\" rel=\"nofollow noopener\">StackAbstraction</a>"}],"answers":[{"answer":"<p> Jika subsistem audit kernel diaktifkan, Anda dapat mengaktifkan modul <code>pam_loginuid.so</code> PAM, yang akan membuat &quot;sesi audit&quot; baru untuk setiap login (dengan menulis ke / proc / self / loginuid). Ini akan dicatat oleh auditd atau systemd-journald. </p>\n\n<p> Tapi selain itu disana <em> tidak </em> panggilan sistem &quot;login&quot; apa pun. Hampir semuanya dilakukan di ruang pengguna (dan sedikit tersebar), kecuali untuk peralihan kredensial terakhir (yang bagaimanapun juga sering dilakukan oleh daemon secara internal). Tidak ada satu pun peristiwa &quot;pengguna telah masuk&quot;, setidaknya tidak ada yang konsisten di semua distribusi Linux. </p>\n\n<p> Namun, semua komponen terlibat <em> melakukan </em> sudah mencatat banyak informasi. Misalnya, Anda dapat menemukan log sesi di <code>/var/log/wtmp</code> (baca dengan perintah <code>who &lt;file&gt;</code> atau <code>last</code>), dan Anda dapat menemukan beberapa pesan mengenai setiap login di <code>/var/log/secure</code> atau <code>/var/log/auth.log</code> atau jurnal systemd: </p> <pre><code>sshd[3037]: Authorized to grawity, krb5 principal grawity@NULLROUTE.EU.ORG (krb5_kuserok)\nsshd[3037]: Accepted gssapi-with-mic for grawity from 2a00:1a28:1157:143::2 port 55350 ssh2\nkernel: audit: type=1006 audit(1441862594.054:16701): pid=3037 uid=0 old-auid=4294967295 auid=1000 old-ses=4294967295 ses=14576 res=1\nsshd[3037]: pam_unix(sshd:session): session opened for user grawity by (uid=0)\nsystemd-logind[1531]: New session 14576 of user grawity.\n</code></pre> <p> Untuk memantau ini dalam program Anda sendiri, ada beberapa pilihan: </p>\n\n<ul>\n<li><p> Jika mesin target menjalankan systemd, Anda dapat memantau sinyal D-Bus yang dikirim oleh systemd-logind (<code>SessionNew</code> dan <code>SessionRemoved</code>). ConsoleKit memiliki antarmuka serupa. </p></li>\n<li><p> Anda dapat mengimplementasikan modul PAM Anda sendiri yang mengirimkan notifikasi melalui IPC. Ini akan serupa dengan tahap &quot;sesi&quot; dari <code>pam_unix</code> (yang saat ini hanya mencetak pesan di atas ke syslog). </p></li>\n<li><p> Anda dapat menonaktifkan-menonton file &quot;utmp&quot; atau &quot;wtmp&quot; (yang pertama di <code>(/var)/run/utmp</code> di Linux, yang terakhir di <code>/var/log/wtmp</code>). Sebagian besar sesi login direkam di sana untuk dilihat dengan <code>who</code> atau <code>w</code>. (utmp memegang status saat ini, sedangkan wtmp adalah log sebenarnya.) </p></li>\n<li><p> Anda dapat menggunakan auditd, yang akan mencatat baik pesan kernel dari <code>pam_loginuid</code> serta berbagai pesan ruang pengguna dari daemon. </p></li>\n</ul>\n\n<p> Jangan lupa untuk membedakan antara login &quot;interaktif&quot; (gdm, sshd, login), login &quot;layanan&quot; (imap, ftp), dan sesi &quot;batch&quot; (cron, systemd-user). </p>","votes":"6","source":"https://superuser.com/a/970893","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user1686</span></a>","replies":[{"reply":"Terima kasih banyak atas jawabannya. Bisakah Anda memberi saran lebih detail tentang pernyataan terakhir yaitu &quot;Jangan lupa untuk membedakan antara login&quot; interaktif &quot;(gdm, sshd, login), login&quot; layanan &quot;(imap, ftp), dan sesi&quot; batch &quot;(cron , systemd-user). &quot;","author":"<a href=\"https://superuser.com/users/495066/happy\" target=\"_blank\" rel=\"nofollow noopener\">Happy</a>"}]}]}
