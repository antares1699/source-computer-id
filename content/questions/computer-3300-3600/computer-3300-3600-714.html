{"title":"Saya mengalami masalah dengan file teks yang ditandai sebagai biner","draft":false,"url":"/saya-mengalami-masalah-dengan-file-teks-yang-ditandai-sebagai-biner-71ryxerl","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","grep"],"snippet":"Saya memiliki file yang dapat dieksekusi yang menghasilkan file teks sebagai outputnya. Masalahnya adalah bahwa file teks keluar dengan semacam bendera file biner. Hasilnya seperti ini:  $ grep &quot;grep string&quot; output_file.txtBinary...","body":"<p> Saya memiliki file yang dapat dieksekusi yang menghasilkan file teks sebagai outputnya. Masalahnya adalah bahwa file teks keluar dengan semacam bendera file biner. Hasilnya seperti ini: </p> <pre><code>$ grep &quot;grep string&quot; output_file.txt\nBinary file output_file.txt matches.\n\n$ grep -a &quot;grep string&quot; output_file.txt\n[correct results]\n</code></pre> <p> Beberapa bacaan menunjukkan bahwa grep mencari karakter null dalam ribuan byte pertama atau lebih, kemudian menentukan dari apakah file itu &#39;biner&#39; atau tidak, jadi pertanyaan saya adalah dua kali lipat: </p>\n<ol>\n<li><p> Apakah ada cara mudah untuk menghapus karakter nol dari file saya (saya dapat melakukan ini sebagai bagian dari pemrosesan pasca saya) untuk memastikan bahwa grep berfungsi dengan benar tanpa tanda -a? </p>\n</li>\n<li><p> Apakah ada sesuatu yang jelas harus saya cari dalam kode saya untuk mencegah karakter null ditulis ke file? Saya telah memeriksa kode dengan cukup teliti dan saya tidak melihat penyebab yang jelas. </p>\n<p> . </p>\n</li>\n</ol>","source":"https://superuser.com/questions/324867/im-having-trouble-with-a-text-file-being-marked-as-a-binary","author":"<a href=\"https://superuser.com/users/94669/brightwellcd\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">brightwellcd</span></a>","replies":[],"answers":[{"answer":"<p> Saya bisa menjawab setidaknya pertanyaan pertama. Jika Anda menggunakan Unix / Linux, Anda dapat menggunakan tr </p> <pre><code>tr -d '\\000' &lt; filein &gt; fileout\n</code></pre> <p> di mana \\ 000 adalah karakter nol. Anda juga dapat menghapus semua karakter yang tidak dapat dicetak seperti yang Anda lihat pada contoh di sini: <a href=\"http://seismo.berkeley.edu/~rallen/resources/UNIXcmds/sed_tr_cut_od.html\" rel=\"nofollow noopener\" target=\"_blank\"> &quot;Unix Text Editing: sed, tr, cut, od, awk&quot; </a></p>\n\n<p> Mengenai pertanyaan kedua Anda, saya tidak tahu yang mana bahasa pemrograman Anda, tetapi saya akan mencari variabel yang tidak diinisialisasi yang akhirnya dapat dicetak ke file output. </p>","votes":"6","source":"https://superuser.com/a/324885","author":"<a href=\"https://superuser.com/users/32097/drnoone\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">DrNoone</span></a>","replies":[{"reply":"Saya akan memilih ini jika saya bisa, tetapi saya tampaknya terlalu baru. : - /","author":"<a href=\"https://superuser.com/users/94669/brightwellcd\" target=\"_blank\" rel=\"nofollow noopener\">brightwellcd</a>"},{"reply":"Saya menemukan string nol dalam output saya. Saya menjalankan skrip tr ini dan melakukan visual diff; dengan cepat menemukan masalahnya. Saya akan memberikan suara positif jika / ketika saya mendapatkan reputasi yang cukup untuk melakukannya. Terima kasih.","author":"<a href=\"https://superuser.com/users/94669/brightwellcd\" target=\"_blank\" rel=\"nofollow noopener\">brightwellcd</a>"}]},{"answer":"<p> Saya akan menebak ... </p>\n\n<p> Program Anda menulis file dalam UTF-16, pengkodean Unicode yang menggunakan dua byte untuk setiap karakter. Setiap byte kedua, sebagian besar waktu, adalah null. </p> <pre><code>iconv -f utf-16 -t utf-8 &lt; filein &gt; fileout\n</code></pre> <p> akan mengubahnya menjadi UTF-8, yang paling nyaman bagi kebanyakan coreutils. </p>","votes":"5","source":"https://superuser.com/a/324903","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user1686</span></a>","replies":[{"reply":"Menarik, dan saya tidak tahu ini tentang UTF-16. Sebuah pertanyaan tentang perintah ini - apa sebenarnya yang dihapus atau dilakukan percakapan ke file? Bagaimana perilakunya dalam kasus penggunaan <a href=\"https://superuser.com/questions/1359385/consequences-of-removing-nul-characters-from-a-text-file\" target=\"_blank\" rel=\"nofollow noopener\"> pertanyaan saya di sini </a> ?","author":"<a href=\"https://superuser.com/users/323079/hashim-aziz\" target=\"_blank\" rel=\"nofollow noopener\">Hashim Aziz</a>"},{"reply":"@Hashim: Kurang tepat <i> menghapus </i> apa pun; itu membaca nilai dalam satu representasi dan menulis nilai yang sama di representasi lain. (Sama seperti mengonversi antara heksadesimal dan oktal, atau antara PNG dan BMP.) UTF-16 mewakili setiap nilai titik kode sebagai kode dua byte dengan panjang tetap (atau sepasang kode semacam itu), yang secara alami harus diisi dengan 0x00 byte jika nilainya di bawah 256, sedangkan UTF-8 mewakili nilai yang sama dengan kode panjang variabel yang tidak memerlukan bantalan null. Bagaimana perilakunya dengan file Anda bergantung pada apakah file Anda adalah UTF-16 atau tidak.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"@Hashim Apakah ada cara untuk menentukan apakah file UTF-16? Melakukan <code>file myfile.txt</code> hanya menampilkan file sebagai <code>data</code>.","author":"<a href=\"https://superuser.com/users/323079/hashim-aziz\" target=\"_blank\" rel=\"nofollow noopener\">Hashim Aziz</a>"},{"reply":"Jika itu teks dan terlihat seperti teks di editor teks Anda, lihat pengkodean apa yang terdeteksi oleh editor. Cobalah untuk melakukan konversi, dan periksa apakah <i> hasil </i> masih terlihat seperti teks di editor teks Anda. Atau lakukan hexdump pada file Anda, jika Anda melihat bahwa &quot;setiap byte kedua&quot; adalah 0x00, itu hampir selalu berarti UTF-16.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"Sayangnya membuka file di editor tidak mungkin dilakukan karena file yang saya kerjakan terlalu besar - semuanya lebih dari 10GB. Jika tidak ada byte NUL di kolom kedua hexdump apakah aman untuk menyimpulkan bahwa file tersebut jelas bukan UTF-16?","author":"<a href=\"https://superuser.com/users/323079/hashim-aziz\" target=\"_blank\" rel=\"nofollow noopener\">Hashim Aziz</a>"},{"reply":"Ini mungkin kolom pertama atau kedua (tergantung pada UTF-16LE atau UTF-16BE). Untuk sebagian besar teks Latin1, teks tersebut akan ada di sana secara konsisten. Untuk skrip lain - Yunani, Hangul, dll. - tidak akan ada karena nilainya â‰¥256 dan kedua byte sepenuhnya digunakan. Jadi itu tes yang mungkin tapi <i> tidak </i> kesimpulan yang pasti. (Perhatikan bahwa kesimpulannya mungkin juga bahwa ini bukan file teks biasa!)","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"}]}]}
