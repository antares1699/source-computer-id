{"title":"Bagaimana cara tidak mengizinkan pengguna di luar direktori home dengan SFTP","draft":false,"url":"/bagaimana-cara-tidak-mengizinkan-pengguna-di-luar-direktori-home-dengan-sftp-9ttxngyb","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","ubuntu","sftp"],"snippet":"Saya menjalankan Ubuntu 10.04. Saya telah menetapkan direktori home pengguna, tetapi saya ingin membatasinya ke direktori home mereka dan turunannya saat mereka terhubung melalui SFTP.  Dengan kata lain: tidak membiarkan mereka keluar...","body":"<p> Saya menjalankan Ubuntu 10.04. Saya telah menetapkan direktori home pengguna, tetapi saya ingin membatasinya ke direktori home mereka dan turunannya saat mereka terhubung melalui SFTP. </p>\n\n<p> Dengan kata lain: tidak membiarkan mereka keluar dari situ. </p>\n\n<p> Apa yang harus saya lakukan untuk mencapai ini? </p>","source":"https://superuser.com/questions/370953/how-to-not-allow-user-outside-of-home-directory-with-sftp","author":"<a href=\"https://superuser.com/users/59134/janis-peisenieks\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Janis Peisenieks</span></a>","replies":[{"reply":"Apakah Anda tidak ingin mereka menjalankan apa pun di / bin dan / usr / bin? Jadi tidak ada shell, gui atau perintah tradisional yang dapat diakses pengguna?","author":"<a href=\"https://superuser.com/users/89018/paul\" target=\"_blank\" rel=\"nofollow noopener\">Paul</a>"},{"reply":"Apa yang ingin Anda capai? Misalnya. batasi akses ke direktori home di FTP atau SFTP?","author":"<a href=\"https://superuser.com/users/22317/daniel-beck\" target=\"_blank\" rel=\"nofollow noopener\">Daniel Beck&#9830;</a>"},{"reply":"Maksud saya di ftp. Diedit sesuai","author":"<a href=\"https://superuser.com/users/59134/janis-peisenieks\" target=\"_blank\" rel=\"nofollow noopener\">Janis Peisenieks</a>"},{"reply":"-1 <a href=\"http://www.google.com/search?client=safari&rls=en&q=restrict+home+directory+ftp+ubuntu&ie=UTF-8&oe=UTF-8\" rel=\"nofollow noopener\" target=\"_blank\"> Pertanyaan tidak menunjukkan upaya penelitian apa pun. </a>","author":"<a href=\"https://superuser.com/users/22317/daniel-beck\" target=\"_blank\" rel=\"nofollow noopener\">Daniel Beck&#9830;</a>"},{"reply":"Dangit, maksudku sftp. Ftp tidak terpasang.","author":"<a href=\"https://superuser.com/users/59134/janis-peisenieks\" target=\"_blank\" rel=\"nofollow noopener\">Janis Peisenieks</a>"},{"reply":"Ada alasan saya bertanya, Anda tahu.","author":"<a href=\"https://superuser.com/users/22317/daniel-beck\" target=\"_blank\" rel=\"nofollow noopener\">Daniel Beck&#9830;</a>"}],"answers":[{"answer":"<h1 class=\"h3\"> FTP </h1>\n<p> Dari <a href=\"https://help.ubuntu.com/10.04/serverguide/C/ftp-server.html\" rel=\"nofollow noopener\" target=\"_blank\"> Dokumentasi Ubuntu </a> : </p>\n<blockquote>\n<h2 class=\"h4\"> Mengamankan FTP </h2>\n<p> Ada opsi di <code>/etc/vsftpd.conf</code> untuk membantu membuatnya <strong> vsftpd </strong> lebih aman. Misalnya, pengguna dapat dibatasi ke direktori beranda mereka dengan menghapus komentar: </p> <pre><code>chroot_local_user=YES\n</code></pre> <p> Anda juga dapat membatasi daftar pengguna tertentu hanya ke direktori home mereka: </p> <pre><code>chroot_list_enable=YES\nchroot_list_file=/etc/vsftpd.chroot_list\n</code></pre> <p> Setelah menghapus komentar opsi di atas, buat <code>/etc/vsftpd.chroot_list</code> yang berisi daftar pengguna satu per baris. Kemudian restart vsftpd: </p> <pre><code>sudo /etc/init.d/vsftpd restart\n</code></pre> </blockquote>\n<h1 class=\"h3\"> SFTP </h1>\n<p> Edit <code>/etc/ssh/sshd_config</code>: </p>\n<p> Setel <code>subsystem sftp internal-sftp</code> jika perlu. </p>\n<p> Tambahkan berikut ini: </p> <pre><code>Match user theUserName\n    ChrootDirectory %h\n    ForceCommand internal-sftp\n</code></pre> <p> Simpan dan uji konfigurasi dengan menjalankan <code>sshd -t</code>. Jika berhasil, mulai ulang <code>ssh</code> setelah itu untuk menerapkan perubahan. </p>\n<p> Tergantung pada penyiapan Anda yang sebenarnya, folder yang Anda tentukan sebagai <code>ChrootDirectory</code> (<code>%h</code> adalah rumah pengguna) harus dimiliki oleh <code>root</code> tanpa izin tulis untuk orang lain. Jadi sebenarnya bukan a <em> nyata </em> direktori home. </p>","votes":"9","source":"https://superuser.com/a/370955","author":"<a href=\"https://superuser.com/users/22317/daniel-beck\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Daniel Beck</span></a>","replies":[{"reply":"Terima kasih! Saya mencoba ini, dan yang terjadi adalah - pengguna tidak dapat terhubung lagi. FileZilla mengatakan <code>Server unexpectedly closed network connection</code>","author":"<a href=\"https://superuser.com/users/59134/janis-peisenieks\" target=\"_blank\" rel=\"nofollow noopener\">Janis Peisenieks</a>"},{"reply":"@ JanisPeisenieks Tidak dapat terhubung lagi menggunakan SSH, SCP atau SFTP?","author":"<a href=\"https://superuser.com/users/22317/daniel-beck\" target=\"_blank\" rel=\"nofollow noopener\">Daniel Beck&#9830;</a>"},{"reply":"SFTP dan SSH. Jangan gunakan SCP, jadi tidak bisa konfirmasi","author":"<a href=\"https://superuser.com/users/59134/janis-peisenieks\" target=\"_blank\" rel=\"nofollow noopener\">Janis Peisenieks</a>"},{"reply":"@JanisPeisenieks SSH tidak akan berfungsi lagi, karena pengguna tidak lagi memiliki akses ke shell loginnya yang dipasang di luar direktori home yang di-chroot. Anda perlu menyalin program dan perpustakaan yang diperlukan agar tersedia. Coba baca di <code>chroot</code>, ini benar-benar berperilaku serupa. Mengenai masalah SFTP, periksa file log jika Anda belum melakukannya. Saya curiga ini adalah masalah perizinan seperti yang saya sebutkan di paragraf terakhir posting saya.","author":"<a href=\"https://superuser.com/users/22317/daniel-beck\" target=\"_blank\" rel=\"nofollow noopener\">Daniel Beck&#9830;</a>"},{"reply":"Apa yang saya dapatkan adalah <code>bad ownership or modes for chroot directory component &quot;&#47;srv&#47;www&#47;&quot;</code>","author":"<a href=\"https://superuser.com/users/59134/janis-peisenieks\" target=\"_blank\" rel=\"nofollow noopener\">Janis Peisenieks</a>"},{"reply":"@JanisPeisenieks Sudahkah Anda membaca dan memahami paragraf terakhir dari jawaban saya?","author":"<a href=\"https://superuser.com/users/22317/daniel-beck\" target=\"_blank\" rel=\"nofollow noopener\">Daniel Beck&#9830;</a>"},{"reply":"Solusi yang bagus, permata di dalamnya adalah modul internal-sftp! Saya tidak tahu ssh memiliki sftp bawaan, dengan menggunakan sftp internal Anda tidak perlu membuat seluruh subsistem perpustakaan di sekitar biner sftp saat chroot. Bebas repot dan lebih elegan.","author":"<a href=\"https://superuser.com/users/321937/john\" target=\"_blank\" rel=\"nofollow noopener\">John</a>"}]}]}
