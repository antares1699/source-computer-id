{"title":"Setel editor default untuk crontab -e yang dipanggil dengan sudo","draft":false,"url":"/setel-editor-default-untuk-crontab-e-yang-dipanggil-dengan-sudo-vsqezph6","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","vim","sudo","text-editors","crontab"],"snippet":"Saya menggunakan Bash di Debian Squeeze. Saya baru saja membaca topik ini:  ubah editor teks default untuk crontab menjadi vim   Saya telah mengekspor kedua variabel VISUAL dan EDITOR ke vim untuk pengguna...","body":"<p> Saya menggunakan Bash di Debian Squeeze. Saya baru saja membaca topik ini: <a href=\"https://superuser.com/questions/281617/change-default-text-editor-for-crontab-to-vim\" target=\"_blank\" rel=\"nofollow noopener\"> ubah editor teks default untuk crontab menjadi vim </a> </p>\n\n<p> Saya telah mengekspor kedua variabel <code>VISUAL</code> dan <code>EDITOR</code> ke vim untuk pengguna biasa dan untuk root. Dan ini berfungsi - ketika saya mengetik <code>crontab -e</code> sebagai pengguna atau root biasa, crontab menjalankan vim untuk mengedit. </p>\n\n<p> Tapi menjalankan <code>sudo crontab -e</code> membuka nano. </p>\n\n<p> Menjalankan <code>sudo echo $EDITOR</code> (atau <code>$VISUAL</code>) memberikan keluaran int <code>vim</code>. </p>","source":"https://superuser.com/questions/523329/set-default-editor-for-crontab-e-invoked-with-sudo","author":"<a href=\"https://superuser.com/users/137403/coolmax\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Coolmax</span></a>","replies":[{"reply":"Anda akan menemukan penjelasan mengapa <code>sudo echo $EDITOR</code> tidak melakukan apa yang menurut Anda dilakukannya <a href=\"http://superuser.com/questions/493906/why-sudo-curl-ignores-proxy-settings\" target=\"_blank\" rel=\"nofollow noopener\"> sini </a> (dan hal-hal untuk mencoba membuat crontab Anda berfungsi)","author":"<a href=\"https://superuser.com/users/71809/mat\" target=\"_blank\" rel=\"nofollow noopener\">Mat</a>"},{"reply":"@ mat: Komentar Anda mungkin merupakan jawaban biasa.","author":"<a href=\"https://superuser.com/users/10779/heptite\" target=\"_blank\" rel=\"nofollow noopener\">Heptite</a>"},{"reply":"Apakah Anda menjalankan &#39;update-alternatif --config editor&#39; saat Anda root?","author":"<a href=\"https://superuser.com/users/182482/tumiki\" target=\"_blank\" rel=\"nofollow noopener\">tumiki</a>"},{"reply":"@tumiki: Saya baru saja mengecek, berhasil, tapi saya mencari solusi untuk distro (non-debian) lain juga.","author":"<a href=\"https://superuser.com/users/137403/coolmax\" target=\"_blank\" rel=\"nofollow noopener\">Coolmax</a>"}],"answers":[{"answer":"<p> Secara default dan untuk tujuan keamanan, <code>sudo</code> tidak melindungi lingkungan pengguna. </p>\n\n<p> Ada banyak cara untuk mengatasinya; untuk kasus khusus Anda, saya sarankan menambahkan <code>VISUAL=/usr/bin/vim</code> (dan <code>EDITOR=/usr/bin/vim</code> untuk program yang menggunakan program yang salah) ke <code>/etc/environment</code>. </p>\n\n<p> Pilihan kedua, jika Anda memiliki konfigurasi sudo permisif (mungkin karena hanya Anda, atau semua sudoers memiliki akses root yang sebenarnya) adalah menjalankan <code>visudo</code> dan menambahkan <code>Defaults env_keep=\"VISUAL EDITOR\"</code> untuk memungkinkan semua sudoer menentukan miliknya sendiri (yaitu, pertahankan variabel lingkungan itu). </p>\n\n<p> File sudoers Anda yang ada mungkin sudah memiliki (atau menyertakan) satu atau lebih pernyataan env_keep, mis. ini (dari contoh pastebin): </p> <pre><code>Defaults    env_reset\nDefaults    env_keep =  \"COLORS DISPLAY HOSTNAME HISTSIZE INPUTRC KDEDIR LS_COLORS\"\nDefaults    env_keep += \"MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE\"\nDefaults    env_keep += \"LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES\"\nDefaults    env_keep += \"LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE\"\nDefaults    env_keep += \"LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY\"\n</code></pre> <p> Baris pertama dari <code>env_keep</code> tersebut akan menimpa suntingan apa pun yang Anda buat di atasnya (tugas), baris lainnya memperpanjang daftar (<code>+=</code>). Agar semuanya tetap berfungsi seperti biasanya dan kecuali Anda memiliki alasan untuk mengubah set, saya sarankan untuk segera menambahkan baris <strong> setelah </strong> itu: </p> <pre><code>Defaults    env_keep += \"VISUAL EDITOR\"\n</code></pre> <p> (Ada opsi lain untuk menggunakan editor pilihan Anda, tetapi mereka tidak perlu rumit atau terlalu permisif dan berbahaya, jadi Anda harus membaca <code>man sudoers</code>, mencari tahu sendiri, dan memahami apa masalah yang mungkin terkait.) </p>","votes":"6","source":"https://superuser.com/a/590679","author":"<a href=\"https://superuser.com/users/219209/gabe\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Gabe</span></a>","replies":[{"reply":"Suka ini ... kecuali bahwa visudo akan meluncurkan vi ... hal yang kita coba hindari seperti wabah. sudo env EDITOR = nano visudo adalah cara yang tepat. Atau mungkin kucing, yang sedikit lebih berbahaya. Selain itu, <code>Defaults env_keep=&quot;VISUAL EDITOR&quot;</code> hanya berfungsi setelah env reset, jadi meletakkannya di atas tidak akan berfungsi ... paling bawah adalah yang paling aman.","author":"<a href=\"https://superuser.com/users/40974/ray-foss\" target=\"_blank\" rel=\"nofollow noopener\">Ray Foss</a>"},{"reply":"Saya bingung mengapa menempatkan env_keep = &quot;VISUAL EDITOR&quot; di bawah env_reset tidak berfungsi ... Saya hanya mencoba di atas, di bawah env_reset dan di bawah. hanya di bagian bawah bekerja.","author":"<a href=\"https://superuser.com/users/40974/ray-foss\" target=\"_blank\" rel=\"nofollow noopener\">Ray Foss</a>"},{"reply":"Tanpa informasi lain, saya hanya akan menebak bahwa sudah ada baris pengaturan env_keep di file di suatu tempat, yang menimpa apa pun yang Anda masukkan di atas dan yang Anda timpa dengan memindahkan arahan Anda ke akhir. Jika Anda menempelkan file sudoers Anda ke pastebin.com atau sesuatu dan menambahkan tautan di sini, saya dapat mengekstrak info yang relevan ke dalam jawabannya.","author":"<a href=\"https://superuser.com/users/219209/gabe\" target=\"_blank\" rel=\"nofollow noopener\">Gabe</a>"},{"reply":"itu adalah sudoers centos default yang memberi saya masalah. Saya mungkin harus menulis naskah itu. <a href=\"http://pastebin.com/4s3CiVYJ\" rel=\"nofollow noopener\" target=\"_blank\"> pastebin.com/4s3CiVYJ </a>","author":"<a href=\"https://superuser.com/users/40974/ray-foss\" target=\"_blank\" rel=\"nofollow noopener\">Ray Foss</a>"},{"reply":"daripada mengedit file <code>sudoers</code> Anda dengan <code>visudo</code>, pendekatan yang disarankan adalah membuat penyertaan dengan <code>sudo vim &#47;etc&#47;sudoers.d&#47;02-editor</code> dan menambahkan baris <code>env_keep</code> di sana. Dengan cara ini Anda akan menghindari konflik pada peningkatan paket dan dapat lebih mudah memelihara dan menyinkronkan file konfigurasi Anda (ini memungkinkan untuk menyimpan file sudoers yang tidak dimodifikasi yang berisi <code>#includedir &#47;etc&#47;sudoers.d</code> di bagian paling akhir).","author":"<a href=\"https://superuser.com/users/65975/ccpizza\" target=\"_blank\" rel=\"nofollow noopener\">ccpizza</a>"}]}]}
