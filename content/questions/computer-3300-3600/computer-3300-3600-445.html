{"title":"MTU adalah 1500, mengapa panjang fragmen pertama adalah 1496 di IPv6?","draft":false,"url":"/mtu-adalah-1500-mengapa-panjang-fragmen-pertama-adalah-1496-di-ipv6-fo85hn4h","votes":"4","answers_count":"4","categories":["Komputer"],"tags":["ipv6","wireshark"],"snippet":"ping6 ipv6Address -s 1500  Perintah ini akan menghasilkan fragmen. Dilihat oleh wireshark, panjang paket fragmen pertama adalah 1496 (dari layer 3). Karena MTU adalah 1500, saya bingung dengan panjang 1496 ini. Dari...","body":"<pre><code>ping6 ipv6Address -s 1500\n</code></pre> <p> Perintah ini akan menghasilkan fragmen. Dilihat oleh wireshark, panjang paket fragmen pertama adalah 1496 (dari layer 3). Karena MTU adalah 1500, saya bingung dengan panjang 1496 ini. Dari mana asalnya </p>","source":"https://superuser.com/questions/343107/mtu-is-1500-why-the-first-fragment-length-is-1496-in-ipv6","author":"<a href=\"https://superuser.com/users/87601/deepsky\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">deepsky</span></a>","replies":[{"reply":"Apakah Anda terhubung melalui layanan terowongan?","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"Tidak. Jika saya menggunakan -s 1452, tidak akan ada fragmen dan panjang totalnya adalah 1500.","author":"<a href=\"https://superuser.com/users/87601/deepsky\" target=\"_blank\" rel=\"nofollow noopener\">deepsky</a>"},{"reply":"Saya tidak tahu IP6, tetapi dengan IP4 saya harus menyetel parameter TCP saya ke 1480 karena switcher saya, ini seperti truk 15 &#39;tidak muat di bawah jembatan * / clunk * tetapi yang 14&#39; 11 &quot;terbang menembus. Dan masih berjalan 99mph seperti itu. 1% teratas dalam tes kecepatan untuk koneksi saya.Jadi saya tidak khawatir tentang perbedaan kecil","author":"<a href=\"https://superuser.com/users/98855/psycogeek\" target=\"_blank\" rel=\"nofollow noopener\">Psycogeek</a>"}],"answers":[{"answer":"<p> Ini hanya untuk referensi saya sendiri tentang IPv6 MTU. saya memerlukannya <em> beberapa </em> pertanyaan untuk menambahkannya ke - dan i cho-cho-memilih Anda. </p>\n\n<p> Pertama adalah paket Ethernet kami, yang biasanya kami abaikan: </p> <pre><code>+-------------------------+\n| Ethernet - 16 bytes     |\n|  6 byte destination MAC |\n|  6 byte source MAC      |\n|  4 byte type            |\n+-------------------------+\n|                         |\n/  1,500 byte payload     /\n|                         |\n+-------------------------+\n</code></pre> <p> Sekarang kami menambahkan header IPv4 atau IPv6: </p> <pre><code>IPv4                           IPv6\n+-------------------------+    +-------------------------+\n| Ethernet - 12 bytes     |    | Ethernet - 12 bytes     |\n|  6 byte destination MAC |    |  6 byte destination MAC |\n|  6 byte source MAC      |    |  6 byte source MAC      |\n|  4 byte type            |    |  4 byte type            |\n+-------------------------+    +-------------------------+\n| IPv4 - 20 bytes         |    | IPv6 - 40 bytes         |\n|  10  byte control flags |    |  6 byte control flags   |\n|  2 byte total length    |    |  2 byte payload length  |\n|  4 byte source addr     |    |  16 byte source addr    |\n|  4 byte dest addr       |    |                         |\n+-------------------------+    |  16 byte dest addr      |\n|                         |    |                         |\n|                         |    +-------------------------|\n|                         |    |                         |\n/ 1,480 payload           /    / 1,460 payload           /\n|                         |    |                         |\n+-------------------------+    +-------------------------+\n</code></pre> <p> Selanjutnya kami menambahkan realitas saya tentang koneksi PPPoE, yang mengambil 8 byte dari paket untuk tag PADS PPPoE: </p> <pre><code>+-------------------------+\n| Ethernet - 12 bytes     |\n|  6 byte destination MAC |\n|  6 byte source MAC      |\n|  4 byte type            |\n+-------------------------+\n| PPPoE PADS - 8 bytes    |\n+-------------------------+\n|                         |\n/ 1,492 payload           /\n|                         |\n+-------------------------+\n</code></pre> <p> Yang mengurangi MTU yang tersedia untuk lalu lintas IPv4 dan IPv6 kami: </p> <pre><code>IPv4                           IPv6\n+-------------------------+    +-------------------------+\n| Ethernet - 12 bytes     |    | Ethernet - 12 bytes     |\n|  6 byte destination MAC |    |  6 byte destination MAC |\n|  6 byte source MAC      |    |  6 byte source MAC      |\n|  4 byte type            |    |  4 byte type            |\n+-------------------------+    +-------------------------+\n| PPPoE PADS - 8 bytes    |    | PPPoE PADS - 8 bytes    |\n+-------------------------+    +-------------------------+\n| IPv4 - 20 bytes         |    | IPv6 - 40 bytes         |\n|  10  byte control flags |    |  6 byte control flags   |\n|  2 byte total length    |    |  2 byte payload length  |\n|  4 byte source addr     |    |  16 byte source addr    |\n|  4 byte dest addr       |    |                         |\n+-------------------------+    |  16 byte dest addr      |\n|                         |    |                         |\n|                         |    +-------------------------|\n|                         |    |                         |\n/ 1,472 payload           /    / 1,452 payload           /\n|                         |    |                         |\n+-------------------------+    +-------------------------+\n</code></pre> <p> Dan kemudian, dalam kasus saya, saya menggunakan <a href=\"http://tunnelbroker.net\" rel=\"nofollow noopener\" target=\"_blank\"> Badai Listrik </a> &#39;s <a href=\"http://en.wikipedia.org/wiki/6in4\" rel=\"nofollow noopener\" target=\"_blank\"> 6in4 tunneling </a> , karena ISP saya tidak menawarkan konektivitas IPv6 asli. Ini berarti lalu lintas IPv6 saya dibungkus dalam paket IPv4: </p> <pre><code>IPv4                           IPv6\n+-------------------------+    +-------------------------+\n| Ethernet - 12 bytes     |    | Ethernet - 12 bytes     |\n|  6 byte destination MAC |    |  6 byte destination MAC |\n|  6 byte source MAC      |    |  6 byte source MAC      |\n|  4 byte type            |    |  4 byte type            |\n+-------------------------+    +-------------------------+\n| PPPoE PADS - 8 bytes    |    | PPPoE PADS - 8 bytes    |\n+-------------------------+    +-------------------------+\n| IPv4 - 20 bytes         |    | IPv4 - 20 bytes         |\n|  10  byte control flags |    |  10  byte control flags |\n|  2 byte total length    |    |  2 byte total length    |\n|  4 byte source addr     |    |  4 byte source addr     |\n|  4 byte dest addr       |    |  4 byte dest addr       |\n+-------------------------+    +-------------------------+\n|                         |    | IPv6 - 40 bytes         |\n|                         |    |  6 byte control flags   |\n|                         |    |  2 byte payload length  |\n|                         |    |  16 byte source addr    |\n|                         |    |                         |\n|                         |    |  16 byte dest addr      |\n|                         |    |                         |\n|                         |    +-------------------------|\n|                         |    |                         |\n/ 1,472 payload           /    / 1,432 payload           /\n|                         |    |                         |\n+-------------------------+    +-------------------------+\n</code></pre> <p> Tetapi nomor pentingnya adalah <strong> MTU </strong> , yang merupakan ukuran IPv4 atau IPv6 yang tersedia untuk dirinya sendiri (termasuk headernya): </p> <pre><code>IPv4                           IPv6\n+-------------------------+    +-------------------------+\n| Ethernet - 12 bytes     |    | Ethernet - 12 bytes     |\n|  6 byte destination MAC |    |  6 byte destination MAC |\n|  6 byte source MAC      |    |  6 byte source MAC      |\n|  4 byte type            |    |  4 byte type            |\n+-------------------------+    +-------------------------+\n| PPPoE PADS - 8 bytes    |    | PPPoE PADS - 8 bytes    |\n+-------------------------+    +-------------------------+\n|                         |    | IPv4 - 20 bytes         |\n/ MTU = 1492              /    |  10  byte control flags |\n|                         |    |  2 byte total length    |\n+-------------------------+    |  4 byte source addr     |\n                               |  4 byte dest addr       |\n                               +-------------------------+\n                               |                         |\n                               / MTU = 1472              |\n                               |                         |\n                               +-------------------------+\n</code></pre> <p> Selanjutnya adalah kebingungan tentang file <em> muatan </em> size, digunakan saat mem-ping seseorang dengan ekstensi <em> jangan terpecah </em> bendera. ICMP beroperasi melalui IP, dan menambahkan overhead headernya sendiri: </p> <pre><code>IPv4                           IPv6\n+-------------------------+    +-------------------------+\n| Ethernet - 12 bytes     |    | Ethernet - 12 bytes     |\n|  6 byte destination MAC |    |  6 byte destination MAC |\n|  6 byte source MAC      |    |  6 byte source MAC      |\n|  4 byte type            |    |  4 byte type            |\n+-------------------------+    +-------------------------+\n| IPv4 - 20 bytes         |    | IPv6 - 40 bytes         |\n|  10  byte control flags |    |  6 byte control flags   |\n|  2 byte total length    |    |  2 byte payload length  |\n|  4 byte source addr     |    |  16 byte source addr    |\n|  4 byte dest addr       |    |                         |\n+-------------------------+    |  16 byte dest addr      |\n| ICMP - 8 bytes          |    |                         |\n+-------------------------+    +-------------------------|    \n|                         |    | ICMP - 8 bytes          |\n|                         |    +-------------------------+\n|                         |    |                         |\n/ 1,472 ping payload      /    / 1,452 ping payload      /\n|                         |    |                         |\n+-------------------------+    +-------------------------+\n</code></pre> <p><strong> Catatan </strong> : Ini sebabnya <em> kamu </em> dapat melakukan ping dengan payload <code>1,452</code> byte sebelum Anda perlu melakukan fragmen. </p>\n\n<p> Dalam kasus saya, dengan overhead tag PPPoE PADS: </p> <pre><code>IPv4                           IPv6\n+-------------------------+    +-------------------------+\n| Ethernet - 12 bytes     |    | Ethernet - 12 bytes     |\n|  6 byte destination MAC |    |  6 byte destination MAC |\n|  6 byte source MAC      |    |  6 byte source MAC      |\n|  4 byte type            |    |  4 byte type            |\n+-------------------------+    +-------------------------+\n| PPPoE PADS - 8 bytes    |    | PPPoE PADS - 8 bytes    |\n+-------------------------+    +-------------------------+\n| IPv4 - 20 bytes         |    | IPv6 - 40 bytes         |\n|  10  byte control flags |    |  6 byte control flags   |\n|  2 byte total length    |    |  2 byte payload length  |\n|  4 byte source addr     |    |  16 byte source addr    |\n|  4 byte dest addr       |    |                         |\n+-------------------------+    |  16 byte dest addr      |\n| ICMP - 8 bytes          |    |                         |\n+-------------------------+    +-------------------------|    \n|                         |    | ICMP - 8 bytes          |\n|                         |    +-------------------------+\n|                         |    |                         |\n/ 1,464 ping payload      /    / 1,444 ping payload      /\n|                         |    |                         |\n+-------------------------+    +-------------------------+\n</code></pre> <p> Dan biaya tambahan saya sebesar <strong> 6in4 </strong> : </p> <pre><code>IPv4                           IPv6\n+-------------------------+    +-------------------------+\n| Ethernet - 12 bytes     |    | Ethernet - 12 bytes     |\n|  6 byte destination MAC |    |  6 byte destination MAC |\n|  6 byte source MAC      |    |  6 byte source MAC      |\n|  4 byte type            |    |  4 byte type            |\n+-------------------------+    +-------------------------+\n| PPPoE PADS - 8 bytes    |    | PPPoE PADS - 8 bytes    |\n+-------------------------+    +-------------------------+\n| IPv4 - 20 bytes         |    | IPv4 - 20 bytes         |\n|  10  byte control flags |    |  10  byte control flags |\n|  2 byte total length    |    |  2 byte total length    |\n|  4 byte source addr     |    |  4 byte source addr     |\n|  4 byte dest addr       |    |  4 byte dest addr       |\n+-------------------------+    +-------------------------+\n| ICMP - 8 bytes          |    | IPv6 - 40 bytes         |\n+-------------------------+    |  6 byte control flags   |    \n|                         |    |  2 byte payload length  |\n|                         |    |  16 byte source addr    |\n|                         |    |                         |\n|                         |    |  16 byte dest addr      |\n|                         |    |                         |\n|                         |    +-------------------------|\n|                         |    | ICMP - 8 bytes          |\n|                         |    +-------------------------+\n|                         |    |                         |\n/ 1,464 ping payload      /    / 1,424 ping payload      /\n|                         |    |                         |\n+-------------------------+    +-------------------------+\n</code></pre> <p> Dan Anda tahu mengapa saya hanya bisa melakukan ping dengan muatan 1.424 byte. </p>","votes":"6","source":"https://superuser.com/a/407157","author":"<a href=\"https://superuser.com/users/8169/ian-boyd\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ian Boyd</span></a>","replies":[]},{"answer":"<p> Anda akan melihat ini jika Anda memiliki penandaan VLAN pada antarmuka yang tidak mendukungnya secara asli. Tag 802.1Q VLAN membutuhkan tambahan 4 byte. Jika NIC Anda mendukungnya secara native, NIC mendukung frame Ethernet 1522-byte (bukan yang lebih lama 1518-byte) sehingga Anda masih dapat memiliki MTU 1500 byte. Jika NIC Anda tidak mendukungnya secara asli, Anda dapat mendukungnya dalam perangkat lunak tetapi Anda harus mengecilkan MTU menjadi 1496 sehingga semuanya sesuai dengan bingkai lama 1518-byte yang didukung NIC Anda. </p>","votes":"4","source":"https://superuser.com/a/343124","author":"<a href=\"https://superuser.com/users/100251/paul\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Paul</span></a>","replies":[{"reply":"Tidak ada VLAN yang dikonfigurasi di jaringan saya. Dan bingkai Ethernet tidak berisi informasi 802.1q. Ini 14Bytes diamati dari wireshark.","author":"<a href=\"https://superuser.com/users/87601/deepsky\" target=\"_blank\" rel=\"nofollow noopener\">deepsky</a>"},{"reply":"Sebenarnya, menurut saya itu karena setiap segmen baru yang dibuat harus memiliki batas 8-byte, dan masih lebih kecil dari MTU. 1500 adalah 187 div 8 dengan sisa 4. Jadi, 1500-4 = 1496 harus menjadi batas baru. Ada detail yang lebih besar tentang fragmentasi di <a href=\"http://www.erg.abdn.ac.uk/~gorry/eg3567/inet-pages/ip-fragmentatiion.html\" rel=\"nofollow noopener\" target=\"_blank\"> erg.abdn.ac.uk/~gorry/eg3567/inet-pages/ip-fragmentatiion.html </a> .","author":"<a href=\"https://superuser.com/users/100251/paul\" target=\"_blank\" rel=\"nofollow noopener\">Paul</a>"},{"reply":"Saya pikir ini masuk akal. Reputasi tidak cukup untuk memberikan suara ...","author":"<a href=\"https://superuser.com/users/87601/deepsky\" target=\"_blank\" rel=\"nofollow noopener\">deepsky</a>"}]},{"answer":"<p> Unit transmisi maksimum (MTU) dari protokol komunikasi sebuah lapisan adalah ukuran dalam byte dari unit data protokol terbesar yang dapat diteruskan oleh lapisan tersebut.\nUntuk contoh koneksi IP melalui DSL menggunakan PPPoA / VC-MUX, sekali lagi memilih untuk mengisi 31 sel ATM seperti sebelumnya, kami memperoleh angka MTU tereduksi optimal yang diinginkan dari 1478 = 31 * 48-10 dengan memperhitungkan overhead 10 byte yang terdiri overhead Protokol Point-to-Point sebesar 2 byte, dan overhead AAL5 sebesar 8 byte. Ini memberikan total biaya 31 * 53 = 1643 byte yang dikirim melalui ATM dari paket 1478 byte yang diteruskan ke PPPoA. Dalam kasus IP yang dikirim melalui ADSL menggunakan PPPoA, angka 1478 akan menjadi panjang total paket IP termasuk header IP. Jadi dalam contoh ini, mempertahankan MTU yang dipaksakan sendiri sebesar 1478 dibandingkan dengan mengirim paket IP dengan total panjang 1500 menghemat 53 byte per paket pada lapisan ATM dengan biaya pengurangan 22 byte dari panjang paket IP. </p>\n\n<p> RFC 2516 menetapkan MTU maksimum untuk koneksi PPPoE / DSL 1492 byte: muatan ethernet maksimum 1500 byte dikurangi 8 byte header PPPoE (2 byte untuk overhead PPP, dan 6 byte untuk header PPPoE). Ini tidak serta merta mengisi bilangan bulat sel ATM.\nLapisan data link adalah lapisan 2 dari model OSI tujuh lapis jaringan komputer. Ini sesuai dengan, atau merupakan bagian dari lapisan tautan model referensi TCP / IP. Anda mengukur di lapisan 3, sehingga perbedaannya jelas. Karena jenis jaringan yang Anda gunakan, 4 byte digunakan untuk tujuan manajemen jaringan. </p>","votes":"1","source":"https://superuser.com/a/407322","author":"<a href=\"https://superuser.com/users/126011/supstj\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">supstj</span></a>","replies":[]},{"answer":"<p> Apakah Anda menggunakan DSL? Header PPPoE menggunakan 8 byte. </p>","votes":"1","source":"https://superuser.com/a/407423","author":"<a href=\"https://superuser.com/users/51705/lawrencec\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">LawrenceC</span></a>","replies":[]}]}
