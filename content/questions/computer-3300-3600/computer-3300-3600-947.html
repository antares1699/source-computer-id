{"title":"Peringatan dengan gzip --rsyncable - tanpa speedup","draft":false,"url":"/peringatan-dengan-gzip-rsyncable-tanpa-speedup-keg0ob5z","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["rsync","gzip"],"snippet":"Saya menggunakan (mencoba) gzip untuk mengompres file SQL dengan cara yang dapat disinkronkan untuk mentransfer cadangan dengan penundaan minimal.  Namun tampaknya ini tidak berfungsi, karena speedup selalu 1,00.  Arsip dibuat dengan membuang...","body":"<p> Saya menggunakan (mencoba) gzip untuk mengompres file SQL dengan cara yang dapat disinkronkan untuk mentransfer cadangan dengan penundaan minimal. </p>\n\n<p> Namun tampaknya ini tidak berfungsi, karena speedup selalu 1,00. </p>\n\n<p> Arsip dibuat dengan membuang database ke file <code>.sql</code> dan kemudian menerbitkan <code>gzip -f3 --rsyncable file.sql</code>. </p>\n\n<p> Selanjutnya mesin jarak jauh melakukan rsync terhadap cadangan terakhir dengan tanda berikut: </p>\n\n<p> <code>rsync -avhhiP --inplace</code> </p>\n\n<p> Mengapa speedup saya bisa 1,00? Haruskah saya tidak membuat ulang arsip setiap kali dan malah memperbaruinya mungkin? Saya tidak melihat metode ini disebutkan dari panduan online tentang penggunaan tanda --rsyncable. </p>\n\n<p> Saya menggunakan: </p> <pre><code># gzip -V\ngzip 1.5\n</code></pre>","source":"https://superuser.com/questions/653057/caveats-with-gzip-rsyncable-no-speedup","author":"<a href=\"https://superuser.com/users/116375/deed02392\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">deed02392</span></a>","replies":[{"reply":"Jika <code>--rsyncable</code> tidak terdaftar di <code>gzip --help</code>, perintah tidak mendukung opsi itu. Saya juga memiliki gzip 1.5 (Gentoo) dan tidak memiliki opsi itu. Kehadiran opsi <code>--rsyncable</code> bergantung pada apakah distribusi telah menerapkan tambalan yang menambahkan opsi tersebut. Distribusi mana yang Anda miliki?","author":"<a href=\"https://superuser.com/users/44887/dan-d\" target=\"_blank\" rel=\"nofollow noopener\">Dan D.</a>"},{"reply":"Jika Anda menginginkan opsi ini, Anda perlu menerapkan tambalan dan membangun gzip.","author":"<a href=\"https://superuser.com/users/44887/dan-d\" target=\"_blank\" rel=\"nofollow noopener\">Dan D.</a>"},{"reply":"Ah, saya pikir ini seharusnya diperbaiki sejak versi 1.4. Saya memeriksa keluaran <code>--help</code> dan halaman manualnya, yang satu menyebutkannya tetapi tidak yang lain meskipun saya tidak yakin yang mana secara spesifik. Ini pada <code>Debian wheezy</code>.","author":"<a href=\"https://superuser.com/users/116375/deed02392\" target=\"_blank\" rel=\"nofollow noopener\">deed02392</a>"},{"reply":"Oke, baru saja dicentang dan <code>--rsyncable</code> IS di keluaran bantuan, tetapi tidak ada di halaman manual.","author":"<a href=\"https://superuser.com/users/116375/deed02392\" target=\"_blank\" rel=\"nofollow noopener\">deed02392</a>"},{"reply":"Sudahkah Anda mencoba tanpa --tempat? Saya tidak tahu bagaimana rsync tidak dapat mentransfer ulang seluruh file (atau setidaknya semuanya mulai dari blok pertama yang dimodifikasi) jika Anda memintanya untuk memperbarui di tempat.","author":"<a href=\"https://superuser.com/users/65617/beno%c3%aet\" target=\"_blank\" rel=\"nofollow noopener\">Beno&#xEE;t</a>"}],"answers":[{"answer":"<p> Pertanyaannya sudah agak lama, tapi mungkin jawaban saya masih membantu satu atau yang lain: </p>\n\n<p> Debian Wheezy memiliki bug yang disebutkan di atas di gzip yang membuat flag <code>--rsyncable</code> tidak berfungsi. </p>\n\n<p> Lihat <a href=\"https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=708423\" rel=\"nofollow noopener\" target=\"_blank\"> bug Debian yang sesuai </a> . </p>\n\n<p> Kamu bisa gunakan <a href=\"https://packages.debian.org/de/wheezy/pigz\" rel=\"nofollow noopener\" target=\"_blank\"> <code>pigz</code> </a> sebagai penggantinya, yang merupakan pengganti <code>gzip</code> paralel yang menggunakan banyak CPU, dapat memampatkan sedikit lebih efisien jika Anda secara manual menentukan ukuran blok yang lebih besar dan secara resmi menyediakan implementasi <code>--rsyncable</code> yang seharusnya lebih baik daripada yang disediakan oleh tambalan <code>gzip</code>. </p>\n\n<p> Selain itu, parameter <code>rsync</code>s <code>--inplace</code> mengurangi efisiensi algoritma transmisi delta - mengutip halaman manual: </p>\n\n<blockquote>\n  <p> Efisiensi algoritme transfer delta rsync dapat berkurang jika beberapa data di file tujuan ditimpa sebelum dapat disalin ke posisi nanti di file. Ini tidak berlaku jika Anda menggunakan <code>--backup</code>, karena rsync cukup pintar untuk menggunakan file cadangan sebagai file dasar untuk transfer. </p>\n</blockquote>","votes":"8","source":"https://superuser.com/a/1050148","author":"<a href=\"https://superuser.com/users/568183/gunter-ohrner\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Gunter Ohrner</span></a>","replies":[{"reply":"Catatan: bug Debian tampaknya telah diperbaiki ketika gzip 1.6-3 diupload, Des 2013. Ini berarti bug tersebut akan bekerja dengan benar di Jessie dan yang lebih baru.","author":"<a href=\"https://superuser.com/users/9311/thomasrutter\" target=\"_blank\" rel=\"nofollow noopener\">thomasrutter</a>"},{"reply":"Ya, seperti yang saya tulis, Wheezy terpengaruh. Tambalan ini berfungsi di semua versi Debian lain yang menyertakannya. Masih <code>pigz</code> mengklaim memberikan bendera <code>--rsyncable</code> yang agak lebih efektif.","author":"<a href=\"https://superuser.com/users/568183/gunter-ohrner\" target=\"_blank\" rel=\"nofollow noopener\">Gunter Ohrner</a>"}]},{"answer":"<p> Saya menghabiskan waktu lama mencoba mencari tahu mengapa <code>--rsyncable</code> tidak berfungsi untuk saya di Ubuntu 12.04 dan gzip 1.4 sebelum menemukan ini: <a href=\"https://bugs.launchpad.net/ubuntu/+source/gzip/+bug/1021975\" rel=\"nofollow noopener\" target=\"_blank\"> https://bugs.launchpad.net/ubuntu/+source/gzip/+bug/1021975 </a></p>\n\n<p> Tampaknya ada regresi dalam paket ubuntu 1.4 yang berarti bahwa tambalan rsyncable tidak disertakan dengan benar dalam rilis, meskipun telah terdaftar di <code>gzip --help</code>. Saya tidak yakin apakah itu mempengaruhi distro atau versi lain dari Ubuntu. </p>","votes":"2","source":"https://superuser.com/a/919638","author":"<a href=\"https://superuser.com/users/302052/mike-campbell\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Mike Campbell</span></a>","replies":[]}]}
