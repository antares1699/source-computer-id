{"title":"Membuat sakelar virtual eksternal pada Hyper-V menyebabkan host mengalami jaringan yang sangat lambat","draft":false,"url":"/membuat-sakelar-virtual-eksternal-pada-hyper-v-menyebabkan-host-mengalami-jaringan-yang-sangat-lambat-t9vwwchs","votes":"4","answers_count":"5","categories":["Komputer"],"tags":["networking","virtualization","hyper-v","windows-10"],"snippet":"Saya telah menyiapkan lingkungan Hyper-V saya (Win 10 Pro 64-bit, perbarui 1809) untuk memiliki sakelar virtual eksternal yang terikat ke adaptor wifi saya dan dibagikan dengan OS host. Saya telah menggunakan sakelar...","body":"<p> Saya telah menyiapkan lingkungan Hyper-V saya (Win 10 Pro 64-bit, perbarui 1809) untuk memiliki sakelar virtual eksternal yang terikat ke adaptor wifi saya dan dibagikan dengan OS host. Saya telah menggunakan sakelar virtual ini dengan VM tamu Debian saya untuk mengakses internet dan jaringan lokal. </p>\n\n<p> Ini baik-baik saja hingga beberapa hari yang lalu ketika jaringan host saya tiba-tiba menurunkan throughput jaringan dari sesuatu seperti 350Mbps menjadi 8Mbps. </p>\n\n<p> Melepaskan sakelar eksternal menyebabkan pelambatan hilang sepenuhnya. </p>\n\n<p> Saya sudah mencoba menonaktifkan VMQ, meskipun driver kartu nirkabel saya tidak mendukungnya (ini adalah chip wifi Qualcomm bawaan pada motherboard Asus Strix z270e), tetapi itu tidak mengubah apa pun. </p>\n\n<p> Adakah cara untuk memiliki sakelar eksternal yang berbagi koneksi dengan host tanpa masalah ini, atau sumber daya yang dapat saya pelajari untuk mencari cara mengatasi masalah ini? Saya membutuhkan VM untuk diekspos ke jaringan lokal, karena saya menghubungkannya melalui perangkat uji yang terhubung ke LAN saya. </p>\n\n<p><strong> Perbarui 1 </strong></p>\n\n<p> Itu <a href=\"https://superuser.com/a/1316627/14811\" target=\"_blank\" rel=\"nofollow noopener\"> jawaban disediakan di sini </a> menggambarkan situasi saya dengan benar, dan saya telah mencoba solusinya dengan menerapkan langkah-langkah berikut: </p>\n\n<ol>\n<li> membuat saklar virtual internal, </li>\n<li> memilih saklar virtual internal dan NIC wifi saya di panel kontrol jaringan dan memilih &quot;buat jembatan&quot; dari menu konteks. </li>\n</ol>\n\n<p> Hal ini mengakibatkan perlambatan yang sama seperti sebelumnya dengan tombol virtual eksternal. </p>\n\n<p><strong> Tautan luar </strong></p>\n\n<p><a href=\"https://win10.guru/hyper-v-external-switches-killing-networking-in-insider-builds\" rel=\"nofollow noopener\" target=\"_blank\"> https://win10.guru/hyper-v-external-switches-killing-networking-in-insider-builds </a></p>","source":"https://superuser.com/questions/1371759/creating-an-external-virtual-switch-on-hyper-v-causes-host-to-experience-very-sl","author":"<a href=\"https://superuser.com/users/14811/klemen-slavi%c4%8d\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Klemen Slavič</span></a>","replies":[{"reply":"Riset masalah kinerja mesin virtual Pembongkaran TCP.","author":"<a href=\"https://superuser.com/users/750903/appleoddity\" target=\"_blank\" rel=\"nofollow noopener\">Appleoddity</a>"},{"reply":"Saya tidak berpikir itu berlaku untuk skenario saya, karena driver Qualcomm NIC tidak mendukungnya. Saya juga menonaktifkan pembongkaran IPSec di adaptor jaringan pada host, dan itu tidak membuat banyak perbedaan.","author":"<a href=\"https://superuser.com/users/14811/klemen-slavi%c4%8d\" target=\"_blank\" rel=\"nofollow noopener\">Klemen Slavi&#x10D;</a>"}],"answers":[{"answer":"<p> Jadi, saya telah mengatasi masalah ini sendiri selama beberapa jam di laptop baru saya yang bagus, dan saya yakin saya telah menemukan kombinasi pengaturan yang tampaknya telah memulihkan sebagian besar konektivitas saya. </p>\n\n<p> Karena saya memiliki Intel NIC, saya tidak tahu apakah ini akan membantu, tetapi saya ingin tahu dan ingin Anda mencobanya jika Anda belum memilahnya. </p>\n\n<p> Masalah no. 1: Unduhan lambat\nNonaktifkan penggabungan pada kartu Wifi. Ini sepenuhnya memulihkan kecepatan unduh saya dan menyelesaikan masalah yang saya lihat dengan konektivitas yang terputus-putus di OS host dan di VM. </p>\n\n<p> Masalah no. 2: Unggahan lambat\nNonaktifkan Large Send Offload pada adaptor Virtual yang mewakili sakelar eksternal. Dalam kasus saya disebut vEthernet (WAN) </p>","votes":"6","source":"https://superuser.com/a/1375670","author":"<a href=\"https://superuser.com/users/964030/mike\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Mike</span></a>","replies":[{"reply":"Terima kasih banyak, Mike, itu berhasil!","author":"<a href=\"https://superuser.com/users/477303/aqquadro\" target=\"_blank\" rel=\"nofollow noopener\">aqquadro</a>"},{"reply":"Ini sangat membantu. Saya mengalami masalah ini sejak beberapa kali dan akhirnya berhasil kembali. Terima kasih!","author":"<a href=\"https://superuser.com/users/504453/squeek\" target=\"_blank\" rel=\"nofollow noopener\">SQueek</a>"},{"reply":"Mike! Anda tuan, adalah legenda absoute! Setelah melihat begitu banyak posting lain tentang Broadcom NIC, inilah yang memperbaiki Intel Wifi NIC saya. Terima kasih! Untuk orang lain: coba yang ini jika Anda memiliki intel NIC - ada perubahan lain di luar sana untuk Broadcom.","author":"<a href=\"https://superuser.com/users/391321/brendanrichards\" target=\"_blank\" rel=\"nofollow noopener\">brendanrichards</a>"}]},{"answer":"<p> Saya tidak tahu apakah saran saya dapat memenuhi apa yang sebenarnya Anda tanyakan tetapi yang telah saya lakukan adalah alih-alih menggunakan sakelar eksternal, saya membuat sakelar internal dan mengkonfigurasinya sebagai sakelar virtual NAT .. dengan cara itu saya tidak punya untuk menangani vSwitch eksternal .. jika yang Anda inginkan adalah menyediakan akses internet ke VM tamu, itu berfungsi dengan baik. <a href=\"https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/user-guide/setup-nat-network\" rel=\"nofollow noopener\" target=\"_blank\"> Ini tautannya </a> jika Anda ingin menerapkannya..itu relatif mudah. Semoga membantu! </p>","votes":"2","source":"https://superuser.com/a/1371760","author":"<a href=\"https://superuser.com/users/943499/humberto-castellon\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Humberto Castellon</span></a>","replies":[{"reply":"Saya ingin menghindari port forwarding dari IP host saya jika memungkinkan, IP terpisah untuk guest VM di jaringan lokal adalah suatu keharusan. Pada titik ini, akan lebih mudah bagi saya untuk bermigrasi ke VirtualBox jika tidak ada alternatif.","author":"<a href=\"https://superuser.com/users/14811/klemen-slavi%c4%8d\" target=\"_blank\" rel=\"nofollow noopener\">Klemen Slavi&#x10D;</a>"}]},{"answer":"<p> Menonaktifkan Large Send Offload Versi 2 di properti adaptor vEthernet eksternal membantu saya mengatasi masalah ini. </p>","votes":"2","source":"https://superuser.com/a/1376616","author":"<a href=\"https://superuser.com/users/965097/avi\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Avi</span></a>","replies":[]},{"answer":"<p> Saya memiliki Intel Killer WiFi pada XPS 15 9570 dan XPS 17 9700 dan mereka memiliki masalah serupa dengan Hyper-V. Saya akan memberikan konfigurasi khusus yang mengembalikan kinerja penuh untuk saya: </p>\n<ul>\n<li> Adaptor WiFi <ul>\n<li> Setel &quot;D0 PacketCoalescing&quot; atau &quot;Packet Coalescing&quot; ke &quot;Enable&quot; (atau &quot;Disable&quot; —kadang mengubah setelan ini membuat segalanya lebih cepat meskipun satu setelan dulu lebih baik — sepertinya tidak konsisten). </li>\n</ul>\n</li>\n<li> Adaptor vEthernet dikonfigurasi untuk penunjuk akses Eksternal ke adaptor WiFi <ul>\n<li> Setel &quot;Recv Segment Coalescing (IPv4)&quot; ke &quot;Disabled&quot; </li>\n<li> Setel &quot;Recv Segment Coalescing (IPv6)&quot; ke &quot;Disabled&quot; </li>\n<li> Setel &quot;Large Send Offload Version 2 (IPv4)&quot; ke &quot;Disabled&quot; </li>\n<li> Setel &quot;Large Send Offload Version 2 (IPv6)&quot; ke &quot;Disabled&quot; </li>\n</ul>\n</li>\n</ul>\n<p> Di dalam VM itu sendiri, saya merasa saya juga harus melakukan: </p>\n<ul>\n<li> Adaptor Ethernet <ul>\n<li> Setel &quot;Large Send Offload Version 2 (IPv4)&quot; ke &quot;Disabled&quot; </li>\n<li> Setel &quot;Large Send Offload Version 2 (IPv6)&quot; ke &quot;Disabled&quot; </li>\n</ul>\n</li>\n</ul>\n<p> Bersama-sama, setelan ini memulihkan kecepatan koneksi sistem host saya dari 7 Mbps menjadi 60 Mbps yang merupakan kinerja yang akan saya dapatkan jika saya tidak mengonfigurasi Hyper-V sama sekali. Saya juga masih mendapatkan penampilan yang hampir sama pada tamu saya. </p>","votes":"1","source":"https://superuser.com/a/1428275","author":"<a href=\"https://superuser.com/users/149378/binki\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">binki</span></a>","replies":[]},{"answer":"<p> Saya memiliki host HYPER-V (Server 2019 1809 &amp; 1903) yang diuji. Tamu Windows 10 memiliki jaringan SMB yang cepat tetapi kecepatan penjelajahan / pengunduhan internet sangat lambat. Posting saya TIDAK terkait dengan WiFi dapat membantu. </p>\n\n<p> Tamu Linux saya mendapatkan kecepatan unduh yang tinggi. </p>\n\n<p> Windows 10 saya diatur sebagai VM Gen2. Saya membuat VM Windows 10 sebagai VM Gen1, saya akan menyebutnya W10G1. </p>\n\n<p> W10G1 masih memiliki performa internet yang buruk menggunakan &#39;Network Adapter&#39; dalam konfigurasi.\nW10G1 memiliki kinerja internet yang luar biasa menggunakan &#39;Legacy Network Adapter&#39;. Tidak ada perubahan lain yang dilakukan. </p>\n\n<p> Tampaknya ada masalah dalam kode &#39;Adaptor Jaringan&#39; host, atau &#39;Adaptor Jaringan&#39; Tamu Windows 10. </p>\n\n<p> Saya akan senang jika seseorang memeriksa ulang hasil saya dengan melakukan tes serupa. </p>","votes":"-1","source":"https://superuser.com/a/1468608","author":"<a href=\"https://superuser.com/users/1072719/michael\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Michael</span></a>","replies":[]}]}
