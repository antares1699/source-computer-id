{"title":"Mengapa skrip bash saya tidak dapat mengekspor variabel?","draft":false,"url":"/mengapa-skrip-bash-saya-tidak-dapat-mengekspor-variabel-jkowv3ab","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["bash","environment-variables"],"snippet":"Saya menggunakan MSYS dan memiliki file vars.txt dengan variabel, kunci nilai seperti:  WINDIR C:/WINDOWSSTS_BUILD_DIRECTORY D:/STS/TMPALLUSERSPROFILE C:/Documents and Settings/All Users  Saya ingin membaca ini dan mengatur variabel lingkungan. Saya memiliki setenv...","body":"<p> Saya menggunakan MSYS dan memiliki file vars.txt dengan variabel, kunci nilai seperti: </p> <pre><code>WINDIR C:/WINDOWS\nSTS_BUILD_DIRECTORY D:/STS/TMP\nALLUSERSPROFILE C:/Documents and Settings/All Users\n</code></pre> <p> Saya ingin membaca ini dan mengatur variabel lingkungan. Saya memiliki setenv skrip bash: </p> <pre><code>while read var value;\ndo\n  echo \"performing export $var=$value\"\n  export $var='$value'\ndone \n</code></pre> <p> dan saya menyebutnya dengan </p> <pre><code>cat vars.txt | source setenv\n</code></pre> <p> Namun di lingkungan saya, variabel tidak disetel. Saya juga mencoba membuatnya menjadi sebuah fungsi tetapi tidak ada kegembiraan. Adakah yang tahu apa yang saya lakukan salah? Terima kasih. </p>","source":"https://superuser.com/questions/189816/why-cant-my-bash-script-export-variables","author":"<a href=\"https://superuser.com/users/19063/danio\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">danio</span></a>","replies":[{"reply":"<code>setenv</code> adalah nama yang buruk untuk skrip Anda, karena ini adalah nama bawaan di beberapa shell.","author":"<a href=\"https://superuser.com/users/39112/daenyth\" target=\"_blank\" rel=\"nofollow noopener\">Daenyth</a>"},{"reply":"@Daenyth Terima kasih - ya rasanya agak salah pada saat itu tetapi bash sepertinya tidak memilikinya. mapenv adalah nama yang lebih baik;)","author":"<a href=\"https://superuser.com/users/19063/danio\" target=\"_blank\" rel=\"nofollow noopener\">danio</a>"},{"reply":"Saya juga menemukan masalah yang sama (vars not set) jika saya menambahkan pipa setelah mencari skrip. misalnya &#39;source setit.sh&#39; vars set ok, &#39;source setit.sh | tee setit.log&#39; vars tidak disetel. Mengejutkan. Tidak intuitif. Hati-Hati.","author":"<a href=\"https://superuser.com/users/307382/gaoithe\" target=\"_blank\" rel=\"nofollow noopener\">gaoithe</a>"}],"answers":[{"answer":"<p> Pipa menyiapkan subkulit. Saat subkulit keluar, variabel hilang. </p>\n\n<p> Coba ini: </p> <pre><code>source setenv &lt; vars.txt\n</code></pre> <p> Juga tanda kutip tunggal Anda dapat mencegah perluasan variabel (saya tidak tahu apakah ini benar di MSYS). Coba ubah baris <code>export</code> menjadi ini: </p> <pre><code>export $var=\"$value\"\n</code></pre> <p> Anda dapat menggunakan <code>declare</code> daripada <code>export</code> jika variabel tidak perlu diekspor. </p>","votes":"7","source":"https://superuser.com/a/189818","author":"<a href=\"https://superuser.com/users/310/dennis-williamson\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Dennis Williamson</span></a>","replies":[{"reply":"Jadi saya harus menggunakan file temp? (vars.txt hanya untuk pengujian) Saya memiliki fungsi yang menghasilkan vars.txt. Ia bekerja dengan baik dengan: generate_envmap&gt; /tmp/envmap.txt; apply_env &lt;/tmp/envmap.txt. Akan lebih baik jika melakukan generate_envmap | apply_env.","author":"<a href=\"https://superuser.com/users/19063/danio\" target=\"_blank\" rel=\"nofollow noopener\">danio</a>"},{"reply":"@danio: Saya hanya mendasarkan jawaban saya pada contoh Anda. Anda bilang Anda &quot;punya file&quot;. Saya tidak tahu bahwa Anda belum memiliki file tersebut. Anda dapat menggunakan substitusi proses di Bash: <code>source apply_env &lt; &lt;(generate_envmap)</code>","author":"<a href=\"https://superuser.com/users/310/dennis-williamson\" target=\"_blank\" rel=\"nofollow noopener\">Dennis Williamson</a>"},{"reply":"Terima kasih, sepertinya itulah yang saya inginkan tetapi versi MSYS dari bash tampaknya tidak menerapkan substitusi proses :-(","author":"<a href=\"https://superuser.com/users/19063/danio\" target=\"_blank\" rel=\"nofollow noopener\">danio</a>"},{"reply":"@danio: Coba gunakan string di sini dan substitusi perintah: <code>source apply_env &lt;&lt;&lt; $(generate_envmap)</code>","author":"<a href=\"https://superuser.com/users/310/dennis-williamson\" target=\"_blank\" rel=\"nofollow noopener\">Dennis Williamson</a>"},{"reply":"Terima kasih untuk itu tetapi sepertinya tidak melakukan apa-apa. Tidak ada kesalahan, tapi juga tidak berpengaruh. Solusi file temp sedikit jelek tapi bagus.","author":"<a href=\"https://superuser.com/users/19063/danio\" target=\"_blank\" rel=\"nofollow noopener\">danio</a>"}]}]}
