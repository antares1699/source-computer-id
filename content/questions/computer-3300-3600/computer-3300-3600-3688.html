{"title":"Kirim paket (frame) dengan &#39;Sender&#39;s MAC&#39; yang berbeda?","draft":false,"url":"/kirim-paket-frame-dengan-39sender39s-mac39-yang-berbeda-1jzdzqqc","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["networking","security","mac-address"],"snippet":"Saya baru saja mempelajari buku Network + yang menjelaskan isi Frame menggunakan blok untuk mewakili sekumpulan bit. Selanjutnya, ini menyatakan bahwa &#39;blok&#39; pertama adalah alamat MAC Penerima. Blok setelah itu adalah alamat...","body":"<p> Saya baru saja mempelajari buku Network + yang menjelaskan isi Frame menggunakan blok untuk mewakili sekumpulan bit. Selanjutnya, ini menyatakan bahwa &#39;blok&#39; pertama adalah alamat MAC Penerima. Blok setelah itu adalah alamat MAC Pengirim. </p>\n\n<p> Saya bertanya-tanya apakah mungkin untuk mencegat bingkai sebelum dikirim, membidik MAC Pengirim, (atau menulis secara acak alih-alih MAC Anda yang sebenarnya), sebelum mengirim bingkai melalui? </p>","source":"https://superuser.com/questions/884823/send-packet-frame-with-different-senders-mac","author":"<a href=\"https://superuser.com/users/280876/code-flow\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">code_flow</span></a>","replies":[{"reply":"Yakin itu mungkin, tetapi itu hanya berguna dari jarak jauh dengan UDP. Untuk memalsukan sesi TCP, Anda perlu berjabat tangan, yang sangat tidak mungkin jika Anda tidak menerima balasan untuk paket yang Anda kirim.","author":"<a href=\"https://superuser.com/users/97118/tripleee\" target=\"_blank\" rel=\"nofollow noopener\">tripleee</a>"},{"reply":"@tripleee Perhatian pertanyaan ini sepenuhnya terbatas pada Lapisan 2. Meskipun demikian, jika yang Anda katakan benar, Anda tidak akan dapat menjalankan mesin virtual dengan jaringan yang dijembatani, tetapi Anda bisa. Tentu saja Anda dapat menerima paket yang diarahkan ke alamat MAC mana pun.","author":"<a href=\"https://superuser.com/users/219095/daniel-b\" target=\"_blank\" rel=\"nofollow noopener\">Daniel B</a>"}],"answers":[{"answer":"<h2 class=\"h4\"> Ethernet </h2>\n\n<p> Lebih <strong> Ethernet </strong> - ya, seluruh frame termasuk header Ethernet-nya dikirim oleh sistem operasi Anda, dan OS memutuskan alamat MAC sumber apa yang akan digunakan. </p>\n\n<ul>\n<li><p> Faktanya, sistem mesin virtual (seperti VMware atau Hyper-V) sudah menggunakan ini untuk menghubungkan VM ke LAN Anda yang sebenarnya - Anda mungkin memiliki beberapa VM yang terpasang ke satu kartu Ethernet, dan setiap VM akan memiliki alamat MAC sendiri-sendiri yang tidak bergantung pada host. . </p></li>\n<li><p> Linux, FreeBSD, Windows bahkan memiliki opsi untuk membuat &#39;jembatan&#39; yang menghubungkan beberapa antarmuka Ethernet fisik bersama-sama, bekerja persis seperti sakelar Ethernet asli (bahkan dengan VLAN dan RSTP). </p></li>\n</ul>\n\n<h3 class=\"h5\"> Metode </h3>\n\n<p> Anda dapat mengubah alamat MAC dari antarmuka jaringan (memberi tahu OS untuk menggunakan alamat baru untuk <em> segala sesuatu </em> itu mentransmisikan), atau menggunakan &quot;soket mentah&quot; dari program individu untuk membuat dan mengirim apa pun yang Anda suka, melewati tumpukan TCP / IP. Untuk yang terakhir, gunakan alat yang sudah ada seperti libpcap, <a href=\"http://www.secdev.org/projects/scapy/doc/usage.html#sending-packets\" rel=\"nofollow noopener\" target=\"_blank\"> Scapy </a> , atau Nemesis. </p>\n\n<ul>\n<li><p> Di Linux, <code>ip link</code> akan mengubah alamat MAC hingga boot ulang berikutnya: </p> <pre><code># ip link set eth0 down\n# ip link set eth0 addr ab:cd:ef:ab:cd:ef\n# ip link set eth0 up\n</code></pre> </li>\n<li><p> Atau kirim paket individu dengan scapy: </p> <pre><code>&gt;&gt;&gt; send(Ether(src=\"ab:cd:ef:ab:cd:ef\", dst=\"ff:ff:ff:ff:ff:ff\")/IP(src=\"1.2.3.4\", dst=\"3.4.5.6\")/UDP(dport=9)/b\"hello\")\nSent 1 packets.\n</code></pre> </li>\n<li><p> Linux bahkan memiliki fitur &quot;macvlan&quot; untuk membuat antarmuka virtual dengan MAC yang berbeda pada kartu Ethernet fisik yang sama: </p> <pre><code># ip link add fred0 link eth0 type macvlan mode private\n</code></pre> </li>\n</ul>\n\n<h2 class=\"h4\"> Wifi </h2>\n\n<p><strong> Wifi </strong> sedikit lebih membatasi - Anda <strong> tidak bisa </strong> mengirim paket individu dengan sumber palsu, karena AP melacak semua stasiun yang terkait dengannya, dan akan (AFAIK) membuang paket yang berasal dari alamat MAC mana pun yang tidak ada dalam daftar &quot;stasiun terkait&quot;. </p>\n\n<p><em> (Ini dari perspektif stasiun. AP dapat melakukan apa pun yang mereka inginkan - bagaimanapun juga, itu adalah bagian dari tugas mereka untuk mengirim paket atas nama perangkat berkabel.) </em></p>\n\n<p> Namun, kamu <strong> masih dapat mengatur alamat MAC yang berbeda </strong> pada antarmuka nirkabel, dan gunakan alamat baru itu untuk <em> segala sesuatu </em> , dimulai dengan asosiasi / otentikasi ke AP. </p>\n\n<p> Tidak seperti Ethernet, kemampuan untuk melakukannya tergantung pada perangkat keras dan driver nirkabel tertentu (misalnya Atheros biasanya mendukung ini, sementara beberapa kartu Realtek mungkin tidak). Di Linux, perintah <code>ip link â€¦</code> yang sama seharusnya berfungsi. </p>\n\n<h3 class=\"h5\"> L2 menjembatani </h3>\n\n<p> Meskipun demikian, ada cara untuk mengimplementasikan penghubung lapisan-2 dengan Wi-Fi (mis. Jika Anda perlu menghubungkan seluruh bangunan melalui tautan radio arah). </p>\n\n<p><em> (Oke, ini agak di luar topik sekarang, tapi disertakan untuk kelengkapan.) </em></p>\n\n<p> Ini sedikit lebih rumit daripada Ethernet, karena ada konsep terpisah dari sumber asli (host yang menghasilkan paket) dan pemancar (radio Wi-Fi yang mentransmisikan paket); Begitu pula dengan penerima (radio Wi-Fi yang menerima paket) dan tujuan akhir (host yang akan membaca / mengkonsumsi paket). </p>\n\n<ul>\n<li><p> Misalnya, jika komputer A (mis. Laptop) mengirim paket ke komputer B melalui WiFi, itu akan memiliki header seperti itu: </p>\n\n<ul>\n<li> dari (sumber asli): &lt;alamat komputer A&gt; </li>\n<li> ke (menerima radio Wi-Fi): &lt;alamat router Wi-Fi&gt; </li>\n<li> ke (tujuan akhir): &lt;alamat komputer B&gt; </li>\n</ul>\n\n<p> Perhatikan bagaimana hanya ada satu alamat &#39;dari&#39;, dengan asumsi bahwa stasiun Wi-Fi biasa tidak akan pernah mengirim paket atas nama beberapa perangkat lain. Ini menghemat 6 byte per paket. </p></li>\n<li><p> Ini kebalikan dari AP ke stasiun - ada dua alamat &#39;dari&#39;, &quot;pengirim asli&quot; dan &quot;AP pemancar&quot;, tetapi hanya satu alamat &#39;ke&#39;. </p></li>\n</ul>\n\n<p> Jadi, saat Anda perlu menjembatani dua Ethernet <em> jaringan </em> melalui Wi-Fi, <strong> Anda memerlukan mode &quot;WDS&quot; alias &quot;4addr&quot; </strong> , yang menyebabkan keempat alamat - dua sumber dan dua tujuan - dikirim bersama dengan setiap bingkai Wi-Fi. Dukungan untuk ini bervariasi. Di Linux, Anda dapat melakukannya melalui <code>iw</code>. </p>\n\n<p> Perhatikan bahwa mode WDS / 4addr harus diaktifkan <em> kedua </em> berakhir. </p>\n\n<h3 class=\"h5\"> L2 NAT </h3>\n\n<p> Beberapa sistem - seperti VirtualBox, atau radio Ubiquiti airMAX (bila dikonfigurasi sebagai stasiun tanpa WDS), atau OpenWRT dalam konfigurasi yang sama - mendukung terjemahan alamat MAC: menyamar beberapa klien antara alamat MAC stasiun itu sendiri, seperti IPv4 NAT tetapi pada tingkat yang lebih rendah. Ini berfungsi tanpa konfigurasi apa pun dan mungkin lebih efisien; Namun itu membuat masalah jika sesuatu seperti server DHCP bergantung pada alamat MAC klien yang berbeda. </p>\n\n<p><em> (Ini sebenarnya kebalikan dari apa yang kami mulai dengan - beberapa perangkat di belakang satu MAC, bukan satu perangkat dengan banyak MAC - jadi mari kita berhenti di sini.) </em></p>\n\n<h2 class=\"h4\"> Bluetooth </h2>\n\n<p> Saya tidak yakin tentang Bluetooth. AFAIK, sebagian besar adaptor tidak akan membiarkan Anda mengubah atau memalsukan alamat MAC mereka, karena ini adalah satu-satunya metode pengalamatan yang digunakan oleh semua komunikasi - perangkat saling mengenali dengan alamat MAC mereka, dan menyimpan kunci tautan berdasarkan alamat MAC ... . Bukan daerah saya. </p>","votes":"7","source":"https://superuser.com/a/884841","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user1686</span></a>","replies":[{"reply":"Ini menjawab pertanyaan saya, tetapi Anda mengecualikan jawaban Anda hanya untuk koneksi Ethernet. Apakah ini tidak mungkin menggunakan WiFi?","author":"<a href=\"https://superuser.com/users/280876/code-flow\" target=\"_blank\" rel=\"nofollow noopener\">code_flow</a>"},{"reply":"@Excaliber Anda tidak pernah mengatakan apa-apa tentang WiFi. ;) Tidak, ini tidak bekerja dengan baik dengan WiFi kecuali seluruh koneksi Anda &quot;dipalsukan&quot;. Ini karena titik akses hanya akan meneruskan lalu lintas ke klien yang dikenal (terkait). Biasanya, pengaitan ini dilakukan dengan alamat MAC asli PHY WiFi Anda.","author":"<a href=\"https://superuser.com/users/219095/daniel-b\" target=\"_blank\" rel=\"nofollow noopener\">Daniel B</a>"},{"reply":"@Excaliber: Diperbarui.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"@grawity Ada juga Terjemahan Alamat MAC, <a href=\"http://wiki.openwrt.org/doc/howto/clientmode#why_it_works_on_brcm-24\" rel=\"nofollow noopener\" target=\"_blank\"> itulah yang dilakukan beberapa perangkat Broadcom untuk mendukung mode klien yang terhubung </a> .","author":"<a href=\"https://superuser.com/users/219095/daniel-b\" target=\"_blank\" rel=\"nofollow noopener\">Daniel B</a>"},{"reply":"@DanielB: Terima kasih, <a href=\"http://superuser.com/posts/884841/revisions\" target=\"_blank\" rel=\"nofollow noopener\"> diperbarui. </a> Saya rasa saya juga pernah melihat ini di stasiun Ubiquiti, dan menurut pengalaman saya, hal itu menciptakan beberapa <i> aneh </i> dan masalah yang sulit ditemukan.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"}]},{"answer":"<p> Pastikan semua opsi terkait CONFIG_NET_SCHED diaktifkan di kernel. </p>\n\n<p> tc qdisc tambahkan dev eth0 pegangan root 15: prio </p>\n\n<p> urutan di bawah BEKERJA untuk mengubah src IP dan src MAC sejak pengalihan terjadi terakhir </p>\n\n<p> MAC_ADDR_ETH1 = <code>cat /sys/class/net/eth1/address</code>\nIP_ADDR_ETH1 = <code>ifconfig eth1 | grep 'inet addr'| cut -d ':' -f 2 | cut -d ' ' -f 1 | tr -d '\\n'</code> </p>\n\n<p> tc filter add dev eth0 parent 15: 0 protocol ip prio 1 handle 0x2 fw action pedit ex munge eth src setel $ {MAC_ADDR_ETH1} pipa \\\ntindakan pedit ex munge ip src setel $ {IP_ADDR_ETH1} pipa \\\naction mirred egress redirect dev eth1 </p>","votes":"-1","source":"https://superuser.com/a/1478507","author":"<a href=\"https://superuser.com/users/707464/noel-av\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">noel av</span></a>","replies":[{"reply":"Bagaimana ini berhubungan dengan pertanyaan?","author":"<a href=\"https://superuser.com/users/219095/daniel-b\" target=\"_blank\" rel=\"nofollow noopener\">Daniel B</a>"},{"reply":"Utilitas tc pedit dapat digunakan untuk mengubah alamat mac sumber ke paket keluar seperti yang ditunjukkan pada perintah terakhir.","author":"<a href=\"https://superuser.com/users/707464/noel-av\" target=\"_blank\" rel=\"nofollow noopener\">noel av</a>"}]}]}
