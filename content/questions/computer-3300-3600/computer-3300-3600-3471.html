{"title":"Pulseaudio: tunggu perangkat dimulai?","draft":false,"url":"/pulseaudio-tunggu-perangkat-dimulai-0wx1pufi","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","audio","systemd","pulse-audio"],"snippet":"Berdasarkan  panduan ini  , Saya menyiapkan pulseaudio di Raspberry Pi saya untuk berjalan dalam mode sistem. Beginilah tampilan file layanan systemd saya:  [Unit]Description=PulseAudio DaemonAfter=sound.targetRequires=sound.target[Install]WantedBy=default.target[Service]Type=notifyExecStart=/usr/bin/pulseaudio...","body":"<p> Berdasarkan <a href=\"https://rudd-o.com/linux-and-free-software/how-to-make-pulseaudio-run-once-at-boot-for-all-your-users\" rel=\"nofollow noopener\" target=\"_blank\"> panduan ini </a> , Saya menyiapkan pulseaudio di Raspberry Pi saya untuk berjalan dalam mode sistem. Beginilah tampilan file layanan systemd saya: </p> <pre><code>[Unit]\nDescription=PulseAudio Daemon\nAfter=sound.target\nRequires=sound.target\n\n[Install]\nWantedBy=default.target\n\n[Service]\nType=notify\nExecStart=/usr/bin/pulseaudio --disallow-exit --no-cpu-limit --daemonize=no --system --realtime --disallow-module-loading --log-target=journal -vvvv\n</code></pre> <p> Namun, saya tidak mendapatkan suara apa pun - menurut log, saat pulseaudio dimulai, udev-detect melaporkan &quot;Ditemukan 0 kartu.&quot; dan saya hanya mendapatkan wastafel nol. Menjalankan <code>systemctl --system restart pulseaudio.service</code> memperbaiki ini dan perangkat audio saya terdeteksi dengan benar. </p>\n\n<p> Adakah cara untuk memberi tahu pulseaudio agar menunggu hingga perangkat terdeteksi? </p>","source":"https://superuser.com/questions/1280019/pulseaudio-wait-for-devices-on-start","author":"<a href=\"https://superuser.com/users/333528/fstanis\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">fstanis</span></a>","replies":[],"answers":[{"answer":"<p> Mengatakan bahwa PulseAudio tidak akan berguna. Ia sudah dapat mendeteksi perangkat hotplugged dengan sendirinya; namun, karena <code>--disallow-module-loading</code> itu tidak lagi mampu <em> menggunakan </em> perangkat, karena dilarang memuat <code>module-alsa-card</code> setelah perangkat terdeteksi. (Bisa dibilang module-udev-detect harus dibebaskan dari pembatasan iniâ€¦) </p>\n\n<p> Kamu dapat katakan <em> systemd </em> untuk menunda memulai layanan pulseaudio.sampai perangkat tertentu siap, dengan mencantumkan nama unit <code>.device</code> yang sesuai di <code>After=</code> unit ini, misalnya: </p> <pre><code>[Unit]\nAfter=sys-devices-pci0000:00-0000:00:1b.0-sound-card0.device\n</code></pre>","votes":"6","source":"https://superuser.com/a/1280021","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user1686</span></a>","replies":[{"reply":"Ah, betapa menyebalkan - bahkan tidak menebak <code>--disallow-module-loading</code> pelakunya. Hanya menghapus itu tampaknya paling mudah.","author":"<a href=\"https://superuser.com/users/333528/fstanis\" target=\"_blank\" rel=\"nofollow noopener\">fstanis</a>"},{"reply":"Pembaruan cepat: menambahkan perangkat suara ke <code>After</code> tidak ada gunanya jika saya sudah memiliki <code>sound.target</code> - ternyata semua perangkat suara memiliki <code>sound.target</code> di bawah <code>Wants</code> menurut <code>systemd-analyze</code>.","author":"<a href=\"https://superuser.com/users/333528/fstanis\" target=\"_blank\" rel=\"nofollow noopener\">fstanis</a>"},{"reply":"Mungkin yang lebih penting, <code>alsa-restore.service</code> harus dalam <code>After</code> - dengan cara ini, saya dapat memuat alsa secara langsung dan saya tidak memerlukan deteksi perangkat sejak awal.","author":"<a href=\"https://superuser.com/users/333528/fstanis\" target=\"_blank\" rel=\"nofollow noopener\">fstanis</a>"},{"reply":"Tapi mereka tidak memilikinya di bawah <code>Before</code>, bukan? Bagaimanapun, itu <b> tidak </b> untuk apa <code>sound.target</code> itu - apa pun seperti &quot;semua perangkat suara ditemukan&quot; tidak mungkin diterapkan dalam sistem hotpluggable. Targetnya adalah untuk memulai <i> ruang pengguna </i> komponen suara, dan memang tampaknya PulseAudio harus memiliki Before = sound.target, bukan After =.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"Menarik - tetapi tujuan (hipotetis) saya adalah dapat memuat pulsa saat memulai dengan <code>--disallow-module-loading</code> - tampaknya ALSA adalah yang harus saya tunggu, kecuali jika saya salah paham tentang hal lain? Pengaturan hotpluggable berfungsi, tetapi saya perlu melepaskan <code>--disallow-module-loading</code> - dalam hal ini, saya menduga <code>sound.target</code> hanya perlu di bawah <code>Requires</code> dan tidak perlu memilikinya pada <code>After</code>?","author":"<a href=\"https://superuser.com/users/333528/fstanis\" target=\"_blank\" rel=\"nofollow noopener\">fstanis</a>"},{"reply":"Tidak ada gunanya menunggu ALSA &quot;secara umum&quot;. (Semua inisialisasi perangkat terjadi di kernel; <code>alsa-restore.service</code> hanya memuat level volume dari disk ke <i> sudah terdeteksi </i> perangkat audio.) Jika Anda mengkonfigurasi PA <code>module-alsa-card</code> secara manual, yang perlu Anda tunggu hanyalah perangkat kartu itu sendiri.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"Jadi, masalahnya di sini adalah bahwa module-alsa-card memerlukan parameter perangkat dan <code>load-module module-alsa-card device=0</code> menyebabkan pulsa gagal dengan kesalahan yang mengatakan perangkat tidak ada. Ada wawasan?","author":"<a href=\"https://superuser.com/users/333528/fstanis\" target=\"_blank\" rel=\"nofollow noopener\">fstanis</a>"}]}]}
