{"title":"Bagaimana cara mencantumkan pasangan ethernet virtual mana yang berjalan di host linux saat ini?","draft":false,"url":"/bagaimana-cara-mencantumkan-pasangan-ethernet-virtual-mana-yang-berjalan-di-host-linux-saat-ini-vr28vxxl","votes":"4","answers_count":"6","categories":["Komputer"],"tags":["linux","networking","virtualization"],"snippet":"Saya punya pertanyaan terkait dengan pasangan veth yang digunakan dalam sistem Linux. Saya ingin tahu pasangan veth mana yang berjalan di host saat ini, yang saya maksud adalah menanyakan pasangan dengan menggunakan...","body":"<p> Saya punya pertanyaan terkait dengan pasangan <code>veth</code> yang digunakan dalam sistem Linux. Saya ingin tahu pasangan <code>veth</code> mana yang berjalan di host saat ini, yang saya maksud adalah menanyakan pasangan dengan menggunakan satu perintah Linux atau menemukan konfigurasi terkait di beberapa file. </p>\n\n<p> Saya tahu bahwa untuk membangun <code>veth</code> pasangan, Anda dapat dengan mudah menggunakan </p> <pre><code>ip link add name1 type veth name2\n</code></pre> <p> Tetapi saya belum menemukan perintah atau file yang dapat digunakan untuk menanyakan pasangan veth yang sedang berjalan. </p>\n\n<p> Jika Anda mengetahui cara yang dapat menemukan <code>veth</code> pasang yang sedang berjalan, dapatkah Anda memberi tahu saya? Ini akan sangat membantu saya. </p>","source":"https://superuser.com/questions/618968/how-can-i-list-which-virtual-ethernet-pairs-are-running-in-the-current-linux-hos","author":"<a href=\"https://superuser.com/users/237657/yang\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Yang</span></a>","replies":[],"answers":[{"answer":"<p> Anda bisa mendapatkan peer ifindex dengan perintah ethtool berikut. </p> <pre><code># ethtool -S veth1\nNIC statistics:\n     peer_ifindex: 7\n</code></pre> <p> ifindex ditampilkan dengan: </p> <pre><code># ip link\n</code></pre> <p> Ref: <a href=\"http://www.spinics.net/lists/netdev/msg102062.html\" rel=\"nofollow noopener\" target=\"_blank\"> http://www.spinics.net/lists/netdev/msg102062.html </a></p>","votes":"5","source":"https://superuser.com/a/639350","author":"<a href=\"https://superuser.com/users/250335/etsukata\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Etsukata</span></a>","replies":[{"reply":"Bagi saya itu menunjukkan ifindex peer tepat di &quot;ip link&quot; misalnya veth173321d @ if82 jadi 82 adalah alamat tertaut jika saya mengetik &quot;ethtool -S veth173321d&quot;.","author":"<a href=\"https://superuser.com/users/134574/curtis-yallop\" target=\"_blank\" rel=\"nofollow noopener\">Curtis Yallop</a>"}]},{"answer":"<p> Saya memiliki kernel linux yang lebih lama tanpa ip netns jadi saya membuat ini bersama-sama untuk mendapatkan info yang diperlukan. Dengan asumsi Anda dapat ssh ke dalam container LXC Anda, ini mungkin berguna bagi Anda. Ini hack cepat 8) </p> <pre><code>MY_VMS=\"10.0.1.1\" # etc... change as needed\nfor A_VM in $MY_VMS\ndo\n  if [ ! -f $A_VM.list ]\n  then\n    ssh $A_VM ip link list &gt; $A_VM.list\n  fi\n\n  for i in `ifconfig -a | grep \"Link encap\" | sed 's/ .*//g'`\n  do\n    PEER_IFINDEX=`ethtool -S $i 2&gt;/dev/null | grep peer_ifindex | sed 's/ *peer_ifindex: *//g' `\n    if [ \"$PEER_IFINDEX\" = \"\" ]\n    then\n      continue\n    fi\n\n    PEER_IF=`grep \"^$PEER_IFINDEX:\" $A_VM.list  | awk '{print $2}' | sed 's/:.*//g'`\n    if [ \"$PEER_IF\" = \"\" ]\n    then\n      continue\n    fi\n    printf \"%-10s is paired with %-10s on %-20s\\n\" $i $PEER_IF $A_VM\n  done\ndone\n</code></pre>","votes":"1","source":"https://superuser.com/a/843293","author":"<a href=\"https://superuser.com/users/354890/neil-mcgill\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Neil McGill</span></a>","replies":[]},{"answer":"<p> Saya baru saja menulis perintah untuk menampilkan antarmuka peer veth: </p>\n\n<p><a href=\"https://github.com/hariguchi/veth-peer\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/hariguchi/veth-peer </a></p>\n\n<blockquote>\n  <p> Contoh </p>\n</blockquote> <pre><code>$ sudo ip link add foo-bar type veth peer name bar-foo\n[sudo] password for XXX:\n$ veth-peer foor-bar\nbar-foo\n$ veth-peer xxx\nxxx: Link not found\n$ veth-peer lo\nlo is not veth.\n$ sudo ip link del foo-bar\n           $ veth-peer bar-foo\n           bar-foo: Link not found\n$\n</code></pre>","votes":"1","source":"https://superuser.com/a/1318537","author":"<a href=\"https://superuser.com/users/900303/yoichi-hariguchi\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Yoichi Hariguchi</span></a>","replies":[]},{"answer":"<p> Dengan skrip sederhana ini Anda dapat menemukan pasangan (untuk <strong> OpenStack </strong> ): </p> <pre><code>#!/bin/bash\nfor i in `ifconfig -a |grep qv |awk -F: '{print $1}'` ;\n   do\n      echo \"---------------\"\n      echo $i\n      echo \"Our ID: \" `ip link show dev $i | grep $i | awk -F: '{print $1}'`\n      echo \"Peer ID: \" `ethtool -S $i |  grep -i peer_ifindex | awk -F: '{print $2}'`\n      echo \"---------------\"\ndone\n</code></pre> <p> Di OpenStack <strong> veth </strong> pasangan - nama antarmuka veth dimulai dengan <code>qv*</code>. </p>","votes":"0","source":"https://superuser.com/a/1075608","author":"<a href=\"https://superuser.com/users/592814/hrvojeh\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">HrvojeH</span></a>","replies":[]},{"answer":"<p> untuk mendapatkan semua antarmuka veth cukup gunakan </p> <pre><code># ip -c link show type veth\n\n17: veth1@if16: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000\n    link/ether 8e:61:92:d9:03:15 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n25: veth3@if24: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000\n    link/ether 2a:a1:13:8c:9b:d2 brd ff:ff:ff:ff:ff:ff link-netnsid 0\n27: veth5@if26: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000\n    link/ether 3a:b6:fb:5e:5b:ce brd ff:ff:ff:ff:ff:ff link-netnsid 0\n28: veth8@if29: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000\n    link/ether de:30:40:26:04:20 brd ff:ff:ff:ff:ff:ff link-netnsid 1\n30: veth11@veth10: &lt;BROADCAST,MULTICAST,M-DOWN&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000\n    link/ether de:bb:24:8c:40:00 brd ff:ff:ff:ff:ff:ff\n31: veth10@veth11: &lt;BROADCAST,MULTICAST,M-DOWN&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000\n    link/ether 96:07:3e:b2:ac:1c brd ff:ff:ff:ff:ff:ff\n</code></pre>","votes":"0","source":"https://superuser.com/a/1546356","author":"<a href=\"https://superuser.com/users/1169263/alex\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Alex</span></a>","replies":[]},{"answer":"<p> Setidaknya di Ubuntu 20, untuk mencantumkan antarmuka, termasuk pasangan veth, lakukan saja: </p> <pre><code>ip link\n</code></pre> <p> Ini dengan asumsi pasangan veth dibuat dengan sesuatu seperti: </p> <pre><code>ip link add veth0 type veth peer name veth1\n</code></pre> <p> Jika Anda membuat namespace dan menetapkan perangkat VETH untuk mereka, seperti ini <a href=\"https://developers.redhat.com/blog/2018/10/22/introduction-to-linux-interfaces-for-virtual-networking/#veth\" rel=\"nofollow noopener\" target=\"_blank\"> contoh </a> : </p> <pre><code># ip netns add net1\n# ip netns add net2\n# ip link add veth1 netns net1 type veth peer name veth2 netns net2\n</code></pre> <p> lalu Anda akan melihatnya <a href=\"https://stackoverflow.com/questions/32492349/how-to-list-all-network-links-in-all-namespaces-in-linux\" target=\"_blank\" rel=\"nofollow noopener\"> seperti itu </a> : </p> <pre><code>sudo ip netns exec net1 ip link\n</code></pre> <p> Dengan kata lain <code>ip netns exec $namespace $command</code>, dimana perintahnya sama dengan <code>ip link</code> di atas. </p>\n<p> Kiat bonus: untuk menghapus pasangan veth, cukup hapus salah satu antarmuka: </p> <pre><code>sudo ip link delete veth1\n</code></pre> <p> Dan mereka berdua akan pergi. </p>","votes":"0","source":"https://superuser.com/a/1623352","author":"<a href=\"https://superuser.com/users/668905/nagev\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Nagev</span></a>","replies":[]}]}
