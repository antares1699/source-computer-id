{"title":"Bagaimana cara menyiapkan grub2 dengan Xen?","draft":false,"url":"/bagaimana-cara-menyiapkan-grub2-dengan-xen-fdtuwvlx","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","ubuntu-10.04","linux-kernel","grub2","xen"],"snippet":"Saya sedang mem-boot kernel Xen baru dan semuanya berjalan dengan baik sampai beberapa titik selama proses boot ketika mesin melakukan boot ulang tanpa peringatan. Sayangnya, saya tidak melihat kesalahan muncul sebelum itu...","body":"<p> Saya sedang mem-boot kernel Xen baru dan semuanya berjalan dengan baik sampai beberapa titik selama proses boot ketika mesin melakukan boot ulang tanpa peringatan. Sayangnya, saya tidak melihat kesalahan muncul sebelum itu terjadi. </p>\n\n<p> Apakah ada cara untuk mem-boot mesin dengan kernel yang berfungsi dan melihat log dari boot sebelumnya atau semacamnya? </p>\n\n<p> EDIT:\nYang tidak saya perhatikan adalah sebenarnya ada kesalahan di layar. Itu hanya berkedip sangat cepat sebelum reboot. Kesalahan ini terkait dengan tidak dapat memasang sistem file root karena ada yang salah dengan konfigurasi grub saya. </p>\n\n<p> Entri normal di grub.cfg terlihat seperti ini: </p> <pre><code>menuentry 'Ubuntu, with Linux 2.6.32-33-server' --class ubuntu --class gnu-linux --class gnu --class os {\n        recordfail\n        insmod ext2\n        set root='(hd0,1)'\n        search --no-floppy --fs-uuid --set 75475e50-82e2-4f74-b860-6cf92c91b42e\n        linux   /vmlinuz-2.6.32-33-server root=/dev/mapper/xenserver-root ro   crashkernel=384M-2G:64M,2G-:128M \n        initrd  /initrd.img-2.6.32-33-server\n}\n</code></pre> <p> Saya menambahkan yang berikut ini di /etc/grub.d/40_default </p> <pre><code>menuentry 'Xen 4 with Linux 2.6.32.45-xen' --class ubuntu --class gnu-linux --class gnu --class os --class xen {\n        recordfail\n        insmod ext2\n        set root='(hd0,1)'\n        search --no-floppy --fs-uuid --set=root 75475e50-82e2-4f74-b860-6cf92c91b42e\n        echo 'Loading Xen 4 ...'\n        multiboot /xen.gz placeholder\n        echo 'Loading Linux 2.6.32.45-xen ...'\n        module  /vmlinuz-2.6.32.45-xen placeholder root=/dev/mapper/xenserver-root ro iommu=1\n        echo 'Loading initial ramdisk ...'\n        module  /initrd.img-2.6.32.45-xen\n}\n</code></pre> <p> Tapi itu tidak berhasil karena suatu alasan. Ada ide? </p>\n\n<p> EDIT:\nSaya juga mencoba skrip 20_linux_xen. Sayangnya itu tidak berhasil. Lihat kesalahan ini: </p> <pre><code>Found linux image: /boot/vmlinuz-2.6.32.45-xen\nFound initrd image: /boot/initrd.img-2.6.32.45-xen\nFound linux image: /boot/vmlinuz-2.6.32-33-server\nFound initrd image: /boot/initrd.img-2.6.32-33-server\n/etc/grub.d/20_linux_xen: 57: uses_abstraction: not found\nFound linux image: /boot/vmlinuz-2.6.32.45-xen\nFound initrd image: /boot/initrd.img-2.6.32.45-xen\n/etc/grub.d/20_linux_xen: 156: gettext_printf: not found\n</code></pre> <p> gettext sudah diinstal. <br> Saya menggunakan ubuntu 10.04 LTS. </p>\n\n<p> Kesalahan yang muncul saat boot adalah seperti <strong> &quot;harap masukkan opsi root = boot kernel yang benar ...&quot; </strong></p>\n\n<p> Mengapa ini sangat sulit dan mengapa ada begitu banyak contoh grub2 xen? beberapa meletakkan / boot di depan beberapa hanya /. Saya mencoba meletakkan / boot di depan tetapi itu tidak membantu.\nJuga beberapa memiliki --set = root uuid, namun semua entri saya yang lain hanya memiliki --set uuid. apakah ini ada hubungannya dengan versi grub2 yang berbeda? </p>","source":"https://superuser.com/questions/327697/how-do-i-set-up-grub2-with-xen","author":"<a href=\"https://superuser.com/users/24620/matt-h\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Matt H</span></a>","replies":[{"reply":"Salah satu penyebab gejala yang saya temui ini menjalankan 64-bit Xen pada perangkat keras 32-bit.","author":"<a href=\"https://superuser.com/users/26312/randolf-richardson\" target=\"_blank\" rel=\"nofollow noopener\">Randolf Richardson</a>"},{"reply":"Sebenarnya ini ada hubungannya dengan konfigurasi grub2. Ini sepenuhnya perangkat keras 64bit","author":"<a href=\"https://superuser.com/users/24620/matt-h\" target=\"_blank\" rel=\"nofollow noopener\">Matt H</a>"},{"reply":"Apakah itu berarti Anda menemukan solusi? Jika demikian, tolong posting itu sebagai jawaban (agar orang lain bisa mendapatkan keuntungan) dan saya akan memberi suara positif. =)","author":"<a href=\"https://superuser.com/users/26312/randolf-richardson\" target=\"_blank\" rel=\"nofollow noopener\">Randolf Richardson</a>"},{"reply":"Tidak, saya masih tidak bisa menjalankannya.","author":"<a href=\"https://superuser.com/users/24620/matt-h\" target=\"_blank\" rel=\"nofollow noopener\">Matt H</a>"},{"reply":"Ketika saya menginstal Xen di NetBSD, saya memiliki opsi untuk hanya mem-boot OS host saya tanpa Xen (NetBSD 5 dapat melakukan boot secara native ke Xen tanpa GRUB atau GRUB2). Apakah GRUB2 tidak menyediakan opsi boot lain? Parameter apa yang Anda gunakan untuk mem-boot Xen?","author":"<a href=\"https://superuser.com/users/26312/randolf-richardson\" target=\"_blank\" rel=\"nofollow noopener\">Randolf Richardson</a>"},{"reply":"Mungkin pertanyaan yang lebih baik di serverfault.com","author":"<a href=\"https://superuser.com/users/15489/prof-falken\" target=\"_blank\" rel=\"nofollow noopener\">Prof. Falken</a>"}],"answers":[{"answer":"<p> Untuk menjawab pertanyaan saya sendiri. Entri grub2 ini berfungsi. </p> <pre><code>menuentry 'Xen 4 with Linux 2.6.32.45-xen' --class ubuntu --class gnu-linux --class gnu --class os --class xen {\n        recordfail\n        insmod ext2\n        set root='(hd0,1)'\n        search --no-floppy --fs-uuid --set 75475e50-82e2-4f74-b860-6cf92c91b42e\n        multiboot /xen.gz placeholder\n        module  /vmlinuz-2.6.32.45-xen placeholder root=/dev/mapper/xenserver-root ro \n        module  /initrd.img-2.6.32.45-xen\n}\n</code></pre> <p> Namun, saya juga mengalami masalah dengan kernelnya. Jadi saya harus membangunnya kembali. Setelah saya melakukan itu semuanya pergi. </p>","votes":"7","source":"https://superuser.com/a/327782","author":"<a href=\"https://superuser.com/users/24620/matt-h\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Matt H</span></a>","replies":[{"reply":"+1 untuk berbagi solusi untuk masalah ini dengan detail teknis karena ini dapat membantu orang lain.","author":"<a href=\"https://superuser.com/users/26312/randolf-richardson\" target=\"_blank\" rel=\"nofollow noopener\">Randolf Richardson</a>"}]},{"answer":"<p> Agar <code>grub2-mkconfig</code> dapat mendeteksi kernel Linux Anda, mereka harus diberi nama <code>vmlinuz-*</code> atau <code>kernel-*</code>. Dalam beberapa skrip, Anda juga dapat melihat <code>vmlinux-*</code>. Misalnya (...- xen di bagian akhir hanyalah catatan saya): </p> <pre><code>/boot/kernel-3.6.2-xen\n</code></pre> <p> Agar skrip <code>20_linux_xen</code> menyertakan kernel Xen Anda, <code>/boot</code> harus berisi file konfigurasi kernel dengan nama persis <code>config-*</code> yang sesuai dengan file kernel Anda. Sebagai contoh: </p> <pre><code>/boot/config-3.6.2-xen\n</code></pre> <p> Untuk membuat file ini cukup jalankan <code>zcat /proc/config.gz &gt; /boot/config-[your_version]</code>, dan Anda harus menjalankan <code>grub2-mkconfig</code> lagi. Pada saat ini script mungkin akan menghasilkan record duplikat untuk kernel Xen, karena (mungkin) Anda memiliki beberapa symlink ke kernel xen. Jadi hapuslah dan tinggalkan hanya file asli (<code>xen-4.2.0.gz</code>). (Saya harap ini aman, jika menghapus symlink ini salah, harap simpan komentar Anda di bawah.) </p>\n\n<p> Situasi yang sama terjadi pada file initrd / initramfs, tetapi banyak variasinya. </p>\n\n<p> Menambahkan parameter kernel telah dijelaskan <a href=\"https://serverfault.com/a/451032/92276\" target=\"_blank\" rel=\"nofollow noopener\"> sini </a> . </p>\n\n<p> sumber: <a href=\"http://wiki.gentoo.org/wiki/GRUB2_Quick_Start#Kernel_naming\" rel=\"nofollow noopener\" target=\"_blank\"> penamaan kernel </a> , <code>20_linux_xen:147</code>, <code>10_linux:194-201</code> </p>","votes":"0","source":"https://superuser.com/a/506990","author":"<a href=\"https://superuser.com/users/29696/dmnc\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">dmnc</span></a>","replies":[]}]}
