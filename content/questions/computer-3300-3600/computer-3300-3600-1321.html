{"title":"Bagaimana cara membatasi konsumsi CPU dari grup proses dengan alat GNU / Linux standar?","draft":false,"url":"/bagaimana-cara-membatasi-konsumsi-cpu-dari-grup-proses-dengan-alat-gnu-linux-standar-chbhcvlw","votes":"4","answers_count":"4","categories":["Komputer"],"tags":["linux","bash","cpu","process","time"],"snippet":"Saya memiliki banyak proses dengan nama yang sama - proses tersebut menghabiskan 100% waktu CPU saya, saya ingin ini tidak lebih dari 50%.  Bagaimana saya dapat melakukan ini tanpa menginstal perangkat lunak...","body":"<p> Saya memiliki banyak proses dengan nama yang sama - proses tersebut menghabiskan 100% waktu CPU saya, saya ingin ini tidak lebih dari 50%. </p>\n\n<p> Bagaimana saya dapat melakukan ini tanpa menginstal perangkat lunak tambahan? </p>","source":"https://superuser.com/questions/921086/how-to-limit-cpu-consumtion-of-a-process-group-with-standard-gnu-linux-tools","author":"<a href=\"https://superuser.com/users/224922/unfa\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">unfa</span></a>","replies":[{"reply":"Apakah Anda bermaksud membatasi setiap proses hingga 50% dari sebuah CPU, atau Anda ingin membatasi file <i> agregat </i> Penggunaan CPU dari semua proses itu? Jawabannya mungkin tergantung pada perbedaan itu.","author":"<a href=\"https://superuser.com/users/443006/toby-speight\" target=\"_blank\" rel=\"nofollow noopener\">Toby Speight</a>"},{"reply":"Sudahkah Anda mempertimbangkan untuk mengatur afinitas proses untuk mereka menjadi 50% dari inti?","author":"<a href=\"https://superuser.com/users/330318/ptwr\" target=\"_blank\" rel=\"nofollow noopener\">PTwr</a>"},{"reply":"Sebagian besar waktu saya melihat pertanyaan seperti ini, saya bertanya-tanya apakah OP tidak akan lebih baik digunakan <a href=\"http://man7.org/linux/man-pages/man2/nice.2.html\" rel=\"nofollow noopener\" target=\"_blank\"> <code>nice</code> </a> ...","author":"<a href=\"https://superuser.com/users/41210/axel\" target=\"_blank\" rel=\"nofollow noopener\">Axel</a>"}],"answers":[{"answer":"<p> Untuk mekanisme tingkat kernel untuk ini, Anda perlu membaca di Linux <a href=\"https://en.wikipedia.org/wiki/Cgroups\" rel=\"nofollow noopener\" target=\"_blank\"> Grup Kontrol </a> . Ini adalah area yang masih dalam pengembangan aktif, jadi Anda harus memastikan bahwa apa yang Anda baca konsisten dengan kernel yang Anda miliki (atau ingin diinstal). </p>\n\n<p> Meskipun Anda mengatakan untuk tidak menginstal tambahan apa pun, Anda dapat mempertimbangkan menginstal <code>cgred</code> untuk mengotomatiskan proses pemindahan dengan nama yang cocok ke cgroup CPU Anda. Di Debian, ini ada di paket <code>cgroup-bin</code>. </p>","votes":"4","source":"https://superuser.com/a/921095","author":"<a href=\"https://superuser.com/users/443006/toby-speight\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Toby Speight</span></a>","replies":[]},{"answer":"<p> Anda dapat melakukannya dengan perintah bash shell, sleep, pgrep, dan pkill menggunakan sinyal STOP dan CONT. </p>\n\n<p> Satu baris berikut akan membuat proses menggunakan maksimal 50% dari total waktu CPU yang tersedia. Ini akan berjalan untuk setiap 100 milidetik, lalu akan berhenti selama 100 milidetik lagi. </p> <pre><code>while [ True ]; do pkill -STOP processname; sleep 0.1s; pkill -CONT processname; sleep 0.1s; done\n</code></pre> <p> Berikut kode yang sama dibagi menjadi beberapa baris agar mudah dibaca: </p> <pre><code>while [ True ]\n     do pkill -STOP processname\n     sleep 0.1s\n     pkill -CONT processname\n     sleep 0.1s\ndone\n</code></pre> <p> Tidak peduli berapa banyak proses yang ada dengan pola nama proses, mereka tidak dapat melebihi 50% dari penggunaan CPU, karena semuanya dihentikan dan dilanjutkan pada saat yang sama - yang berarti mereka perlu berbagi waktu CPU yang tersedia di antara mereka, ketika mereka aktif. Ini memastikan batasnya terpenuhi. </p>\n\n<p> Ada sebuah program bernama cpulimit yang melakukan hal yang kurang lebih sama. </p>","votes":"3","source":"https://superuser.com/a/921087","author":"<a href=\"https://superuser.com/users/224922/unfa\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">unfa</span></a>","replies":[{"reply":"Kelemahan dari ini adalah itu bermain buruk dalam keadaan idle, karena Anda sekarang bangun 10 kali per detik apakah itu perlu atau tidak. Ini akan mengurangi manfaat NOHZ di kernel Anda. Tentu saja, jika sistem Anda tidak pernah menganggur, itu tidak akan menjadi masalah bagi Anda, tetapi setidaknya perlu disebutkan. Lihat jawaban saya untuk alternatif.","author":"<a href=\"https://superuser.com/users/443006/toby-speight\" target=\"_blank\" rel=\"nofollow noopener\">Toby Speight</a>"},{"reply":"Proses terkadang bereaksi aneh jika dihentikan dan dilanjutkan. Terutama jika mereka bersifat terminal-interaktif. Jadi ini mungkin tidak bekerja dengan setiap program, dan peringatan yang sesuai harus disertakan dalam jawaban.","author":"<a href=\"https://superuser.com/users/153009/alfe\" target=\"_blank\" rel=\"nofollow noopener\">Alfe</a>"}]},{"answer":"<p> Tanpa menginstal perangkat lunak tambahan apa pun yang Anda miliki <code>nice</code>. Kisaran nilainya adalah dari <em> -20 </em> untuk <em> 19 </em> . </p> <pre><code>nice -20 some_command\n</code></pre> <p> memberikan <code>some_command</code> <em> prioritas utama </em> , dan </p> <pre><code>nice 19 some_command\n</code></pre> <p> memberikan <code>some_command</code> <em> prioritas terendah </em> . </p>","votes":"2","source":"https://superuser.com/a/921089","author":"<a href=\"https://superuser.com/users/318069/jcbermu\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">jcbermu</span></a>","replies":[{"reply":"Jika kamu <i> bagus </i> banyak proses, mereka tidak akan mendapatkan 50% dari waktu CPU ketika sesuatu yang lain ingin menggunakan 100% dari CPU.","author":"<a href=\"https://superuser.com/users/427799/dmitry-grigoryev\" target=\"_blank\" rel=\"nofollow noopener\">Dmitry Grigoryev</a>"},{"reply":"â€¦ Dan jika tidak ada lagi yang menggunakan waktu CPU, mereka masih melahap semua 100%. Tetapi menyebutkan <code>nice</code> dalam konteks ini pasti sepadan dengan usahanya.","author":"<a href=\"https://superuser.com/users/153009/alfe\" target=\"_blank\" rel=\"nofollow noopener\">Alfe</a>"},{"reply":"Mengapa ada orang <i> ingin </i> proses untuk mendapatkan 50% CPU di tempat pertama? Saya tidak bisa memikirkan skenario non-esoterik di mana ini akan lebih masuk akal daripada menggunakan nice.","author":"<a href=\"https://superuser.com/users/41210/axel\" target=\"_blank\" rel=\"nofollow noopener\">Axel</a>"},{"reply":"Tidak tampak seperti skenario esoteris bagi saya seperti yang sering saya temui. Pengguna yang ingin menjalankan tugas pemrosesan yang lebih besar, tetapi tidak mengizinkan mereka untuk menjatuhkan sisa mesin lainnya pada saat yang bersamaan. Sebuah% dari batas CPU akan ideal.","author":"<a href=\"https://superuser.com/users/791/brian-knoblauch\" target=\"_blank\" rel=\"nofollow noopener\">Brian Knoblauch</a>"}]},{"answer":"<p> seperti yang tertulis di atas dapat digunakan sebagai script untuk membantu OOM-killer Atau juga mencegah penggunaannya </p>\n\n<p> Katakanlah ketika cpu keseluruhan mencapai 75% selama x menit jalankan pkill.sh </p> <pre><code> ../scripts/boottime/OOMkiller.sh\n\nwhile [ true] ; \n    do  inxi -tcm5 &gt; ~/cpu.log \n    sleep 0.5s \n    inxi -tcm5 &gt;&gt; ~/cpu/log | diff -m &gt; ~/offender.log\ndone\n\nfor i in offender.log ;\n    do ./scripts/pkill.sh\ndone\n\n ../scripts/pkill.sh\nwhile [true] \n    do pgrep $(i) -STOP $PID\n    pkill -STOP $PID\n    sleep 0.5s \n    pkill -CONT $PID\ndone\n</code></pre>","votes":"0","source":"https://superuser.com/a/921101","author":"<a href=\"https://superuser.com/users/295176/linuxdev2013\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">linuxdev2013</span></a>","replies":[]}]}
