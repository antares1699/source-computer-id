{"title":"Ekstrak URL dari teks dengan beberapa URL menggunakan sed","draft":false,"url":"/ekstrak-url-dari-teks-dengan-beberapa-url-menggunakan-sed-lvh3n0zm","votes":"4","answers_count":"4","categories":["Komputer"],"tags":["linux","bash","sed"],"snippet":"Saya memiliki string dengan teks dan beberapa URL. Bagaimana cara mengekstrak satu URL tertentu (dari domain spoecific) dengan sed?Misalnya, saya punya ini:  Text foo bar Text foo bar &lt;br /&gt;&lt;br /&gt;...","body":"<p> Saya memiliki string dengan teks dan beberapa URL. Bagaimana cara mengekstrak satu URL tertentu (dari domain spoecific) dengan sed?\nMisalnya, saya punya ini: </p> <pre><code>Text foo bar Text foo bar &lt;br /&gt;&lt;br /&gt; http://www.this.file &lt;br /&gt;http://another.file &lt;br /&gt;http://mine.com/this.html &lt;br /&gt;http://myURL.net/files/IWANTthis &lt;br /&gt;http://www.google.com/thisnot\n</code></pre> <p> dan <code>sed</code> akan mengembalikan ini:\n <code>http://myURL.net/files/IWANTthis</code> </p>","source":"https://superuser.com/questions/686434/extract-url-from-text-with-multiple-urls-using-sed","author":"<a href=\"https://superuser.com/users/148175/tzippy\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">tzippy</span></a>","replies":[{"reply":"Apakah Anda tidak melakukan ini dengan <code>grep</code>?","author":"<a href=\"https://superuser.com/users/174140/174140\" target=\"_blank\" rel=\"nofollow noopener\">174140</a>"},{"reply":"Jika Anda tahu caranya, ya, silakan!","author":"<a href=\"https://superuser.com/users/148175/tzippy\" target=\"_blank\" rel=\"nofollow noopener\">tzippy</a>"},{"reply":"Sangat mudah, lakukan percobaan / kesalahan yang dimulai dengan sesuatu seperti <code>| sed s&#47;&lt;br \\&#47;&gt;&#47;&lt;br \\&#47;&gt;\\n&#47;g | grep &quot;myURL\\.net&quot;</code>","author":"<a href=\"https://superuser.com/users/174140/174140\" target=\"_blank\" rel=\"nofollow noopener\">174140</a>"},{"reply":"Pekerjaan tepatnya tergantung pada jarak tempuh total Anda. Jika Anda pindah ke GNU / Linux, mulailah dengan membaca Eric S. Raymond&#39;s <a href=\"http://www.catb.org/~esr/writings/taoup/\" rel=\"nofollow noopener\" target=\"_blank\"> Seni Pemrograman Unix </a> .","author":"<a href=\"https://superuser.com/users/174140/174140\" target=\"_blank\" rel=\"nofollow noopener\">174140</a>"}],"answers":[{"answer":"<p> Mungkin ada beberapa masalah dengan sed pada kasus-kasus khusus. Seperti yang telah disarankan di banyak tempat <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\" target=\"_blank\" rel=\"nofollow noopener\"> (misalnya.) </a> - tidak menggunakan regexps tetapi mesin pengurai html. Salah satu parser yang tersedia dengan mudah terdapat dalam teks saja lynx browser (tersedia di linux apapun). Kemudian Anda tinggal mengekstrak url yang Anda inginkan dengan grep. </p> <pre><code>lynx -dump -listonly myhtmlfile.html | grep IWANTthis | sort -u\n</code></pre> <p> Namun ini tidak akan berfungsi pada file html yang rusak (tidak dapat diuraikan dengan benar) atau cuplikan teks dengan tautan. Cara sederhana lainnya adalah dengan merantai. Jika Anda memiliki potongan teks seperti milik Anda dalam file teks bernama st3.txt, Anda dapat melakukan hal berikut: </p> <pre><code>grep http ./st3.txt | sed 's/http/\\nhttp/g' | grep ^http | sed 's/\\(^http[^ &lt;]*\\)\\(.*\\)/\\1/g' | grep IWANTthis | sort -u\n</code></pre> <p> Penjelasan: </p> <pre><code>grep http ./st3.txt      =&gt; will catch lines with http from text file\nsed 's/http/\\nhttp/g'    =&gt; will insert newline before each http\ngrep ^http               =&gt; will take only lines starting with http\nsed 's/\\(^http[^ &lt;]*\\)\\(.*\\)/\\1/g'   \n                         =&gt; will preserve string from ^http until first space or &lt;\ngrep IWANTthis           =&gt; will take only urls containing your text of interest\nsort -u                  =&gt; will sort and remove duplicates from your list\n</code></pre>","votes":"7","source":"https://superuser.com/a/686530","author":"<a href=\"https://superuser.com/users/280775/r0berts\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">r0berts</span></a>","replies":[{"reply":"Bagus! Anda menjelaskan dengan sangat baik.","author":"<a href=\"https://superuser.com/users/368341/xyz\" target=\"_blank\" rel=\"nofollow noopener\">xyz</a>"},{"reply":"Saya menggunakan <code>lynx</code> juga, saya merasa berguna tetapi saya menemukan <code>sed</code> sebenarnya merobek lebih banyak url dengan sendirinya karena <code>sed</code> tidak peduli tentang pemformatan dan mengikuti standar HTML.","author":"<a href=\"https://superuser.com/users/365691/a-danischewski\" target=\"_blank\" rel=\"nofollow noopener\">A.Danischewski</a>"},{"reply":"Ya, <code>sed</code> hanya memproses teks, tidak mengurai sama sekali. Untuk alasan ini - untuk meminimalkan (tetapi saya tidak dapat mengecualikannya sama sekali) masalah seperti itu saya pertama kali mengekstrak baris dengan http di dalamnya, membuat lebih banyak baris dengan memotong <i> sebelum </i> setiap http kemudian mencocokkan baris baru tersebut hingga spasi pertama atau kurung sudut - karena hyperlink tidak dapat berisi itu dan semoga saya hanya memiliki daftar tautan, dari mana saya mengekstraknya dengan teks yang menarik. Jeda baris <i> dalam </i> URLS tentu saja akan merusak ini.","author":"<a href=\"https://superuser.com/users/280775/r0berts\" target=\"_blank\" rel=\"nofollow noopener\">r0berts</a>"}]},{"answer":"<p> Anda dapat menggunakan <code>grep</code> dengan ekstensi <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noopener\" target=\"_blank\"> ekspresi reguler </a> (regex) untuk ini: </p> <pre><code>grep -Eo '([-+.[:alnum:]]+://)?([-[:alnum:]]+.)*myURL.net(:[[:digit:]]+)?(/[[:graph:]]*)?' &lt;&lt;&lt; '&lt;input_string&gt;'\n</code></pre> <p> Penjelasan setiap bagian dari perintah dan regex: </p>\n\n<ul>\n<li> <code>grep -Eo</code>: Kami menelepon <code>grep</code> dengan dua opsi. <ul>\n<li> <code>-E</code>: Aktifkan <a href=\"https://en.wikipedia.org/wiki/Regular_expression#POSIX_basic_and_extended\" rel=\"nofollow noopener\" target=\"_blank\"> POSIX diperpanjang </a> ekspresi reguler. </li>\n<li> <code>-o</code>: Cetak hanya bagian yang cocok dari setiap baris (tanpa opsi ini, <code>grep</code> default untuk mencetak seluruh baris yang berisi bagian yang cocok). </li>\n</ul></li>\n<li> <code>'([-+.[:alnum:]]+://)?([-[:alnum:]]+.)*myURL.net(:[[:digit:]]+)?(/[[:graph:]]*)?'</code>: Regex ini mungkin sedikit lebih bagus dari yang Anda butuhkan, jadi Anda harus menyederhanakan atau membuang bagian yang rumit dan tidak perlu untuk tujuan Anda. (Kompleksitas adalah hasil dari upaya untuk memberikan solusi umum.) <ul>\n<li> <code>([-+.[:alnum:]]+://)?</code>: Ini cocok dengan <a href=\"https://en.wikipedia.org/wiki/URI_scheme\" rel=\"nofollow noopener\" target=\"_blank\"> skema </a> dari URL. <code>?</code> di bagian akhir menetapkan bahwa ini cocok sekali atau tidak sama sekali (sehingga <code>myURL.net</code> cocok bahkan jika tidak ada skema yang ditambahkan di awal). Kami menyertakan karakter yang sedikit tidak biasa <code>-+.</code> karena <a href=\"https://tools.ietf.org/html/rfc3986#section-3.1\" rel=\"nofollow noopener\" target=\"_blank\"> RFC 3986 </a> menentukan bahwa &quot;[s] cheme names terdiri dari urutan karakter yang dimulai dengan huruf dan diikuti dengan kombinasi huruf, angka, <strong> plus (&#39;+&#39;), titik (&#39;.&#39;), atau tanda hubung (&#39;-&#39;) </strong> &quot;(penekanan saya). Jika Anda yakin bahwa <code>http://</code> akan selalu muncul di depan <code>myURL.net</code>, maka Anda dapat mengganti bagian regex ini dengan <code>http://</code> sederhana. </li>\n<li> <code>([-[:alnum:]]+.)*</code>: Pertandingan ini <a href=\"https://en.wikipedia.org/wiki/Subdomain\" rel=\"nofollow noopener\" target=\"_blank\"> subdomain </a> . <code>*</code> di bagian akhir menentukan bahwa ini cocok dengan nol atau lebih (sehingga subdomain seperti <code>a.b.</code> pada <code>a.b.myURL.net</code> cocok). Kami menyertakan tanda hubung (<code>-</code>) karena <a href=\"https://tools.ietf.org/html/rfc1035#section-2.3.1\" rel=\"nofollow noopener\" target=\"_blank\"> RFC 1035 </a> menentukan bahwa &quot;[label subdomain] harus dimulai dengan huruf, diakhiri dengan huruf atau angka, dan memiliki karakter interior hanya huruf, angka, dan <strong> tanda penghubung </strong> &quot;(penekanan saya). Jika Anda yakin tidak perlu mencocokkan subdomain, Anda dapat menghapus bagian regex ini. </li>\n<li> <code>myURL.net</code>: Ini adalah pertandingan langsung untuk string literal <code>myURL.net</code>. </li>\n<li> <code>([-+.[:alnum:]]+://)?</code>: Ini cocok dengan semua <a href=\"https://tools.ietf.org/html/rfc3986#section-3.2.3\" rel=\"nofollow noopener\" target=\"_blank\"> penunjukan pelabuhan </a> jika sudah termasuk dalam URL. </li>\n<li> <code>(/[[:graph:]]*)?</code>: Ini cocok dengan URL lainnya. <code>[:graph:]</code> cocok dengan semua karakter yang terlihat. </li>\n</ul></li>\n<li> <code>&lt;&lt;&lt; '&lt;input_string&gt;'</code>: Kami memberi makan <code>grep</code> (yang menerima file) string input kami menggunakan <a href=\"https://en.wikipedia.org/wiki/Here_document#Here_strings\" rel=\"nofollow noopener\" target=\"_blank\"> di sini string </a> . (<code>echo '&lt;input_string&gt;' |</code> adalah alternatif umum.) </li>\n</ul>\n\n<p> Contoh: </p> <pre><code>$ grep -Eo '([-+.[:alnum:]]+://)?([-[:alnum:]]+.)*myURL.net(:[[:digit:]]+)?(/[[:graph:]]*)?' &lt;&lt;&lt; 'Text foo bar Text foo bar &lt;br /&gt;&lt;br /&gt; http://www.this.file &lt;br /&gt;http://another.file &lt;br /&gt;http://mine.com/this.html &lt;br /&gt;http://myURL.net/files/IWANTthis &lt;br /&gt;http://www.google.com/thisnot'\nhttp://myURL.net/files/IWANTthis\n</code></pre> <p> Sekali lagi, regex yang saya berikan di atas mungkin terlalu rumit untuk dilakukan. Anda harus memodifikasinya agar sesuai dengan tujuan Anda. Sesuatu yang sederhana seperti berikut ini dapat bekerja: </p> <pre><code>grep -Eo 'http://myURL.net(/[[:graph:]]*)?' &lt;&lt;&lt; '&lt;input_string&gt;'\n</code></pre>","votes":"2","source":"https://superuser.com/a/689018","author":"<a href=\"https://superuser.com/users/91193/vincent-yu\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Vincent Yu</span></a>","replies":[]},{"answer":"<p> Anda bisa menggunakan: <code>sed 's/&lt;br\\ *\\/&gt;/\\n/g' html_file | grep myURL.net</code> </p>\n\n<p> Keluaran: <code>http://myURL.net/files/IWANTthis</code> </p>\n\n<p> Pada dasarnya saya mengganti semua <code>&lt;br /&gt;</code> dengan karakter baris baru dan mengambil baris yang relevan dengan grep. </p>\n\n<p> Ini tidak memperhitungkan semua kemungkinan variasi (html diperbolehkan) dari tag <code>&lt;br&gt;</code>, tetapi menangani yang ada di contoh Anda. </p>","votes":"0","source":"https://superuser.com/a/689516","author":"<a href=\"https://superuser.com/users/38282/james-t\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">James T</span></a>","replies":[]},{"answer":"<p> Anda dapat mengurai file untuk semua url dengan <code>sed</code> dan kemudian <code>grep</code> untuk kecocokan Anda. <br><br> <code>sed \"s/http/\\nhttp/g\" your.html | sed -n \"s#\\(.*\\)\\(http.*//[a-Z0-9./-]*[^a-Z/]\\)\\(.*\\)#\\2#p;\" | grep IWANTthis</code> </p>\n\n<p> Pada lintasan pertama <code>sed</code> menggantikan semua http dengan baris baru yang ditambahkan untuk mempermudah segalanya bagi <code>sed</code> pada lintasan kedua di mana <code>sed</code> merobek url. Regex ini umumnya berfungsi untuk saya, tetapi Anda mungkin perlu menyesuaikannya agar sesuai dengan kebutuhan Anda. </p>\n\n<p> Catatan: Anda dapat melakukan ini dalam sekali jalan tetapi akan menjadi rumit dengan cryptic yang berpotensi sulit untuk mempertahankan perintah <code>sed</code> yang jarang digunakan. </p>","votes":"0","source":"https://superuser.com/a/1001052","author":"<a href=\"https://superuser.com/users/365691/a-danischewski\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">A.Danischewski</span></a>","replies":[]}]}
