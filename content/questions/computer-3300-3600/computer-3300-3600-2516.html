{"title":"Menangani kesalahan perintah goto dalam Batch","draft":false,"url":"/menangani-kesalahan-perintah-goto-dalam-batch-snzsdg2a","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["batch","batch-file"],"snippet":"Untuk langsung ke masalah, saya membutuhkan file  File batch   tidak menutup otomatis  jika saya  perintah goto tidak valid  (goto Non existing place) dan ya saya punya jeda setelah itu  Inilah bagiannya:  set...","body":"<p> Untuk langsung ke masalah, saya membutuhkan file <strong> File batch </strong> <strong> tidak menutup otomatis </strong> jika saya <strong> perintah goto tidak valid </strong> (goto Non existing place) dan ya saya punya jeda setelah itu </p>\n\n<p> Inilah bagiannya: </p> <pre><code>set /p Command=\ngoto %Command%\npause\n</code></pre> <p> Terima kasih Pizza </p>","source":"https://superuser.com/questions/1204527/handling-goto-command-errors-in-batch","author":"<a href=\"https://superuser.com/users/572326/pizza\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Pizza</span></a>","replies":[],"answers":[{"answer":"<ul>\n<li> Versi yang lebih aman ini pertama-tama mengumpulkan semua label dalam sebuah string, satu label mengikuti yang lain. </li>\n<li> Titik dua pada label berikutnya menunjukkan akhir dari label sebelumnya. </li>\n<li> String <code>%Labels%</code> dan titik dua di-echo-kan ke findstr, label yang dimasukkan juga ditambahkan dengan titik dua sehingga hanya label lengkap yang cocok. </li>\n</ul>\n\n<hr> <pre><code>@Echo off&amp;SetLocal EnableExtensions EnableDelayedExpansion\n\nSet \"Labels=\"&amp;For /f %%A in ('findstr /i \"^:[a-z]\" %0') Do Set \"Labels=!Labels!%%A\"\n\n:redo\nSet \"Label=\"&amp;set /p \"Label=Choose label %Labels%:\"\nif not defined Label goto :Eof\nEcho %Labels%:|findstr /i \":%Label::=%:\" &gt;nul 2&gt;&amp;1 ||(Echo invalid label %Label% &amp; goto :redo)\ngoto %Label%\nEcho we'll never reach here\n\n:One\nEcho Label One\ngoto :redo\n\n:Two\nEcho Label Two\ngoto :redo\n\n:Three\nEcho Label Three\ngoto :redo\n</code></pre> <p> Output sampel: </p> <pre><code>&gt; SU_1204527.cmd\nChoose label :redo:One:Two:Three:one\nLabel One\nChoose label :redo:One:Two:Three:two\nLabel Two\nChoose label :redo:One:Two:Three:blah\ninvalid label blah\nChoose label :redo:One:Two:Three:\n&gt; \n</code></pre>","votes":"3","source":"https://superuser.com/a/1204550","author":"<a href=\"https://superuser.com/users/639112/lotpings\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">LotPings</span></a>","replies":[{"reply":"Tolong bisakah Anda menjelaskan bagaimana ini lebih baik / lebih aman daripada yang di atas jika ada alasan bagus saya akan menggunakan milik Anda jika bukan alasannya lebih ringkas :)","author":"<a href=\"https://superuser.com/users/572326/pizza\" target=\"_blank\" rel=\"nofollow noopener\">Pizza</a>"},{"reply":"Keduanya milik saya :-) Jika ada dua label <code>:Test1 and </code>: Test2 &#39;&#39; dan pengguna memasukkan <code>test</code> jawaban lain akan gagal - yang ini tidak.","author":"<a href=\"https://superuser.com/users/639112/lotpings\" target=\"_blank\" rel=\"nofollow noopener\">LotPings</a>"},{"reply":"Saya tidak pernah memperhatikan mereka berdua oleh Anda. juga terima kasih atas penjelasannya","author":"<a href=\"https://superuser.com/users/572326/pizza\" target=\"_blank\" rel=\"nofollow noopener\">Pizza</a>"}]},{"answer":"<pre><code>:redo\nset /p \"Label=goto label:\"\nfindstr /i \"^:%Label%\" \"%~0\" &gt;nul 2&gt;&amp;1 ||(Echo invalid label %Label% &amp; goto :redo)\ngoto %Label%\npause\n</code></pre> <p><strong> Sunting </strong> Saya harus mengakui bahwa batch akan gagal jika label yang dimasukkan adalah substring awal dari label yang ada. </p>","votes":"4","source":"https://superuser.com/a/1204530","author":"<a href=\"https://superuser.com/users/639112/lotpings\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">LotPings</span></a>","replies":[]}]}
