{"title":"Bagaimana menemukan ip mana yang menghantam situs web saya?","draft":false,"url":"/bagaimana-menemukan-ip-mana-yang-menghantam-situs-web-saya-f8c3tauz","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["ip","reverse-proxy","traffic"],"snippet":"Saya memiliki situs web yang baru-baru ini mendapatkan begitu banyak lalu lintas sehingga beban server saya melonjak.  load average: 83.99, 72.89, 77.70  Situs web saya dihosting di server khusus dengan RAM 64...","body":"<p> Saya memiliki situs web yang baru-baru ini mendapatkan begitu banyak lalu lintas sehingga beban server saya melonjak. </p> <pre><code>load average: 83.99, 72.89, 77.70\n</code></pre> <p> Situs web saya dihosting di server khusus dengan RAM 64 GB dan CPU Intel i7 6700k. dan berada di balik cloudflare. </p>\n\n<p> Saya tidak menggunakan analitik apa pun untuk melacak pengunjung. </p>\n\n<p> Dari 3-4 hari terakhir, lalu lintas meningkat dan saya mendapat kesan bahwa itu adalah lalu lintas biasa di situs web saya, sampai saya menemukan ketika menjelajahi situs lain menggunakan pencarian google, bahwa beberapa situs web lain bertindak sebagai proxy online / terbalik dan memuat situs saya sebagai milik mereka dan situsnya memiliki lalu lintas yang jauh lebih banyak daripada milik saya, jadi saya mengaksesnya </p> <pre><code>https://www.whatismyip.com/\n</code></pre> <p> menggunakan proxy situs itu mis. </p> <pre><code>www.example.com/proxy_url=https://www.whatismyip.com\n</code></pre> <p> untuk mendapatkan alamat IP tersebut kemudian memblokir alamat IP-nya di cloudflare.\nMetode ini tidak dapat dilakukan setiap kali seseorang melakukan proxy ke situs web saya. </p>\n\n<p> Jadi bagaimana saya bisa mengetahui apakah ada alamat IP yang membuat terlalu banyak permintaan ke situs saya? </p>\n\n<hr>\n\n<p> Masalah Terselesaikan.\nApa yang saya lakukan <strong> 1) Aktifkan Log di NGINX </strong></p>\n\n<p> nginx.conf </p> <pre><code>http{\n  #main log format for capturing real ip addresses\nlog_format main '$http_x_forwarded_for - $remote_user [$time_local] \"$host\" \"$request\" '\n            '$status $body_bytes_sent \"$http_referer\" '\n            '\"$http_user_agent\" $request_time';\n}\n</code></pre> <p> mydomain.com.conf </p> <pre><code>server{\naccess_log  /usr/local/nginx/logs/access.log main;\n}\n\nnginx -t\n\nservice nginx restart\n</code></pre> <p><strong> 2) saya pergi ke situs yang membalikkan proxy ke situs saya. dan mencoba mengakses beberapa halaman yang tidak ada. </strong></p>\n\n<p> misalnya <code>https://www.proxy-example.com/proxy_url=https://www.my-example.com/BAN_THIS_IP</code> </p>\n\n<p><strong> 3) Saya memeriksa log saya untuk </strong> <code>BAN_THIS_IP</code> </p> <pre><code>cat /usr/local/nginx/logs/access.log | grep BAN_THIS_IP\n</code></pre> <p> dan menemukan alamat IP server. </p>\n\n<p><strong> 4) Menambahkan alamat IP itu, di cloudflare dan diatur ke Blokir. </strong></p>\n\n<p> Terima kasih </p>","source":"https://superuser.com/questions/1331166/how-to-find-which-ip-is-hammering-my-website","author":"<span itemprop=\"name\">user176344</span>","replies":[{"reply":"Saya rasa Anda tidak dapat mencegah orang untuk melakukan proxy ke situs web Anda .. selain melalui log server web Anda, dan melarang IP apa pun yang sangat mencurigakan (karena jumlah volume permintaan yang ekstrim untuk halaman dari satu alamat IP) . Terkait: <a href=\"https://serverfault.com/questions/419784/how-to-automatically-and-temporarily-block-an-ip-address-making-too-many-hits-on\" title=\"how to automatically and temporarily block an ip address making too many hits on\" target=\"_blank\" rel=\"nofollow noopener\"> serverfault.com/questions/419784/â€¦ </a>","author":"<a href=\"https://superuser.com/users/5032/darius\" target=\"_blank\" rel=\"nofollow noopener\">Darius</a>"},{"reply":"Tunggu, bukankah Cloudflare mengirimi Anda semua alamat IP pengunjung melalui X-Forwarded-For?","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"@grawity memang demikian, tetapi apakah ini berarti, saya harus mencatat setiap ip dan menghitung permintaannya dalam beberapa menit terakhir dan kemudian memblokirnya secara manual? atau apakah ada sesuatu yang sudah jadi? Terima kasih","author":"User"},{"reply":"Anda melarangnya secara otomatis <a href=\"https://www.fail2ban.org\" rel=\"nofollow noopener\" target=\"_blank\"> Fail2ban </a>","author":"<a href=\"https://superuser.com/users/764959/josem\" target=\"_blank\" rel=\"nofollow noopener\">Josem</a>"},{"reply":"Memblokir pengguna sah yang tanpa sengaja datang ke situs web Anda melalui proxy adalah cara yang pasti untuk kehilangan lalu lintas atau mendapatkan reputasi buruk.","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\">harrymc</a>"},{"reply":"@harrymc itu bukan hanya proxy, proxy baliknya, jadi peselancar tidak tiba di situs saya, mereka mendarat di situs lain yang membalikkan proxy ke situs saya yang artinya, itu memakan sumber daya saya dan tidak memberi saya pendapatan iklan., terima kasih","author":"User"}],"answers":[{"answer":"<p> Tidak ada solusi sederhana untuk masalah Anda karena tidak terdefinisi dengan baik (terutama yang berkaitan dengan bagaimana hal itu mencapai jaringan Anda), namun ada sejumlah alat di kotak alat Anda, termasuk - </p>\n\n<ol>\n<li><p><a href=\"http://www.securitynewspaper.com/2017/04/05/air-exploiting-broadcoms-wi-fi-stack-part-1/\" rel=\"nofollow noopener\" target=\"_blank\"> Cloudflare meneruskan header CF-Connecting-IP dan X-Forwarded-For </a> . Anda harus mencatat informasi ini di samping permintaan - bagaimana Anda melakukannya akan bergantung pada server web Anda. <a href=\"http://www.loadbalancer.org/blog/apache-and-x-forwarded-for-headers/\" rel=\"nofollow noopener\" target=\"_blank\"> Sini </a> adalah tautan tentang cara melakukannya di Apache. </p></li>\n<li><p> Setelah Anda memiliki informasi di atas, Anda dapat mengkonfigurasi <a href=\"https://www.fail2ban.org/wiki/index.php/Main_Page\" rel=\"nofollow noopener\" target=\"_blank\"> fail2ban </a> untuk menghitung jumlah klik terhadap file log tersebut dalam waktu tertentu dan daftar hitam berdasarkan volume klik yang besar. Jangan meremehkan ini karena setiap elemen akan dicatat dalam file log ini. </p></li>\n<li><p> Sebagian besar server web yang baik akan membiarkan Anda menangani lalu lintas berdasarkan berbagai variabel - salah satu yang perlu diperhatikan adalah string USER-AGENT - jika ini adalah proxy off-the-shelf, itu mungkin akan mengatur string agen pengguna dengan cara yang Anda bisa ambil itu. </p></li>\n<li><p> Gunakan IPTables - Anda dapat membatasi jumlah maksimum koneksi per alamat IP dengan menggunakan modul connlimit. Lihat <a href=\"https://unix.stackexchange.com/questions/139285/limit-max-connections-per-ip-address-and-new-connections-per-second-with-iptable\" target=\"_blank\" rel=\"nofollow noopener\"> sini </a> untuk implementasi.\nSayangnya ini tidak akan berfungsi dengan baik jika Anda menggunakan cloudflare karena semua koneksi Anda akan berasal dari alamat IP yang sama. </p></li>\n</ol>","votes":"4","source":"https://superuser.com/a/1335470","author":"<a href=\"https://superuser.com/users/137786/davidgo\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">davidgo</span></a>","replies":[]},{"answer":"<p> Memblokir pengguna sah yang tanpa sengaja datang ke situs web Anda melalui proxy adalah cara yang pasti untuk kehilangan lalu lintas atau mendapatkan reputasi buruk.\nAnda sebaiknya menyerang proxy melalui providernya. </p>\n\n<p><a href=\"https://serverfault.com/a/905169/18736\" target=\"_blank\" rel=\"nofollow noopener\"> Sebuah jawaban </a> di StackOverflow menjelaskan secara rinci metode penggunaan di nginx\nkombinasi tajuk untuk melayani permintaan yang hanya ditujukan kepada Anda\nmelalui nama host yang benar.\nAnda dapat menyesuaikan solusi ini untuk mengetahui nama proxy\nyang digunakan dalam permintaan klien, dan menggunakan nama ini seperti yang dijelaskan di bawah. </p>\n\n<p> Nasihat yang baik diberikan oleh <a href=\"https://serverfault.com/a/905229/18736\" target=\"_blank\" rel=\"nofollow noopener\"> jawaban lainnya ini </a> : </p>\n\n<blockquote>\n  <p> Berikut sejumlah strategi yang mungkin ingin Anda pertimbangkan: </p>\n  \n  <p><strong> 1. Dari log server Anda, cari tahu cara proxy mengunduh situs Anda dan secara selektif mengubah tanggapan untuknya </strong><br> misalnya\n  jika dia menggunakan satu penyedia tertentu, blokir atau ubah tanggapan untuk\n  ruang alamat mereka </p>\n  \n  <p><strong> 2. Mungkin cukup sepenuhnya untuk hanya memberi tahu penyedia proxy secara informal </strong><br> pastikan untuk menghubungi departemen penyalahgunaan mereka\n  secara langsung, bukan staf penjualan. jika IP server mereka didaftarkan oleh\n  perusahaan yang berbeda dari pencatatan domain mereka, ambil jalan yang paling sedikit\n  resistensi - pertama-tama tanyakan penyedia yang berkantor pusat di negara yang lebih dekat\n  untuk milikmu. </p>\n  \n  <p><strong> 3. Bergantung pada TLD, akan ada banyak hal dari sepele hingga tidak mungkin untuk mengetahui operator situs dan / atau mendapatkan pengadilan\n  pesanan yang memaksa penyedia DNS untuk menghapusnya </strong></p>\n  \n  <p><strong> 4. Laporkan mereka ke <a href=\"https://safebrowsing.google.com/\" rel=\"nofollow noopener\" target=\"_blank\"> Penjelajahan Aman Google </a></strong><br> Gunakan opsi <a href=\"https://safebrowsing.google.com/safebrowsing/report_phish/\" rel=\"nofollow noopener\" target=\"_blank\"> <code>Report Phishing Page</code> </a> . Ini akan - jika Google kita berkuasa\n  putuskan demikian - buat peringatan besar bagi pengguna proxy DAN itu\n  akan menghapus situs dari hasil pencarian. Sebagian besar pengguna sebagian besar browser\n  menggunakan daftar blokir penjelajahan aman Google, jadi ini akan berpengaruh\n  tidak semua orang, tapi dekat. </p>\n</blockquote>","votes":"3","source":"https://superuser.com/a/1335481","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">harrymc</span></a>","replies":[]}]}
