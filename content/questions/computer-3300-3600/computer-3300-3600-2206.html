{"title":"Hentikan pekerjaan Cron untuk interval waktu tertentu","draft":false,"url":"/hentikan-pekerjaan-cron-untuk-interval-waktu-tertentu-fzulcp2t","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["cronjob"],"snippet":"Saya memiliki tugas cron yang berjalan setiap lima menit sepanjang hari.  Saya ingin menghentikan tugas cron ini yang berjalan pada hari Minggu antara pukul 16.00 dan 17.00 - ini harus dimulai lagi...","body":"<p> Saya memiliki tugas cron yang berjalan setiap lima menit sepanjang hari. </p>\n\n<p> Saya ingin menghentikan tugas cron ini yang berjalan pada hari Minggu antara pukul 16.00 dan 17.00 - ini harus dimulai lagi setelah waktu ini. </p>\n\n<p> Bagaimana saya bisa membuat skrip ini? </p>","source":"https://superuser.com/questions/307625/stop-cron-job-for-a-particular-time-interval","author":"<a href=\"https://superuser.com/users/89279/akd\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">akd</span></a>","replies":[],"answers":[{"answer":"<p> Tempelkan ini di bagian atas skrip pekerjaan cron Anda (dimodifikasi sesuai kebutuhan) ... </p> <pre><code>if [[ $(date +%u) -eq 7 &amp;&amp; $(date +%H) -eq 16 ]]; then\n  echo \"I don't run at this time\"\n  exit 1\nfi\necho \"Something to do at other times here...\"\n</code></pre> <p> Kemunculan pertama dari &quot;tanggal&quot; mengembalikan hari dalam seminggu (Minggu = 7), kemunculan kedua mengembalikan jam (16 = 4.00pm - 4.59pm). Jika skrip menemukan bahwa saat ini hari ke 7 dan jam 16, itu akan keluar. </p>","votes":"4","source":"https://superuser.com/a/307637","author":"<a href=\"https://superuser.com/users/49199/linker3000\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Linker3000</span></a>","replies":[{"reply":"Anda selanjutnya dapat memadatkan cek menjadi satu perintah tanggal jika Anda mau, jika [$ (date + &#39;% u:% H&#39;) = &quot;7:16&quot;];","author":"<a href=\"https://superuser.com/users/16039/darren-hall\" target=\"_blank\" rel=\"nofollow noopener\">Darren Hall</a>"}]},{"answer":"<p> Bagaimana dengan: </p> <pre><code>*/5 * * * * job.sh &gt; /dev/null\n\n00 16 * * 0 touch /tmp/stopJob.lck\n00 17 * * 0 rm -f /tmp/stopJob.lck\n</code></pre> <p> Pada <code>job.sh</code> hanya berhenti jika file tersebut ada: </p> <pre><code>if [ -f /tmp/stopJob.lck ] \nthen \n  exit\nfi\n</code></pre>","votes":"4","source":"https://superuser.com/a/307640","author":"<a href=\"https://superuser.com/users/89268/dasteph\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">DaSteph</span></a>","replies":[{"reply":"Hanya ada sedikit risiko bahwa jika perintah rm tidak dijalankan karena alasan tertentu (server dimulai ulang sebelum 1700, koreksi waktu ntp, dll.), Skrip utama akan dilewati selama seminggu. Demikian juga, jika sentuhan dilewati, skrip utama akan berjalan pada saat yang tidak semestinya","author":"<a href=\"https://superuser.com/users/49199/linker3000\" target=\"_blank\" rel=\"nofollow noopener\">Linker3000</a>"},{"reply":"Ya benar sekali. Untuk pendekatan Linker3000s ini lebih stabil. Solusi saya lebih menjelaskan sendiri dengan melihat di crontab.","author":"<a href=\"https://superuser.com/users/89268/dasteph\" target=\"_blank\" rel=\"nofollow noopener\">DaSteph</a>"}]},{"answer":"<p> Anda mungkin tidak memerlukan banyak jika tugas cron Anda menjalankan skrip dan Anda dapat memeriksanya <em> ketiadaan </em> dari proses yang diatur untuk berjalan antara pukul 16:00 dan 17:00 pada hari Minggu </p>\n\n<p> Misalnya, saya menggunakan tugas cron setiap 15 menit yang memanggil <code>rsync</code> tetapi <em> hanya jika <code>rsync</code> belum berjalan </em> . </p>\n\n<p> Ini menggunakan perintah <code>pidof</code> untuk memeriksa apakah id proses tertentu sedang berjalan: </p> <pre><code>PID=$(pidof rsync)\n\nif [ -z $PID ]\nthen \n    rsync -avz ....\nfi\n</code></pre> <p> Anda perlu memikirkan detail untuk situasi khusus Anda. Saya menyajikannya sekarang sebagai ide untuk dipikirkan. </p>","votes":"0","source":"https://superuser.com/a/307636","author":"<a href=\"https://superuser.com/users/9203/pavium\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">pavium</span></a>","replies":[]}]}
