{"title":"Hapus file duplikat, tetapi hanya jika ada di folder yang sama?","draft":false,"url":"/hapus-file-duplikat-tetapi-hanya-jika-ada-di-folder-yang-sama-muo9bewm","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["linux","windows","macos","file-management"],"snippet":"Saya telah membaca FAQ dan saya tahu ini hampir ditutup karena meminta rekomendasi produk ...  Saya telah melihat setidaknya 40 utilitas penghapus &quot;file duplikat&quot; (Windows, OSX dan Linux) dan tidak ada yang...","body":"<p> Saya telah membaca FAQ dan saya tahu ini hampir ditutup karena meminta rekomendasi produk ... </p>\n\n<p> Saya telah melihat setidaknya 40 utilitas penghapus &quot;file duplikat&quot; (Windows, OSX dan Linux) dan tidak ada yang memiliki fitur khusus yang saya cari. </p>\n\n<p> Saya perlu sekarang jika ada sesuatu di luar sana yang dapat melakukan ini atau jika saya harus menulis alat saya sendiri untuk itu. </p>\n\n<p> Hanya dengan jawaban &quot;Ya, itu ada&quot; akan baik-baik saja bagi saya. <br> Itu berarti saya tidak mencari cukup keras. </p>\n\n<p> Fitur yang saya butuhkan: Hapus file duplikat di seluruh struktur folder besar, tetapi HANYA jika file duplikat berada di folder yang SAMA. <br> Misalnya. Katakanlah saya memiliki file A, B dan C yang identik. A dan C berada di folder yang sama. B ada di folder lain. Baik A atau C perlu dihapus (tidak ada preferensi), tetapi B harus dibiarkan sendiri. </p>\n\n<p> Apakah ada sesuatu di luar sana yang bisa melakukan ini? <br> (Lebih disukai Windows, tapi OS-X atau Linux juga OK.) </p>","source":"https://superuser.com/questions/641485/remove-duplicate-files-but-only-if-they-are-in-same-folder","author":"<a href=\"https://superuser.com/users/83250/tonny\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Tonny</span></a>","replies":[{"reply":"Pertama-tama: temukan -type d untuk melintasi semua folder, gunakan itu untuk -exec pencarian baru dengan -maxdepth 1 dan -exec untuk bertindak pada semua file dalam direktori itu. Sepertinya sangat tidak efisien. APAKAH Anda memerlukan solusi sekali pakai atau perlu sering-sering menjalankannya? <a href=\"https://superuser.com/posts/641485/edit\" target=\"_blank\" rel=\"nofollow noopener\"> edit </a> Penemuan tunggal dengan md5hashes menyimpan semua dalam file dan kemudian bertindak pada file itu akan lebih efisien.).","author":"<a href=\"https://superuser.com/users/121352/hennes\" target=\"_blank\" rel=\"nofollow noopener\">Hennes</a>"},{"reply":"Pertanyaan ini tampaknya berada dalam cakupan pertanyaan yang diizinkan selama Anda tidak meminta perangkat lunak untuk melakukannya, hanya dengan beberapa cara.","author":"<a href=\"https://superuser.com/users/147220/jon\" target=\"_blank\" rel=\"nofollow noopener\">Jon</a>"},{"reply":"Saya berasumsi Anda ingin alat ini diotomatiskan dan dapat melakukan operasi batch?","author":"<a href=\"https://superuser.com/users/83283/ramhound\" target=\"_blank\" rel=\"nofollow noopener\">Ramhound</a>"},{"reply":"Saya mengatakan Python memiliki apa yang Anda butuhkan (terutama karena saya sedang mengerjakan alat serupa). Yang Anda inginkan adalah &quot;relatif&quot; mudah, dengan os, modul filecmp dan shutil. Bagian terbaik Python adalah portabel untuk sistem tersebut.","author":"<a href=\"https://superuser.com/users/228536/doktoro-reichard\" target=\"_blank\" rel=\"nofollow noopener\">Doktoro Reichard</a>"},{"reply":"@ Hennes, Ramhound Saya perlu menjalankan ini setiap 2 minggu pada 15000 folder dengan lebih dari 8 juta file (dan terus bertambah), mengharapkan sekitar 0,1% duplikat. Dan tabrakan hash MD5 (betapapun kecilnya) tidak dapat diterima, perlu perbandingan biner penuh. Untungnya sebagian besar file itu sendiri relatif kecil (80% &lt;1MB, 19% &lt;5 MB, 1% sekitar 100MB).","author":"<a href=\"https://superuser.com/users/83250/tonny\" target=\"_blank\" rel=\"nofollow noopener\">Tonny</a>"}],"answers":[{"answer":"<p> Anda dapat menggunakan <code>fdupes</code> tanpa <code>-r</code> sehingga tidak turun ke subdirektori. Ini mencetak daftar file duplikat: </p> <pre><code>find . -type d -exec fdupes -n {} \\;\n</code></pre> <p> <code>-n</code> mengabaikan file kosong. Tambahkan <code>-dN</code> (<pre><code>find . -type d -exec fdupes -n {} \\;\n</code></pre>) untuk menghapus semua kecuali file duplikat pertama. </p>\n\n<p> Anda dapat menginstal <code>fdupes</code> di OS X dengan <code>brew install fdupes</code>. </p>","votes":"4","source":"https://superuser.com/a/641538","author":"<a href=\"https://superuser.com/users/69039/lri\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Lri</span></a>","replies":[{"reply":"Jika saya mengerti, maka OP harus menjalankan perintah itu di semua subdirektori?","author":"<a href=\"https://superuser.com/users/228536/doktoro-reichard\" target=\"_blank\" rel=\"nofollow noopener\">Doktoro Reichard</a>"},{"reply":"Tidak, perintah tersebut menemukan semua direktori di bawah direktori saat ini secara rekursif dan kemudian menjalankan <code>fdupes</code> di dalamnya.","author":"<a href=\"https://superuser.com/users/69039/lri\" target=\"_blank\" rel=\"nofollow noopener\">Lri</a>"},{"reply":"Penjelasan yang sedikit lebih panjang. <code>find</code> mulai mencari di direktori saat ini (ditandai dengan <code>.</code>) dan akan menemukan semua file dan direktori. opsi <code>-type d</code> membatasi itu untuk semua direktori. Jadi, Anda tidak memiliki daftar semua direktori. Untuk masing-masing itu akan <code>exec</code> program <code>fdupes -n</code> dengan nama direktori yang ditambahkan (yaitu <code>{}</code>).","author":"<a href=\"https://superuser.com/users/121352/hennes\" target=\"_blank\" rel=\"nofollow noopener\">Hennes</a>"},{"reply":"Saya harus menginstal Homebrew terlebih dahulu, tetapi sekarang saya menggunakan -ndN. Berjalan selama satu jam sekarang. Sepertinya ini akan memakan waktu total sekitar 5 jam, yang tidak terlalu buruk. (Saya menjalankan jika dari MacPro melawan pangsa UKM di NAS NetApp. NAS memiliki 10G LAN dan Mac hanya 1G jadi saya tidak memenuhi NAS. (Bisa menggunakan server Linux tetapi itu juga pada 10G ... Pengguna lain tidak akan terlalu senang menurut saya.)","author":"<a href=\"https://superuser.com/users/83250/tonny\" target=\"_blank\" rel=\"nofollow noopener\">Tonny</a>"}]},{"answer":"<p> Seperti yang saya katakan, saya membuat skrip Python yang melakukan hal itu. </p>\n\n<p> Saya telah menyelenggarakannya di <a href=\"http://code.google.com/p/duplicate-deleter/source/browse/duplicate_deleter.py\" rel=\"nofollow noopener\" target=\"_blank\"> Google Code </a> dan saya telah membukanya sebagai GPL v3, jadi saya berasumsi siapa pun yang ingin meningkatkan program dapat melakukannya. </p>\n\n<p> Saya juga telah men-debugnya (membuat puluhan file di Windows, menghapus semua meninggalkan aslinya). Kode ini sangat dikomentari untuk memberi tahu siapa pun tentang apa yang sebenarnya dilakukan kode itu. </p>\n\n<p> Saya telah menjalankannya di Python 3.3 tetapi saya menganggap itu harus bekerja dengan Python 2 terbaru. </p>\n\n<p> Oh, dan bagian terbaiknya, ini harus berfungsi pada semua OS yang didukung Python (Windows, OSX, Linux, ...) </p>","votes":"5","source":"https://superuser.com/a/641514","author":"<a href=\"https://superuser.com/users/228536/doktoro-reichard\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Doktoro Reichard</span></a>","replies":[{"reply":"Secara pribadi saya tidak begitu familiar dengan Python (saya seorang C / C ++) tapi saya pasti akan memeriksanya.","author":"<a href=\"https://superuser.com/users/83250/tonny\" target=\"_blank\" rel=\"nofollow noopener\">Tonny</a>"},{"reply":"Saya terlalu C / C ++, tapi Python memiliki kebijakan &quot;termasuk baterai&quot; yang cukup menarik. Jika Anda terbiasa dengan C ++, maka sintaksnya sedikit berbeda tetapi perlu diperhatikan.","author":"<a href=\"https://superuser.com/users/228536/doktoro-reichard\" target=\"_blank\" rel=\"nofollow noopener\">Doktoro Reichard</a>"},{"reply":"Saya baru saja membaca komentar Anda tentang perbandingan biner lengkap dan memperbarui kodenya.","author":"<a href=\"https://superuser.com/users/228536/doktoro-reichard\" target=\"_blank\" rel=\"nofollow noopener\">Doktoro Reichard</a>"},{"reply":"Meskipun saya sudah menggunakan metode fdupes yang disebutkan di atas, saya pasti akan memeriksa program Python Anda. Saya ingin menjadi lebih akrab dengan Python dan saya selalu merasa lebih mudah untuk mempelajarinya jika saya memiliki beberapa program sampel dunia nyata untuk dipelajari. Sampel dalam buku sering kali dibuat-buat dan program besar biasanya terlalu rumit. Ini harus dapat dikelola dalam ukuran dan masih menangani masalah dunia nyata.","author":"<a href=\"https://superuser.com/users/83250/tonny\" target=\"_blank\" rel=\"nofollow noopener\">Tonny</a>"}]},{"answer":"<p> Ini adalah pendekatan yang lambat tapi pasti dan sangat sederhana yang seharusnya berjalan di OSX dan Linux. Saya berasumsi bahwa Anda tertarik dengan file duplikat yang berada di <code>$HOME</code> Anda tetapi Anda dapat mengubahnya sesuai kebutuhan Anda. </p>\n\n<p> Idenya adalah untuk pertama-tama menemukan daftar semua direktori, kemudian membandingkan file di dalamnya dan menghapus semua yang identik. Seperti yang saya katakan, ini sangat sederhana sehingga hanya akan menyimpan yang pertama dari semua pasangan file dan menghapus sisanya tanpa peringatan. </p>\n\n<p> Ini akan mencetak dupes tapi <strong> tidak akan membuat perubahan apa pun </strong> ke file Anda: </p> <pre><code>find $HOME  -mindepth 1 -type d | while read dir; do \n  find $dir -type -f -exec md5sum {} \\; | sort &gt; md5sums;\n  gawk '{print $1}' md5sums | sort | uniq -d &gt; dupes;\n  while read d; do \n    echo \"---\"; grep -w $d md5sums | cut -d ' ' -f 2-;\n  done &lt; dupes\ndone; rm dupes md5sum \n</code></pre> <p> Yang ini akan <strong> hapus file duplikat secara diam-diam, jalankan hanya jika Anda yakin tidak apa-apa </strong> : </p> <pre><code>find $HOME  -mindepth 1 -type d | \nwhile read dir; do \n  find $dir -type -f -exec md5sum {} \\; | sort &gt; md5sums;\n  gawk '{print $1}' md5sums | sort | uniq -d |\n  while read d; do grep -w $d md5sums | cut -d ' ' -f 2- | tail -n +2; done |\n  | xargs rm ; \ndone; rm dupes md5sum \n</code></pre> <p> PERHATIAN: Ini lambat, sebenarnya LAMBAT, tidak akan memberi peringatan dan akan menghapus file secara diam-diam. Sisi baiknya, itu hanya akan dilakukan jika file-file itu berada di direktori yang sama yang Anda inginkan. </p>","votes":"1","source":"https://superuser.com/a/641506","author":"<a href=\"https://superuser.com/users/151431/terdon\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">terdon</span></a>","replies":[]}]}
