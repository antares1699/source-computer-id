{"title":"pesta. memindahkan file kecuali file dengan sufiks tertentu","draft":false,"url":"/pesta-memindahkan-file-kecuali-file-dengan-sufiks-tertentu-wnyitfgp","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["unix","bash"],"snippet":"Apakah ada cara dalam bash to glob file yang tidak diakhiri dengan sufiks tertentu?  misalnya Saya sedang melakukan ini:  mv $ INCDIR / HDR_10_ * $ BACKUPDIR  Tapi saya tidak ingin memindahkan...","body":"<p> Apakah ada cara dalam bash to glob file yang tidak diakhiri dengan sufiks tertentu? </p>\n\n<p> misalnya Saya sedang melakukan ini: </p>\n\n<p> mv $ INCDIR / HDR_10_ * $ BACKUPDIR </p>\n\n<p> Tapi saya tidak ingin memindahkan HDR_10_ * yang diakhiri dengan .gz </p>","source":"https://superuser.com/questions/210168/bash-moving-files-except-files-with-a-given-suffix","author":"<a href=\"https://superuser.com/users/4595/nos\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">nos</span></a>","replies":[],"answers":[{"answer":"<p> Ini akan berfungsi untuk pemindahan file: </p> <pre><code>mv $( echo $INCDIR/HDR_10_* | grep -v '\\.gz$') $BACKUPDIR\n</code></pre> <p> Anda juga bertanya &#39;untuk menggabungkan file yang tidak diakhiri dengan sufiks tertentu?&#39;\nBash memiliki opsi shell (shopt) extglob, yang memungkinkan sintaks globbing diperpanjang. <code>!(...glob...)</code> cocok dengan semuanya <strong> tapi </strong> pola glob. </p> <pre><code>shopt -s extglob\ncd $INCDIR\nmv !(*.gz) $BACKUPDIR\n</code></pre> <p> akan berhasil <strong> hanya </strong> jika $ INCDIR hanya berisi file bernama HDR_10_ *, secara khusus itu akan cocok dengan file atau direktori di $ INCDIR yang tidak cocok dengan * .gz. Secara teknis Anda meminta bola yang cocok dengan satu pola tetapi tidak yang lain, yang menurut saya tidak ada sebagai entitas tunggal yang sederhana. </p>","votes":"4","source":"https://superuser.com/a/210172","author":"<a href=\"https://superuser.com/users/8804/rich-homolka\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Rich Homolka</span></a>","replies":[{"reply":"Perintah pertama Anda tidak akan berfungsi, karena perintah <code>echo</code> menempatkan semua nama dalam satu baris.","author":"<a href=\"https://superuser.com/users/42315/gilles-so-stop-being-evil\" target=\"_blank\" rel=\"nofollow noopener\">Gilles &#x27;SO- stop being evil&#x27;</a>"},{"reply":"P.S. Dan jika Anda mencoba memperbaikinya, Anda akan mengalami masalah jika nama file berisi karakter khusus seperti whitespace atau karakter globbing.","author":"<a href=\"https://superuser.com/users/42315/gilles-so-stop-being-evil\" target=\"_blank\" rel=\"nofollow noopener\">Gilles &#x27;SO- stop being evil&#x27;</a>"},{"reply":"Karena polanya (yang akan disertakan dan yang dikecualikan) tidak tumpang tindih, sebenarnya mudah untuk menggabungkannya: <code>mv $INCDIR&#47;HDR_10_!(*.gz) $BACKUPDIR</code>.","author":"<a href=\"https://superuser.com/users/7778/gordon-davisson\" target=\"_blank\" rel=\"nofollow noopener\">Gordon Davisson</a>"}]},{"answer":"<p> Di bawah ksh, <code>!(*.gz)</code> cocok dengan semua file di direktori saat ini kecuali file yang cocok dengan <code>*.gz</code>. Pola yang sama bekerja di bash setelah <code>shopt -s extglob</code>, dan di zsh setelah <code>setopt ksh_glob</code>. Baik ksh maupun bash tidak memiliki cara untuk mengambil titik potong dari kecocokan positif dan pertandingan negatif. Dalam zsh, setelah <code>setopt extended_glob</code>, Anda dapat menulis <code>$INCDIR/HDR_10_*~$INCDIR/*.gz</code>. </p>\n\n<p> Satu solusi, dalam shell gaya Bourne (ash, bash, ksh, zsh, ...), adalah melakukan iterasi pada file dan memeriksa setiap kecocokan. </p> <pre><code>for x in \"$INCDIR\"/HDR_10_*; do\n  case \"$x\" in\n    *.gz) :;;\n    *) mv -- \"$x\" \"$BACKUPDIR\";;\n  esac\ndone\n</code></pre> <p> Solusi lain adalah dengan menggunakan <code>find</code>. Perintah berikut akan memindahkan file dalam subdirektori juga. </p> <pre><code>find \"$INCDIR\" -type f -name 'HDR_10_*' \\! -name '*.gz' -exec mv {} \"$BACKUPDIR\" \\;\n</code></pre> <p> Jika Anda memiliki GNU find (mis. Di Linux), Anda dapat menambahkan <code>-maxdepth 1</code> setelah <code>\"$INCDIR\"</code> untuk memindahkan file hanya secara langsung di <code>$INCDIR</code>. </p>\n\n<p> Catat itu <strong> Anda harus selalu menggunakan tanda kutip ganda di sekitar substitusi variabel (misalnya <code>\"$INCDIR\"</code>, bukan <code>$INCDIR</code>) </strong> kecuali jika Anda memiliki alasan kuat untuk menghilangkannya. Jika tidak, Anda akan mengalami masalah jika Anda memiliki file yang namanya mengandung karakter khusus seperti spasi atau <code>\\[?*</code>. </p>","votes":"1","source":"https://superuser.com/a/210180","author":"<a href=\"https://superuser.com/users/42315/gilles-so-stop-being-evil\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Gilles &#39;SO- stop being evil&#39;</span></a>","replies":[]},{"answer":"<p> Jika Anda menggunakan <code>find</code>, <code>grep</code>, dan <code>xargs</code>, Anda dapat melakukannya dengan cukup mudah. </p>\n\n<p> Saya yakin ada konstruksi yang lebih baik, tetapi ini yang langsung terlintas di benak saya: </p> <pre><code># find &lt;here&gt;| &lt;pattern&gt;    | &lt;notpattern&gt;| &lt;what to do&gt;\nfind $INCDIR | grep HDR_10_ | grep -v .gz | xargs mv $BACKUPDIR\n</code></pre> <p> Koreksi ditunjukkan dalam komentar bahwa tusukan cepat di atas tidak akan berfungsi karena <code>mv</code> tidak mendapatkan argumennya dalam urutan yang benar dari <code>xargs</code>: </p> <pre><code>find $INCDIR -name 'HDR_10_*' ! -name '*.gz' -exec mv {} $BACKUPDIR \\\n</code></pre>","votes":"1","source":"https://superuser.com/a/210170","author":"<a href=\"https://superuser.com/users/978/warren\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">warren</span></a>","replies":[{"reply":"Anda tidak dapat menggunakan <code>xargs</code> di sini - <code>xargs</code> menambahkan parameter di akhir, yang Anda perlukan setelah <code>mv</code>. Ingatlah bahwa <code>find</code> memungkinkan pola positif dan negatif juga. Mungkin sesuatu seperti: <code>find $INCDIR -name &#39;HDR_10_*&#39; ! -name &#39;*.gz&#39; -exec mv {} $BACKUPDIR \\;</code>","author":"<a href=\"https://superuser.com/users/8804/rich-homolka\" target=\"_blank\" rel=\"nofollow noopener\">Rich Homolka</a>"},{"reply":"Perintah Anda memiliki banyak bug. Di luar apa yang sudah dikatakan Rich tentang <code>xargs</code>, pola <code>grep</code> cocok di mana saja pada garis, sehingga mereka akan menyertakan atau mengecualikan hal-hal yang tidak seharusnya (misalnya <code>HDR_10_agz.txt</code> akan dikecualikan sementara <code>NOT_HDR_10_blah</code> akan dimasukkan). Dimungkinkan untuk menggunakan <code>grep</code> di sini, tetapi jauh lebih mudah menggunakan <code>-name</code> dengan <code>find</code> sesuai komentar Rich. Juga perintah Anda akan menyertakan file dalam subdirektori, yang tidak sesuai dengan spesifikasi aslinya. Lalu ada masalah umum dengan <code>xargs</code> yang membutuhkan keluaran yang dikutip dengan cara yang tidak dapat dihasilkan oleh <code>find</code>.","author":"<a href=\"https://superuser.com/users/42315/gilles-so-stop-being-evil\" target=\"_blank\" rel=\"nofollow noopener\">Gilles &#x27;SO- stop being evil&#x27;</a>"},{"reply":"@ Gilles - ya, perilaku seperti yang saat ini ditulis akan mencari di mana saja di baris: itu bukan &quot;bug&quot; dalam pikiran saya, tetapi tempat awal yang dapat diperbaiki berdasarkan penggunaan tertentu. Tidak tahu tentang masalah <code>xargs</code> sampai @Rich Homolka mengatakan sesuatu :)","author":"<a href=\"https://superuser.com/users/978/warren\" target=\"_blank\" rel=\"nofollow noopener\">warren</a>"},{"reply":"Karena masalah dengan penggunaan <code>xargs</code> itulah (setidaknya GNU) <code>mv</code> memiliki <code>--target-directory=DIRECTORY</code> dan <code>find</code> dan <code>xargs</code> dapat menggunakan pembatas nol. Jadi Anda dapat melakukan <code>xargs ... -print0 | xargs -0 --target-directory=&quot;$BACKUPDIR&quot;</code> dan hanya mendapatkan satu salinan dari <code>mv</code> yang muncul (dengan tidak menggunakan <code>-I</code> dengan <code>xargs</code>).","author":"<a href=\"https://superuser.com/users/310/dennis-williamson\" target=\"_blank\" rel=\"nofollow noopener\">Dennis Williamson</a>"}]}]}
