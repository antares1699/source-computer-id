{"title":"Jadikan install menjadi direktori sementara?","draft":false,"url":"/jadikan-install-menjadi-direktori-sementara-5zyg3wds","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","make"],"snippet":"Saya ingin melakukan hal berikut:  Buat dari proyek open source untuk dikompilasi / ditautkan ke perpustakaan dll. Namun, saya tidak ingin benar-benar menjalankan ini secara lokal. Saya ingin memaketkannya menjadi rpm sehingga...","body":"<p> Saya ingin melakukan hal berikut: </p>\n\n<p> Buat dari proyek open source untuk dikompilasi / ditautkan ke perpustakaan dll. Namun, saya tidak ingin benar-benar menjalankan ini secara lokal. Saya ingin memaketkannya menjadi rpm sehingga dapat diinstal ke direktori yang benar di komputer lain (yang tentu saja memiliki arsitektur serupa). Saya ingin itu mengkompilasi dan menautkan dan membuat tautan simbolik seolah-olah akan dipasang di bawah / usr / local, tetapi saya sebenarnya tidak ingin ini pergi ke direktori di bawah / usr / local / tetapi ke beberapa direktori sementara yang bisa dihapus tanpa menghapus file yang ditempatkan di sana oleh paket lain. </p>\n\n<p> Apakah ada beberapa parameter untuk membuat instalasi yang akan membiarkan hal ini terjadi - yang dibangun seolah-olah akan diinstal di bawah <code>/usr/local</code> tetapi sebenarnya menempatkan &quot;instalasi&quot; di bawah <code>~/tmp/usr/local</code>, misalnya. </p>\n\n<p> Saya telah melihat ke dalam TIDAK menjalankan make install tetapi berhenti di make, tetapi ini mencampurkan executable, kode objek, dan perpustakaan di direktori sumber. </p>","source":"https://superuser.com/questions/1127319/make-install-into-a-temporary-directory","author":"<a href=\"https://superuser.com/users/348831/steve-cohen\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Steve Cohen</span></a>","replies":[{"reply":"Akan membantu jika Anda mengatakannya <i> yang </i> proyek open source, jadi kita dapat melihat cara kerjanya untuk yang satu ini (autoconf, cmake, plain makefile, apa saja). Karena seperti yang sudah dikatakan, itu tergantung. Secara umum, biasanya dapat dilakukan (dan saya selalu melakukannya seperti itu, karena saya menggunakan <code>stow</code> untuk mengelola <code>&#47;usr&#47;local</code> saya).","author":"<a href=\"https://superuser.com/users/327880/dirkt\" target=\"_blank\" rel=\"nofollow noopener\">dirkt</a>"}],"answers":[{"answer":"<p> Jawaban atas pertanyaan ini bergantung pada proyek sumber terbuka mana yang Anda coba pasang dengan cara ini. Jawaban umumnya adalah bahwa beberapa proyek open source memiliki Makefiles yang menyediakan variabel opsional untuk tujuan ini. Salah satu contoh spesifiknya adalah gdb, yang Makefile tingkat atasnya menggunakan (tetapi tampaknya tidak menetapkan) variabel <code>DESTDIR</code>, dan jika saya menjalankan perintah ini di direktori build gdb, </p> <pre><code>make DESTDIR=/tmp install\n</code></pre> <p> itu menambahkan <code>/tmp</code> ke setiap jalur tujuan sebelum menyalin file. </p>\n\n<p> Pendekatan lain yang lebih sulit adalah melakukan keseluruhan build, install, dan semuanya, di lingkungan chroot. Menggunakan sesuatu seperti <a href=\"https://en.wikipedia.org/wiki/OverlayFS\" rel=\"nofollow noopener\" target=\"_blank\"> OverlayFS </a> dapat membuatnya lebih mudah, tetapi ini biasanya bukan jalur dengan hambatan yang paling sedikit. </p>\n\n<p> Kemungkinan lain, yang mungkin lebih mudah jika Anda sudah menggunakan ragam Debian (yang mencakup Ubuntu di antara banyak lainnya), adalah mengambil paket sumber Debian yang sesuai dengan proyek sumber terbuka (pendekatan ini sepertinya tidak mudah jika tidak ada paket sumber tersebut) dan ikuti petunjuk untuk membuat paket Debian dari sumber itu. Jika Anda benar-benar membutuhkan <code>.rpm</code> daripada <code>.deb</code>, Anda dapat mengubah <code>.deb</code> menjadi <code>.rpm</code>, atau mungkin Anda dapat membuat <code>.rpm</code> dari struktur direktori yang ditinggalkan dalam proses membangun <code>.deb</code>. <a href=\"https://askubuntu.com/a/28373/435695\" target=\"_blank\" rel=\"nofollow noopener\"> Jawaban ini </a> adalah salah satu sumber informasi tentang membangun paket Debian dari sumbernya. </p>\n\n<p> Untuk <code>openssl</code> terbaru (disebutkan dalam komentar tetapi belum disebutkan dalam pertanyaan) file <a href=\"https://github.com/openssl/openssl/blob/master/INSTALL\" rel=\"nofollow noopener\" target=\"_blank\"> INSTALL </a> file mengatakan ini: </p> <pre><code> Package builders who want to configure the library for standard\n locations, but have the package installed somewhere else so that\n it can easily be packaged, can use\n\n   $ make DESTDIR=/tmp/package-root install         # Unix\n   $ mms/macro=\"DESTDIR=TMP:[PACKAGE-ROOT]\" install ! OpenVMS\n\n The specified destination directory will be prepended to all\n installation target paths.\n</code></pre> <p> Itu bervariasi di berbagai versi <code>openssl</code>; untuk 1.0.2 <a href=\"https://github.com/openssl/openssl/blob/OpenSSL_1_0_2-stable/INSTALL\" rel=\"nofollow noopener\" target=\"_blank\"> INSTALL </a> mengatakan ini: </p> <pre><code> Package builders who want to configure the library for standard\n locations, but have the package installed somewhere else so that\n it can easily be packaged, can use\n\n   $ make INSTALL_PREFIX=/tmp/package-root install\n\n (or specify \"--install_prefix=/tmp/package-root\" as a configure\n option).  The specified prefix will be prepended to all\n installation target filenames.\n</code></pre> <p> Idenya hampir sama, dengan detail yang sedikit berbeda. </p>","votes":"6","source":"https://superuser.com/a/1127353","author":"<a href=\"https://superuser.com/users/537463/eirik-fuller\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Eirik Fuller</span></a>","replies":[{"reply":"Terima kasih, Eirik, setelah saya melihat ini lagi, saya menyadari poin yang Anda coba buat - semuanya tergantung bagaimana skrip makefile dan konfigurasi ditulis. Proyek open source yang saya coba lakukan ini adalah OpenSSL. Praktik kita adalah membangun ini sebagai rpm, menjalankan skrip yang disediakan dari suatu tempat (?) Yang mengkonfigurasi, membuat, dan membuat instalasi. Apa yang saya pikir akan saya coba selanjutnya adalah: jalankan skrip melalui make install. buat rpm, lalu hapus instalan. Seharusnya ada opsi lain, untuk membangun ke direktori yang berbeda. Kemudian Anda bisa melewati make install. Tapi itu tidak berhasil","author":"<a href=\"https://superuser.com/users/348831/steve-cohen\" target=\"_blank\" rel=\"nofollow noopener\">Steve Cohen</a>"},{"reply":"Terima kasih sekali lagi, Eirik - Anda adalah pembaca dokumen INSTALL yang lebih teliti daripada saya. INSTALL_PREFIX adalah jawabannya. Sayang sekali mereka merasa perlu mengubahnya menjadi DESTDIR di versi yang lebih baru.","author":"<a href=\"https://superuser.com/users/348831/steve-cohen\" target=\"_blank\" rel=\"nofollow noopener\">Steve Cohen</a>"},{"reply":"Saya menemukan <code>INSTALL_PREFIX</code> sebelum saya menemukan <code>DESTDIR</code>, dan saya awalnya menemukannya di Makefile (dari sumber Debian), bukan dari dokumentasinya. Saya mencari sumber github karena saya ingin memastikan Debian tidak menambahkan <code>INSTALL_PREFIX</code>, di mana saya melihat perubahan namanya. Pendekatan Debian menghilangkan (atau, mungkin, menyembunyikan) variasi tersebut untuk setiap paket sumber yang disediakan oleh distribusi, dengan menyediakan cara yang seragam untuk membangun paket dari sumber.","author":"<a href=\"https://superuser.com/users/537463/eirik-fuller\" target=\"_blank\" rel=\"nofollow noopener\">Eirik Fuller</a>"},{"reply":"Pelajari sesuatu tentang <code>make</code>? Tidak setiap hari, tapi hari-hari indah.","author":"<a href=\"https://superuser.com/users/519836/wogsland\" target=\"_blank\" rel=\"nofollow noopener\">wogsland</a>"}]}]}
