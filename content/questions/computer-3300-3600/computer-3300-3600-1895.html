{"title":"TTL saat menanyakan data apa pun dengan dig","draft":false,"url":"/ttl-saat-menanyakan-data-apa-pun-dengan-dig-u28jfawk","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["dns","nameserver","dig"],"snippet":"Pertanyaan ini berasal dari  topik ini  . Ketika saya melakukan ini, saya mendapatkan detik yang tersisa hingga rekam A kedaluwarsa di server nama yang ditanyakan:  dig stackexchange.com  Namun, jika saya melakukan ini,...","body":"<p> Pertanyaan ini berasal dari <a href=\"https://serverfault.com/questions/662596/ttl-and-google-dns/662601#comment810670_662601\" target=\"_blank\" rel=\"nofollow noopener\"> topik ini </a> . Ketika saya melakukan ini, saya mendapatkan detik yang tersisa hingga rekam A kedaluwarsa di server nama yang ditanyakan: </p> <pre><code>dig stackexchange.com\n</code></pre> <p> Namun, jika saya melakukan ini, saya mendapatkan nilai TTL otoratif: </p> <pre><code>dig any stackexchange.com \n</code></pre> <p> Jadi, saya tidak mengerti mengapa ketika saya melakukannya <code>dig any stackexchange.com</code> saya mendapatkan semua nilai TTL seolah-olah saya membuat pertanyaan resmi, padahal saya benar-benar membuat kueri rekursif. </p>","source":"https://superuser.com/questions/873385/ttl-when-querying-for-any-record-with-dig","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">whitenoisedb</span></a>","replies":[{"reply":"@Kannan Mohan, sekarang ada pertanyaan baru.","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\">whitenoisedb</a>"}],"answers":[{"answer":"<p> Singkatnya, Kedua kueri yang Anda sebutkan dalam pertanyaan tersebut adalah kueri non-otoritatif. </p>\n\n<p> Catatan DNS untuk domain dapat ditanyai dari server DNS caching atau dari server DNS otoritatif. Jadi, ketika Anda ingin menanyakan server DNS caching, Anda dapat menentukan alamat IP DNS atau jika tidak ditentukan, server DNS default yang telah dikonfigurasi pada <code>/etc/resolv.conf</code> akan digunakan. </p>\n\n<p><strong><em> Kueri non otoritatif </em></strong> </p> <pre><code>$ dig stackexchange.com\n</code></pre> <p> atau </p> <pre><code>$ dig stackexchange.com @8.8.8.8\n</code></pre> <p> Dalam kedua kasus di atas, kueri mengembalikan balasan non-otoritatif karena DNS ISP Anda atau DNS publik Google (8.8.8.8) tidak berwibawa untuk domain <code>stackexchange.com</code>. Saat Anda menanyakan server nama non-otoritatif, nilai TTL yang diberikannya akan berkurang setiap kali Anda menanyakannya. Setelah nilai TTL kedaluwarsa, server nama cache akan meminta server DNS otoritatif. </p>\n\n<p><strong><em> Kueri otoritatif </em></strong> </p>\n\n<p> Jadi untuk mendapatkan balasan otoritatif Anda perlu menanyakan catatan dari server DNS otoritatif dan yang dapat ditemukan dengan metode di bawah ini. </p> <pre><code>$ dig ns stackexchange.com\n       ...\n;; ANSWER SECTION:\nstackexchange.com.  84894   IN  NS  cf-dns02.stackexchange.com.\nstackexchange.com.  84894   IN  NS  cf-dns01.stackexchange.com.\n       ...\n</code></pre> <p> Itu <em> BAGIAN JAWABAN </em> menyediakan server nama otoritatif untuk domain <code>stackexchange.com</code> dan jadi jika kita perlu mendapatkan balasan otoritatif maka </p> <pre><code>$ dig stackexchange.com @cf-dns01.stackexchange.com.\n</code></pre> <p> Sementara kami menanyakan server DNS otoritatif, nilai TTL tidak akan berubah karena Nameserver ini adalah sumber utama informasi dan mereka tidak kedaluwarsa hingga administratornya mengubahnya. </p>\n\n<p><strong><em> Bagaimana catatan APAPUN bekerja </em></strong></p>\n\n<p> Catatan APAPUN seperti kartu liar, Anda dapat menggunakannya untuk mendapatkan semua catatan yang di-cache / disimpan di server DNS. Misalnya saya telah menanyakan <code>stackexchange.com</code> untuk catatan APAPUN dan server DNS default saya menjawab seperti di bawah ini. </p> <pre><code>$ dig any stackexchange.com\n    ....\n;; ANSWER SECTION:\nstackexchange.com.  86350   IN  SOA cf-dns01.stackexchange.com. dns.cloudflare.com. 2017456480 10000 2400 604800 3600\nstackexchange.com.  176 IN  A   198.252.206.140\nstackexchange.com.  84338   IN  NS  cf-dns01.stackexchange.com.\nstackexchange.com.  84338   IN  NS  cf-dns02.stackexchange.com.\n    ....\n</code></pre> <p> Di sini Anda dapat melihat bahwa balasan hanya berisi informasi tentang catatan <code>SOA</code>, <code>A</code> dan <code>NS</code>. Tetapi sebenarnya ada lebih banyak catatan untuk <code>stackexchange.com</code> yang tidak di-cache di server DNS default saya karena saya belum menanyakannya. </p>\n\n<p> Sekarang saya meminta catatan <code>MX</code> ke server DNS default saya dan jawabannya adalah sebagai </p> <pre><code>$ dig MX stackexchange.com\n    ....\n;; ANSWER SECTION:\nstackexchange.com.  300 IN  MX  10 aspmx3.googlemail.com.\nstackexchange.com.  300 IN  MX  5 alt2.aspmx.l.google.com.\nstackexchange.com.  300 IN  MX  5 alt1.aspmx.l.google.com.\nstackexchange.com.  300 IN  MX  10 aspmx2.googlemail.com.\nstackexchange.com.  300 IN  MX  1 aspmx.l.google.com.\n    ....\n</code></pre> <p> Sekarang saya meminta lagi catatan <code>ANY</code> dan sekarang Anda dapat melihat bahwa kueri untuk <code>ANY</code> telah mengembalikan <code>MX</code> catatan juga. Jadi <code>ANY</code> record hanya akan menyediakan record yang hanya di-cache di nameserver default Anda. </p> <pre><code>$ dig any stackexchange.com\n     ....\n;; ANSWER SECTION:\nstackexchange.com.  298 IN  MX  5 alt1.aspmx.l.google.com.\nstackexchange.com.  298 IN  MX  10 aspmx2.googlemail.com.\nstackexchange.com.  86084   IN  NS  cf-dns01.stackexchange.com.\nstackexchange.com.  298 IN  MX  10 aspmx3.googlemail.com.\nstackexchange.com.  298 IN  MX  1 aspmx.l.google.com.\nstackexchange.com.  298 IN  MX  5 alt2.aspmx.l.google.com.\nstackexchange.com.  86084   IN  NS  cf-dns02.stackexchange.com.\nstackexchange.com.  243 IN  A   198.252.206.140\nstackexchange.com.  86343   IN  SOA cf-dns01.stackexchange.com. dns.cloudflare.com. 2017456480 10000 2400 604800 3600\n     ....\n</code></pre> <p> Dan seperti yang Anda lihat, nilai TTL berubah untuk balasan non-otoritatif. </p>","votes":"7","source":"https://superuser.com/a/873408","author":"<a href=\"https://superuser.com/users/153396/kannan-mohan\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Kannan Mohan</span></a>","replies":[]},{"answer":"<p> Anda tidak memahami bidang TTL pada kueri DNS. TTL adalah indikator untuk klien berapa lama hasil harus disimpan dalam cache sebelum meminta ulang nameserver lagi. Kecuali Anda memperbarui server DNS Anda dengan nilai yang berbeda untuk TTL, responsnya akan selalu sama. Praktik yang sangat buruk untuk menanyakan ulang nameserver setiap kali Anda perlu menyelesaikan nama host ke IP. </p>","votes":"1","source":"https://superuser.com/a/873386","author":"<a href=\"https://superuser.com/users/73850/thecompwiz\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">TheCompWiz</span></a>","replies":[{"reply":"Saya mengerti bahwa hanya ketika menanyakan server otoratif maka TTL menunjukkan berapa lama harus menyimpan hasil. Namun, saat melakukan kueri rekursif, Anda mendapatkan waktu tersisa yang sebenarnya di server DNS tersebut sebelum dimulai ulang.","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\">whitenoisedb</a>"},{"reply":"Jadi mengapa saat melakukan <code>dig somedomain.com</code> saya mendapatkan, misalnya, 1645? yang sebenarnya bukan TTL. Jika saya melakukan pertanyaan otoratif untuk itu, saya mendapatkan nilai TTL yang benar 14400.","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\">whitenoisedb</a>"},{"reply":"Maukah Anda menentukan perintah sebenarnya yang Anda gunakan? Saya menduga bahwa beberapa parameter beralih ke kueri berulang daripada mengizinkan kueri rekursif. (+ norec + nssearch atau + trace?)","author":"<a href=\"https://superuser.com/users/73850/thecompwiz\" target=\"_blank\" rel=\"nofollow noopener\">TheCompWiz</a>"},{"reply":"Katakanlah misalnya saya baru melakukan <code>dig stackexchange.com</code> dan TTL adalah 15. Kemudian jika saya melakukan <code>dig +norecurse stackexchange.com @cf-dns01.stackexchange.com</code> saya mendapatkan nilai TTL 300.","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\">whitenoisedb</a>"},{"reply":"Benar. + norecurse memaksa kueri terhadap server otoritatif secara langsung. + norecurse menurut definisi melakukan kueri berulang.","author":"<a href=\"https://superuser.com/users/73850/thecompwiz\" target=\"_blank\" rel=\"nofollow noopener\">TheCompWiz</a>"},{"reply":"Jadi mengapa saat melakukan penggalian <code>dig any stackexchange</code> saya mendapatkan semua nilai TTL seolah-olah saya melakukan kueri berulang? Itu pertanyaan pertamaku.","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\">whitenoisedb</a>"},{"reply":"<code>dig any stackexchange</code> akan mencoba mencari <code>any</code> dari tipe <code>stackexchange</code>. (yang mungkin Anda miliki mundur) Jadi, untuk kedua kalinya, apa adanya <i> TEPAT </i> kueri yang Anda lakukan dan apa yang tidak terduga?","author":"<a href=\"https://superuser.com/users/73850/thecompwiz\" target=\"_blank\" rel=\"nofollow noopener\">TheCompWiz</a>"},{"reply":"Saya tidak mengerti mengapa ketika saya melakukan <code>dig any stackexchange</code> saya mendapatkan semua nilai TTL seolah-olah saya melakukan kueri berulang, padahal saya benar-benar membuat kueri rekursif!","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\">whitenoisedb</a>"},{"reply":"Pertama, saya tidak tahu mengapa Anda mendapatkan respons cerdas dari <code>dig any stackexchange</code>, karena parameter Anda mundur. Tidak ada yang namanya tipe record <code>stackexchange</code>. Jika ada, Anda mungkin mendapatkan data acak yang tidak di-cache karena Anda meminta tipe rekaman yang tidak bisa di-cache ... atau kueri Anda tidak dibuat seperti yang Anda inginkan.","author":"<a href=\"https://superuser.com/users/73850/thecompwiz\" target=\"_blank\" rel=\"nofollow noopener\">TheCompWiz</a>"},{"reply":"Ya ampun, saya kehilangan <code>.com</code>!","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\">whitenoisedb</a>"},{"reply":"Sintaks untuk dig adalah <code>dig</code> <code>name</code> <code>type</code>. Tidak ada tipe rekaman <code>stackexchange.com</code>. pernah.","author":"<a href=\"https://superuser.com/users/73850/thecompwiz\" target=\"_blank\" rel=\"nofollow noopener\">TheCompWiz</a>"},{"reply":"<code>dig</code> memahaminya dengan dua cara. <code>dig</code> <code>name</code> <code>type</code> dan <code>dig</code> <code>type</code> <code>name</code>","author":"<a href=\"https://superuser.com/users/268828/whitenoisedb\" target=\"_blank\" rel=\"nofollow noopener\">whitenoisedb</a>"}]}]}
