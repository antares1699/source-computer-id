{"title":"Bagaimana tar.gz semuanya di bawah xx MB?","draft":false,"url":"/bagaimana-targz-semuanya-di-bawah-xx-mb-1hwezzrc","votes":"4","answers_count":"5","categories":["Komputer"],"tags":["unix","shell"],"snippet":"Saya sedang menggunakan ini:    tar -pczf backup.tar.gz *  untuk tar.gz semuanya. Ada beberapa cadangan lain meskipun (di folder lain), ini biasanya satu-satunya file&gt; 50mb. Bagaimana cara mengecualikan mereka? Juga, ada yang tahu...","body":"<p> Saya sedang menggunakan ini:\n    tar -pczf backup.tar.gz * </p>\n\n<p> untuk tar.gz semuanya. Ada beberapa cadangan lain meskipun (di folder lain), ini biasanya satu-satunya file&gt; 50mb. Bagaimana cara mengecualikan mereka? Juga, ada yang tahu bagaimana saya bisa mengecualikan jpg / gif / pngs? Terima kasih </p>","source":"https://superuser.com/questions/60244/how-to-tar-gz-everything-under-xx-mb","author":"<span itemprop=\"name\">nixnub</span>","replies":[{"reply":"Jika cadangan lainnya juga .tar.gzs, Anda juga dapat mengecualikannya dengan cara yang sama seperti mengecualikan jpg / gif / pngs","author":"User"}],"answers":[{"answer":"<p> Anda dapat mengirimkan daftar file ke tar secara langsung (dengan sakelar <code>T</code>), yaitu: </p> <pre><code>find dir/ -size -50M | tar -czf test.tgz -T - --exclude '*.gif' --exclude '*.jpg'\n</code></pre>","votes":"5","source":"https://superuser.com/a/60247","author":"<a href=\"https://superuser.com/users/5371/wds\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">wds</span></a>","replies":[{"reply":"Ini akan bekerja hingga jumlah argumen ke tar melebihi beberapa batas. Artinya, saat keluaran dari find menjadi besar. Di luar titik itu, Anda perlu membawa panggilan tar ke find&#39;s -exec arg.","author":"User"},{"reply":"Dokumentasi tar tidak ada batasan pada ukuran input ke -T, jadi saya tidak tahu apa yang Anda bicarakan sebenarnya.","author":"<a href=\"https://superuser.com/users/5371/wds\" target=\"_blank\" rel=\"nofollow noopener\">wds</a>"},{"reply":"Ini bukan batasan -T. Itu benda cangkang. Cobalah.","author":"User"},{"reply":"Jika Anda berbicara tentang batasan ukuran baris perintah, itu bukan masalah di sini, karena kami menyalurkan output find langsung ke tar.","author":"<a href=\"https://superuser.com/users/5371/wds\" target=\"_blank\" rel=\"nofollow noopener\">wds</a>"},{"reply":"Baik. Saya tidak dapat mereproduksinya dengan 183971 file. Sebenarnya, saya ingat sekarang bahwa ketika saya melihat masalah ini ada hubungannya dengan xargs. Saya harus mengubah find yang disalurkan ke xargs untuk panggilan tambahan tar menjadi pencarian dengan panggilan exec inline untuk tar.","author":"User"},{"reply":"Itulah yang harus dicegah oleh xargs. Anda pasti memiliki shell yang diperluas &quot;*&quot; menjadi terlalu banyak hal.","author":"<a href=\"https://superuser.com/users/4714/glenn-jackman\" target=\"_blank\" rel=\"nofollow noopener\">glenn jackman</a>"},{"reply":"Singkatnya: tidak ada batasan apa pun terkait flag -T dari tar. tar akan membaca nama file dari &#39;file&#39; bernama &#39;stdin&#39;. itu sama sekali tidak ada hubungannya dengan &#39;jumlah argumen yang dapat ditangani shell&#39;. titik.","author":"<a href=\"https://superuser.com/users/10674/akira\" target=\"_blank\" rel=\"nofollow noopener\">akira</a>"},{"reply":"Kernel Linux terbaru menghilangkan kebutuhan untuk <code>xargs</code> sepenuhnya. Ini terjadi sekitar 2.6.23, jika saya tidak salah ingat.","author":"<a href=\"https://superuser.com/users/2570/kquinn\" target=\"_blank\" rel=\"nofollow noopener\">kquinn</a>"}]},{"answer":"<p> Anda dapat menggabungkan tar dengan find untuk memilih hanya file berukuran tertentu: <code>find . -size -50M</code> mengembalikan daftar semua file di bawah 50 MB, yang kemudian dapat disalurkan ke tar. </p>\n\n<p><strong> Sunting </strong> Tidak memperhatikan pertanyaan kedua Anda ketika saya pertama kali menjawab: untuk mengecualikan file berdasarkan ekstensinya, cukup kirimkan output dari find ke grep: <code>find ... | fgrep -v \\*.jpg \\*.png etc.</code> (belum diuji). </p>","votes":"3","source":"https://superuser.com/a/60245","author":"<a href=\"https://superuser.com/users/197602/arthur-reutenauer\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Arthur Reutenauer</span></a>","replies":[{"reply":"Karena itu, Artelius benar: apa yang ingin Anda kecualikan dari cadangan umum Anda adalah, saya kira, semua cadangan parsial yang sudah Anda buat, jadi Anda mungkin ingin mendeteksinya dengan ekstensi file mereka (tar.gz dll.), bukan ukurannya.","author":"User"}]},{"answer":"<p> Memperluas saran Arthur, opsi tar&#39;s r adalah untuk ditambahkan. Jadi sesuatu seperti ini mungkin berhasil. </p> <pre><code> find /path/to/dir  -size -50M -exec tar -rvpf backup.tar \\;\n</code></pre> <p><strong> EDIT </strong> : -exec perlu mengakhiri string &quot;\\;&quot; (tanpa tanda kutip). </p>\n\n<p> Anda tidak dapat menambahkan ke arsip terkompresi, jadi Anda harus melakukan gzip (atau bzip2) secara terpisah. </p>\n\n<p> Kombinasikan dengan solusi wds untuk mengecualikan gambar. </p>","votes":"1","source":"https://superuser.com/a/60246","author":"<a href=\"https://superuser.com/users/19752/ewan\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ewan</span></a>","replies":[{"reply":"&quot;$ PATH&quot; mungkin merupakan pilihan bermasalah untuk variabel ini karena memiliki arti yang terdefinisi dengan baik dan umumnya tidak mengacu pada satu direktori.","author":"<a href=\"https://superuser.com/users/1003/joachim-sauer\" target=\"_blank\" rel=\"nofollow noopener\">Joachim Sauer</a>"}]},{"answer":"<p> Pengecualian juga dapat dilakukan pada <code>find</code>: </p> <pre><code>find -maxdepth 1 -size -50M -not -regex \".*/.*\\.\\(jpg\\|gif\\|png\\)$\" | tar . . .\n</code></pre>","votes":"1","source":"https://superuser.com/a/60248","author":"<a href=\"https://superuser.com/users/310/dennis-williamson\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Dennis Williamson</span></a>","replies":[]},{"answer":"<p> tar memiliki opsi untuk mengecualikan file yang cocok dengan pola tertentu, meskipun bukan ukurannya. </p>\n\n<blockquote>\n  <p> --exclude = POLA <br> kecualikan file yang cocok dengan POLA <br> -X, --exclude-from = FILE <br> kecualikan file dengan pola yang cocok yang tercantum dalam FILE </p>\n</blockquote>\n\n<p> &quot; <a href=\"http://ubuntuforums.org/archive/index.php/t-80790.html\" rel=\"nofollow noopener\" target=\"_blank\"> ubuntuforum </a> &quot;memiliki skrip yang bagus untuk mem-backup file dan mengecualikan file berdasarkan ukurannya. </p>","votes":"0","source":"https://superuser.com/a/60255","author":"<a href=\"https://superuser.com/users/4966/securebadshah\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">secureBadshah</span></a>","replies":[]}]}
