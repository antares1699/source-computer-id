{"title":"Cara menemukan PDF yang tidak dapat dicari secara otomatis","draft":false,"url":"/cara-menemukan-pdf-yang-tidak-dapat-dicari-secara-otomatis-max4vxal","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["pdf","ocr"],"snippet":"Misalkan saya memiliki direktori yang penuh dengan banyak PDF. Di sebagian besar, teksnya benar-benar dapat dicari, seperti yang saya inginkan. Tetapi beberapa di antaranya hanyalah pemindaian gambar, dan perlu diedit dengan OCR....","body":"<p> Misalkan saya memiliki direktori yang penuh dengan banyak PDF. Di sebagian besar, teksnya benar-benar dapat dicari, seperti yang saya inginkan. Tetapi beberapa di antaranya hanyalah pemindaian gambar, dan perlu diedit dengan OCR. </p>\n\n<p> Selain itu, cukup lakukan batch OCR di seluruh direktori, adakah cara untuk segera mengidentifikasi PDF mana yang hanya berupa gambar yang benar-benar perlu di-OCR? </p>\n\n<p> Saya bukan seorang programmer, tetapi solusi yang ramah linux lebih disukai. </p>","source":"https://superuser.com/questions/641899/how-to-automatically-find-non-searchable-pdfs","author":"<a href=\"https://superuser.com/users/182115/brian-z\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Brian Z</span></a>","replies":[],"answers":[{"answer":"<p> Saya tidak yakin apakah ini adalah solusi 100%, tetapi saya datang dengan skrip berikut yang akan memberi Anda bagian yang baik jika tidak seluruhnya (saya belum membahas spesifikasi) Itu harus dijalankan dari direktori yang memiliki semua PDF (itu akan mencari subdirektori). </p> <pre class=\"lang-bsh prettyprint-override\"><code>#! /bin/bash\n\nif [[ ! \"$#\" = \"1\" ]]\n  then\n      echo \"Usage: $0 /path/to/PDFDirectory\"\n      exit 1\nfi\n\nPDFDIRECTORY=\"$1\"\n\nwhile IFS= read -r -d $'\\0' FILE; do\n    PDFFONTS_OUT=\"$(pdffonts \"$FILE\" 2&gt;/dev/null)\"\n    RET_PDFFONTS=\"$?\"\n    FONTS=\"$(( $(echo \"$PDFFONTS_OUT\" | wc -l) - 2 ))\"\n    if [[ ! \"$RET_PDFFONTS\" = \"0\" ]]\n      then\n          READ_ERROR=1\n          echo \"Error while reading $FILE. Skipping...\"\n          continue\n    fi\n    if [[ \"$FONTS\" = \"0\" ]]\n      then\n          echo \"NOT SEARCHABLE: $FILE\"\n      else\n          echo \"SEARCHABLE: $FILE\"\n    fi\ndone &lt; &lt;(find \"$PDFDIRECTORY\" -type f -name '*.pdf' -print0)\n\necho \"Done.\"\nif [[ \"$READ_ERROR\" = \"1\" ]]\n  then\n      echo \"There were some errors.\"\nfi\n</code></pre> <p> Ia bekerja dengan mencari jumlah font yang ditentukan di setiap PDF. Jika file tidak memiliki font apa pun, itu dianggap hanya terdiri dari gambar. (Ini mungkin tersandung pada file yang dilindungi kata sandi, saya tidak tahu, tidak ada untuk diuji). Jika ada beberapa hal yang dapat dicari dan beberapa hal yang berupa gambar, ini tidak akan berfungsi - tetapi mungkin berguna untuk memisahkan dokumen gambar yang dipindai dalam wadah PDF dari PDF &quot;asli&quot;. </p>\n\n<p> Anda tentu saja dapat mengomentari bagian dari loop if-then-else yang tidak berlaku jika Anda hanya ingin mencetak file yang tidak dapat dicari. </p>","votes":"3","source":"https://superuser.com/a/642132","author":"<a href=\"https://superuser.com/users/137786/davidgo\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">davidgo</span></a>","replies":[{"reply":"Terlihat menjanjikan! Tetapi ketika saya menjalankan skrip ini saya pikir saya mendapatkan kesalahan. Dikatakan: <code>find: paths must precede expression: Anker2001.pdf Usage: find [-H] [-L] [-P] [-Olevel] [-D help|tree|search|stat|rates|opt|exec] [path...] [expression]</code> &quot;Anker2001.pdf&quot; adalah file kedua menurut abjad dalam direktori.","author":"<a href=\"https://superuser.com/users/182115/brian-z\" target=\"_blank\" rel=\"nofollow noopener\">Brian Z</a>"},{"reply":"Saya telah membuat beberapa perubahan pada skrip, yang mungkin memperbaiki masalah Anda - Anda sekarang menjalankannya dan meneruskan direktori yang ingin Anda periksa sebagai argumen. Saya juga memperbaiki bug besar di cek dengan menghapus &quot;.&quot; setelah $ FONTSFOUND !!!","author":"<a href=\"https://superuser.com/users/137786/davidgo\" target=\"_blank\" rel=\"nofollow noopener\">davidgo</a>"},{"reply":"Ini tampak aneh, tetapi berhenti bekerja. Tahu mengapa itu terjadi?","author":"<a href=\"https://superuser.com/users/182115/brian-z\" target=\"_blank\" rel=\"nofollow noopener\">Brian Z</a>"},{"reply":"Tidak ada sama sekali - Saya perlu tahu lebih banyak tentang bagaimana / kapan itu berhenti bekerja, kesalahan atau apa yang Anda miliki. Saya ingin tahu apakah Anda memiliki PDF dengan spasi di dalamnya, dan jika sesuatu seperti itu melemparkan skripnya. (Bukan solusi, tetapi mitigasi mungkin memasukkan baris tambahan untuk memindahkan file yang dicentang KELUAR DARI JALUR skrip dan kemudian menjalankannya kembali, lihat di mana macet dll - dan kemudian pindahkan file kembali).","author":"<a href=\"https://superuser.com/users/137786/davidgo\" target=\"_blank\" rel=\"nofollow noopener\">davidgo</a>"},{"reply":"Saya mendapatkan kesalahan yang sama seperti yang saya posting di komentar asli saya. Satu-satunya cara saya bisa membuatnya berfungsi sekarang adalah jika hanya ada satu file PDF di folder. Saya terus mencobanya dengan file yang berbeda, nama file sederhana tanpa spasi dll, tetapi tidak ada yang berhasil.","author":"<a href=\"https://superuser.com/users/182115/brian-z\" target=\"_blank\" rel=\"nofollow noopener\">Brian Z</a>"},{"reply":"Bisa berfungsi dengan menjalankannya dengan baris yang dikomentari, mengubahnya kembali seperti semula, dan menjalankannya lagi? Cukup yakin itulah yang terjadi sebelumnya juga. Saya benar-benar tidak mengerti bagaimana ini bekerja tetapi mungkin Anda tahu mengapa itu akan memperbaiki masalah?","author":"<a href=\"https://superuser.com/users/182115/brian-z\" target=\"_blank\" rel=\"nofollow noopener\">Brian Z</a>"},{"reply":"@davidgo Terima kasih telah membuat skrip ini! Saya menemukan beberapa kesalahan saat menjawab a <a href=\"http://superuser.com/q/755124/170160\" target=\"_blank\" rel=\"nofollow noopener\"> pertanyaan terkait </a> dan mengirimkan hasil edit untuk jawaban Anda. Saya harap Anda tidak keberatan.","author":"<a href=\"https://superuser.com/users/170160/glutanimate\" target=\"_blank\" rel=\"nofollow noopener\">Glutanimate</a>"}]},{"answer":"<p> Saya akan menggunakan trik, ini adalah fakta sekunder aneh yang saya perhatikan jika file <code>pdf</code> tidak memiliki font apa pun, biasanya tidak dapat dicari. Jadi mengetahui ini kita bisa menggunakan <code>pdffonts</code>. </p>\n\n<p> 2 baris pertama dari <code>pdffonts</code> adalah tajuk tabel, jadi ketika sebuah file dapat dicari memiliki lebih dari dua keluaran baris, mengetahui ini kita dapat membuat: </p> <pre><code>gedit check_pdf_searchable.sh\n</code></pre> <p> lalu tempel ini </p> <pre><code>#!/bin/bash \n#set -vx\nif ((`pdffonts \"$1\" | wc -l` &lt; 3 )); then\necho $1\npypdfocr \"$1\" # alternatively you can use ocrmypdf \"$1\" \"${1}_ocr.pdf\"\nfi\n</code></pre> <p> lalu buat itu bisa dieksekusi </p> <pre><code>chmod +x check_pdf_searchable.sh\n</code></pre> <p> lalu daftarkan semua pdf yang tidak dapat dicari di direktori: </p> <pre><code>ls -1 ./*.pdf | xargs -L1 -I {} ./check_pdf_searchable.sh {}\n</code></pre> <p> atau di direktori dan subdirektorinya: </p> <pre><code>tree -fai . | grep -P \".pdf$\" | xargs -L1 -I {} ./check_pdf_searchable.sh {}\n</code></pre>","votes":"2","source":"https://superuser.com/a/1292973","author":"<a href=\"https://superuser.com/users/151294/eduard-florinescu\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Eduard Florinescu</span></a>","replies":[]},{"answer":"<p> Saya mengalami kesulitan dengan <code>tree</code> jadi solusi ini berfungsi untuk saya, menggunakan skrip yang sama. </p>\n\n<p> <code>find . -name \"*.pdf\" -type f -exec ~/check_pdf_searchable.sh {} \\;</code> </p>\n\n<p> <code>~/</code> menganggap skrip ada di direktori home Anda. Membuat segalanya lebih mudah. </p>","votes":"1","source":"https://superuser.com/a/1431195","author":"<a href=\"https://superuser.com/users/1029490/tbst\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">tbst</span></a>","replies":[{"reply":"Mengingat bahwa (1) <code>check_pdf_searchable.sh</code> berasal <a href=\"https://superuser.com/q/641899/150988#1292973\" target=\"_blank\" rel=\"nofollow noopener\"> Jawaban Eduard Florinescu </a> , (2) Jawaban Eduard adalah tertulis dari <a href=\"https://superuser.com/q/641899/150988#642132\" target=\"_blank\" rel=\"nofollow noopener\"> jawaban davidgo </a> (dengan tambahan perintah <code>pypdfocr</code>), dan (3) jawaban davidgo sudah menggunakan <code>find</code>, menurut saya jawaban ini tidak melanggar bidang baru apa pun.","author":"<a href=\"https://superuser.com/users/150988/scott\" target=\"_blank\" rel=\"nofollow noopener\">Scott</a>"}]}]}
