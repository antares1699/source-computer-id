{"title":"Bagaimana cara membuat antarmuka jaringan Tor-only yang cocok untuk Firejail?","draft":false,"url":"/bagaimana-cara-membuat-antarmuka-jaringan-tor-only-yang-cocok-untuk-firejail-wa6dzs6u","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","security","privacy","tor","firejail"],"snippet":"Tapi yang terkenal  tidak aman  Metode yang digunakan adalah dengan menggunakan torify. Ini tidak aman karena kami  meminta  aplikasi untuk menggunakan Tor, bukan memaksanya. Jika aplikasi tidak berfungsi dengan baik atau dieksplorasi...","body":"<p> Tapi yang terkenal <strong> tidak aman </strong> Metode yang digunakan adalah dengan menggunakan <code>torify</code>. Ini tidak aman karena kami <em> meminta </em> aplikasi untuk menggunakan Tor, bukan memaksanya. Jika aplikasi tidak berfungsi dengan baik atau dieksplorasi oleh bug,\nitu akan tetap memungkinkan koneksi non-Tor dibuat ke dunia luar. </p>\n<p> Firejail, di sisi lain, adalah alat keamanan yang memungkinkan Anda melakukannya <em> bak pasir </em> aplikasi dengan menyediakan namespace kernel yang terisolasi,\nseccomp filter dan, yang penting, tumpukan jaringan kustom. </p>\n<p> Begitu, <strong> bagaimana cara membuat antarmuka jaringan khusus Tor yang dapat diumpankan ke Firejail </strong> ?\nMenurut dokumentasi Firejail, ia menerima semua antarmuka jaringan jembatan: </p>\n<blockquote>\n<p> Firejail dapat memasang tumpukan jaringan TCP / IP baru ke kotak pasir. Tumpukan baru hadir dengan tabel peruteannya sendiri, firewall, dan seperangkat antarmuka. Ini benar-benar independen dari tumpukan jaringan host. </p>\n<ul>\n<li> Buat antarmuka baru - Macvlan kernel Linux dan perangkat jembatan dibuat dan dipindahkan secara otomatis di kotak pasir. </li>\n<li> Pindahkan antarmuka yang ada - antarmuka yang ada dapat dipindahkan di dalam kotak pasir. Konfigurasi antarmuka dipertahankan. </li>\n</ul>\n</blockquote>","source":"https://superuser.com/questions/1068518/how-to-create-a-tor-only-network-interface-suitable-for-firejail","author":"<a href=\"https://superuser.com/users/162466/vasyanovikov\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">VasyaNovikov</span></a>","replies":[],"answers":[{"answer":"<p> Firejail dengan Tor HOWTO <a href=\"https://www.void.gr/kargig/blog/2016/12/12/firejail-with-tor-howto/\" rel=\"nofollow noopener\" target=\"_blank\"> https://www.void.gr/kargig/blog/2016/12/12/firejail-with-tor-howto/ </a></p>\n\n<p> Saya tidak dapat memverifikasi bahwa tor akan berfungsi seperti yang diuraikan dalam artikel di atas, namun penerusan ssh menggunakan pendekatan yang sama (yaitu, port socks5) berfungsi dengan baik. </p>","votes":"4","source":"https://superuser.com/a/1172609","author":"<a href=\"https://superuser.com/users/685171/user5321531\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user5321531</span></a>","replies":[{"reply":"&#39;mengarahkan lalu lintas dari jembatan ke proxy http&#39; <a href=\"https://superuser.com/questions/1172607/redirect-traffic-from-bridge-to-http-proxy\" title=\"redirect traffic from bridge to http proxy\" target=\"_blank\" rel=\"nofollow noopener\"> superuser.com/questions/1172607/â€¦ </a> - Saat ini saya menggunakan konfigurasi ini tetapi dengan privoxy alih-alih tinyproxy, yang akan (serta pemblokiran iklan) merutekan permintaan HTTP melalui proxy SOCKS.","author":"<a href=\"https://superuser.com/users/685171/user5321531\" target=\"_blank\" rel=\"nofollow noopener\">user5321531</a>"}]},{"answer":"<p> kami telah menerapkan solusi lain sebagai dukungan firejail --netns flag.\nuntuk mengikat firejail di dalam namespace jaringan yang hanya dapat menjangkau internet melalui tor, langkah-langkahnya adalah: </p> <pre><code># configure tor with this configuration\nAutomapHostsOnResolve 1\nTransPort 9040\nTransListenAddress 10.0.0.1\nDNSPort 5354\nDNSListenAddress 10.0.0.1\nSOCKSPort 0\n</code></pre> <p> kemudian.. </p> <pre><code># create a new network namespace named torjail\nip netns add torjail\n\n# create two virtual ethernet  interface\nip link add out-torjail type veth peer name in-torjail\n\n# bind one interface to torjail network namespace\nip link set in-torjail netns torjail\n\n# set interfaces ip and default routing\nip addr add 10.0.0.1/24 dev out-torjail\nip link set out-torjail up\nip netns exec torjail ip addr add 10.0.0.2/24 dev in-torjail\nip netns exec torjail ip link set in-torjail up\nip netns exec torjail ip route add default via 10.0.0.1\n\n# forward all dns traffic to tor DNSPort\niptables -t nat -A  PREROUTING -i out-torjail -p udp -d 10.0.0.1 --dport 53 -j DNAT --to-destination 10.0.0.1:5354\n\n# forward all traffic to tor TransPort\niptables -t nat -A  PREROUTING -i out-torjail -p tcp --syn -j DNAT --to-destination 10.0.0.1:9040\n\n# accept established connection\niptables -A OUTPUT -m state -o out-torjail --state ESTABLISHED,RELATED -j ACCEPT\n\n# accept only forwarded traffic\niptables -A INPUT -i out-torjail -p udp --destination 10.0.0.1 --dport 5354 -j ACCEPT\niptables -A INPUT -i out-torjail -p tcp --destination 10.0.0.1 --dport 9040 -j ACCEPT\niptables -A INPUT -i out-torjail -p udp --destination 10.0.0.1 --dport 9040 -j ACCEPT\niptables -A INPUT -i out-torjail -j DROP\n\n\n# finally run firejail within torjail namespace\nfirejail --dns=10.0.0.1 --netns=torjail $YOUR_ANONYMOUS_COMMAND_HERE\n</code></pre> <p> kami telah menerapkan metode ini pada <code>torjail</code> untuk penggunaan sederhana, lihat: </p>\n\n<p><a href=\"https://torjail.github.io\" rel=\"nofollow noopener\" target=\"_blank\"> https://torjail.github.io </a><br>\n<a href=\"https://github.com/torjail/torjail\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/torjail/torjail </a></p>","votes":"3","source":"https://superuser.com/a/1231279","author":"<a href=\"https://superuser.com/users/751421/les\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">les</span></a>","replies":[]}]}
