{"title":"ffmpeg slideshow dengan crossfade","draft":false,"url":"/ffmpeg-slideshow-dengan-crossfade-hqxdhzkf","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["video","ffmpeg","codec","slideshow"],"snippet":"Saya baru saja menemukan cara membuat tayangan slide dengan crossfade. Ini adalah proses dua langkah. Langkah pertama membaca gambar dengan framerate 0,5 (yang berarti 2 detik untuk setiap gambar), dan menghasilkan video...","body":"<p> Saya baru saja menemukan cara membuat tayangan slide dengan crossfade. Ini adalah proses dua langkah. Langkah pertama membaca gambar dengan framerate 0,5 (yang berarti 2 detik untuk setiap gambar), dan menghasilkan video perantara dengan framerate 2. Itu berarti setiap gambar diulang sebanyak 4 kali. Langkah kedua menerapkan filter frekuensi gambar. Hasilnya adalah setiap gambar ditampilkan selama 1,5 detik, diikuti oleh crossfade 0,5 detik. </p> <pre><code>ffmpeg -framerate 0.5 -i IMG_%3d.jpg -r 2 -codec:v mpeg4 temp.mp4\n\nffmpeg -i temp.mp4 -vf \"framerate=fps=25\" -codec:v mpeg4 out.mp4\n</code></pre> <p> Proses dua langkah ini berfungsi dengan baik, tetapi saya punya dua pertanyaan: </p>\n\n<ol>\n<li> Apakah mungkin juga untuk mendapatkan hasil yang sama dalam satu langkah, tanpa file video perantara? </li>\n<li> Jika jawaban untuk pertanyaan pertama adalah tidak, dapatkah seseorang menunjukkan kepada saya bagaimana perintah di atas harus dimodifikasi untuk file perantara lossless, misalnya RAWVIDEO? </li>\n</ol>\n\n<p> Terima kasih,\nMichael </p>","source":"https://superuser.com/questions/1265642/ffmpeg-slideshow-with-crossfade","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Michael</span></a>","replies":[{"reply":"Adakah alasan Anda membutuhkan <code>mpeg4</code> sebagai codec? Menggunakan pembuat enkode tertentu tanpa menyetel bitrate target atau tingkat kualitas apa pun akan menghasilkan kualitas keluaran yang buruk. Saya lebih suka menggunakan H.264 kecuali Anda secara khusus perlu menargetkan perangkat yang tidak mendukungnya.","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"},{"reply":"Saya menghilangkan pengaturan bitrate dan kualitas pada contoh di atas, karena saya ingin membuatnya sesingkat mungkin.","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"}],"answers":[{"answer":"<p> Anda dapat mengatur ulang waktu bingkai sebelum menerapkan filter: </p> <pre><code>ffmpeg -i IMG_%3d.jpg  -vf \"setpts=N/0.5/TB,framerate=fps=25\" -codec:v mpeg4 out.mp4\n</code></pre> <hr>\n\n<p><strong> Memperbarui </strong> : Filter rasio bingkai tampaknya terkait dengan rasio bingkai masukan saat penyerapan, jadi metode alt menggunakan pipa </p> <pre><code>ffmpeg -framerate 0.5 -i IMG_%3d.jpg -vf fps=2 -f nut - | ffmpeg -f nut -i - -vf framerate=25 -c:v mpeg4 out.mp4\n</code></pre> <hr>\n\n<p> Solusi satu baris: </p> <pre><code>ffmpeg -i IMG_%3d.jpg -vf zoompan=z=1:d=4:s=WxH:fps=2,framerate=25 -c:v mpeg4 out.mp4\n</code></pre> <p> dimana W dan H diganti dengan dimensi masukan. </p>","votes":"3","source":"https://superuser.com/a/1265659","author":"<a href=\"https://superuser.com/users/114058/gyan\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Gyan</span></a>","replies":[{"reply":"Tapi ini tidak melakukan hal yang sama. Ini menghasilkan video di mana durasi crossfade adalah 2 detik, dan ketika satu crossfade berakhir, crossfade berikutnya segera dimulai.","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"},{"reply":"Solusi ditambahkan","author":"<a href=\"https://superuser.com/users/114058/gyan\" target=\"_blank\" rel=\"nofollow noopener\">Gyan</a>"},{"reply":"ok, saya mengerti maksud anda Pertama, terapkan filter fps, lalu filter frekuensi gambar. Tapi saya memanggil ffmpeg dari file batch Windows. Saya pikir dalam hal ini saya harus menulis perintah dalam dua baris dan menggunakan file perantara.","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"},{"reply":"Mengapa? Anda dapat menerapkan solusi tersebut dalam file batch.","author":"<a href=\"https://superuser.com/users/114058/gyan\" target=\"_blank\" rel=\"nofollow noopener\">Gyan</a>"},{"reply":"Tidak berhasil. Ketika saya memulai file batch, jendela cmd.exe segera terbuka dan tertutup. Ini adalah isi dari file batch saya: c: / ffmpeg / ffmpeg -framerate 0.5 -i IMG _ %% 3d.jpg -vf fps = 2 -f nut - | c: / ffmpeg / ffmpeg -f nut -i - -vf framerate = 25 -c: v mpeg4 out.mp4 jeda","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"},{"reply":"perintah jeda ada di baris baru","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"},{"reply":"Solusi satu baris dengan filter zoompan bekerja dengan baik! Ada kesalahan ketik kecil di dalamnya, ganti &quot;d: 4&quot; dengan &quot;d = 4&quot; Terima kasih banyak!","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"},{"reply":"&quot;-framerate 0.5&quot; di awal dapat dihilangkan. &quot;z = 1&quot; juga dapat dihilangkan, ini adalah nilai default.","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"}]},{"answer":"<p> Saya ingin merangkum solusinya: </p> <pre><code>ffmpeg -i IMG_%3d.jpg -vf zoompan=d=(A+B)/B:s=WxH:fps=1/B,framerate=25:interp_start=0:interp_end=255:scene=100 -c:v mpeg4 -maxrate 5M -q:v 2 out.mp4\n</code></pre> <p> di mana A adalah durasi dalam detik berapa lama setiap gambar ditampilkan (tanpa durasi crossfade), B adalah durasi crossfade dalam detik, dan WxH adalah ukuran video keluaran. </p>","votes":"3","source":"https://superuser.com/a/1265927","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Michael</span></a>","replies":[{"reply":"<code>-b:v 5M</code> dan <code>-q:v 0</code> saling eksklusif; apakah Anda menginginkan bitrate tertentu (tetapi pengkodean dua langkah akan lebih baik), atau Anda menentukan tingkat kualitas target (Â´-q: v 0` akan menghasilkan file yang sangat besar).","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"},{"reply":"Bukankah bitrate yang ditentukan hanya berfungsi maksimal dalam kasus ini? Saya rasa ketika kedua parameter ditentukan, itu berarti gunakan kualitas yang ditentukan, tetapi jangan melebihi bitrate yang ditentukan.","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"},{"reply":"Tidak, itu parameter <code>-maxrate</code>. Jika Anda benar-benar membutuhkan <code>mpeg4</code>, gunakan <code>-q:v 2 -maxrate 5M</code> untuk video 1080p, misalnya, untuk mendapatkan aliran VBR dengan kecepatan terbatas.","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"},{"reply":"Mengapa perintah ini menyebabkan saya menimpa file gambar saya? Juga perintah ini terus membuat kesalahan sintaks di shell. Saya pikir Anda melewatkan beberapa kutipan. Dan jika saya menambahkan tanda kutip di sekitar perintah, itu terus meminta untuk menimpa file.","author":"<a href=\"https://superuser.com/users/248499/cmcdragonkai\" target=\"_blank\" rel=\"nofollow noopener\">CMCDragonkai</a>"},{"reply":"Perintah ini hanya memiliki satu file keluaran &quot;out.mp4&quot; dan tidak akan menimpa file gambar Anda.","author":"<a href=\"https://superuser.com/users/663808/michael\" target=\"_blank\" rel=\"nofollow noopener\">Michael</a>"}]}]}
