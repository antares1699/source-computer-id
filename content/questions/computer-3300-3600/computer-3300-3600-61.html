{"title":"Bagaimana cara agar Vim memuat konfigurasi .vimrc secara otomatis dari direktori saat ini?","draft":false,"url":"/bagaimana-cara-agar-vim-memuat-konfigurasi-vimrc-secara-otomatis-dari-direktori-saat-ini-vjxkfoji","votes":"4","answers_count":"5","categories":["Komputer"],"tags":["vim","gvim"],"snippet":"Saya memiliki beberapa proyek yang memerlukan perintah berbeda untuk menjalankan, membangun, dan menguji, jadi saya telah meletakkan file .vimrc di setiap direktori proyek yang menentukan pemetaan ke beberapa tombol F. Di file...","body":"<p> Saya memiliki beberapa proyek yang memerlukan perintah berbeda untuk menjalankan, membangun, dan menguji, jadi saya telah meletakkan file .vimrc di setiap direktori proyek yang menentukan pemetaan ke beberapa tombol F. Di file bantuan vim dikatakan: </p> <pre>\n'exrc' 'ex'             boolean (default off)\n                        global\n                        {not in Vi}\n        Enables the reading of .vimrc, .exrc and .gvimrc in the current\n        directory.\n</pre> <p> Jadi saya mengaktifkan opsi itu, tetapi ketika saya <code>:cd</code> masuk ke direktori, file .vimrc tidak dimuat. Jika saya menulis <code>:so .\\.vimrc</code> maka itu memuat dengan baik. Mengapa tidak dimuat secara otomatis? </p>\n\n<hr>\n\n<p> Saya menggunakan gVim 7.3 x64 untuk Windows. </p>","source":"https://superuser.com/questions/532593/how-do-i-get-vim-to-automatically-load-vimrc-config-from-the-current-directory","author":"<a href=\"https://superuser.com/users/48741/hubro\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Hubro</span></a>","replies":[{"reply":"Secara otomatis menggunakan file <code>.vimrc</code> dari direktori saat ini adalah a <b> sangat buruk </b> ide. File itu bisa dengan mudah berasal dari arsip yang telah Anda unduh, dan secara otomatis sumbernya akan memungkinkan siapa pun yang membuat arsip itu untuk menjalankan kode arbitrer di komputer Anda.","author":"<a href=\"https://superuser.com/users/167511/qqx\" target=\"_blank\" rel=\"nofollow noopener\">qqx</a>"},{"reply":"@qqx: Saya rasa saya bisa mengingatnya, dengan cara yang sama saya ingat untuk tidak mengeksekusi binari yang tidak saya percayai: P","author":"<a href=\"https://superuser.com/users/48741/hubro\" target=\"_blank\" rel=\"nofollow noopener\">Hubro</a>"},{"reply":"<code>set exrc</code> tidak pernah berhasil untuk saya. Kamu bisa mencoba <a href=\"https://github.com/thinca/vim-localrc\" rel=\"nofollow noopener\" target=\"_blank\"> plugin ini </a> . Mungkin ada orang lain di vim.org.","author":"<a href=\"https://superuser.com/users/60075/romainl\" target=\"_blank\" rel=\"nofollow noopener\">romainl</a>"}],"answers":[{"answer":"<p> Jika &#39;exrc&#39; disetel, direktori saat ini mencari file bernama <code>_vimrc</code>, <code>.vimrc</code> atau <code>_exrc</code> <em> saat memulai </em> . Ini tidak dilakukan setiap kali Anda <code>:cd</code> ke direktori baru. Lihat </p> <pre><code>:help .vimrc\n</code></pre>","votes":"7","source":"https://superuser.com/a/532673","author":"<a href=\"https://superuser.com/users/40044/garyjohn\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">garyjohn</span></a>","replies":[{"reply":"Bukankah itu membuatnya tidak berguna? : S Setidaknya untuk gVim. Apakah ada parameter startup gVim.exe yang dapat saya gunakan untuk memilih direktori startup? Dengan begitu saya bisa membuat satu pintasan untuk setiap proyek. Atau bahkan lebih baik, mungkin saya dapat menentukan file konfigurasi vim di pintasan aplikasi sehingga saya dapat menghindari hal <code>exrc</code> sama sekali. Google di sini saya datang","author":"<a href=\"https://superuser.com/users/48741/hubro\" target=\"_blank\" rel=\"nofollow noopener\">Hubro</a>"},{"reply":"Itu tidak membantu dengan gvim yang diluncurkan dari desktop atau pengelola file Anda, tetapi itu tidak dimaksudkan untuk membantu dengan itu. Yang Anda butuhkan adalah sesuatu yang memuat vimrc dari direktori induk dari file pertama yang Anda buka saat memulai gvim. Dalam hal ini, Anda tahu bahwa nama file akan diteruskan sebagai argumen, jadi Anda bisa mengujinya dan sumber%: h / .vimrc. Lihat entri <code>:help</code> untuk <code>argv()</code> dan <code>fnamemodify()</code>. Saya menulis plugin untuk ini yang melihat jalur setiap file ketika dibuka dan sumber file yang bergantung pada proyek dari pengaturan buffer-lokal.","author":"<a href=\"https://superuser.com/users/40044/garyjohn\" target=\"_blank\" rel=\"nofollow noopener\">garyjohn</a>"}]},{"answer":"<p> Inilah yang bisa Anda coba: </p> <pre><code>autocmd BufEnter{,other event} {full path to file} {do blah}\n</code></pre> <p> Dan Anda akan memasukkannya ke dalam grup perintah otomatis: </p> <pre><code>augroup {name you want here}\n    autocmd!\n    autocmd BufEnter{,other event} {full path to file} source {full path to vimrc file}\n    autocmd BufEnter{,other event} {full path to file} {define mapping here}\n    autocmd BufEnter{,other event} {full path to file} {do blah}\n    autocmd BufEnter{,other event} {full path to file} {do blah}\naugroup END\n</code></pre> <p> Jadi Anda akan meletakkan pengaturan Anda di sini, dengan cara ini jika Anda berada dalam buffer tertentu, pemetaan tersebut akan dimuat. </p>\n\n<p> Saya juga merekomendasikan melakukan beberapa acara BufLeave untuk membatalkan pengaturan pemetaan tersebut saat Anda tidak berada di buffer tersebut, jika Anda mau. </p>\n\n<p> apakah itu sesuai dengan kebutuhan Anda? Saya tidak yakin apa yang Anda butuhkan, jadi saya hanya membuatkan template untuk Anda. :) </p>\n\n<p> Seperti yang saya tunjukkan, Anda dapat melakukannya dengan berbagai cara, Anda memutuskan mana yang lebih baik untuk kebutuhan Anda. Maaf, saya tidak benar-benar memecahkan masalah mendasar dari pengaturan yang tidak berfungsi itu. :( </p>","votes":"2","source":"https://superuser.com/a/532606","author":"<a href=\"https://superuser.com/users/169228/greduan\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">greduan</span></a>","replies":[{"reply":"Saya tidak yakin apakah Anda bercanda ... Saya katakan dalam pertanyaan saya bahwa itulah yang saya lakukan sekarang.","author":"<a href=\"https://superuser.com/users/48741/hubro\" target=\"_blank\" rel=\"nofollow noopener\">Hubro</a>"},{"reply":"@Codemonkey / faceesk 5 kali. Saya melewatkan bagian terakhir itu. Tunggu sebentar, saya akan mengedit pertanyaan saya untuk menggunakan perintah otomatis (jika saya menemukan acara untuk melakukannya). :)","author":"<a href=\"https://superuser.com/users/169228/greduan\" target=\"_blank\" rel=\"nofollow noopener\">greduan</a>"},{"reply":"@Codemonkey OK saya mengubah jawaban saya. Apakah itu bekerja lebih baik untuk Anda?","author":"<a href=\"https://superuser.com/users/169228/greduan\" target=\"_blank\" rel=\"nofollow noopener\">greduan</a>"},{"reply":"Saya benar-benar ingin tahu mengapa <code>exrc</code> tidak berfungsi seperti yang diiklankan. Apakah saya salah paham tentang arti opsi tersebut?","author":"<a href=\"https://superuser.com/users/48741/hubro\" target=\"_blank\" rel=\"nofollow noopener\">Hubro</a>"},{"reply":"Oke, beberapa hal untuk diperiksa. Apakah Anda memiliki <code>set exrc</code> di file .vimrc Anda yang sebenarnya? Selain itu, selain file .vimrc, tahukah Anda bahwa Anda juga dapat menggunakan file .exrc untuk penyesuaian ini?","author":"<a href=\"https://superuser.com/users/169228/greduan\" target=\"_blank\" rel=\"nofollow noopener\">greduan</a>"},{"reply":"@Codemonkey Nah, garyjohn menjawab pertanyaan Anda, saya kira. Dan metode saya adalah solusi yang saya kira. :)","author":"<a href=\"https://superuser.com/users/169228/greduan\" target=\"_blank\" rel=\"nofollow noopener\">greduan</a>"}]},{"answer":"<p> Di vim versi 8.1 ^ ada acara autocmd bernama <strong> DirChanged </strong> yang dapat Anda gunakan untuk mengevaluasi spesifik proyek Anda <code>.vimrc</code>. Berikut detail selengkapnya tentang kapan peristiwa ini dipicu: </p> <pre><code>DirChanged = Working directory has changed in response to the |:cd| or |:lcd| commands.\n</code></pre> <h3 class=\"h5\"> Contoh Kerja </h3>\n\n<p> Saya bukan ahli dalam vim-script tetapi saya membuat fungsi berikut yang memuat file <code>.vimrc</code> khusus proyek saya, setelah saya <code>cd</code> ke dalam folder proyek. Lewati fungsi ini ke file <code>~/.vimrc</code> utama Anda. </p> <pre><code>if !exists(\"*LoadProjectVimrc\")\n  function! LoadProjectVimrc()\n    let vimrcFile = findfile(\".vimrc\", \".;\")\n\n    if !empty(vimrcFile)\n      execute \":so\" l:vimrcFile\n      echom l:vimrcFile\n    endif\n\n  endfunction\nendif\nautocmd DirChanged * :call LoadProjectVimrc()\n</code></pre>","votes":"2","source":"https://superuser.com/a/1447403","author":"<a href=\"https://superuser.com/users/1047252/vernon-grant\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Vernon Grant</span></a>","replies":[]},{"answer":"<p> Sekadar catatan, yang akhirnya saya lakukan adalah membuat pintasan untuk setiap proyek saya dan memuat file konfigurasi khusus proyek sebagai file sesi menggunakan <code>-S session.vim</code>. </p>","votes":"2","source":"https://superuser.com/a/532745","author":"<a href=\"https://superuser.com/users/48741/hubro\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Hubro</span></a>","replies":[]},{"answer":"<p> Menurut saya ini adalah varian terbaik: </p> <pre><code>if getcwd() =~ '^\\(/my/safe/dir1/\\|/my/safe/dir2/\\)'\n  set secure exrc\nendif\n</code></pre> <p> Sumber dari: <a href=\"http://vim.wikia.com/wiki/Open_vimrc_file\" rel=\"nofollow noopener\" target=\"_blank\"> http://vim.wikia.com/wiki/Open_vimrc_file </a> tetapi sintaks tetap </p>","votes":"1","source":"https://superuser.com/a/1024464","author":"<a href=\"https://superuser.com/users/543459/pavel-lis%c3%bd\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Pavel Lis&#253;</span></a>","replies":[]}]}
