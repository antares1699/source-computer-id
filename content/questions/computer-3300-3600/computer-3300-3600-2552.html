{"title":"grep file dan pipa output ke sed dan menyimpan output sed dalam file","draft":false,"url":"/grep-file-dan-pipa-output-ke-sed-dan-menyimpan-output-sed-dalam-file-xucv9ugb","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","bash","shell-script","grep","sed"],"snippet":"Isi source.txt:  gold  green white black blueyellow magenta brown tram kilo charlie tango  Halo semuanya! Saya perlu memecahkan misteri.  Saya mencoba menjalankan skrip kecil untuk grep file source.txt, pipa grep output...","body":"<p> Isi <code>source.txt</code>: </p> <pre><code>gold  green white black blue\nyellow magenta brown \ntram kilo charlie tango\n</code></pre> <p> Halo semuanya! Saya perlu memecahkan misteri. </p>\n\n<p> Saya mencoba menjalankan skrip kecil untuk grep file <code>source.txt</code>, pipa <code>grep</code> output ke <code>sed</code> ganti string dan simpan baris itu di file baru <code>pol.txt</code> </p> <pre><code>grep -l \"gold\" source.txt | xargs sed  's/green/red/' &gt;  pol.txt\n</code></pre> <p> Alih-alih memiliki satu-satunya baris yang disimpan pada <code>pol.txt</code>: </p> <pre><code>gold  red white black blue\n</code></pre> <p> Saya memiliki seluruh file itu sendiri dengan string yang saya ganti </p> <pre><code>gold  red white black blue\nyellow magenta brown \ntram kilo charlie tango\n</code></pre> <p> Ketika saya menghapus opsi <code>-l</code> dari perintah grep saya memiliki ini dan tentu saja tidak ada di pol.txt </p> <pre><code>sed: can't read gold: No such file or directory\nsed: can't read green: No such file or directory\nsed: can't read white: No such file or directory\nsed: can't read black: No such file or directory\nsed: can't read blue: No such file or directory\n</code></pre> <p> <code>grep</code> diperlukan sebagai penguji dan sayangnya &quot;jika&quot; bukan merupakan pilihan. </p>","source":"https://superuser.com/questions/1103309/grep-a-file-and-pipe-the-output-to-sed-and-store-sed-output-in-a-file","author":"<a href=\"https://superuser.com/users/600063/driven\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Driven</span></a>","replies":[{"reply":"Anda menggunakan OS apa? Dan dengan apa file <code>source.txt</code> disimpan? Bagi saya ini sepertinya ini mungkin campuran antara pengembalian kereta dan umpan baris yang bercampur.","author":"<a href=\"https://superuser.com/users/167207/giacomo1968\" target=\"_blank\" rel=\"nofollow noopener\">Giacomo1968</a>"},{"reply":"Seperti yang ditunjukkan oleh jawaban John1234, Anda hampir tidak perlu menggunakan <code>grep</code> dan <code>sed</code> secara bersamaan - <code>sed</code> dengan sendirinya mungkin dapat melakukan apa pun yang dapat dilakukan oleh kedua program secara bersamaan. Jika Anda memiliki masalah di mana Anda memiliki banyak file input dan Anda hanya perlu memproses file yang berisi &quot;emas&quot;, Anda mungkin harus menjelaskannya; jika tidak, satu tangan orang yang mencoba menjawab pertanyaan Anda terikat di belakang. (Harap jangan menanggapi dalam komentar; <a href=\"https://superuser.com/posts/1103309/edit\" target=\"_blank\" rel=\"nofollow noopener\"> edit </a> pertanyaan Anda untuk membuatnya lebih jelas dan lebih lengkap.) Seperti yang dijelaskan Satya Mishra, <code>grep -l &quot;gold&quot; source.txt</code> akan menghasilkan <code>source.txt</code>… (Lanjutan)","author":"<a href=\"https://superuser.com/users/354511/g-man-says-reinstate-monica\" target=\"_blank\" rel=\"nofollow noopener\">G-Man Says &#x27;Reinstate Monica&#x27;</a>"},{"reply":"(Lanjutan)… jika file berisi kata &quot;emas&quot; (dan tidak ada jika tidak). Jika satu-satunya hal yang Anda tulis ke dalam pipa Anda adalah nama file <code>source.txt</code>, tidak mungkin proses di sisi kanan pipa dapat mengetahui bahwa Anda hanya ingin memproses <i> garis </i> yang berisi &quot;emas&quot; kecuali Anda membuatnya menjadi perintah (seperti yang ditunjukkan John). (Perintahnya dapat disederhanakan sedikit, menjadi <code>sed -n &#39;&#47;gold&#47;s&#47;green&#47;red&#47;p&#39; source.txt</code>. Dan, jika Anda dapat menulis <code>sed &#39;s&#47;green&#47;red&#47;&#39;</code>, apakah ini benar-benar begitu &quot;menakutkan&quot; sehingga &quot;akan merepotkan&quot; untuk mempertahankannya?)","author":"<a href=\"https://superuser.com/users/354511/g-man-says-reinstate-monica\" target=\"_blank\" rel=\"nofollow noopener\">G-Man Says &#x27;Reinstate Monica&#x27;</a>"}],"answers":[{"answer":"<p> Untuk memilih baris apa pun yang berisi <code>gold</code> dari source.txt dan mengganti kemunculan pertama <code>green</code> dengan <code>red</code>: </p> <pre><code>$ sed  -n '/gold/{s/green/red/; p}' source.txt \ngold  red white black blue\n</code></pre> <p> Untuk menyimpannya dalam file: </p> <pre><code>sed  -n '/gold/{s/green/red/; p}' source.txt  &gt;pol.txt\n</code></pre> <h3 class=\"h5\"> Bagaimana itu bekerja </h3>\n\n<ul>\n<li><p> <code>-n</code> memberitahu sed untuk tidak mencetak baris kecuali kita secara eksplisit memintanya. </p></li>\n<li><p> <code>/gold/</code> memilih baris yang cocok dengan regex <code>gold</code>. </p></li>\n<li><p> <code>s/green/red/</code> melakukan substitusi </p></li>\n<li><p> <code>p</code> cetakan. </p></li>\n</ul>\n\n<h3 class=\"h5\"> Menggunakan awk </h3>\n\n<p> Dengan logika yang sama: </p> <pre><code>$ awk '/gold/{gsub(/green/, \"red\"); print}' source.txt \ngold  red white black blue\n</code></pre> <h3 class=\"h5\"> Menggunakan grep </h3>\n\n<p> Jika kita terpaksa, karena alasan yang belum dijelaskan, menggunakan pipa grep, maka coba: </p> <pre><code>$ grep -l --null \"gold\" source.txt | xargs -0 sed  -n '/gold/s/green/red/p'\ngold  red white black blue\n</code></pre>","votes":"6","source":"https://superuser.com/a/1103316","author":"<a href=\"https://superuser.com/users/277295/john1024\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">John1024</span></a>","replies":[{"reply":"terima kasih john atas masukan Anda, tetapi grep diperlukan. Grep akan digunakan sebagai penguji sebelum menyerahkan keluaran ke sed.","author":"<a href=\"https://superuser.com/users/600063/driven\" target=\"_blank\" rel=\"nofollow noopener\">Driven</a>"},{"reply":"@Driven Mengapa menurut Anda grep diperlukan sebagai penguji? sed sangat mampu melakukan tes yang sama. Kecuali jika Anda memiliki beberapa persyaratan lain yang belum dijelaskan?","author":"<a href=\"https://superuser.com/users/277295/john1024\" target=\"_blank\" rel=\"nofollow noopener\">John1024</a>"},{"reply":"Saya berencana untuk mengotomatiskan proses dengan perulangan for melalui beberapa file.","author":"<a href=\"https://superuser.com/users/600063/driven\" target=\"_blank\" rel=\"nofollow noopener\">Driven</a>"},{"reply":"Untuk memproses beberapa file, tidak perlu loop <code>for</code>. Sed dapat mengambil banyak nama file pada satu baris perintah. (Jika masih ada lebih banyak persyaratan, daripada mengungkapkan tujuan Anda sedikit demi sedikit, Anda sebaiknya menentukan semuanya sekaligus.)","author":"<a href=\"https://superuser.com/users/277295/john1024\" target=\"_blank\" rel=\"nofollow noopener\">John1024</a>"},{"reply":"@Driven Saya telah menambahkan versi dengan pipa grep.","author":"<a href=\"https://superuser.com/users/277295/john1024\" target=\"_blank\" rel=\"nofollow noopener\">John1024</a>"},{"reply":"terima kasih, John alasan utamanya adalah bahwa saya tidak terlalu baik dengan sed, sebenarnya saya selalu berusaha untuk menjauh darinya. sintaks sed terlalu menakutkan dan saya tahu bahwa dalam jangka panjang akan merepotkan jika saya perlu memperbaiki skrip","author":"<a href=\"https://superuser.com/users/600063/driven\" target=\"_blank\" rel=\"nofollow noopener\">Driven</a>"},{"reply":"@Driven Untuk menghormati itu, saya menambahkan solusi <code>awk</code>. Seperti pada <code>sed</code>, banyak nama file dapat ditempatkan pada baris perintah <code>awk</code>.","author":"<a href=\"https://superuser.com/users/277295/john1024\" target=\"_blank\" rel=\"nofollow noopener\">John1024</a>"}]},{"answer":"<p> <code>grep -l \"gold\" source.txt</code> akan menampilkan <code>source.txt</code> jika file tersebut berisi kata emas\n<code>xargs sed  's/green/red/'</code> akan menjalankan <code>sed 's/green/red/' source.txt</code> dan pengalihan terakhir menyimpan hasilnya pada keluaran Anda. </p>\n\n<p> Jika saya memahami maksud Anda dengan benar, Anda menginginkan perintah berikut: </p> <pre><code>sed -n '/gold/s/green/red/p' source.txt &gt; pol.txt\n</code></pre> <p> <code>/gold/</code> memilih baris yang cocok dengan <code>gold</code> dan perintah <code>s</code> melakukan penggantian yang Anda inginkan. </p>","votes":"1","source":"https://superuser.com/a/1103317","author":"<a href=\"https://superuser.com/users/542406/satya-mishra\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Satya Mishra</span></a>","replies":[]}]}
