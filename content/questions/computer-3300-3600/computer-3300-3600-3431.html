{"title":"Kehilangan konektivitas jaringan di Hetzner dengan jembatan Netplan","draft":false,"url":"/kehilangan-konektivitas-jaringan-di-hetzner-dengan-jembatan-netplan-be6h6hey","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["networking","ubuntu","bridge","netplan"],"snippet":"Saya menginstal Ubuntu 18.04 dan ingin memiliki antarmuka jembatan daripada menggunakan antarmuka utama secara langsung untuk virtualisasi KVM:  Berikut adalah konfigurasi default Netplan setelah instalasi, yang bekerja dengan baik:  ----# This...","body":"<p> Saya menginstal Ubuntu 18.04 dan ingin memiliki antarmuka jembatan daripada menggunakan antarmuka utama secara langsung untuk virtualisasi KVM: </p>\n\n<p> Berikut adalah konfigurasi default Netplan setelah instalasi, yang bekerja dengan baik: </p> <pre><code>----\n# This file describes the network interfaces available on your system\n# For more information, see netplan(5).\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp4s0:\n      addresses: [ 176.9.199.230/27 ]\n      gateway4: 176.9.199.225\n      nameservers:\n          addresses:\n              - \"8.8.8.8\"\n</code></pre> <p> Setelah membaca dokumentasi untuk Netplan, saya mencoba pengaturan ini untuk mode jembatan: </p> <pre><code>---\n\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp4s0:\n      dhcp4: no\n      dhcp6: no\n  bridges:\n    vmbr0:\n      dhcp4: no\n      dhcp6: no\n      interfaces: [ enp4s0 ]\n      addresses: [ 176.9.199.230/27 ]\n      gateway4: 176.9.199.225\n      nameservers:\n        addresses:\n          - \"127.0.0.1\"\n      parameters:\n        stp: false\n        forward-delay: 1\n        hello-time: 2\n        max-age: 12\n</code></pre> <p> Seperti yang Anda ketahui dari alamat IP, server dihosting di Hetzner. </p>\n\n<p> Di Ubuntu 16.04, jembatan bekerja dengan baik dengan ifupdown, tetapi sekarang Ubuntu 18.04 memiliki Netplan alih-alih ifupdown, saya perlu tahu cara mengkonfigurasi jembatan di Netplan. </p>","source":"https://superuser.com/questions/1389309/lost-network-connectivity-on-hetzner-with-netplan-bridge","author":"<a href=\"https://superuser.com/users/122243/sweb\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">sweb</span></a>","replies":[],"answers":[{"answer":"<p><a href=\"https://bugs.launchpad.net/netplan/+bug/1782221\" rel=\"nofollow noopener\" target=\"_blank\"> Alamat MAC diacak jika Anda tidak secara eksplisit mengaturnya dalam konfigurasi bridge Anda di Netplan. </a></p>\n<p> Jika saya ingat dengan benar, Hetzner membatasi alamat IP Anda yang dialokasikan ke alamat MAC server Anda, jadi Anda mungkin perlu mengatur alamat MAC jembatan ke antarmuka fisik. </p>\n<p> Untuk mendapatkan alamat MAC antarmuka fisik, jalankan perintah ini: </p> <pre><code>cat /sys/class/net/enp4s0/address\n</code></pre> <p> (Ganti <code>enp4s0</code> dengan nama antarmuka yang sesuai, jika perlu.) </p>\n<p> Di file konfigurasi Netplan Anda, tambahkan alamat MAC di bawah nama antarmuka bridge seperti: </p> <pre><code>macaddress: xx:xx:xx:xx:xx:xx\n</code></pre> <p> Untuk Anda, konfigurasi Netplan Anda akan terlihat seperti ini: </p> <pre><code>---\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    enp4s0:\n      dhcp4: no\n      dhcp6: no\n  bridges:\n    vmbr0:\n      macaddress: xx:xx:xx:xx:xx:xx\n      dhcp4: no\n      dhcp6: no\n      interfaces: [ enp4s0 ]\n      addresses: [ 176.9.199.230/27 ]\n      gateway4: 176.9.199.225\n      nameservers:\n        addresses:\n          - &quot;127.0.0.1&quot;\n      parameters:\n        stp: false\n        forward-delay: 1\n        hello-time: 2\n        max-age: 12\n</code></pre> <p> Terapkan konfigurasi dengan menghapus antarmuka yang terpengaruh (diperlukan Netplan untuk membuatnya kembali dengan alamat MAC baru) dan menjalankan Netplan: </p> <pre><code>sudo ip link delete br0\nsudo netplan apply\n</code></pre> <p> Sekarang Anda harus memiliki jembatan dengan konektivitas host yang berfungsi. </p>","votes":"6","source":"https://superuser.com/a/1389344","author":"<a href=\"https://superuser.com/users/83694/deltik\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Deltik</span></a>","replies":[{"reply":"terima kasih atas jawabannya saya akan mencobanya dan tandai sebagai benar jika berhasil.","author":"<a href=\"https://superuser.com/users/122243/sweb\" target=\"_blank\" rel=\"nofollow noopener\">sweb</a>"},{"reply":"bekerja seperti pesona","author":"<a href=\"https://superuser.com/users/122243/sweb\" target=\"_blank\" rel=\"nofollow noopener\">sweb</a>"}]}]}
