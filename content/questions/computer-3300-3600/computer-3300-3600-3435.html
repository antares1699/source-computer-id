{"title":"Sakelar jaringan virtual Hyper-V","draft":false,"url":"/sakelar-jaringan-virtual-hyper-v-e7d9fkrq","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["networking","hyper-v"],"snippet":"Jadi ini mungkin pertanyaan yang sangat mendasar dan sangat bodoh tetapi untuk kehidupan saya, saya tidak dapat menemukan penjelasan di web di mana pun tentang bagaimana ini seharusnya bekerja.  Saya memiliki pengaturan...","body":"<p> Jadi ini mungkin pertanyaan yang sangat mendasar dan sangat bodoh tetapi untuk kehidupan saya, saya tidak dapat menemukan penjelasan di web di mana pun tentang bagaimana ini seharusnya bekerja. </p>\n\n<p> Saya memiliki pengaturan Hyper-V yang sangat mendasar di mesin Windows 10 saya. Saya memiliki dua VM, satu adalah gambar Mikrotik dan yang lainnya adalah lUbuntu. Pada titik ini saya sedang mengerjakan konfigurasi jaringan paling dasar. Saya ingin Mikrotik berperilaku sebagai router dan firewall antara sistem lUbuntu dan bagian luarnya. </p>\n\n<p> Saya memiliki dua pengaturan switch jaringan virtual (VS) di Hyper-V. Pertama sakelar default (sebut saja di luar) dan kedua sakelar internal (sebut saja di dalam) yang saya buat. Kotak Mikrotik memiliki dua pengaturan VNIC yang terhubung ke dua sakelar. Ini bertindak sebagai server DHCP di VNIC yang terhubung ke Inside VNS. </p>\n\n<p> Jika saya melihat sistem Host saya (Windows 10 saya menjalankan Hyper-V), saya melihat dua sakelar virtual yang diharapkan sebagai satu vEthernet (Inside) dan satu vEthernet (Outside) NIC. </p>\n\n<p> Masalah yang saya miliki adalah bahwa (Di dalam) NIC memiliki alamat APIPA. Ketika saya mencoba untuk memperbaharui alamat menggunakan ipconfig / memperbaharui perintah waktu habis. Pada saat yang sama sistem Lubuntu yang memiliki satu VNIC yang terhubung ke (Inside) VS bekerja dengan baik dan langsung mendapatkan alamat IP dari pool yang sesuai. </p>\n\n<p> Jadi pertanyaan pertama saya adalah mengapa sistem Host tidak berperilaku seperti yang saya harapkan sehubungan dengan sakelar Virtual Hyper-V? </p>\n\n<p> Saya berasumsi dari apa yang saya baca tentang sakelar virtual Hyper-V bahwa sistem operasi Host harus melihatnya hampir sama dengan tamu. Kecuali dia tahu itu virtual, kurasa. </p>","source":"https://superuser.com/questions/1387471/hyper-v-virtual-network-switch","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">DRF</span></a>","replies":[{"reply":"Anda memerlukan sesuatu di jaringan internal yang menyediakan alamat IP. Baik IP statis pada setiap klien di jaringan ini, atau server DHCP.","author":"<a href=\"https://superuser.com/users/74026/music2myear\" target=\"_blank\" rel=\"nofollow noopener\">music2myear</a>"},{"reply":"@ music2myear Sebagai pertanyaannya menyatakan saya memiliki router Mikrotik yang di-setup sebagai DHCP-server di VNIC yang terikat ke internal VS.","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\">DRF</a>"},{"reply":"Entah itu tidak memberikan layanan yang benar, atau VM lain tidak menemukan layanan itu.","author":"<a href=\"https://superuser.com/users/74026/music2myear\" target=\"_blank\" rel=\"nofollow noopener\">music2myear</a>"},{"reply":"@ music2myear VM menemukan bahwa layanan ini baik-baik saja. VM lUbuntu mendapatkan alamat IP tidak masalah. Masalahnya ada pada OS Host bukan VM.","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\">DRF</a>"},{"reply":"Satu pertanyaan lagi: Jika tujuan sakelar Internal adalah untuk memungkinkan komunikasi antara VM dan untuk menyediakan komunikasi Lubuntu ke Mikrotik, mengapa Anda tidak memilih sakelar Pribadi? Sakelar Pribadi memungkinkan komunikasi hanya antara VM di host Anda dan terdengar seperti sakelar yang benar untuk pekerjaan itu. Sakelar Internal umumnya bertindak sebagai jembatan pada host Anda, memungkinkan VM mengakses sumber daya host, yang kedengarannya tidak seperti yang Anda coba lakukan dengan sakelar khusus itu.","author":"<a href=\"https://superuser.com/users/74026/music2myear\" target=\"_blank\" rel=\"nofollow noopener\">music2myear</a>"},{"reply":"@ music2myear Saya memahami perbedaan antara sakelar pribadi dan sakelar internal. Saya ingin dapat berkomunikasi dari Tuan Rumah kepada para tamu dan sebaliknya. Saya tidak begitu mengerti apa hubungannya dengan mengapa Host tidak melihat server DHCP di NIC itu?","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\">DRF</a>"},{"reply":"Saya memiliki pengaturan yang serupa, tetapi saya tidak menjalankan server DHCP di jaringan VM saya. Saya hanya menggunakan IP statis karena lebih sederhana dan kecil kemungkinannya menyebabkan masalah di hulu jika saya mengalami kesalahan konfigurasi. Saya telah menebak mengapa Anda mengalami hal ini, tetapi penelitian belum memberikan bukti apa pun untuk dugaan ini sejauh ini.","author":"<a href=\"https://superuser.com/users/74026/music2myear\" target=\"_blank\" rel=\"nofollow noopener\">music2myear</a>"},{"reply":"Apakah kebetulan jaringan IP Anda bekerja dari router fisik Anda (yang merupakan bentuk DHCP windows 10 Anda) bertentangan dengan yang diberikan mikrotik Anda? (mis. apakah mereka berada dalam jaringan yang sama?)","author":"<a href=\"https://superuser.com/users/206871/edo-post\" target=\"_blank\" rel=\"nofollow noopener\">Edo Post</a>"},{"reply":"Bisakah Anda juga mem-port pengaturan DHCP Anda di mirkrotik?","author":"<a href=\"https://superuser.com/users/206871/edo-post\" target=\"_blank\" rel=\"nofollow noopener\">Edo Post</a>"},{"reply":"@EdoPost Itu pertanyaan yang bagus tapi tidak. Mereka berada di subnet yang berbeda. 89 dan 88.","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\">DRF</a>"},{"reply":"@DRF Saya melihat Anda menerima jawabannya, saya rasa itu sudah diselesaikan sekarang","author":"<a href=\"https://superuser.com/users/206871/edo-post\" target=\"_blank\" rel=\"nofollow noopener\">Edo Post</a>"},{"reply":"@DoostYa. Terima kasih atas tanggapannya tetapi ternyata menjadi masalah karena meninggalkan VLAN default untuk pengaturan OS manajemen.","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\">DRF</a>"}],"answers":[{"answer":"<p><strong> Jadi kamu punya . . . </strong> </p>\n\n<ol>\n<li><p> Mesin VM Mikrotik dikonfigurasi dengan dua NIC dengan satu\nterhubung ke sakelar Hyper-V &quot;internal&quot; (di dalam) yang memiliki layanan DHCP yang berjalan di atasnya, dan yang lainnya terhubung ke sakelar Hyper-V &quot;eksternal&quot; (di luar), dll. </p></li>\n<li><p> VM lUbuntu memiliki satu NIC dan Anda menghubungkannya ke sakelar Hyper-V &quot;internal&quot; yang memiliki layanan server DHCP yang mendengarkannya dari mesin Mikrotik untuk memproses permintaan yang sesuai. </p></li>\n</ol>\n\n<h2 class=\"h4\"> Sumber Klarifikasi </h2>\n\n<p><strong> 1. Mengonfigurasi Jaringan VM pada Sakelar Hyper-V NAT </strong></p>\n\n<ul>\n<li><blockquote>\n  <p> Mesin virtual yang terhubung ke sakelar virtual NAT berada dalam file\n  domain siaran terisolasi, yang berbeda ke LAN. Sakelar NAT\n  tidak memiliki perutean 2-arah yang datar ke LAN seperti hostnya\n  terhubung dengan. Tombol virtual adalah tombol virtual internal itu\n  NAT host ke LAN. Artinya, secara default, virtual\n  mesin dapat terhubung ke LAN, tetapi LAN tidak dapat terhubung ke\n  mesin virtual. Dan bahkan jika kita membuat aturan NAT, virtual\n  switch tetap menjadi domain siaran terpisah dari LAN. </p>\n  \n  <p> Sakelar virtual agak terisolasi dari LAN, terutama dari layanan berbasis siaran seperti DHCP. Anda dapat menerapkan server DHCP Anda sendiri sebagai mesin virtual yang terhubung ke saklar virtual. Cakupan server ini terbatas pada sakelar virtual, jadi tidak ada dampak pada LAN, dan administrator jaringan seharusnya tidak memiliki masalah dengan server DHCP Anda yang digunakan pada sakelar virtual NAT. </p>\n  \n  <p><a href=\"https://www.petri.com/configuring-vm-networking-hyper-v-nat-switch\" rel=\"nofollow noopener\" target=\"_blank\"> Sumber </a></p>\n</blockquote></li>\n</ul>\n\n<p><strong> 2. Konfigurasi sakelar Hyper-V internal </strong></p>\n\n<ul>\n<li><blockquote>\n  <p><strong> Intern </strong> : Memungkinkan komunikasi antara mesin virtual di server Hyper-V yang sama, dan antara mesin virtual dan\n  sistem operasi host manajemen. </p>\n  \n  <p><a href=\"https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/get-started/create-a-virtual-switch-for-hyper-v-virtual-machines\" rel=\"nofollow noopener\" target=\"_blank\"> Sumber </a></p>\n</blockquote></li>\n</ul>\n\n<p><strong> 3. Visualisasi semua mode sakelar </strong></p>\n\n<ul>\n<li><blockquote>\n  <p><a href=\"https://i.stack.imgur.com/fID2P.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/fID2P.png\" alt=\"enter image description here\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a></p>\n  \n  <p><a href=\"https://www.altaro.com/hyper-v/the-hyper-v-virtual-switch-explained-part-1/\" rel=\"nofollow noopener\" target=\"_blank\"> Sumber </a></p>\n</blockquote></li>\n</ul>\n\n<h2 class=\"h4\"> Solusi Potensial </h2>\n\n<ol>\n<li><p> Cara saya menangani ini adalah memastikan VM yang terhubung ke sakelar internal memiliki alamat IP yang ditetapkan, dan kemudian dari server manajemen Hyper-V host, saya kemudian dapat mengakses mesin tersebut dari OS host dengan cara itu melalui alamat IP mereka. </p></li>\n<li><p> Anda mungkin bisa melihat-lihat <a href=\"https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/user-guide/setup-nat-network\" rel=\"nofollow noopener\" target=\"_blank\"> Siapkan jaringan NAT </a> , dan pastikan untuk memiliki pemahaman penuh tentang itu dan kemudian <strong> Buat jaringan virtual NAT </strong> dan konfigurasikan sesuai untuk melihat apakah ia akan melakukan apa yang Anda inginkan dengan menggunakan fungsi sakelar Hyper-V &quot;internal&quot;. </p></li>\n<li><p> Karena VM dapat berbicara dengan mesin Mikrotik, mungkin Anda dapat mengatur perutean di dalamnya dan kemudian memberi tahu VM untuk menggunakan alamat IP sakelar Hyper-V internal yang dapat diakses sebagai gateway default pada semua perangkat tersebut, dan biarkan ia melakukan perutean saat hal-hal yang perlu diakses yang tidak terhubung ke sakelar Hyper-V internal. </p></li>\n<li><p> Periksa konfigurasi VLAN Anda dan lihat <a href=\"https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v/deploy/configure-virtual-local-areal-networks-for-hyper-v\" rel=\"nofollow noopener\" target=\"_blank\"> Konfigurasi jaringan area lokal virtual untuk Hyper-V </a> seandainya sesuatu pada level ini diperlukan atau menyebabkan masalah. </p>\n\n<ul>\n<li><a href=\"https://docs.microsoft.com/en-us/windows-server/virtualization/hyper-v-virtual-switch/configure-and-view-vlan-settings-on-hyper-v-virtual-switch-ports\" rel=\"nofollow noopener\" target=\"_blank\"> Konfigurasi dan Lihat Pengaturan VLAN di Hyper-V Virtual Switch Ports </a> </li>\n</ul></li>\n<li><p> Periksa aturan firewall tingkat OS untuk pemblokiran lalu lintas yang berasal dari sakelar Hyper-V internal ke host Hyper-V atau VM yang terhubung. </p></li>\n</ol>","votes":"6","source":"https://superuser.com/a/1388187","author":"<a href=\"https://superuser.com/users/510662/drink-more-pimp-juice-it\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Drink More Pimp Juice IT</span></a>","replies":[{"reply":"Hmm menurut saya kesimpulannya salah padahal informasinya pasti menarik. Perhatikan bahwa gambar yang Anda berikan menunjukkan sakelar Internal sedang terhubung ke NIC (virtual) tertentu di OS Host. Ini tampaknya penting terutama dalam kasus di mana Anda menjalankan Hyper-V pada mesin Windows-10 (saya yakin itu disebut klien Hyper-V?) Dalam hal ini bagian pertama dari gambar itu sebenarnya salah. Atau lebih tepatnya menyesatkan karena &quot;Sakelar default&quot; bukan salah satu dari ketiganya. Ini berperilaku seperti yang dijelaskan di bagian 1.","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\">DRF</a>"},{"reply":"Itu berarti bahwa &quot;Sakelar default&quot; sebenarnya menjalankan NAT pada hal-hal yang masuk dari luar. Saya belum (belum) tahu apa artinya untuk komunikasi Host to Guest pada sakelar ini tetapi (mungkin) tidak sama dengan sakelar Eksternal di mana OS Host akan memiliki alamat IP di kumpulan yang sama dengan VM dan semua ini akan berperilaku seolah-olah mereka berada di belakang sakelar yang kemudian dihubungkan ke luar melalui kartu Jaringan Fisik.","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\">DRF</a>"},{"reply":"(Catatan Saya sebenarnya sudah tahu di mana masalah saya dengan bantuan seorang teman. Secara khusus saya mengacaukan VLAN di Host NIC. Saya memasukkan OS Host ke Vlan 2. Menonaktifkan &quot;identifikasi Vlan untuk sistem operasi manajemen&quot; memperbaiki Masalah. Dan VNIC di OS Host sekarang mendapatkan dan alamat IP dari server DHCP Mikrotik tanpa masalah. Jadi Anda benar dalam komentar Anda ada tingkat pemblokiran lain.","author":"<a href=\"https://superuser.com/users/453024/drf\" target=\"_blank\" rel=\"nofollow noopener\">DRF</a>"},{"reply":"@DRF Saya membaca kembali pernyataan itu dan saya juga setuju bahwa itu tidak benar, jadi saya menghapus konten itu dari jawabannya. Saya juga menambahkan beberapa detail dan sumber daya tambahan yang mungkin berguna berkenaan dengan hal-hal tingkat VLAN dan tingkat pemblokiran lainnya seperti firewall tingkat OS dan semacamnya.","author":"<a href=\"https://superuser.com/users/510662/drink-more-pimp-juice-it\" target=\"_blank\" rel=\"nofollow noopener\">Drink More Pimp Juice IT</a>"}]}]}
