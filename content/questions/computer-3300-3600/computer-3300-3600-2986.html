{"title":"Menggunakan wget dan meneruskan header Range secara manual","draft":false,"url":"/menggunakan-wget-dan-meneruskan-header-range-secara-manual-kvwdiubj","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["wget","range"],"snippet":"Saya ingin mengunduh berbagai file yang telah saya definisikan secara eksplisit. Sejauh yang aku tahu:  wget --header=\"Range: bytes=1024-2048\" http://www.example.com/file.tmp  harus berjalan dengan baik. Namun, gagal melakukannya dengan kesalahan berikut saat mode debug...","body":"<p> Saya ingin mengunduh berbagai file yang telah saya definisikan secara eksplisit. Sejauh yang aku tahu: </p>\n\n<p> <code>wget --header=\"Range: bytes=1024-2048\" http://www.example.com/file.tmp</code> </p>\n\n<p> harus berjalan dengan baik. Namun, gagal melakukannya dengan kesalahan berikut saat mode debug aktif, </p> <pre><code>Registered socket 300 for persistent reuse.\nDisabling further reuse of socket 300.\nClosed fd 300\n</code></pre> <p> Mengapa ia bahkan memberikan kesalahan itu dan mencoba lagi dan bagaimana saya bisa memperbaikinya? </p>\n\n<p> Berikut ini adalah log lengkap sebenarnya dari proses tersebut. </p>\n\n<h2 class=\"h4\"> Unduhan yang dapat dilanjutkan secara manual </h2> <pre><code>SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc\nsyswgetrc = C:\\Program Files (x86)\\GnuWin32/etc/wgetrc\nSetting --server-response (serverresponse) to 1\nSetting --page-requisites (pagerequisites) to 1\nSetting --recursive (recursive) to 1\nSetting --tries (tries) to 1\nSetting --header (header) to Range: bytes=10024-\nDEBUG output created by Wget 1.11.4 on Windows-MinGW.\n\nEnqueuing http://www.example.com/file.tmp at depth 0\nQueue count 1, maxcount 1.\nDequeuing http://www.example.com/file.tmp at depth 0\nQueue count 0, maxcount 1.\n--2012-01-11 07:02:46--  http:/www.example.com/file.tmp\nwww.example.com çözümleniyor... seconds 0,00, 127.0.0.1\nCaching www.example.com =&gt; 127.0.0.1\nwww.example.com[127.0.0.1]:80 bağlanılıyor... seconds 0,00, bağlantı\nkuruldu.\nCreated socket 300.\nReleasing 0x0036a108 (new refcount 1).\n\n---request begin---\nGET /file.tmp HTTP/1.0\nUser-Agent: Wget/1.11.4\nAccept: */*\nHost: www.example.com\nConnection: Keep-Alive\nRange: bytes=10024-\n\n---request end---\nHTTP isteği gönderildi, yanıt bekleniyor...\n---response begin---\nHTTP/1.1 206 Partial Content\nServer: nginx/0.7.65\nDate: Wed, 11 Jan 2012 05:03:57 GMT\nContent-Type: application/vnd.ms-powerpoint\nContent-Length: 37651672\nLast-Modified: Tue, 01 Nov 2011 21:18:50 GMT\nConnection: keep-alive\nExpires: Thu, 31 Dec 2037 23:55:55 GMT\nCache-Control: max-age=315360000\nContent-Range: bytes 10024-37661695/37661696\n\n---response end---\n\n  HTTP/1.1 206 Partial Content\n  Server: nginx/0.7.65\n  Date: Wed, 11 Jan 2012 05:03:57 GMT\n  Content-Type: application/vnd.ms-powerpoint\n  Content-Length: 37651672\n  Last-Modified: Tue, 01 Nov 2011 21:18:50 GMT\n  Connection: keep-alive\n  Expires: Thu, 31 Dec 2037 23:55:55 GMT\n  Cache-Control: max-age=315360000\n  Content-Range: bytes 10024-37661695/37661696\n  Registered socket 300 for persistent reuse.\n  Disabling further reuse of socket 300.\n  Closed fd 300\n  Vazgeçiliyor.\n</code></pre> <h2 class=\"h4\"> Wget mendukung unduhan yang dapat dilanjutkan (perintah: -c) </h2> <pre><code>SYSTEM_WGETRC = c:/progra~1/wget/etc/wgetrc\nsyswgetrc = C:\\Program Files (x86)\\GnuWin32/etc/wgetrc\nSetting --server-response (serverresponse) to 1\nSetting --continue (continue) to 1\nSetting --http-keep-alive (httpkeepalive) to 1\nDEBUG output created by Wget 1.11.4 on Windows-MinGW.\n\n--2012-01-11 07:12:51--  http://www.example.com/file.tmp\nwww.example.com çözümleniyor... seconds 0,00, 127.0.0.1\nCaching www.example.com =&gt; 127.0.0.1\nwww.example.com[127.0.0.1]:80 bağlanılıyor... seconds 0,00, bağlantı\nkuruldu.\nCreated socket 300.\nReleasing 0x0003a0b0 (new refcount 1).\n\n---request begin---\nGET /file.tmp HTTP/1.0\nRange: bytes=557172-\nUser-Agent: Wget/1.11.4\nAccept: */*\nHost: www.example.com\nConnection: Keep-Alive\n\n---request end---\nHTTP isteği gönderildi, yanıt bekleniyor...\n---response begin---\nHTTP/1.1 206 Partial Content\nServer: nginx/0.7.65\nDate: Wed, 11 Jan 2012 05:14:01 GMT\nContent-Type: application/vnd.ms-powerpoint\nContent-Length: 37104524\nLast-Modified: Tue, 01 Nov 2011 21:18:50 GMT\nConnection: keep-alive\nExpires: Thu, 31 Dec 2037 23:55:55 GMT\nCache-Control: max-age=315360000\nContent-Range: bytes 557172-37661695/37661696\n\n---response end---\n\n  HTTP/1.1 206 Partial Content\n  Server: nginx/0.7.65\n  Date: Wed, 11 Jan 2012 05:14:01 GMT\n  Content-Type: application/vnd.ms-powerpoint\n  Content-Length: 37104524\n  Last-Modified: Tue, 01 Nov 2011 21:18:50 GMT\n  Connection: keep-alive\n  Expires: Thu, 31 Dec 2037 23:55:55 GMT\n  Cache-Control: max-age=315360000\n  Content-Range: bytes 557172-37661695/37661696\nRegistered socket 300 for persistent reuse.\nUzunluk: 37661696 (36M), 37104524 (35M) kalan [application/vnd.ms-powerpoint]\nSaving to: `file.tmp'\n\n 1% [                                       ] 622.314      149K/s              ^\n</code></pre>","source":"https://superuser.com/questions/377142/using-wget-and-manually-passing-range-header","author":"<a href=\"https://superuser.com/users/93184/umur-kontac%c4%b1\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Umur Kontacı</span></a>","replies":[{"reply":"Log mengatakan <code>10024-</code> sedangkan perintah Anda adalah <code>1024-2048</code> untuk rentang - apakah itu yang terjadi atau adakah kesalahan ketik?","author":"<a href=\"https://superuser.com/users/89018/paul\" target=\"_blank\" rel=\"nofollow noopener\">Paul</a>"},{"reply":"Sudahkah Anda memeriksa apakah server yang digunakan mendukung permintaan rentang byte sama sekali?","author":"<a href=\"https://superuser.com/users/62676/robert\" target=\"_blank\" rel=\"nofollow noopener\">Robert</a>"},{"reply":"@Robert tentu saja. jika Anda melihat log dari prosedur unduhan berkelanjutan normal, Anda dapat melihatnya.","author":"<a href=\"https://superuser.com/users/93184/umur-kontac%c4%b1\" target=\"_blank\" rel=\"nofollow noopener\">Umur Kontac&#x131;</a>"},{"reply":"@Paul, saya telah mengubah perintah yang saya tulis di sini; sebenarnya adalah <code>10024-</code>, namun saya telah mencoba banyak rentang, saya kira masalahnya ada di tempat lain","author":"<a href=\"https://superuser.com/users/93184/umur-kontac%c4%b1\" target=\"_blank\" rel=\"nofollow noopener\">Umur Kontac&#x131;</a>"},{"reply":"Mengapa wget menyetel protokol HTTP ke 1.0 (bukan 1.1) untuk permintaan rentang?","author":"User"}],"answers":[{"answer":"<p> Bergantung pada bagaimana Anda melihatnya, ini adalah bug atau fitur yang hilang. </p>\n\n<p> Header yang ditentukan dengan <code>--header</code> hanya dikirim oleh Wget, tetapi tidak dapat diinterpretasikan. </p>\n\n<p> Di <code>src/http.c</code> dari tarball Wget 1.13.4, ada pemeriksaan kewarasan untuk sebagian konten: </p> <pre><code>  if ((contrange != 0 &amp;&amp; contrange != hs-&gt;restval)\n      || (H_PARTIAL (statcode) &amp;&amp; !contrange))\n    {\n      /* The Range request was somehow misunderstood by the server.\n         Bail out.  */\n      xfree_null (type);\n      CLOSE_INVALIDATE (sock);\n      xfree (head);\n      return RANGEERR;\n    }\n</code></pre> <p> Kondisi <code>if</code> mencakup dua kasus: </p>\n\n<ul>\n<li><p> Jika ada kumpulan rentang konten, itu harus sesuai dengan jumlah bit yang hilang dari file yang sedang diunduh. </p></li>\n<li><p> Jika sebagian konten sedang dikirim, kisaran konten harus ditentukan oleh server. </p></li>\n</ul>\n\n<p> Kasus kedua tidak menimbulkan masalah, karena Wget menafsirkan respons server dengan baik. Namun, yang pertama melakukannya, karena Wget tidak menafsirkan rentang yang ditentukan klien. </p>\n\n<p> Untuk mengatasi masalah ini, jika Anda ingin mengkompilasi versi Wget Anda sendiri, Anda dapat mengubah kode sumber di atas menjadi berikut: </p> <pre><code>  if (H_PARTIAL (statcode) &amp;&amp; !contrange)\n  {\n      xfree_null (type);\n      CLOSE_INVALIDATE (sock);\n      xfree (head);\n      return RANGEERR;\n  }\n  if (contrange != 0 &amp;&amp; contrange != hs-&gt;restval)\n    hs-&gt;restval = contrange;\n</code></pre> <p> Sekarang, Wget akan mengurangi jumlah bit file yang hilang dari rentang konten. </p>\n\n<p> Anda juga bisa memberi <a href=\"http://curl.haxx.se/\" rel=\"nofollow noopener\" target=\"_blank\"> keriting </a> mencoba. Ini memiliki saklar <code>--range</code> built-in. </p>","votes":"7","source":"https://superuser.com/a/496699","author":"<a href=\"https://superuser.com/users/101836/dennis\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Dennis</span></a>","replies":[{"reply":"butuh waktu untuk memikirkan jawaban Anda. Saya belum benar-benar menyusun versi saya untuk itu tetapi masuk akal. cURL sudah menanganinya dengan lebih baik. Terima kasih.","author":"<a href=\"https://superuser.com/users/93184/umur-kontac%c4%b1\" target=\"_blank\" rel=\"nofollow noopener\">Umur Kontac&#x131;</a>"},{"reply":"Terima kasih telah mengarahkan saya ke cURL! Saya benar-benar lupa tentang itu, bekerja seperti pesona! Switch yang dimaksud adalah <code>--continue-at &lt;offset&gt;</code>. Cheers!","author":"<a href=\"https://superuser.com/users/38341/mr-b\" target=\"_blank\" rel=\"nofollow noopener\">mr.b</a>"}]}]}
