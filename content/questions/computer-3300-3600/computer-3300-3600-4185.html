{"title":"Konfigurasi waktu tidak bertahan selama reboot","draft":false,"url":"/konfigurasi-waktu-tidak-bertahan-selama-reboot-lmzyli1c","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["time","arch-linux","ntp","time-zone"],"snippet":"Saya menggunakan ArchLinux dan saya memiliki masalah dengan waktu sistem saya selama berbulan-bulan.  Sebelumnya ini berfungsi, tetapi setelah saya memperbarui PC saya, waktu sistem bergeser di setiap startup (seperti tidak mendeteksi zona...","body":"<p> Saya menggunakan ArchLinux dan saya memiliki masalah dengan waktu sistem saya selama berbulan-bulan. </p>\n\n<p> Sebelumnya ini berfungsi, tetapi setelah saya memperbarui PC saya, waktu sistem bergeser di setiap startup (seperti tidak mendeteksi zona waktu, sedangkan zona waktu di rc.conf sudah dan benar). </p>\n\n<p> Lalu saya menambahkan hwclock dan itu sama, dan menghapusnya. Jika saya ingat dengan benar, ini sepertinya telah menyelesaikan masalah. </p>\n\n<p> Ketika waktu Daylight Saving berubah di negara saya, Waktu bergeser 1 jam pada setiap startup (tidak peduli berapa kali saya mengatur waktu sistem secara manual atau dengan ntpdate). </p>\n\n<p> Saya kembali mencoba untuk memperbaikinya, dan sekarang ada banyak jam shift seperti sebelumnya (Nilai pergeserannya adalah perbedaan UTC dan waktu lokal). Dan sekarang, sepertinya waktu sistem saya tidak dapat diubah. Saya mengatur waktu dengan <code>date -s ...</code> dan <code>ntpdate pool.ntp.org</code> misalnya ... tetapi langkah-langkah ini tampaknya tidak bertahan setelah reboot. Saya mencobanya dengan daemon hwclock berjalan, ntpd berjalan, dan tidak satupun dari mereka berjalan di DAEMONS. Saya sangat bingung tentang ini. </p>\n\n<p> Saya tidak terlalu banyak menggunakan windows. Dan saya tahu mem-boot windows dapat menyebabkan masalah di linux dengan sistem waktu. Tapi itu bukan masalahku. Setiap kali saya mem-boot windows dan linux, saya dapat mengatur ulang waktu sistem dengan tangan atau perintah ntpdate. Jadi Anda bisa mengira saya tidak memiliki jendela di komputer saya. </p>\n\n<p> Saya hanya ingin waktu sistem saya berfungsi dan tidak berubah secara otomatis (melalui ntp atau sesuatu), cukup atur secara manual (dengan tangan, atau perintah ntpdate) saat saya mau. Tolong bantu. </p>\n\n<p> Ini rc.conf saya </p> <pre><code>#\n# /etc/rc.conf - Main Configuration for Arch Linux\n#\n\n# -----------------------------------------------------------------------\n# LOCALIZATION\n# -----------------------------------------------------------------------\n#\n# LOCALE: available languages can be listed with the 'locale -a' command\n# DAEMON_LOCALE: If set to 'yes', use $LOCALE as the locale during daemon\n# startup and during the boot process. If set to 'no', the C locale is used.\n# HARDWARECLOCK: set to \"\", \"UTC\" or \"localtime\", any other value will result\n#   in the hardware clock being left untouched (useful for virtualization)\n#   Note: Using \"localtime\" is discouraged, using \"\" makes hwclock fall back\n#   to the value in /var/lib/hwclock/adjfile\n# TIMEZONE: timezones are found in /usr/share/zoneinfo\n#   Note: if unset, the value in /etc/localtime is used unchanged\n# KEYMAP: keymaps are found in /usr/share/kbd/keymaps\n# CONSOLEFONT: found in /usr/share/kbd/consolefonts (only needed for non-US)\n# CONSOLEMAP: found in /usr/share/kbd/consoletrans\n# USECOLOR: use ANSI color sequences in startup messages\n#\nLOCALE=\"en_US.UTF-8\"\nDAEMON_LOCALE=\"no\"\nHARDWARECLOCK=\"UTC\"\nTIMEZONE=\"Asia/Tehran\"\nKEYMAP=\"us\"\nCONSOLEFONT=\nCONSOLEMAP=\nUSECOLOR=\"yes\"\n\n# -----------------------------------------------------------------------\n# HARDWARE\n# -----------------------------------------------------------------------\n#\n# MODULES: Modules to load at boot-up. Blacklisting is no longer supported.\n#   Replace every !module by an entry as on the following line in a file in\n#   /etc/modprobe.d:\n#     blacklist module\n#   See \"man modprobe.conf\" for details.\n#\nMODULES=(wl vboxdrv)\n\n# Udev settle timeout (default to 30)\nUDEV_TIMEOUT=30\n\n# Scan for FakeRAID (dmraid) Volumes at startup\nUSEDMRAID=\"no\"\n\n# Scan for BTRFS volumes at startup\nUSEBTRFS=\"no\"\n\n# Scan for LVM volume groups at startup, required if you use LVM\nUSELVM=\"no\"\n\n# -----------------------------------------------------------------------\n# NETWORKING\n# -----------------------------------------------------------------------\n#\n# HOSTNAME: Hostname of machine. Should also be put in /etc/hosts\n#\nHOSTNAME=\"ilius-vostro3300\"\n\n# Use 'ip addr' or 'ls /sys/class/net/' to see all available interfaces.\n#\n# Wired network setup\n#   - interface: name of device (required)\n#   - address: IP address (leave blank for DHCP)\n#   - netmask: subnet mask (ignored for DHCP) (optional, defaults to 255.255.255.0)\n#   - broadcast: broadcast address (ignored for DHCP) (optional)\n#   - gateway: default route (ignored for DHCP)\n# \n# Static IP example\n# interface=eth0\n# address=192.168.0.2\n# netmask=255.255.255.0\n# broadcast=192.168.0.255\n# gateway=192.168.0.1\n#\n# DHCP example\n# interface=eth0\n# address=\n# netmask=\n# gateway=\n\ninterface=\naddress=\nnetmask=\nbroadcast=\ngateway=\n\n# Setting this to \"yes\" will skip network shutdown.\n# This is required if your root device is on NFS.\nNETWORK_PERSIST=\"no\"\n\n# Enable these netcfg profiles at boot-up. These are useful if you happen to\n# need more advanced network features than the simple network service\n# supports, such as multiple network configurations (ie, laptop users)\n#   - set to 'menu' to present a menu during boot-up (dialog package required)\n#   - prefix an entry with a ! to disable it\n#\n# Network profiles are found in /etc/network.d\n#\n# This requires the netcfg package\n#\n#NETWORKS=(main)\n\n# -----------------------------------------------------------------------\n# DAEMONS\n# -----------------------------------------------------------------------\n#\n# Daemons to start at boot-up (in this order)\n#   - prefix a daemon with a ! to disable it\n#   - prefix a daemon with a @ to start it up in the background\n#\n# If something other takes care of your hardware clock (ntpd, dual-boot...)\n# you should disable 'hwclock' here.\n#\nDAEMONS=(syslog-ng dbus wicd)\n\n## REMOVED: netfs network crond hwclock \n## ADDED: dbus networkmanager sshd nfs-common bluetooth samba httpd postgresql IBSng starcal2d wicd\n</code></pre>","source":"https://superuser.com/questions/339953/time-configuration-does-not-persist-through-reboots","author":"<a href=\"https://superuser.com/users/76973/saeedgnu\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">saeedgnu</span></a>","replies":[],"answers":[{"answer":"<p> Ilius, saya rasa saya pernah menemukan masalah ini sebelumnya. </p>\n\n<ol>\n<li> Pertama, coba setel waktu sistem dengan benar. (ntp / apapun) </li>\n<li> Kemudian, jalankan <code>hwclock --systohc</code> </li>\n</ol>\n\n<p> Ini harus mengatur ulang jam Anda ke waktu sistem, dan harus terus-menerus selama reboot. </p>\n\n<p> maukah Anda memberi tahu kami jika berhasil? </p>","votes":"4","source":"https://superuser.com/a/339961","author":"<a href=\"https://superuser.com/users/25890/brice\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">brice</span></a>","replies":[{"reply":"Tetapi bekerja dengan memiliki hwclock di DAEMONS dan tidak memiliki. Bisakah Anda menjelaskan kepada saya apa yang sebenarnya dilakukan hwclock?","author":"<a href=\"https://superuser.com/users/76973/saeedgnu\" target=\"_blank\" rel=\"nofollow noopener\">saeedgnu</a>"},{"reply":"hwclock bukanlah sebuah daemon. Ini adalah utilitas yang menulis ke register jam perangkat keras (menurut saya) pada prosesor / motherboard Anda. Register ini terus berdetak dengan tombol baterai saat Anda mematikan komputer Anda. Coba <code>man hwclock</code> untuk mengetahui lebih lanjut.","author":"<a href=\"https://superuser.com/users/25890/brice\" target=\"_blank\" rel=\"nofollow noopener\">brice</a>"}]},{"answer":"<p><strong> KELUAR </strong></p>\n\n<p> Solusi berikut layak untuk instalasi Arch Linux yang lebih lama dan pra-sistem. Saya tinggalkan di sini untuk referensi sejarah. </p>\n\n<p><strong> KELUAR </strong></p>\n\n<p> Anda memiliki HARDWARECLOCK yang disetel ke UTC di rc.conf Anda. Saya pikir itu pelakunya. Jika Anda berada dalam situasi dual boot dengan windows, Anda harus mengaturnya ke &quot;localtime&quot; (lihat dokumen instalasi archs IIRC). </p>\n\n<p> Penyebab lain dari masalah Anda adalah skrip startup yang kacau karena arch harus menjalankan &quot;--hctosys&quot; dan &quot;--systohc&quot; selama startup / shutdown. </p>\n\n<p> Di linux Anda harus membedakan antara jam sistem (sebut saja SC) dan jam perangkat keras (HC). Mereka terpisah tetapi saling berhubungan. Waktu di SC (waktu nyata) dihitung dengan mengetahui bagaimana HC diatur (waktu lokal atau UTC) dan zona waktu sistem apa. Di windows tidak ada perhitungan - nilai HC adalah nilai SC. Jadi, jika UTC berbeda dengan waktu lokal Anda, linux diatur untuk memperlakukan HC sebagai UTC dan linux SC menunjukkan waktu yang tepat, jendela akan menampilkan sampah. Jika, sebaliknya, waktu windows diatur dengan benar dan linux memperlakukan HC sebagai UTC maka SC linux menunjukkan waktu &quot;bergeser&quot;. Solusinya adalah membuat linux memperlakukan HC sebagai waktu lokal (HARDWARECLOCK = &quot;localtime&quot;). </p>","votes":"2","source":"https://superuser.com/a/359351","author":"<a href=\"https://superuser.com/users/88084/thebodzio\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">thebodzio</span></a>","replies":[]}]}
