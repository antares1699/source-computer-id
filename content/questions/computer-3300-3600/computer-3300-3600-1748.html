{"title":"Dapatkan nomor versi ffmpeg","draft":false,"url":"/dapatkan-nomor-versi-ffmpeg-uoqgbvwq","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["ffmpeg"],"snippet":"Saya mencoba mendapatkan nomor versi dari ffmpeg dengan cara yang andal, mudah-mudahan tanpa mengurai string.  Saya dapat mengurai output ffmpeg -version, namun saya tidak melihat jaminan bahwa string tidak akan berubah dalam...","body":"<p> Saya mencoba mendapatkan nomor versi dari ffmpeg dengan cara yang andal, mudah-mudahan tanpa mengurai string. </p>\n<p> Saya dapat mengurai output <code>ffmpeg -version</code>, namun saya tidak melihat jaminan bahwa string tidak akan berubah dalam waktu dekat. </p> <pre><code>$ ffmpeg -version\nffmpeg version 4.3.1 Copyright (c) 2000-2020 the FFmpeg developers\n[...]\n</code></pre> <p> Saya tertarik dengan cara yang sedikit lebih terprogram untuk mendapatkan nomor versi, seperti mungkin memberi tahu ffmpeg untuk mengeluarkan JSON atau hanya nomor versi tanpa saya harus mengekstraknya dari badan teks. </p>","source":"https://superuser.com/questions/1609806/get-ffmpeg-version-number","author":"<a href=\"https://superuser.com/users/37156/evilsnobu\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">evilSnobu</span></a>","replies":[],"answers":[{"answer":"<p> Jika Anda memiliki alat <code>ffprobe</code> pendamping, Anda dapat menjalankan </p> <pre><code>ffprobe -v 0 -of default=nw=1:nk=1 -show_program_version | head -1\n</code></pre> <p> yang hanya akan mencetak string versi. </p>\n<p> misalnya, </p> <pre><code>N-100221-g18befac5da\n</code></pre> <p> Anda juga dapat mengeluarkan JSON. </p> <pre><code>ffprobe -v 0 -of json\n</code></pre> <p> memberi </p> <pre><code>{\n    &quot;program_version&quot;: {\n        &quot;version&quot;: &quot;N-100221-g18befac5da&quot;,\n        ...\n    }\n}\n</code></pre> <p> Biner <code>ffmpeg</code> itu sendiri tidak menyediakan keluaran ini. </p>\n<p> Perhatikan bahwa format dan komposisi string versi dapat bervariasi - tidak terstandarisasi dan dapat memiliki string khusus yang ditambahkan oleh pembuatnya. Tetapi secara umum, git build akan memiliki hash commit (dengan atau tanpa awalan <code>g</code>) dan rilis build akan memiliki urutan bentuk <code>x.y.z</code>. Lihat build Windows saya untuk beberapa contoh bentuk lain - saya menyertakan komit kencan juga. </p>\n<p> Hitungan <code>N</code> dalam contoh saya di atas adalah hitungan komit dari cabang master dari saat biner dibangun. </p>","votes":"5","source":"https://superuser.com/a/1609819","author":"<a href=\"https://superuser.com/users/114058/gyan\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Gyan</span></a>","replies":[{"reply":"Terima kasih untuk ini, tetapi saya tidak bisa berasumsi ffprobe akan ada bersama ffmpeg dan versinya akan sama. Paling-paling ini spekulatif.","author":"<a href=\"https://superuser.com/users/37156/evilsnobu\" target=\"_blank\" rel=\"nofollow noopener\">evilSnobu</a>"},{"reply":"Anda kurang beruntung karena ffmpeg tidak memancarkan string versi mandiri. Tidak biasa jika ffprobe berasal dari build yang berbeda.","author":"<a href=\"https://superuser.com/users/114058/gyan\" target=\"_blank\" rel=\"nofollow noopener\">Gyan</a>"},{"reply":"Itu adalah apa adanya. Terima kasih atas jawaban Anda, pendekatan Anda mungkin adalah presisi terbaik yang bisa Anda dapatkan saat ini.","author":"<a href=\"https://superuser.com/users/37156/evilsnobu\" target=\"_blank\" rel=\"nofollow noopener\">evilSnobu</a>"}]},{"answer":"<p> Berdasarkan <a href=\"https://stackoverflow.com/a/54364073/117259\" target=\"_blank\" rel=\"nofollow noopener\"> jawaban Stack Overflow ini </a> , ini seharusnya berhasil: </p> <pre><code>ffmpeg -version | sed -n &quot;s/ffmpeg version \\([-0-9.]*\\).*/\\1/p;&quot;\n</code></pre> <p> Diuji di FFmpeg seperti yang diinstal melalui Homebrew di macOS dan saya mendapatkan output berikut: </p> <pre><code>4.3.1\n</code></pre> <hr>\n<p> Dan setelah meninjau umpan balik bermanfaat yang tersisa di komentar di bawah, saya pikir ini mungkin solusi yang lebih baik di masa depan: </p> <pre><code>ffmpeg -version | awk -F 'ffmpeg version' '{print $2}' | awk 'NR==1{print $1}'\n</code></pre> <p> Alasannya adalah perintah Sed di atas terutama mencari nomor versi <code>major</code>.<code>minor</code>.<code>patch</code> dan itu akan mengecualikan nomor versi non-tradisional seperti format pembangunan malam <code>N-100221-g18befac5da</code> dan semacamnya. </p>\n<p> Ini dapat diuji dengan menjalankan perintah ini yang menghasilkan <code>4.3.1</code>: </p> <pre><code>echo 'ffmpeg version 4.3.1 Copyright (c) 2000-2020 the FFmpeg developers' | awk -F 'ffmpeg version' '{print $2}' | awk 'NR==1{print $1}'\n</code></pre> <p> Dan perintah ini yang berhubungan dengan &quot;angka&quot; membangun malam itu; itu akan menghasilkan <code>N-100221-g18befac5da</code>: </p> <pre><code>echo 'ffmpeg version N-100221-g18befac5da Copyright (c) 2000-2020 the FFmpeg developers' | awk -F 'ffmpeg version' '{print $2}' | awk 'NR==1{print $1}'\n</code></pre> <p> Jadi sampai FFmpeg memungkinkan untuk keluaran bersih dari nomor versi langsung dari biner itu sendiri, beberapa baris perintah scraping tampaknya menjadi cara terbaik untuk pergiâ€¦ Untuk saat ini! </p>","votes":"3","source":"https://superuser.com/a/1609820","author":"<a href=\"https://superuser.com/users/167207/giacomo1968\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Giacomo1968</span></a>","replies":[{"reply":"Tapi saya secara eksplisit meminta untuk tidak mengurai string yang mungkin berubah di masa depan.","author":"<a href=\"https://superuser.com/users/37156/evilsnobu\" target=\"_blank\" rel=\"nofollow noopener\">evilSnobu</a>"},{"reply":"@eviloby Cukup adil. Namun menurut pengalaman saya dengan alat baris perintah, hal-hal seperti pemformatan keluaran nomor versi dasar jarang berubah. Pilihan Anda, tetapi ini adalah metode yang digunakan banyak orang untuk banyak alat; bukan hanya FFmpeg.","author":"<a href=\"https://superuser.com/users/167207/giacomo1968\" target=\"_blank\" rel=\"nofollow noopener\">Giacomo1968</a>"},{"reply":"Juga ini tidak akan cocok dengan bangunan malam hari seperti <code>N-100221-g18befac5da</code>. Tidak mencoba meremehkan, saya menghargai jawaban Anda tetapi harapan bukanlah strategi yang sebenarnya.","author":"<a href=\"https://superuser.com/users/37156/evilsnobu\" target=\"_blank\" rel=\"nofollow noopener\">evilSnobu</a>"},{"reply":"<code>awk</code> akan lebih baik daripada <code>sed</code> di sini dan akan mendapatkan build &quot;nightly&quot; juga.","author":"<a href=\"https://superuser.com/users/110524/llogan\" target=\"_blank\" rel=\"nofollow noopener\">llogan</a>"},{"reply":"Kritik di sini cukup membantu. Meskipun saya secara teratur menggunakan FFmpeg untuk tujuan dasar, saya tidak mengetahui bagaimana penomoran versi nightly build berbeda dari format dasar / numerik <code>major</code>.<code>minor</code>.<code>patch</code> yang biasa digunakan. Jadi mengambil petunjuk dari @llogan, saya telah menemukan metode berbasis Awk baru yang seharusnya berfungsi. Dan poster aslinya 100% benar; ini semua tampaknya sedikit banyak untuk mendapatkan info dasar seperti itu. Mungkin membuka tiket dengan tim pengembangan FFmpeg meminta sesuatu yang lebih langsung untuk mengekstrak nomor versi akan beres? Bagaimanapun, semoga ini membantu dalam beberapa cara!","author":"<a href=\"https://superuser.com/users/167207/giacomo1968\" target=\"_blank\" rel=\"nofollow noopener\">Giacomo1968</a>"}]}]}
