{"title":"Buka konsole baru dari skrip, jalankan perintah dan jadilah interaktif pada kesimpulan","draft":false,"url":"/buka-konsole-baru-dari-skrip-jalankan-perintah-dan-jadilah-interaktif-pada-kesimpulan-kwvdx98w","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["bash","automation","konsole","interactive"],"snippet":"Saya ingin mendapatkan skrip (dijalankan saat startup) untuk membuka terminal konsole.  Ketika membukanya adalah untuk melakukan beberapa hal yang terus-menerus (seperti mengubah direktori dan sumber bashrc) dan menjalankan program yang berjalan lama....","body":"<p> Saya ingin mendapatkan skrip (dijalankan saat startup) untuk membuka terminal <code>konsole</code>. <br> Ketika membukanya adalah untuk melakukan beberapa hal yang terus-menerus (seperti mengubah direktori dan sumber bashrc) dan menjalankan program yang berjalan lama. <br> Jika program macet atau saya masuk dan <code>&lt;ctrl+c&gt;</code>, itu adalah untuk mulai menerima perintah dari input standar (seperti &#39;up-enter&#39; untuk mencoba lagi, seolah-olah itu interaktif sepanjang waktu). </p>\n\n<p> Saya telah mencoba begitu banyak hal untuk membuatnya bekerja (saat ini saya hanya mencoba untuk membuatnya <code>ls</code> dan kembali ke interaktif setelah selesai); </p> <pre><code>konsole -e ls\nkonsole --hold ls\nkonsole -e /bin/bash -c ls\nkonsole --hold -e \"/bin/bash -c ls\"\nkonsole -e \"/bin/bash -i -c ls\"\nkonsole -e /bin/bash -i -c ls\nkonsole -e \"echo ls &gt; /tmp/konsolebash;/bin/bash -i --rcfile /tmp/konsolebash\"\n\necho ls &gt; /tmp/konsolebash\nkonsole -e \"/bin/bash -i --rcfile /tmp/konsolebash\"\n</code></pre> <p> Apakah ada hubungannya dengan kutipan? Haruskah saya tidak menggunakannya, haruskah saya melarikan diri dari sesuatu? <br> Apakah saya bermaksud untuk mencoba dan mengeksekusi <code>konsole -e ls\nkonsole --hold ls\nkonsole -e /bin/bash -c ls\nkonsole --hold -e \"/bin/bash -c ls\"\nkonsole -e \"/bin/bash -i -c ls\"\nkonsole -e /bin/bash -i -c ls\nkonsole -e \"echo ls &gt; /tmp/konsolebash;/bin/bash -i --rcfile /tmp/konsolebash\"\n\necho ls &gt; /tmp/konsolebash\nkonsole -e \"/bin/bash -i --rcfile /tmp/konsolebash\"\n</code>? <br> Saya kehabisan ide tapi saya harap itu bisa dicapai (tapi mudah-mudahan bukan sesuatu yang sangat sederhana yang saya lewatkan). </p>\n\n<p> Saya akan memberi suara positif pada jawaban yang berhasil menggunakan emulator terminal lain jika <code>konsole</code> khususnya masalahnya (tetapi karena pertanyaannya secara khusus tentang <code>konsole</code> saya rasa saya tidak dapat memberi Anda centang yang menarik) </p>","source":"https://superuser.com/questions/682850/open-new-konsole-from-script-executing-command-and-becoming-interactive-on-conc","author":"<a href=\"https://superuser.com/users/241800/hashbrown\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Hashbrown</span></a>","replies":[{"reply":"Dua baris terakhir terlihat menjanjikan. Sudahkah Anda mencobanya tanpa keluar dari kutipan sekitar <code>source ... ls</code>?","author":"<a href=\"https://superuser.com/users/176100/n-st\" target=\"_blank\" rel=\"nofollow noopener\">n.st</a>"},{"reply":"maaf itu adalah kesalahan salin tempel dari menulis pertanyaan","author":"<a href=\"https://superuser.com/users/241800/hashbrown\" target=\"_blank\" rel=\"nofollow noopener\">Hashbrown</a>"},{"reply":"Dan itu tidak berhasil? Aneh ... Sebenarnya apa <i> melakukan </i> itu lakukan?","author":"<a href=\"https://superuser.com/users/176100/n-st\" target=\"_blank\" rel=\"nofollow noopener\">n.st</a>"},{"reply":"ya itu hanya menampilkan shell interaktif normal (tidak ada perintah yang terlihat dijalankan, hanya prompt yang ditampilkan). Tampaknya menerima argumen, atau menjadi interaktif, tidak pernah keduanya.","author":"<a href=\"https://superuser.com/users/241800/hashbrown\" target=\"_blank\" rel=\"nofollow noopener\">Hashbrown</a>"},{"reply":"Jika tidak ada yang berhasil, Anda dapat menggunakan <code>konsole -e &quot;bash -c &#39;ls&#39;; bash&quot;</code> - yang benar-benar jelek, tetapi harus meninggalkan Anda dengan shell interaktif ketika <code>ls</code> berakhir.","author":"<a href=\"https://superuser.com/users/176100/n-st\" target=\"_blank\" rel=\"nofollow noopener\">n.st</a>"},{"reply":"tetapi itu akan melupakan semua <code>cd</code> dan riwayat perintah (istirahat <code>up-enter</code>). Mungkin juga tidak membuatnya interaktif dan membuka dua cangkang","author":"<a href=\"https://superuser.com/users/241800/hashbrown\" target=\"_blank\" rel=\"nofollow noopener\">Hashbrown</a>"},{"reply":"Karena kami sudah melakukan hal-hal buruk: <code>ls; echo &#39;ls&#39; &gt;&gt; $HOME&#47;.bash_history; bash</code>","author":"<a href=\"https://superuser.com/users/176100/n-st\" target=\"_blank\" rel=\"nofollow noopener\">n.st</a>"},{"reply":"Namun saya masih berpikir bahwa menggunakan <code>--rcfile</code> seharusnya melakukan apa yang Anda butuhkan ... Sunting: Sebenarnya, saya baru saja memeriksa dan <code>bash --rcfile &#47;tmp&#47;foo</code> berfungsi untuk saya, sementara <code>bash</code> menolak untuk memulai dengan <code>-i --rcfile &#47;tmp&#47;foo</code>. Jadi coba hilangkan <code>-i</code> dan lihat apakah itu membantu .","author":"<a href=\"https://superuser.com/users/176100/n-st\" target=\"_blank\" rel=\"nofollow noopener\">n.st</a>"},{"reply":"Maaf, saya lupa bahwa perintah di rcfile tidak ditambahkan ke riwayat, jadi <code>--rcfile</code> tidak berguna untuk aplikasi Anda. Sepertinya kita membutuhkan peretasan <code>echo &#39;ls&#39; &gt;&gt; .bash_history</code> ...","author":"<a href=\"https://superuser.com/users/176100/n-st\" target=\"_blank\" rel=\"nofollow noopener\">n.st</a>"},{"reply":"Dan inilah ide lain, disarankan oleh ZyX dalam komentar di <a href=\"http://stackoverflow.com/a/6219428/1114687\" target=\"_blank\" rel=\"nofollow noopener\"> jawaban ini </a> : panggil sesi <code>screen</code>, lalu jalankan <code>ls</code> di sesi yang baru dibuat.","author":"<a href=\"https://superuser.com/users/176100/n-st\" target=\"_blank\" rel=\"nofollow noopener\">n.st</a>"},{"reply":"terima kasih untuk semua ini, saya tidak tahu ini akan sesulit ini. Komentar yang saya beri suara positif berhasil (tanpa riwayat). Bahkan jika <code>cd</code> ada di file tersebut. Anda harus membuat jawaban agar saya dapat memberikan suara positif / sehingga orang lain dapat melihatnya dan mendapatkan bantuan darinya juga","author":"<a href=\"https://superuser.com/users/241800/hashbrown\" target=\"_blank\" rel=\"nofollow noopener\">Hashbrown</a>"}],"answers":[{"answer":"<p> Terima kasih atas komentar @ n.st, saya telah membuat baris yang satu ini: </p> <pre class=\"lang-sh prettyprint-override\"><code>konsole -e /bin/bash --rcfile &lt;(echo \"cd /;ls;echo hi | less\")\n</code></pre> <p> Yang merupakan versi yang lebih pendek tanpa tmpfiles, menggunakan substitusi proses bash untuk yang berikut ini; </p> <pre class=\"lang-sh prettyprint-override\"><code>echo \"cd /;ls;echo hi | less\" &gt; /tmp/konsolebash;konsole -e /bin/bash --rcfile /tmp/konsolebash\n</code></pre> <p> Yang akan menjalankan beberapa perintah, membuatnya ditampilkan, mengubah lingkungan, menjalankan program yang berjalan lama (<pre class=\"lang-sh prettyprint-override\"><code>konsole -e /bin/bash --rcfile &lt;(echo \"cd /;ls;echo hi | less\")\n</code></pre>) dan ketika itu berakhir (<code>:q</code>) akan menjadi interaktif. <br> Jadi ganti <code>cd /;ls;echo hi | less</code> (demonstrasi) dengan skrip Anda. </p>\n\n<p> Tidak ada riwayat tetapi setidaknya Anda berada di direktori yang benar sekarang dan memiliki variabel lingkungan apa pun yang mungkin ingin Anda siapkan. </p>\n\n<hr>\n\n<p> Pada dasarnya sama dengan usaha saya sebelumnya; </p> <pre class=\"lang-sh prettyprint-override\"><code>konsole -e \"echo ls &gt; /tmp/konsolebash;/bin/bash -i --rcfile /tmp/konsolebash\"\n</code></pre> <p> kecuali penulisan file di luar eksekusi <code>konsole</code>, saya telah menjatuhkan bendera <code>-i</code> dan parameter eksekusi tidak berada dalam satu blok kutipan </p>\n\n<hr>\n\n<p> Sayangnya saklar <code>--rcfile</code> menyebabkan <code>~/.bashrc</code> Anda tidak dimuat untuk perintah-perintah itu, jadi jika Anda memerlukan alias atau sesuatu, Anda harus melakukan ini; </p> <pre class=\"lang-sh prettyprint-override\"><code>cat ~/.bashrc &gt; /tmp/konsolebash; echo \"commands\" &gt;&gt; /tmp/konsolebash;konsole -e /bin/bash --rcfile /tmp/konsolebash\n</code></pre> <p> Yang hanya menyalin bashrc Anda <em> menambahkan </em> perintah Anda sampai akhir </p>","votes":"6","source":"https://superuser.com/a/682872","author":"<a href=\"https://superuser.com/users/241800/hashbrown\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Hashbrown</span></a>","replies":[{"reply":"Tidak perlu menyalin bashrc Anda, cukup gunakan <code>source ~&#47;.bashrc</code>.","author":"<a href=\"https://superuser.com/users/176100/n-st\" target=\"_blank\" rel=\"nofollow noopener\">n.st</a>"},{"reply":"Saya benar-benar mencobanya, itu tidak berfungsi untuk sisa perintah dalam daftar. Yaitu jika <code>.bashrc</code> memiliki alias <code>BOB</code>, argumen <code>source ~&#47;.bashrc;BOB;cd &#47;</code> akan memiliki <code>BOB</code> gagal. Saya tidak tahu mengapa, tapi ini berhasil","author":"<a href=\"https://superuser.com/users/241800/hashbrown\" target=\"_blank\" rel=\"nofollow noopener\">Hashbrown</a>"}]}]}
