{"title":"Kebalikan dari mount -o loop: dapatkah saya membaca perangkat blok sebagai file biasa?","draft":false,"url":"/kebalikan-dari-mount-o-loop-dapatkah-saya-membaca-perangkat-blok-sebagai-file-biasa-kqkbsaxo","votes":"4","answers_count":"4","categories":["Komputer"],"tags":["linux","filesystems","mount","lvm","loopback"],"snippet":"Saya mencoba mencadangkan volume LVM menggunakan Duplicity (catatan: bukan hanya konten file dari volume, tetapi volume sebenarnya itu sendiri, byte-untuk-byte).  Cara terbaik yang sejauh ini saya temukan adalah dengan dd semua data...","body":"<p> Saya mencoba mencadangkan volume LVM menggunakan Duplicity (catatan: bukan hanya konten file dari volume, tetapi volume sebenarnya itu sendiri, byte-untuk-byte). </p>\n\n<p> Cara terbaik yang sejauh ini saya temukan adalah dengan <code>dd</code> semua data pada volume LVM ke file sementara, memasukkan file itu ke dalam set cadangan, dan menghapusnya setelah cadangan dibuat. Ini tampaknya sangat tidak efisien, meskipun: Saya tidak perlu meronta-ronta disk dan menggandakan semua data. </p>\n\n<p> Apa yang tampaknya diperlukan adalah cara untuk melakukan kebalikan dari <code>mount -o loop</code>. Dengan kata lain, saya tidak ingin memasang file sebagai perangkat blok: sebagai gantinya, saya ingin &#39;memasang&#39; perangkat blok sebagai perangkat biasa ( read-only) binary file - file yang Duplicity akan baca dari dan backup untuk saya. </p>\n\n<p> Apakah ada cara untuk mencapai hal ini? </p>","source":"https://superuser.com/questions/543492/the-opposite-of-mount-o-loop-can-i-read-a-block-device-as-a-regular-file","author":"<a href=\"https://superuser.com/users/193732/george\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">George</span></a>","replies":[{"reply":"Tentu Anda bisa, ingat bahwa di Unix &quot;semuanya adalah file&quot; (hampir). Saya tidak tahu Duplikat, tetapi hanya menyertakan file <code>&#47;dev&#47;mapper&#47;...</code> yang relevan mungkin sudah cukup. Tapi ini akan menyalin <i> segala sesuatu </i> , termasuk spasi yang tidak pernah digunakan dan sisa-sisa file yang dihapus. Untuk mendukung itu hanya masuk akal untuk tujuan forensik.","author":"<a href=\"https://superuser.com/users/187275/vonbrand\" target=\"_blank\" rel=\"nofollow noopener\">vonbrand</a>"},{"reply":"Hai @vonbrand - ya, itulah yang saya harapkan juga. Jadi mungkin Duplicity memiliki perlakuan khusus bawaan untuk perangkat blok yang mengacaukan kasus penggunaan ini.","author":"<a href=\"https://superuser.com/users/193732/george\" target=\"_blank\" rel=\"nofollow noopener\">George</a>"},{"reply":"Saya mengalami masalah ini dengan perangkat lunak lain. Saya telah menambahkan hadiah dengan harapan seseorang akan menjawabnya alih-alih hanya mengatakan itu sudah berfungsi. Perangkat lunak yang saya minati bahkan tidak memiliki opsi untuk membacanya; Menurut saya Duplicity juga tidak berguna, tetapi saya tidak yakin di sana.","author":"<a href=\"https://superuser.com/users/1505/daniel-h\" target=\"_blank\" rel=\"nofollow noopener\">Daniel H</a>"}],"answers":[{"answer":"<p> Bukannya duplikat memiliki perlakuan khusus untuk perangkat blok, ia melihatnya apa adanya, &quot;blokir file khusus&quot;. Sebagai contoh, </p> <pre><code>$ stat /dev/dm-0\n  File: ‘/dev/dm-0’\n  Size: 0           Blocks: 0          IO Block: 4096   block special file\nDevice: 5h/5d   Inode: 10311       Links: 1     Device type: fc,0\nAccess: (0660/brw-rw----)  Uid: (    0/    root)   Gid: (    6/    disk)\nAccess: 2015-01-15 14:19:24.674418470 -0600\nModify: 2015-01-15 14:19:20.917418645 -0600\nChange: 2015-01-15 14:19:20.917418645 -0600\n Birth: -\n</code></pre> <p> dibandingkan dengan: </p> <pre><code>$ stat /etc/passwd\n  File: ‘/etc/passwd’\n  Size: 2740        Blocks: 8          IO Block: 4096   regular file\nDevice: fc00h/64512d    Inode: 3802485     Links: 1\nAccess: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2015-01-15 17:15:01.166461694 -0600\nModify: 2015-01-12 17:02:41.134820776 -0600\nChange: 2015-01-12 17:02:41.201820651 -0600\n Birth: -\n</code></pre> <p> Duplikat akan mencadangkan file khusus blok dengan cara yang sama seperti tar atau rsync. </p>\n\n<p> Satu-satunya solusi yang terlintas dalam pikiran adalah menulis sistem file sekering untuk menampilkan semua perangkat blok Anda sebagai file biasa. Tapi itu mungkin di luar cakupan pertanyaan ini. </p>","votes":"3","source":"https://superuser.com/a/865680","author":"<a href=\"https://superuser.com/users/402869/ben-grimm\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ben Grimm</span></a>","replies":[{"reply":"Ya, jika ini tidak menghasilkan jawaban, itulah rencanaku. Saya berharap itu tidak perlu atau sudah ada yang melakukannya.","author":"<a href=\"https://superuser.com/users/1505/daniel-h\" target=\"_blank\" rel=\"nofollow noopener\">Daniel H</a>"},{"reply":"Ini memperlakukan mereka secara khusus karena tidak hanya melakukan panggilan <code>open()</code> dan <code>read()</code> pada mereka, karena secara khusus memeriksa jenis file itu. Sistem cadangan yang naif hanya akan <code>read()</code> setiap file tanpa pemeriksaan.","author":"<a href=\"https://superuser.com/users/1505/daniel-h\" target=\"_blank\" rel=\"nofollow noopener\">Daniel H</a>"},{"reply":"Benar, tetapi Anda benar-benar tidak ingin perangkat lunak cadangan Anda secara naif membuka setiap soket, tautan keras, atau tautan sym. Apakah ada sesuatu yang Anda peroleh dengan tidak hanya memasang perangkat blok dan bekerja dengannya seperti itu?","author":"<a href=\"https://superuser.com/users/402869/ben-grimm\" target=\"_blank\" rel=\"nofollow noopener\">Ben Grimm</a>"},{"reply":"Penanya asli ingin mencadangkan volume itu sendiri; Saya tidak tahu kenapa. Saya ingin mencadangkan perangkat itu sendiri karena tidak terpasang dengan benar, dan saya tidak ingin kehilangan data jika pemulihannya salah. Saya juga berencana menggunakan fitur snapshot dari pengelola perangkat selama pemulihan, tetapi saya masih menginginkan backup dari status saat ini.","author":"<a href=\"https://superuser.com/users/1505/daniel-h\" target=\"_blank\" rel=\"nofollow noopener\">Daniel H</a>"},{"reply":"Dalam hal ini, saya hanya akan menggunakan <code>dd</code> untuk mencoba mencadangkannya, atau partisinya.","author":"<a href=\"https://superuser.com/users/402869/ben-grimm\" target=\"_blank\" rel=\"nofollow noopener\">Ben Grimm</a>"}]},{"answer":"<p> Ada proyek perangkat lunak bernama <a href=\"https://github.com/vasi/diskfile\" rel=\"nofollow noopener\" title=\"Diskfile on GitHub\" target=\"_blank\"> diskfile </a> , sistem file FUSE yang mengekspos perangkat blok sebagai file hanya baca biasa. Misalnya, dengan folder <code>mountpoint</code>, Anda dapat memanggil <code>diskfile /dev/dm-0 mountpoint</code>, kemudian <code>mountpoint/dm-0</code> akan menjadi file biasa dengan konten yang sama seperti <code>/dev/dm-0</code>. </p>","votes":"3","source":"https://superuser.com/a/866465","author":"<a href=\"https://superuser.com/users/1505/daniel-h\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Daniel H</span></a>","replies":[]},{"answer":"<p> Begitulah cara memblokir perangkat sudah berfungsi secara default. Mereka dapat dibaca oleh program apapun - lagipula, <code>dd</code> hanya menggunakan fungsi standar open () dan read () untuk membuat image. </p>","votes":"2","source":"https://superuser.com/a/543494","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user1686</span></a>","replies":[{"reply":"Hmm - ini pasti tidak berfungsi dengan Duplicity. Mungkin masalahnya adalah Duplicity memiliki perlakuan khusus bawaan untuk perangkat blok.","author":"<a href=\"https://superuser.com/users/193732/george\" target=\"_blank\" rel=\"nofollow noopener\">George</a>"}]},{"answer":"<p> Ini adalah cara normal yang sudah berjalan. </p>\n\n<p> Cukup tambahkan <code>-r</code> atau <code>-o ro</code> ke opsi pemasangan untuk membuatnya hanya-baca. </p>\n\n<p><br> Man mount </p> <pre>\n ro      The same as -r; mount the file system read-only \n         (even the super-user may not write it).\n</pre>","votes":"1","source":"https://superuser.com/a/543497","author":"<a href=\"https://superuser.com/users/121352/hennes\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Hennes</span></a>","replies":[]}]}
