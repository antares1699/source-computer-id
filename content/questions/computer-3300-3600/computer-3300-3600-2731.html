{"title":"Apakah ada opsi di ffmpeg untuk menentukan trek subtitle yang harus ditampilkan secara default?","draft":false,"url":"/apakah-ada-opsi-di-ffmpeg-untuk-menentukan-trek-subtitle-yang-harus-ditampilkan-secara-default-bfbbws9d","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["ffmpeg"],"snippet":"Saya memiliki video dalam format MP4 yang sebagian besar adalah bahasa Inggris, tetapi memiliki adegan di mana seorang karakter berbicara dalam bahasa lain. Saya memiliki trek subtitle bahasa Inggris dalam format SRT...","body":"<p> Saya memiliki video dalam format MP4 yang sebagian besar adalah bahasa Inggris, tetapi memiliki adegan di mana seorang karakter berbicara dalam bahasa lain. Saya memiliki trek subtitle bahasa Inggris dalam format SRT untuk dialog karakter ini. Apakah mungkin untuk menyematkan trek subtitle di MP4 itu sendiri dan mengaktifkannya secara default tanpa harus menyalakannya secara manual. Dengan perintah yang saat ini saya gunakan (di bawah), trek subtitle ditambahkan ke file, tetapi saya harus memilihnya secara manual saat memutar video. </p> <pre><code>ffmpeg -i movie.mp4 -i movie.srt -c:v copy -c:a copy -c:s mov_text \\\n  -metadata:s:s:0 language=eng movie-sub.mp4\n</code></pre> <p> Apakah ada bit metadata lain yang perlu saya tambahkan agar subs muncul secara default? Saya ingin menghindari kapal selam keras jika memungkinkan. Jika ini adalah batasan wadah MP4, saya akan baik-baik saja dengan beralih ke format lain seperti MKV. </p>\n\n<p> Output dari ffmpeg: </p> <pre><code>ffmpeg version 2.1.1 Copyright (c) 2000-2013 the FFmpeg developers\n  built on Dec 31 2013 15:44:02 with Apple LLVM version 5.0 (clang-500.2.79) (based on LLVM 3.3svn)\n  configuration: --prefix=/opt/local --enable-swscale --enable-avfilter --enable-avresample --enable-libmp3lame --enable-libvorbis --enable-libopus --enable-libtheora --enable-libschroedinger --enable-libopenjpeg --enable-libmodplug --enable-libvpx --enable-libspeex --enable-libass --enable-libbluray --enable-gnutls --enable-libfreetype --disable-indev=jack --disable-outdev=xv --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/clang --arch=x86_64 --enable-yasm --enable-gpl --enable-postproc --enable-libx264 --enable-libxvid --enable-version3 --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-nonfree --enable-libfaac\n  libavutil      52. 48.101 / 52. 48.101\n  libavcodec     55. 39.101 / 55. 39.101\n  libavformat    55. 19.104 / 55. 19.104\n  libavdevice    55.  5.100 / 55.  5.100\n  libavfilter     3. 90.100 /  3. 90.100\n  libavresample   1.  1.  0 /  1.  1.  0\n  libswscale      2.  5.101 /  2.  5.101\n  libswresample   0. 17.104 /  0. 17.104\n  libpostproc    52.  3.100 / 52.  3.100\nInput #0, mov,mp4,m4a,3gp,3g2,mj2, from 'movie.mp4':\n  Metadata:\n    major_brand     : mp42\n    minor_version   : 0\n    compatible_brands: isommp42\n    creation_time   : 2013-03-18 08:10:43\n  Duration: 01:37:23.05, start: 0.000000, bitrate: 1877 kb/s\n    Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 1280x720, 1683 kb/s, 23.98 fps, 23.98 tbr, 48k tbn, 47.95 tbc (default)\n    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, fltp, 191 kb/s (default)\nInput #1, srt, from 'movie.srt':\n  Duration: N/A, bitrate: N/A\n    Stream #1:0: Subtitle: subrip\nOutput #0, mp4, to 'movie-sub.mp4':\n  Metadata:\n    major_brand     : mp42\n    minor_version   : 0\n    compatible_brands: isommp42\n    encoder         : Lavf55.19.104\n    Stream #0:0(und): Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 1280x720, q=2-31, 1683 kb/s, 23.98 fps, 48k tbn, 48k tbc (default)\n    Stream #0:1(und): Audio: aac ([64][0][0][0] / 0x0040), 44100 Hz, stereo, 191 kb/s (default)\n    Stream #0:2(eng): Subtitle: mov_text ([8][0][0][0] / 0x0008)\nStream mapping:\n  Stream #0:0 -&gt; #0:0 (copy)\n  Stream #0:1 -&gt; #0:1 (copy)\n  Stream #1:0 -&gt; #0:2 (subrip -&gt; mov_text)\nPress [q] to stop, [?] for help\nframe=140093 fps=9457 q=-1.0 Lsize= 1340911kB time=01:37:23.04 bitrate=1880.0kbits/s    \nvideo:1200658kB audio:136946kB subtitle:0 global headers:0kB muxing overhead 0.247196%\n</code></pre>","source":"https://superuser.com/questions/700082/is-there-an-option-in-ffmpeg-to-specify-a-subtitle-track-that-should-be-shown-by","author":"<a href=\"https://superuser.com/users/128225/sean\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Sean</span></a>","replies":[{"reply":"Pemain apa yang Anda uji?","author":"<a href=\"https://superuser.com/users/110524/llogan\" target=\"_blank\" rel=\"nofollow noopener\">llogan</a>"},{"reply":"Saya sudah mencoba QuickTime dan VLC. Keduanya meminta saya untuk memilih trek subtitle secara manual.","author":"<a href=\"https://superuser.com/users/128225/sean\" target=\"_blank\" rel=\"nofollow noopener\">Sean</a>"},{"reply":"Saya pikir ini tergantung pada pemainnya. VLC saya sebenarnya akan menampilkan semua subtitle secara default. Saya ingat saya selalu harus mematikannya. Dapatkah Anda membuat salinan pendek file dengan <code>ffmpeg -i movie-sub.mp4 -c copy -map 0 -t 1 out.mp4</code> dan mengunggahnya di suatu tempat?","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"}],"answers":[{"answer":"<p> Jawaban yang diterima sebelumnya tidak lagi benar, karena flag <code>disposition</code> telah ditambahkan ke ffmpeg. Menggunakan contoh yang Anda berikan, Anda dapat mengatur trek subtitle untuk ditampilkan secara default sebagai berikut: </p> <pre><code>ffmpeg -i movie.mp4 -i movie.srt -c:v copy -c:a copy -c:s mov_text \\\n    -metadata:s:s:0 language=eng -disposition:s:0 default movie-sub.mp4\n</code></pre> <p> Formatnya adalah <code>-disposition[:stream_specifier] value</code>. </p>\n\n<p> Jika Anda perlu menghapus disposisi yang disetel sebelumnya dari aliran (misalnya, aliran disetel ke <code>default</code>, tetapi Anda ingin menonaktifkannya), gunakan nilai <code>0</code>. </p>\n\n<p> Anda dapat melihat daftar opsi disposisi yang tersedia dan contoh tambahan di <a href=\"https://ffmpeg.org/ffmpeg.html\" rel=\"nofollow noopener\" target=\"_blank\"> dokumentasi ffmpeg </a> dengan menelusuri &quot;disposisi&quot;. </p>","votes":"4","source":"https://superuser.com/a/1512887","author":"<a href=\"https://superuser.com/users/465659/blendenzo\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">blendenzo</span></a>","replies":[{"reply":"Saya mencoba ini pada file mkv dan file mp4 (keduanya sangat mirip). perintah &quot;berjalan&quot; dalam kedua kasus, tetapi VLC akan memutar teks film secara otomatis di MKV, tetapi tidak di mp4. Apakah saya melewatkan sesuatu di file mp4?","author":"<a href=\"https://superuser.com/users/352118/andy\" target=\"_blank\" rel=\"nofollow noopener\">Andy</a>"}]},{"answer":"<p> Kamu bisa gunakan <a href=\"//gpac.wp.mines-telecom.fr/downloads/gpac-nightly-builds\" rel=\"nofollow noopener\" target=\"_blank\"> MP4Box 0.6.2-DEV-rev453 </a> (Mei 2016) atau lebih tinggi untuk melakukan ini: </p> <pre><code>mp4box -add alfa.mp4 -add bravo.srt:txtflags=0xC0000000 -new charlie.mp4\n</code></pre> <p><a href=\"//github.com/svnpenn/a/blob/af30667/etc/mp4box.sh#L27-L28\" rel=\"nofollow noopener\" target=\"_blank\"> Contoh </a></p>\n<p> Ini akan menandai aliran subtitle di file output sebagai dipaksa. </p>\n<p><strong> Namun </strong> , tanda ini hanya akan dikenali mulai dengan versi berikut\nprogram: </p>\n<ul>\n<li><p><a href=\"//nightly.mpc-hc.org\" rel=\"nofollow noopener\" target=\"_blank\"> MPC-HC 1.7.10.207 </a> (Mei 2016) </p>\n</li>\n<li><p><a href=\"//nightlies.videolan.org\" rel=\"nofollow noopener\" target=\"_blank\"> Pemutar media VLC 3.0.0-20161101 </a> (Nov 2016) </p>\n</li>\n</ul>\n<hr>\n<p> Saya telah melihat sebutan untuk <a href=\"//ffmpeg.org/pipermail/ffmpeg-devel/2015-January/167371.html\" rel=\"nofollow noopener\" target=\"_blank\"> posting ini </a> di milis FFmpeg tentang a\npatch yang mengimplementasikan disposisi untuk FFmpeg: </p> <pre><code>ffmpeg -i alfa.mp4 -i bravo.srt -c copy -c:s mov_text -disposition:s forced charlie.mp4\n</code></pre> <p> Namun setelah mencobanya dengan &quot;forced&quot; dan &quot;default&quot;, subtitel tersebut\nditandai dengan FFmpeg tidak diakui sebagai dipaksa oleh MPC-HC atau VLC. </p>","votes":"2","source":"https://superuser.com/a/1149845","author":"<a href=\"https://superuser.com/users/71001/steven-penny\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Steven Penny</span></a>","replies":[]},{"answer":"<h2 class=\"h4\"> Tidak, tidak ada opsi di ffmpeg untuk menentukan trek subtitle yang harus ditampilkan secara default. </h2>\n\n<p> (ffmpeg versi 2.6.1 dibangun dengan gcc 4.9.2 (GCC) 20150304 (prarilis) sebagai default di Arch, lihat akhir jawaban untuk tanda kompilasi) </p>\n\n<p> Sumber daya yang menyoroti kurangnya opsi baris perintah untuk menyetel streaming subtitel default / paksa di ffmpeg termasuk yang berikut ini: </p>\n\n<ul>\n<li><a href=\"https://ffmpeg.org/pipermail/ffmpeg-user/2012-October/010769.html\" rel=\"nofollow noopener\" target=\"_blank\"> utas milis Oktober 2012 ini </a> (yang mempelajari format matroska dan menjelaskan bahwa ffmpeg tidak menulis di bidang yang wajib diisi) </li>\n<li><a href=\"https://ffmpeg.org/pipermail/ffmpeg-user/2013-January/012997.html\" rel=\"nofollow noopener\" target=\"_blank\"> utas Januari 2013 ini </a> (menunjukkan kurangnya minat dari ffmpeg devs untuk ini) </li>\n<li><a href=\"https://ffmpeg.org/pipermail/ffmpeg-user/2014-January/019641.html\" rel=\"nofollow noopener\" target=\"_blank\"> utas Januari 2014 ini </a> (bertanya tentang membalik bendera default di penampung Matroska, tidak berhasil) </li>\n<li><a href=\"https://ffmpeg.zeranoe.com/forum/viewtopic.php?t=2254\" rel=\"nofollow noopener\" target=\"_blank\"> posting forum terbaru ini </a> (MP4, forum zeranoe ffmeg) </li>\n</ul>\n\n<p> Akhirnya, <a href=\"https://stackoverflow.com/questions/26956762/ffmpeg-set-subtitles-track-as-default\" target=\"_blank\" rel=\"nofollow noopener\"> pertanyaan ini </a> di StackOverflow menanyakan hal yang sama seperti Anda tetapi untuk mkv, dan menyoroti fakta bahwa ffmpeg adalah pelakunya karena <a href=\"https://www.bunkus.org/videotools/mkvtoolnix/doc/mkvpropedit.html\" rel=\"nofollow noopener\" target=\"_blank\"> mkvpropedit </a> (bagian dari <em> mkvtoolnix.dll </em> ) bisa melakukannya. </p>\n\n<h3 class=\"h5\"> Namun, ada solusi potensial </h3>\n\n<p><a href=\"https://trac.ffmpeg.org/ticket/2402\" rel=\"nofollow noopener\" target=\"_blank\"> Laporan bug ffmpeg Maret 2013 ini </a> (masih terbuka) berurusan dengan mkv dan flag default untuk subtitle dan menjelaskan sesuatu yang dapat kita gunakan untuk menghindari batasan ini dalam beberapa skenario: </p>\n\n<blockquote>\n  <p> Spesifikasi Matroska - â € ‹ <a href=\"http://matroska.org/technical/specs/index.html\" rel=\"nofollow noopener\" target=\"_blank\"> http://matroska.org/technical/specs/index.html </a> (cari FlagDefault) - menetapkan bahwa nilai untuk flag default adalah &quot;default&quot; jika tidak ada yang ditentukan, demuxer menandai semua trek subtitle sebagai &quot;default&quot;. </p>\n</blockquote>\n\n<p> Jadi ffmpeg <em> mungkin </em> tulis bendera default di aliran teks kami dalam beberapa kasus; Saya mencobanya dengan file video input yang berbeda dan mendapatkan hasil yang beragam: </p>\n\n<ul>\n<li><p> dengan <a href=\"https://peach.blender.org/download/\" rel=\"nofollow noopener\" target=\"_blank\"> Kelinci Big Buck </a> AVI Mpeg4 dan file .srt acak, aliran subtitle mkv yang diremux <strong> melakukan </strong> memiliki bendera default: </p> <pre><code>$ ffmpeg -i big_buck_bunny_480p_surround-fix.avi -i subtitle.srt -c copy test.mkv\n$ ffmpeg -i test.mkv\nInput #0, matroska,webm, from 'test.mkv':\n  Metadata:\n    ENCODER         : Lavf56.25.101\n  Duration: 00:28:31.40, start: 0.000000, bitrate: 1028 kb/s\n    Stream #0:0: Video: mpeg4 (Simple Profile), yuv420p, 854x480 [SAR 1:1 DAR 427:240], 24 fps, 24 tbr, 1k tbn, 24 tbc (default)\n    Stream #0:1: Audio: ac3, 48000 Hz, 5.1(side), fltp, 448 kb/s (default)\n    Stream #0:2: Subtitle: subrip (default)\n</code></pre> </li>\n<li><p> namun saya tidak bisa mereproduksi ini dengan file <a href=\"http://techslides.com/sample-webm-ogg-and-mp4-video-files-for-html5\" rel=\"nofollow noopener\" target=\"_blank\"> sampel sampel H264 yang berisi mp4 </a> tidak juga dengan mp4 pribadi, jadi saya rasa <code>mp4 --&gt; mkv</code> tidak berfungsi. Tapi bagaimana jika ...? </p> <pre><code>$ ffmpeg -i sample.mp4 -c copy sample.avi\n$ ffmpeg -i sample.avi -i subtitle.srt -c copy sample.mkv\n$ ffmpeg -i sample.mkv\n...\nInput #0, matroska,webm, from 'sample.mkv':\n  Metadata:\n    ENCODER         : Lavf56.25.101\n  Duration: 00:28:31.40, start: 0.000000, bitrate: 2 kb/s\n    Stream #0:0: Video: h264 (Constrained Baseline), yuv420p(tv, bt709), 560x320, SAR 1:1 DAR 7:4, 60 fps, 60 tbr, 1k tbn, 60 tbc (default)\n    Stream #0:1: Audio: aac (LC), 48000 Hz, mono, fltp (default)\n    Stream #0:2: Subtitle: subrip (default)\n</code></pre> </li>\n</ul>\n\n<p><strong> KEMENANGAN! </strong> Melakukan <code>mp4 --&gt; avi</code> dan kemudian <code>avi + srt --&gt; mkv</code> mengaktifkan subtitle secara default dan VLC menampilkannya dengan benar. </p>\n\n<p> Tentu itu sangat bundar dan saya lebih suka tidak memikirkan kehilangan informasi dalam prosesnya, tapi setidaknya itu berhasil. </p>\n\n<h3 class=\"h5\"> Ringkasan </h3>\n\n<ul>\n<li> ffmpeg jelas tidak diadaptasi sekarang untuk menyetel aliran sebagai default atau dipaksakan, </li>\n<li> mkv mungkin lebih baik daripada mp4 sebagai wadah asal, karena ia memiliki alat yang dikenal melakukan pekerjaan dengan baik ( <a href=\"https://www.bunkus.org/videotools/mkvtoolnix/doc/mkvpropedit.html\" rel=\"nofollow noopener\" target=\"_blank\"> mkvpropedit </a> dari <em> mkvtoolnix.dll </em> ). </li>\n</ul> detail versi ffmpeg: <blockquote>\n  <p> ffmpeg versi 2.6.1 dibangun dengan gcc 4.9.2 (GCC) 20150304 (prarilis)\n    konfigurasi: --prefix = / usr --disable-debug --disable-static --disable-stripping --enable-avisynth --enable-avresample --enable-fontconfig --enable-gnutls --enable-gpl - aktifkan-libass --enable-libbluray --enable-libfreetype --enable-libfribidi --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopencore_amrnb --enable-libopencore_amrwb --enable-libopenjpeg - aktifkan-libopus --enable-libpulse --enable-libschroedinger --enable-libspeex --enable-libssh --enable-libtheora --enable-libv4l2 --enable-libvorbis --enable-libvpx --enable-libx264 - enable-libx265 --enable-libxvid --enable-runtime-cpudetect --enable-shared --enable-swresample --enable-vdpau --enable-version3 --enable-x11grab` </p>\n</blockquote>","votes":"1","source":"https://superuser.com/a/908527","author":"<a href=\"https://superuser.com/users/393261/neitsab\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">neitsab</span></a>","replies":[{"reply":"Saya pikir sesuai <a href=\"https://ffmpeg.org/pipermail/ffmpeg-devel/2015-January/167371.html\" rel=\"nofollow noopener\" target=\"_blank\"> tambalan ini </a> ini sekarang mungkin. Setidaknya bagi saya ini bekerja dengan <code>ffmpeg -i in.mp4 -i in.srt -c copy -disposition:s:0 default out.mkv</code>","author":"User"},{"reply":"Seperti yang disebutkan di komentar sebelumnya, jawaban ini tidak lagi benar. Sekarang dimungkinkan untuk menyetel trek subtitle default dengan ffmpeg.","author":"<a href=\"https://superuser.com/users/465659/blendenzo\" target=\"_blank\" rel=\"nofollow noopener\">blendenzo</a>"}]}]}
