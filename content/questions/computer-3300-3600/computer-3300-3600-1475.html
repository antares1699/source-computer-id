{"title":"Membuat image DOS 10MB yang dapat di-boot PXE atau lebih besar","draft":false,"url":"/membuat-image-dos-10mb-yang-dapat-di-boot-pxe-atau-lebih-besar-ijadiedw","votes":"4","answers_count":"4","categories":["Komputer"],"tags":["boot","ms-dos","pxe","freedos"],"snippet":"Saya ingin membuat image floppy disk DOS &quot;besar&quot;, katakanlah 10MB atau lebih, berisi semua update firmware yang saya perlukan untuk sistem, hard drive, atau BIOS apa pun.  Saya tidak memerlukan citra DOS...","body":"<p> Saya ingin membuat image floppy disk DOS &quot;besar&quot;, katakanlah 10MB atau lebih, berisi semua update firmware yang saya perlukan untuk sistem, hard drive, atau BIOS apa pun. </p>\n\n<p> Saya tidak memerlukan citra DOS untuk dapat terhubung ke jaringan karena semuanya akan ada pada citra yang di-boot PXE, tetapi jaringan akan menyenangkan. Karena Zip Disk dipasang ke pengontrol floppy disk dan ukurannya lebih dari 100MB, ini seharusnya dapat dilakukan. </p>\n\n<p> Saya sudah lama mencoba untuk melakukan ini dan menghabiskan terlalu banyak waktu hanya untuk membuatnya gagal boot. Jadi, jika seseorang memiliki instruksi yang dapat diandalkan tentang cara membuat binatang buas seperti itu dan mengeditnya, beri tahu saya. Gambar yang dapat digunakan untuk PXE dan disalin ke stik USB akan menjadi nilai tambah. </p>\n\n<p> Produsen yang terlalu buruk tidak menyediakan satu pun ISO Linux yang dapat di-boot yang berisi semua pembaruan firmware mereka yang akan mudah untuk di-boot melalui LAN dan memiliki jaringan. Server HP melakukan ini dan itu luar biasa. </p>","source":"https://superuser.com/questions/438120/making-a-pxe-bootable-10mb-or-larger-dos-image","author":"<a href=\"https://superuser.com/users/71204/rjt\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">rjt</span></a>","replies":[{"reply":"Saya tidak tahu jawabannya tetapi Anda harus memeriksa Hiren&#39;s Boot CD (atau USB stick) dan memeriksa berbagai gambar dan opsi boot yang mereka miliki di sana","author":"<a href=\"https://superuser.com/users/106783/golimar\" target=\"_blank\" rel=\"nofollow noopener\">golimar</a>"},{"reply":"Saya sangat setuju. Itu konyol!","author":"<a href=\"https://superuser.com/users/24620/matt-h\" target=\"_blank\" rel=\"nofollow noopener\">Matt H</a>"},{"reply":"@vallismortis - apa yang dengan sepenuh hati tidak Anda setujui? Saya berkomentar bahwa sangat sulit untuk menyebarkan pembaruan bios dan sebagainya terutama di server dll. Tetapi banyak pabrikan masih menyediakan utilitas pembaruan mereka untuk DOS. Mengunduh DOS dan membuatnya bekerja pada stik USB itu sulit. Siapa yang menjalankan DOS? mereka harus menyediakan utilitas ini di Linux.","author":"<a href=\"https://superuser.com/users/24620/matt-h\" target=\"_blank\" rel=\"nofollow noopener\">Matt H</a>"},{"reply":"@MattH Saya sangat menyesal - Saya pikir Anda mengkritik pertanyaan itu. Ups! Komentar dihapus.","author":"<a href=\"https://superuser.com/users/459262/vallismortis\" target=\"_blank\" rel=\"nofollow noopener\">vallismortis</a>"}],"answers":[{"answer":"<p> Anda dapat membuat gambar yang dapat di-boot FreeDOS (ukuran apa pun yang Anda butuhkan) untuk tujuan Anda dan kemudian menambahkan perangkat lunak apa pun atau utilitas DOS apa pun seperti alat pembaruan BIOS, dll. </p>\n\n<p> Dari pertanyaan Anda, tampaknya Anda memiliki akses ke Linux dan mungkin terbiasa menggunakan terminal / baris perintah. Jadi untuk jawaban ini saya akan fokus pada pembuatan image yang dapat di-boot di Linux. Di mesin Windows, Anda dapat menggunakan alat seperti <a href=\"https://rufus.ie/\" rel=\"nofollow noopener\" target=\"_blank\"> Rufus </a> untuk melakukan ini. </p>\n\n<p> Anda kemudian dapat mem-boot image FreeDOS ini menggunakan boot PXE atau menuliskannya ke drive USB dengan <a href=\"https://www.gnu.org/software/coreutils/manual/html_node/dd-invocation.html\" rel=\"nofollow noopener\" target=\"_blank\"> <code>dd</code> </a> untuk membuat drive boot FreeDOS. Tentu saja Anda dapat memperpanjang langkah-langkah yang digunakan di sini untuk membuat media FreeDOS apa pun yang Anda inginkan termasuk menambahkan rangkaian lengkap perangkat lunak yang disertakan dengan FreeDOS Full edition. </p>\n\n<h1 class=\"h3\"> Berikut adalah langkah-langkah untuk membuat image FreeDOS yang dapat di-boot di Linux: </h1>\n\n<hr>\n\n<p><strong> PERINGATAN / PENAFIAN !!! Beberapa perintah yang digunakan di bawah ini berpotensi menghapus data dari disk drive Anda jika digunakan secara tidak benar. Baca halaman manual setiap program untuk memahami penggunaan perintah sebelum melanjutkan. Anda mungkin ingin mencoba perintah ini pada mesin sekunder / virtual yang tidak memiliki data berharga Anda di dalamnya. </strong></p>\n\n<hr>\n\n<h2 class=\"h4\"> Langkah 1: Instal Prasyarat (ms-sys): </h2>\n\n<ul>\n<li><p> Instal <code>ms-sys</code> dari sumber jika tidak tersedia dengan pengelola paket Anda: </p> <pre><code>$ wget https://sourceforge.net/projects/ms-sys/files/ms-sys%20stable/2.6.0/ms-sys-2.6.0.tar.gz\n$ tar -xzvf ms-sys-2.6.0.tar.gz\n$ cd ms-sys-2.6.0\n</code></pre> </li>\n<li><p> Kompilasi ms-sys membutuhkan <code>msgfmt</code> dari paket <code>gettext</code> yang dapat diinstal pada Debian / Ubuntu menggunakan: </p> <pre><code>$ sudo apt install gettext\n</code></pre> </li>\n<li><p> Kompilasi dan Instal: </p> <pre><code>$ make\n$ sudo make install\n</code></pre> </li>\n</ul>\n\n<h2 class=\"h4\"> Langkah 2: Buat image disk kosong dan buat partisi msdos: </h2>\n\n<ul>\n<li><p> Buat file kosong untuk image disk: </p> <pre><code>$ truncate -s 50M disk.img\n</code></pre> <blockquote>\n  <p><em> Catatan: Di sini gambar disk ukuran 50 MiB dibuat tetapi Anda dapat membuatnya dengan ukuran apa pun yang Anda butuhkan </em></p>\n</blockquote></li>\n<li><p> Partisi gambar disk: </p> <pre><code>$ fdisk disk.img\nCommand (m for help): o\n    Created a new DOS disklabel with disk identifier 0x1234abcd.\n\nCommand (m for help): n\n    Partition type\n       p   primary (0 primary, 0 extended, 4 free)\n       e   extended (container for logical partitions)\n    Select (default p): p\n    Partition number (1-4, default 1): &lt;ENTER&gt;\n    First sector (2048-102399, default 2048): 2048\n    Last sector, +sectors or +size{K,M,G,T,P} (2048-102399, default 102399): &lt;ENTER&gt;\n\nCommand (m for help): t\n    Selected partition 1\n    Partition type (type L to list all types): c\n\nCommand (m for help): a\n    Selected partition 1\n    The bootable flag on partition 1 is enabled now.\n\nCommand (m for help): w\n</code></pre> <blockquote>\n  <p><em> Catatan: Perintah <code>fdisk</code> di atas menganggap Anda menginginkan sistem file FAT32. Jika Anda ingin menggunakan sistem file FAT16 maka untuk pertanyaan di atas <code>Partition type (type L to list all types):</code> masukkan <code>e</code> alih-alih <code>c</code> </em></p>\n</blockquote></li>\n</ul>\n\n<h2 class=\"h4\"> Langkah 3: Konfirmasikan lokasi sektor awal dari partisi pertama: </h2>\n\n<ul>\n<li><p> Gunakan fdisk untuk menentukan sektor awal: </p> <pre><code>$ fdisk -l disk.img\nDisk disk.img: 50 MiB, 52428800 bytes, 102400 sectors\nUnits: sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 512 bytes / 512 bytes\nDisklabel type: dos\nDisk identifier: 0x1234abcd\n\nDevice     Boot Start    End Sectors Size Id Type\ndisk.img1  *     2048 102399  100352  49M  c W95 FAT32 (LBA)\n</code></pre> <blockquote>\n  <p> Catatan: Dari keluaran <code>fdisk</code> di atas kita dapat melihat bahwa offset sektor awal adalah <strong><em> 2048 </em></strong> sector atau 2048 x sector_size bytes = 2048 x 512 bytes = <strong><em> 1048576 </em></strong> byte. Sebenarnya kami secara eksplisit menentukan sektor awal di <strong> Langkah 2 </strong> tetapi saya menyertakan langkah ini karena mungkin berguna ketika partisi sudah dibuat. Angka-angka ini: <strong><em> 2048 </em></strong> dan <strong><em> 1048576 </em></strong> digunakan dalam perintah berikut. </p>\n</blockquote></li>\n</ul>\n\n<h2 class=\"h4\"> Langkah 4: Format partisi dengan sistem file FAT </h2>\n\n<ul>\n<li><p> Cari perangkat loop gratis: </p> <pre><code>$ losetup -f\n/dev/loop0\n</code></pre> </li>\n<li><p> Buat perangkat loop dari partisi (yang berada di offset = <strong><em> 1048576 </em></strong> dari gambar disk): </p> <pre><code>$ sudo losetup -o1048576 /dev/loop0 disk.img\n</code></pre> </li>\n<li><p> Buat Sistem File FAT: </p>\n\n<ul>\n<li><p> Untuk membuat sistem file FAT16: </p> <pre><code>$ sudo mkfs.vfat -F16 -R8 -h2048 /dev/loop0\n</code></pre> </li>\n<li><p> Untuk membuat sistem file FAT32: </p> <pre><code>$ sudo mkfs.vfat -F32 -h2048 /dev/loop0\n</code></pre> <blockquote>\n  <p> Catatan: Di <a href=\"https://linux.die.net/man/8/mkfs.vfat\" rel=\"nofollow noopener\" target=\"_blank\"> <code>mkfs.vfat</code> </a> parameter <code>-h2048</code> diperlukan. <code>mkfs.vfat</code> tidak menulis sektor tersembunyi sebelum partisi ke catatan boot kecuali Anda menentukan parameter ini dan diperlukan untuk mem-boot image). Sekali lagi di sini <code>2048</code> adalah offset partisi 1 di sektor seperti yang ditentukan di <strong> LANGKAH 3 </strong> . Parameter <code>-R8</code> adalah opsional tetapi disarankan. </p>\n</blockquote></li>\n</ul></li>\n</ul>\n\n<h2 class=\"h4\"> Langkah 5: Gunakan <code>ms-sys</code> untuk menulis ke Master Boot Record (MBR) dan Volume Boot Record (VBR): </h2>\n\n<ul>\n<li><p> Pertama tulis VBR saat partisi masih dimuat sebagai perangkat loop: </p>\n\n<ul>\n<li><p> Untuk membuat sistem file FAT16: </p> <pre><code>$ sudo ms-sys --fat16free /dev/loop0\n</code></pre> </li>\n<li><p> Untuk membuat sistem file FAT32: </p> <pre><code>$ sudo ms-sys --fat32free /dev/loop0\n</code></pre> <blockquote>\n  <p> Catatan: </p>\n  \n  <ul>\n  <li> Jangan gunakan perintah ini: <code>ms-sys --partition /dev/loop0</code> bahkan mengira itu dibahas dalam beberapa dokumentasi <code>ms-sys</code> sebagaimana diperlukan dalam beberapa kasus. Ini akan menimpa bidang sektor tersembunyi yang sudah ditulis dengan benar oleh <code>mkfs.vfat</code> </li>\n  <li> <code>ms-sys</code> hanya menulis ke catatan boot pertama. <code>ms-sys</code> tidak seperti Rufus tidak menulis ke catatan boot cadangan FAT32 tetapi ini seharusnya tidak mencegah gambar agar dapat di-boot. </li>\n  </ul>\n</blockquote></li>\n</ul></li>\n<li><p> Selanjutnya bongkar / lepaskan file image disk dari perangkat loop: </p> <pre><code>$ sudo losetup -d /dev/loop0\n</code></pre> </li>\n<li><p> Dan akhirnya tulis Windows 7 MBR ke gambar disk: </p> <pre><code>$ ms-sys --mbr7 --force disk.img\n</code></pre> <blockquote>\n  <p> Catatan: <code>ms-sys</code> memerlukan argumen <pre><code>$ fdisk disk.img\nCommand (m for help): o\n    Created a new DOS disklabel with disk identifier 0x1234abcd.\n\nCommand (m for help): n\n    Partition type\n       p   primary (0 primary, 0 extended, 4 free)\n       e   extended (container for logical partitions)\n    Select (default p): p\n    Partition number (1-4, default 1): &lt;ENTER&gt;\n    First sector (2048-102399, default 2048): 2048\n    Last sector, +sectors or +size{K,M,G,T,P} (2048-102399, default 102399): &lt;ENTER&gt;\n\nCommand (m for help): t\n    Selected partition 1\n    Partition type (type L to list all types): c\n\nCommand (m for help): a\n    Selected partition 1\n    The bootable flag on partition 1 is enabled now.\n\nCommand (m for help): w\n</code></pre> saat menulis ke file biasa (bukan perangkat). </p>\n</blockquote></li>\n</ul>\n\n<h2 class=\"h4\"> Langkah 6: Tulis file FreeDos Dasar dan program lain yang Anda perlukan ke partisi pada image disk: </h2>\n\n<ul>\n<li><p> Mount partisi: </p> <pre><code>$ mkdir mnt\n$ sudo mount -o loop,offset=1048576 disk.img mnt/\n</code></pre> </li>\n<li><p> Unduh dan ekstrak file FreeDOS yang diperlukan: </p> <pre><code>$ wget https://github.com/pbatard/rufus/archive/v3.6.tar.gz\n$ tar -xvf v3.6.tar.gz rufus-3.6/res/freedos/\n</code></pre> <blockquote>\n  <p> Catatan: File-file ini diunduh dari repositori github Rufus tetapi diekstrak dari situs web resmi FreeDOS. Lihat <pre><code>$ sudo ms-sys --fat32free /dev/loop0\n</code></pre> di <a href=\"https://github.com/pbatard/rufus/tree/master/res/freedos/\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/pbatard/rufus/tree/master/res/freedos/ </a> untuk detailnya apakah Rufus mendapatkan binari dari sumber resmi FreeDOS. </p>\n</blockquote></li>\n<li><p> Salin file ke partisi: </p> <pre><code>$ sudo mkdir mnt/LOCALE\n$ sudo cp rufus-3.6/res/freedos/!(COMMAND.COM|KERNEL.SYS) mnt/LOCALE/\n$ sudo cp rufus-3.6/res/freedos/{COMMAND.COM,KERNEL.SYS} mnt/\n$ printf '@echo off\\r\\nset PATH=.;\\\\;\\\\LOCALE\\r\\necho Using US-English keyboard with US-English codepage [437]\\r\\n' | sudo tee mnt/AUTOEXEC.BAT\n$ sudo fatattr +h +s mnt/COMMAND.COM\n$ sudo fatattr +h +s mnt/KERNEL.SYS\n</code></pre> <blockquote>\n  <p> Catatan: </p>\n  \n  <ul>\n  <li> Satu-satunya file yang benar-benar diperlukan untuk membuat image disk dapat di-boot adalah <code>COMMAND.COM</code> dan <code>KERNEL.SYS</code>. Sisa file lainnya bersifat opsional </li>\n  <li> Sekarang Anda juga dapat menyalin file lain yang Anda miliki ke image disk sebelum melepasnya (misalnya: update firmware BIOS). </li>\n  <li> Perintah <code>fatattr</code> bersifat opsional tetapi menambahkan atribut tersembunyi dan sistem ke file <code>COMMAND.COM</code> dan <code>KERNEL.SYS</code> seperti biasa. Pada sistem Debian / Ubuntu Anda dapat menginstal program <code>fatattr</code> menggunakan <code>-R8</code> </li>\n  </ul>\n</blockquote></li>\n</ul>\n\n<h2 class=\"h4\"> Langkah 7: Anda Selesai! </h2>\n\n<ul>\n<li><p> Lepaskan gambar disk: </p> <pre><code>$ sudo ms-sys --fat16free /dev/loop0\n</code></pre> </li>\n</ul>","votes":"1","source":"https://superuser.com/a/1541939","author":"<a href=\"https://superuser.com/users/236464/moo\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">moo</span></a>","replies":[]},{"answer":"<p> Saya telah melalui proses ini beberapa kali, dan meskipun sangat mudah, saya tetap lupa langkah-langkah yang saya gunakan, jadi saya mendokumentasikannya di sini untuk referensi saya sendiri dan juga orang lain. Sebagai catatan, saya menggunakan Slackware Linux 14.2+ sebagai server PXE, dan melakukan booting ke beberapa model Dell Optiplex yang berbeda untuk pembaruan BIOS. Seperti yang disebutkan dalam jawaban lain, Anda dapat membuat image ISO yang dapat di-boot untuk sistem file besar. Namun, karena Anda secara khusus menanyakan tentang gambar floppy yang dapat di-boot, berikut adalah langkah-langkah yang saya gunakan untuk itu. </p>\n\n<p> Pertama, beberapa informasi latar belakang tentang MEMDISK dan FAT12 untuk menempatkan pertanyaan Anda dalam konteks. Ada banyak informasi yang saling bertentangan dan ambigu di luar sana, jadi mudah-mudahan ini sedikit memperjelas. </p>\n\n<p> SEBUAH <a href=\"https://www.syslinux.org/archives/2003-November/002718.html\" rel=\"nofollow noopener\" target=\"_blank\"> utas syslinux dari tahun 2003 </a> menunjukkan bahwa MEMDISK mendukung ukuran gambar maksimum 4GB, bergantung pada perangkat keras (mis., memori terbatas, tetapi mungkin pertimbangan khusus perangkat keras tambahan). Sebuah <a href=\"https://www.syslinux.org/archives/2002-March/000249.html\" rel=\"nofollow noopener\" target=\"_blank\"> utas sebelumnya dari tahun 2002 </a> juga menunjukkan batasan PXELINUX terpisah (ruang kernel Linux dibatasi hingga ~ 1GB, tetapi informasi ini sudah lebih dari 15 tahun). </p>\n\n<p> Dari <a href=\"https://www.syslinux.org/wiki/index.php?title=MEMaDISK#Floppy_images\" rel=\"nofollow noopener\" target=\"_blank\"> Dokumentasi MEMDISK </a> , ada beberapa geometri floppy disk tertentu yang akan coba ditebak oleh memdisk: </p>\n\n<blockquote>\n  <p><strong> Gambar floppy </strong></p>\n  \n  <p> Jika image disk kurang dari 4.194.304 byte (4096K, 4 MiB) itu\n  diasumsikan sebagai gambar floppy dan MEMDISK akan mencoba menebaknya\n  geometri berdasarkan ukuran file. MEMDISK mengenali semua file\n  ukuran floppy standar serta format diperpanjang umum: </p>\n</blockquote> <pre><code>  163,840 bytes  (160K) c=40 h=1 s=8    5.25\" SSSD\n  184,320 bytes  (180K) c=40 h=1 s=9    5.25\" SSSD\n  327,680 bytes  (320K) c=40 h=2 s=8    5.25\" DSDD\n  368,640 bytes  (360K) c=40 h=2 s=9    5.25\" DSDD\n  655,360 bytes  (640K) c=80 h=2 s=8    3.5\"  DSDD\n  737,280 bytes  (720K) c=80 h=2 s=9    3.5\"  DSDD\n1,222,800 bytes (1200K) c=80 h=2 s=15   5.25\" DSHD\n1,474,560 bytes (1440K) c=80 h=2 s=18   3.5\"  DSHD\n1,638,400 bytes (1600K) c=80 h=2 s=20   3.5\"  DSHD (extended)\n1,720,320 bytes (1680K) c=80 h=2 s=21   3.5\"  DSHD (extended)\n1,763,328 bytes (1722K) c=82 h=2 s=21   3.5\"  DSHD (extended)\n1,784,832 bytes (1743K) c=83 h=2 s=21   3.5\"  DSHD (extended)\n1,802,240 bytes (1760K) c=80 h=2 s=22   3.5\"  DSHD (extended)\n1,884,160 bytes (1840K) c=80 h=2 s=23   3.5\"  DSHD (extended)\n1,966,080 bytes (1920K) c=80 h=2 s=24   3.5\"  DSHD (extended)\n2,949,120 bytes (2880K) c=80 h=2 s=36   3.5\"  DSED\n3,194,880 bytes (3120K) c=80 h=2 s=39   3.5\"  DSED (extended)\n3,276,800 bytes (3200K) c=80 h=2 s=40   3.5\"  DSED (extended)\n3,604,480 bytes (3520K) c=80 h=2 s=44   3.5\"  DSED (extended)\n3,932,160 bytes (3840K) c=80 h=2 s=48   3.5\"  DSED (extended)\n</code></pre> <blockquote>\n  <p> Sebuah skrip perl kecil termasuk dalam direktori MEMDISK yang bisa\n  menentukan geometri yang akan dipilih MEMDISK untuk ukuran lain; di\n  umum, MEMDISK akan mendeteksi dengan benar sebagian besar format perluasan fisik\n  digunakan, dengan 80 silinder atau sedikit lebih tinggi. </p>\n</blockquote> <pre><code> LABEL floppy_image\n  LINUX memdisk\n  INITRD floppy.img\n</code></pre> <blockquote>\n  <p> Jika gambar Anda lebih besar dari 4 MiB dan itu adalah gambar floppy, Anda bisa\n  paksa MEMDISK untuk memperlakukannya sebagai gambar floppy: </p>\n</blockquote> <pre><code> LABEL floppy_image\n  LINUX memdisk\n  INITRD floppy.img\n  APPEND floppy\n</code></pre> <p> Dalam praktiknya, saya belum beruntung dengan parameter <code>APPEND floppy</code>; Saya mendapatkan error <code>MEMDISK: No ramdisk image specified!</code> saat menggunakannya. </p>\n\n<p> Biasanya, gambar floppy menggunakan <a href=\"https://www.forensicswiki.org/wiki/FAT#FAT12\" rel=\"nofollow noopener\" target=\"_blank\"> Format FAT12 </a> , yang memiliki batas 16MB dan 8k cluster. Tampaknya ada <a href=\"https://www.linux.org/threads/file-allocation-table-fat.8926/\" rel=\"nofollow noopener\" target=\"_blank\"> ekstensi ke FAT12 </a> yang memungkinkan 32MB atau bahkan 256MB (64k cluster) tetapi saya tidak yakin secara spesifik. </p>\n\n<p> Jika kami menargetkan ukuran FAT12 maksimum ( <a href=\"http://www.pcguide.com/ref/hdd/file/partSizes-c.html\" rel=\"nofollow noopener\" target=\"_blank\"> 16.736.256 byte </a> ) untuk gambar &#39;floppy&#39; yang dapat di-boot, kita dapat melakukan hal berikut: </p> <pre><code>dd if=/dev/zero of=FAT12_16MB.img bs=1 count=16736256\n</code></pre> <p> Namun, perintah tersebut membutuhkan waktu beberapa saat untuk diselesaikan. Dengan menggunakan ukuran blok yang lebih tinggi, kita dapat menyelesaikan hal yang sama dalam waktu kurang dari satu detik: </p> <pre><code>dd if=/dev/zero of=FAT12_16MB.img bs=8192 count=2043\n</code></pre> <p> Sekarang kita memiliki &#39;floppy disk kosong&#39;, kita perlu memformatnya sebagai FAT12 (jika Anda tertarik dengan parameter yang tersedia untuk perintah ini, jalankan <code>man mkfs.fat</code> untuk melihat halaman manual): </p> <pre><code>mkfs.fat -D 0x00 -F 12 -n FREEDOSBIOS FAT12_16MB.img\n</code></pre> <p> Sekarang kami memiliki gambar &#39;floppy disk&#39; FAT12 yang diformat. Kami dapat membuat folder dan memasangnya: </p> <pre><code>mkdir floppy\nmount -t msdos -o loop FAT12_16MB.img floppy\n</code></pre> <p> Dan sekarang kita bisa mulai menyalin file ke dalamnya. Saya mengunduh <a href=\"http://www.fdos.org/bootdisks/autogen/FDOEM.288.imz\" rel=\"nofollow noopener\" target=\"_blank\"> Disk Boot OEM FreeDOS </a> dari <a href=\"http://www.fdos.org/bootdisks/\" rel=\"nofollow noopener\" target=\"_blank\"> fdos.org </a> dan menyalinnya ke gambar saya yang lebih besar: </p> <pre><code>wget http://www.fdos.org/bootdisks/autogen/FDOEM.288.imz\nunzip FDOEM.288.imz\n</code></pre> <p> Buat titik pemasangan baru untuk image FreeDOS dan pasang: </p> <pre><code>mkdir freedos12\nmount -t msdos -o loop FDOEM.288 freedos12\n</code></pre> <p> Salin sistem operasi FreeDOS ke disket Anda yang lebih besar: </p> <pre><code>cp -r freedos12/* floppy\n</code></pre> <p> Kemudian lepaskan partisi FreeDOS dan hapus titik pemasangan jika tidak lagi diperlukan: </p> <pre><code>umount freedos12\nrmdir freedos12\n</code></pre> <p> Sekarang kami memiliki gambar floppy 16MB (<code>FAT12_16MB.img</code>) yang berisi sistem operasi FreeDOS. Namun, jika Anda mencoba mem-boot ini melalui PXE, Anda akan mendapatkan kesalahan berikut: </p> <pre><code>Loading boot sector... booting...\nThis is not a bootable disk. Please insert a bootable floppy and press any key to try again...\n</code></pre> <p> Kita perlu membuat sektor boot pada gambar ini. <strong> Penting: </strong> Karena kami akan menulis langsung ke file gambar, pastikan gambar floppy Anda tidak dipasang sebelum langkah berikutnya: </p> <pre><code>umount floppy\n</code></pre> <p> Salin sektor boot dari gambar FreeDOS (<code>FDOEM.288</code> ke gambar yang lebih besar `FAT12_16MB.img &#39;: </p> <pre><code>dd if=FDOEM.288 of=FAT12_16MB.img bs=1 count=446 seek=62 skip=62 conv=notrunc\n</code></pre> <p> Sekarang Anda memiliki gambar floppy FAT12 16MB yang dapat di-boot PXE dengan FreeDOS. Pada titik ini, Anda dapat memasang ulang gambar dan menyalin file tambahan yang Anda butuhkan. </p>\n\n<p> Konfigurasi PXE yang saya gunakan untuk mem-boot image ini adalah: </p> <pre><code>label bios\nmenu label FreeDOS\nkernel memdisk\nappend initrd=FAT12_16MB.img\n</code></pre> <p> ada beberapa <a href=\"http://zewaren.net/site/?q=taxonomy/term/13\" rel=\"nofollow noopener\" target=\"_blank\"> bermanfaat lainnya </a> <a href=\"https://wiki.inf.ed.ac.uk/DICE/FreeDOS\" rel=\"nofollow noopener\" target=\"_blank\"> sumber daya langkah demi langkah </a> di luar sana yang saya konsultasikan saat membuat jawaban ini. </p>","votes":"5","source":"https://superuser.com/a/1346117","author":"<a href=\"https://superuser.com/users/459262/vallismortis\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">vallismortis</span></a>","replies":[{"reply":"<a href=\"https://twitter.com/mattdm/status/1026493350428454912?s=21\" rel=\"nofollow noopener\" target=\"_blank\"> twitter.com/mattdm/status/1026493350428454912?s=21 </a>","author":"<a href=\"https://superuser.com/users/71204/rjt\" target=\"_blank\" rel=\"nofollow noopener\">rjt</a>"}]},{"answer":"<p> Ini tidak dapat dilakukan dengan mudah tetapi bukan tidak mungkin; </p>\n\n<p> Anda dapat membuat FreeDOS ISO yang dapat di-boot yang berisi semua peningkatan firmware Anda\nKemudian PXE mem-boot ISO itu dengan PXELINUX dan memdisk </p> <pre><code>LABEL BIOS UPG\n MENU LABEL Bios Upg\n KERNEL memdisk\n APPEND iso initrd=FreDosBiosUpg.iso\n</code></pre>","votes":"3","source":"https://superuser.com/a/463391","author":"<a href=\"https://superuser.com/users/140291/pat\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Pat</span></a>","replies":[{"reply":"Itu akan terlalu sulit untuk dipertahankan. FreeDOS harus memiliki jaringan built-in sehingga dapat memetakan huruf drive jaringan yang berisi semua image BIOS.","author":"<a href=\"https://superuser.com/users/71204/rjt\" target=\"_blank\" rel=\"nofollow noopener\">rjt</a>"},{"reply":"Mengapa terlalu sulit untuk dirawat? Anda tidak perlu jaringan built-in; gambar bios terkandung dalam ISO. Cukup boot FreeDOS beberapa kelelawar dengan menu dan aktifkan pembaruan bios yang tepat; dapat dilakukan dengan sempurna dan tidak terlalu sulit untuk dipelihara.","author":"<a href=\"https://superuser.com/users/140291/pat\" target=\"_blank\" rel=\"nofollow noopener\">Pat</a>"},{"reply":"Membangun kembali ISO untuk mempertahankan 50 atau lebih image BIOS adalah hal yang gila. Memiliki satu boot PXE dari FreeDOS yang menjangkau seluruh jaringan untuk berbagi pembaruan yang diunduh akan jauh lebih mudah.","author":"<a href=\"https://superuser.com/users/71204/rjt\" target=\"_blank\" rel=\"nofollow noopener\">rjt</a>"},{"reply":"gila?? Anda dapat membangun ISO dengan satu baris perintah dan Anda menyebutnya kacang ?? dan 10 MB terdengar terlalu berlebihan untuk TFTP biasa? Anda tahu transfer WDS / MDT / SCCM ~ 200MB pada gambar boot.wim PE tanpa hambatan. Menurut saya, Anda tidak tahu apa yang Anda bicarakan selain cukup kasar kepada orang yang memberi Anda jawaban.","author":"<a href=\"https://superuser.com/users/140291/pat\" target=\"_blank\" rel=\"nofollow noopener\">Pat</a>"},{"reply":"Pat, saya tidak bermaksud kasar dan sangat menghargai waktu Anda. Sepertinya ada miskomunikasi. Manajemen semua gambar sudah di luar kendali dan menjadi jauh lebih buruk dengan SolidStateDrives bahkan ada lebih sedikit waktu daripada ketika saya menanyakan ini 5 bulan yang lalu. Saya telah menjalankan mkisofs berkali-kali, tetapi tidak punya waktu untuk menjalankannya, tunggu sampai selesai, uji booting PXE dan jalankan kembali untuk menguji image BIOS yang berbeda. saya tidak pernah mengatakan 10MB terlalu banyak untuk tftp, tetapi 10MB bisa terlalu banyak untuk DOS kecuali jika ditangani dengan tepat.","author":"<a href=\"https://superuser.com/users/71204/rjt\" target=\"_blank\" rel=\"nofollow noopener\">rjt</a>"},{"reply":"Saya pikir masalah komunikasi yang kita hadapi di sini adalah saat ini Anda tidak mengingat pertanyaan Anda. Apa yang Anda minta bisa dengan mudah dilakukan. Anda membuat FreeDos booting ISO dan setelah mem-boot Anda hanya secara manual atau dengan beberapa menu meluncurkan pembaruan bios yang diperlukan, pemeliharaan gambar itu semudah menambahkan direktori baru, salin file pembaruan baru dan arahkan ke exe yang sesuai dan bangun kembali ISO. .. Itu saja, Tidak ada yang lebih mudah dari ini.","author":"<a href=\"https://superuser.com/users/140291/pat\" target=\"_blank\" rel=\"nofollow noopener\">Pat</a>"}]},{"answer":"<p> kernel memdisk tidak dapat memuat gambar yang lebih besar, </p>\n\n<p> Anda perlu mencoba vmlinuz kernal untuk memuat gambar yang lebih besar, Anda dapat menemukannya di mirror linux secara online ..\nSaya menggunakan satu dari centos untuk memuat beberapa gambar yang lebih besar. </p>","votes":"0","source":"https://superuser.com/a/489440","author":"<a href=\"https://superuser.com/users/159554/ahmed\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ahmed</span></a>","replies":[{"reply":"Sebagian besar perangkat lunak pembaruan BIOS bekerja dengan sistem operasi yang kompatibel dengan MS-DOS, bukan Linux. vmlinuz adalah Linux, jadi tidak akan berhasil.","author":"<a href=\"https://superuser.com/users/71204/rjt\" target=\"_blank\" rel=\"nofollow noopener\">rjt</a>"},{"reply":"Meskipun ada batasan, mereka termasuk dalam parameter pertanyaan. Saya telah mendokumentasikannya di <a href=\"https://superuser.com/a/1346117/459262\" target=\"_blank\" rel=\"nofollow noopener\"> Jawabanku </a> .","author":"<a href=\"https://superuser.com/users/459262/vallismortis\" target=\"_blank\" rel=\"nofollow noopener\">vallismortis</a>"}]}]}
