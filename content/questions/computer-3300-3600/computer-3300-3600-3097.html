{"title":"Bagaimana cara membuat folder menurut tanggal di Linux?","draft":false,"url":"/bagaimana-cara-membuat-folder-menurut-tanggal-di-linux-ozd6ncxo","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","bash","cron","crontab"],"snippet":"Apakah ada cara singkat / mudah dan cerdas lainnya untuk melakukan hal berikut di Linux?  cd /home/abcd/dammimkdir $(date +%Y-%m)cd $(date +%Y-%m)mkdir $(date +%d)# RESULT : /home/abcd/dammi/2011-05/26cd /home/wxyz/harrami...","body":"<p> Apakah ada cara singkat / mudah dan cerdas lainnya untuk melakukan hal berikut di Linux? </p> <pre><code>cd /home/abcd/dammi\nmkdir $(date +%Y-%m)\ncd $(date +%Y-%m)\nmkdir $(date +%d)\n# RESULT : /home/abcd/dammi/2011-05/26\ncd /home/wxyz/harrami\nmkdir $(date +%Y-%m)\ncd $(date +%Y-%m)\nmkdir $(date +%d)\ncd /home/abcd/harrami\nmkdir $(date +%Y-%m)\ncd $(date +%Y-%m)\nmkdir $(date +%d)\ncd /home/wxyz/harrami\nmkdir $(date +%Y-%m)\ncd $(date +%Y-%m)\nmkdir $(date +%d)\n</code></pre> <p> Saya perlu menggunakan crontab untuk membuat folder setiap hari dan setiap bulan di dalam / home / abcd / dammi, / home / abcd / harrami, / home / wxyz / dammi dan / home / wxyz / harrami. Adakah yang bisa membantu saya dengan ini? </p>\n\n<p> Info: </p> <pre><code>    GROUPS : USERS\n--------------------\n    abcd  : abcd\n    wxyz  : dammi, harrami\n</code></pre>","source":"https://superuser.com/questions/289136/how-to-create-folders-according-to-date-in-linux","author":"<a href=\"https://superuser.com/users/77460/himalay\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Himalay</span></a>","replies":[],"answers":[{"answer":"<p> Bagaimana dengan berikut ini: </p> <pre><code>#!/bin/bash\nHOME_DIRS=\"/home/abcd/dammi /home/wxyz/harrami /home/abcd/harrami /home/wxyz/harrami\"\nDATE_DIR=$(date +%Y-%m)\nDAY_DIR=$(date +%d)\n\nfor FOLDER in $HOME_DIRS; do\n    mkdir -p \"${FOLDER}/${DATE_DIR}/${DAY_DIR}\"\ndone\n</code></pre> <p> Yah, tentu saja Anda juga bisa melakukannya tanpa variabel <code>DATE_DIR</code> dan <code>DAY_DIR</code> tetapi algoritme ini memastikan tanggal tidak dibuat berkali-kali sehingga lebih cepat dan memastikan tanggalnya sama untuk semua pengguna (bahkan jika Anda memulainya tepat sebelum tengah malam dan direktori terakhir dibuat setelah tengah malam). </p>\n\n<p> Anda mungkin juga harus memikirkan tentang meningkatkan skrip menggunakan chown untuk memungkinkan pengguna menulis ke direktori yang baru dibuat. </p>\n\n<p> Edit:\nJika Anda ingin membuat struktur folder yang sama dalam dua sub-folder <code>/home</code>, Anda dapat menggabungkan skrip RolKau dengan yang saya: </p> <pre><code>#!/bin/bash\nUSER_LIST=\"dammi harrami\"\nHOME_SUBDIRS=\"abcd wxyz\"\nDATE_DIR=$(date +%Y-%m)\nDAY_DIR=$(date +%d)\n\nfor HOME_SUBDIR in $HOME_SUBDIRS; do\n    for U in $USER_LIST; do\n        mkdir -p \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}/${DAY_DIR}\"\n    done\ndone\n</code></pre> <p> Edit2:\nSaya menganggap daftar pengguna berisi nama pengguna. Jadi mari kita perpanjang skrip sehingga pemilik direktori diubah dengan benar juga: </p> <pre><code>#!/bin/bash\nUSER_LIST=\"dammi harrami\"\nHOME_SUBDIRS=\"abcd wxyz\"\nDATE_DIR=$(date +%Y-%m)\nDAY_DIR=$(date +%d)\n\nfor HOME_SUBDIR in $HOME_SUBDIRS; do\n    for U in $USER_LIST; do\n        mkdir -p \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}/${DAY_DIR}\"\n        chown -R \"${U}\" \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}\"\n    done\ndone\n</code></pre> <p> Edit3:\nUntuk mengubah kepemilikan menurut saya cara termudah adalah membaca kepemilikan dari direktori di <code>/home/&lt;subdir&gt;/&lt;user&gt;</code> </p> <pre><code>#!/bin/bash\nUSER_LIST=\"dammi harrami\"\nHOME_SUBDIRS=\"abcd wxyz\"\nDATE_DIR=$(date +%Y-%m)\nDAY_DIR=$(date +%d)\n\nfor HOME_SUBDIR in $HOME_SUBDIRS; do\n    for U in $USER_LIST; do\n        mkdir -p \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}/${DAY_DIR}\"\n        GROUP_MEMBER=$(stat -c %G \"/home/${HOME_SUBDIR}/${U}\")\n        chown -R \"${U}\":\"${GROUP_MEMBER}\" \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}\"\n    done\ndone\n</code></pre> <p> Tentu Anda bisa menggunakan stat juga untuk membaca pemiliknya; tetapi itu sedikit lebih lambat daripada hanya membacanya dari variabel - seperti yang Anda minta: </p> <pre><code>#!/bin/bash\nUSER_LIST=\"dammi harrami\"\nHOME_SUBDIRS=\"abcd wxyz\"\nDATE_DIR=$(date +%Y-%m)\nDAY_DIR=$(date +%d)\n\nfor HOME_SUBDIR in $HOME_SUBDIRS; do\n    for U in $USER_LIST; do\n        mkdir -p \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}/${DAY_DIR}\"\n        OWNER=$(stat -c %U \"/home/${HOME_SUBDIR}/${U}\")\n        GROUP_MEMBER=$(stat -c %G \"/home/${HOME_SUBDIR}/${U}\")\n        chown -R \"${OWNER}\":\"${GROUP_MEMBER}\" \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}\"\n    done\ndone\n</code></pre> <p> Edit4:\nSolusi alternatif menggunakan keanggotaan kelompok hard-code. </p> <pre><code>#!/bin/bash\nUSER_LIST=\"dammi:group1 harrami:group2\"\nHOME_SUBDIRS=\"abcd wxyz\"\nDATE_DIR=$(date +%Y-%m)\nDAY_DIR=$(date +%d)\n\nfor HOME_SUBDIR in $HOME_SUBDIRS; do\n    for UG in $USER_LIST; do\n        G=${UG##*:}\n        U=${UG%%:*}\n        mkdir -p \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}/${DAY_DIR}\"\n        GROUP_MEMBER=$(stat -c %G \"/home/${HOME_SUBDIR}/${U}\")\n        chown -R \"${U}\":\"${G}\" \"/home/${HOME_SUBDIR}/${U}/${DATE_DIR}\"\n    done\ndone\n</code></pre> <p> Edit5:\nMelihat posting awal Anda, struktur yang diinginkan mungkin sedikit berbeda. Saya rasa Anda ingin memiliki sub-direktori di <code>/home</code> untuk setiap grup dan hanya menambahkan direktori pengguna untuk setiap anggota grup. Jadi ini dia: </p> <pre><code>#!/bin/bash\nUSER_LIST=\"dammi:abcd dammi:wxyz harrami:wxyz\"\nDATE_DIR=$(date +%Y-%m)\nDAY_DIR=$(date +%d)\n\nfor UG in $USER_LIST; do\n    G=${UG##*:}\n    U=${UG%%:*}\n    mkdir -p \"/home/${G}/${U}/${DATE_DIR}/${DAY_DIR}\"\n    chown -R \"${U}\":\"${G}\" \"/home/${G}/${U}/${DATE_DIR}\"\ndone\n</code></pre> <p> Jika pengguna adalah anggota dalam beberapa grup, cukup tentukan beberapa kali di USER_LIST. </p>","votes":"4","source":"https://superuser.com/a/289140","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">SkyBeam</span></a>","replies":[{"reply":"@SkyBeam ya izin menyebabkan masalah sekarang. bagaimana cara mengatasinya?","author":"<a href=\"https://superuser.com/users/77460/himalay\" target=\"_blank\" rel=\"nofollow noopener\">Himalay</a>"},{"reply":"Cukup tambahkan baris chown lain - Saya telah memperbarui jawabannya untuk menyertakan chown juga. Saya kira Anda tidak perlu mengubah kepemilikan grup. Jika perlu, gunakan saja &#39;chwon -R &quot;$ {U}&quot;: groupname ...&#39; sebagai gantinya.","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\">SkyBeam</a>"},{"reply":"@SkyBeam Saya memiliki dua grup berbeda untuk kedua pengguna tersebut. Haruskah saya melakukannya secara terpisah untuk ini menambahkan loop for lainnya?","author":"<a href=\"https://superuser.com/users/77460/himalay\" target=\"_blank\" rel=\"nofollow noopener\">Himalay</a>"},{"reply":"@SkyBeam sebenarnya ada tiga pengguna dan dua grup. Saya menambahkan pertanyaan di atas tentang itu.","author":"<a href=\"https://superuser.com/users/77460/himalay\" target=\"_blank\" rel=\"nofollow noopener\">Himalay</a>"},{"reply":"Meskipun ini terlihat mudah, ini mungkin sedikit lebih sulit untuk dijawab karena Anda harus memetakan setiap pengguna ke sebuah grup. Namun karena kita berbicara tentang direktori home, kemungkinan besar direktori / home / &lt;subdir&gt; / &lt;user&gt; sudah termasuk dalam grup yang benar. Jadi sebaiknya kita membacanya dari sana? Saya akan menambahkan pembaruan ...","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\">SkyBeam</a>"},{"reply":"@SkyBeam: Saya rasa Anda salah mengeja bagian dari kode Anda: <code>mkdir -p &quot;${FOLDER}&#47;${DATE_DIR}&#47;${DA_DIR}&quot;</code> seharusnya <code>mkdir -p &quot;${FOLDER}&#47;${DATE_DIR}&#47;${DAY_DIR}&quot;</code>. Pada dasarnya Anda lupa &quot;Y&quot;","author":"<a href=\"https://superuser.com/users/82376/chris-ting\" target=\"_blank\" rel=\"nofollow noopener\">Chris Ting</a>"},{"reply":"@SkyBeam itu berarti saya juga bisa melakukan $ (stat -c% U &quot;/ home / $ {HOME_SUBDIR} / $ {U}&quot;) di tempat $ {U}?","author":"<a href=\"https://superuser.com/users/77460/himalay\" target=\"_blank\" rel=\"nofollow noopener\">Himalay</a>"},{"reply":"Saya baru saja menambahkan varian lain dalam &quot;Edit4&quot; yang memungkinkan Anda membuat kode keras pengguna DAN grup dalam variabel USER_LIST, dipisahkan dengan titik dua.","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\">SkyBeam</a>"},{"reply":"tentu Anda bisa menggunakan stat juga untuk mendapatkan nama pengguna, tetapi nama pengguna sudah tersedia (dengan asumsi identik dengan nama direktori) jadi tidak perlu membacanya dari sistem file (yang lebih lambat daripada membacanya dari variabel yang ada). Dan ya, saya mungkin salah mengeja beberapa kode saya. Saya tidak menjalankannya; mungkin perlu beberapa debugging;) - Saya baru saja menambahkan beberapa kode snipplet di Edit3 juga menggunakan stat untuk mengambil pemilik.","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\">SkyBeam</a>"},{"reply":"@SkyBeam OK Saya akan menggunakan solusi keanggotaan grup hard-code. Terima kasih banyak atas waktu dan pekerjaannya. Anda benar-benar banyak membantu saya dalam hal ini. Terima kasih banyak!!","author":"<a href=\"https://superuser.com/users/77460/himalay\" target=\"_blank\" rel=\"nofollow noopener\">Himalay</a>"},{"reply":"Nah, melihat hasil edit Anda pada posting awal tujuan Anda mungkin sedikit berbeda. Saat ini skrip membuat SEMUA folder pengguna dalam semua subdirektori beranda yang ditentukan. Melihat tabel Anda, Anda mungkin ingin memiliki hanya satu sub-direktori di / home yang merujuk ke grup dan kemudian hanya sub-direktori untuk anggota grup. Saya akan menambahkan potongan untuk ini juga.","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\">SkyBeam</a>"},{"reply":"Oke, ini mungkin hasil edit terakhir saya hari ini. Saya menjawab pertanyaan Anda tentang cara menyalin file ke direktori ini juga: <a href=\"http://superuser.com/questions/289154/how-to-move-around-files-using-ls-al-result-in-linux\" title=\"how to move around files using ls al result in linux\" target=\"_blank\" rel=\"nofollow noopener\"> superuser.com/questions/289154/… </a>","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\">SkyBeam</a>"},{"reply":"Anda juga bisa lolos hanya dengan satu doa &#39;kencan&#39;: <code>$(date &quot;+%Y-%M&#47;%d&quot;)</code>","author":"<a href=\"https://superuser.com/users/4714/glenn-jackman\" target=\"_blank\" rel=\"nofollow noopener\">glenn jackman</a>"},{"reply":"@ Glenn: yeeeessss, benar. Tetapi saya memerlukan notasi YYYY-MM untuk direktori level teratas di chown call untuk memastikan bahwa direktori ini juga milik pengguna.","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\">SkyBeam</a>"},{"reply":"@SkyBeam, beberapa pemanggilan <code>date</code> sedemikian rupa tidak boleh dilakukan karena risiko teoretis dari perubahan tanggal. Jika Anda memerlukan direktori tingkat tanggal, Anda selalu dapat menambahkan <code>&#47;..</code>, dll.","author":"<a href=\"https://superuser.com/users/163372/acumenus\" target=\"_blank\" rel=\"nofollow noopener\">Acumenus</a>"}]},{"answer":"<p> Gunakan opsi <code>-p</code> ke mkdir untuk membuat lebih dari satu elemen jalur pada saat itu, dan gunakan for-loop untuk menghindari pengulangan diri Anda sendiri: </p> <pre><code>sh -c '\n  for a in abcd wxyz; do \n    for b in dammi harrami; do \n      mkdir -p /home/$a/$b/$(date +%Y-%m)/$(date +%d); \n    done; \n  done\n'\n</code></pre> <p> (jeda baris untuk menunjukkan struktur logis; bisa jadi semua dalam satu baris) </p>","votes":"3","source":"https://superuser.com/a/289139","author":"<a href=\"https://superuser.com/users/52645/rolkau\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">RolKau</span></a>","replies":[{"reply":"Jawaban yang bagus. Bahkan sedikit lebih cepat dariku. Saya suka Anda juga memutar ulang sub-direktori home. Namun dalam sampelnya ia membuat 3 kali subfolder &quot;harrami&quot; tetapi dammi tidak dibuat dalam folder &quot;wxyz&quot;. Yah, ini mungkin bug di pertanyaan awal. Anda mungkin juga ingin mengeluarkan panggilan $ (date) dari loop. Panggilan tanggal seharusnya mengembalikan nilai yang sama untuk setiap loop. $ () mengeluarkan garpu yang bisa sangat lambat saat digunakan dalam loop.","author":"<a href=\"https://superuser.com/users/78565/skybeam\" target=\"_blank\" rel=\"nofollow noopener\">SkyBeam</a>"},{"reply":"Anda juga bisa lolos hanya dengan satu doa &#39;tanggal&#39;: <code>$(date &quot;+%Y-%M&#47;%d&quot;)</code>","author":"<a href=\"https://superuser.com/users/4714/glenn-jackman\" target=\"_blank\" rel=\"nofollow noopener\">glenn jackman</a>"},{"reply":"Beberapa pemanggilan <code>date</code> buruk dan tidak boleh dilakukan karena risiko perubahan tanggal. Bug teoritis masih merupakan bug.","author":"<a href=\"https://superuser.com/users/163372/acumenus\" target=\"_blank\" rel=\"nofollow noopener\">Acumenus</a>"}]}]}
