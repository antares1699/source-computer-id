{"title":"Bingung tentang jq parser","draft":false,"url":"/bingung-tentang-jq-parser-jobsuuol","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["bash","bash-scripting"],"snippet":"Saya mencoba menggunakan  jq parser  di skrip bash saya dan saya bingung tentang cara kerjanya, dapatkah seseorang menjelaskan kesalahan yang saya lakukan?  Ini adalah file asli dari layanan eksternal dan saya perlu...","body":"<p> Saya mencoba menggunakan <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow noopener\" target=\"_blank\"> jq parser </a> di skrip bash saya dan saya bingung tentang cara kerjanya, dapatkah seseorang menjelaskan kesalahan yang saya lakukan? </p>\n\n<p> Ini adalah file asli dari layanan eksternal dan saya perlu mendapatkan <code>value</code> darinya: </p> <pre><code>root@test ~ # cat test.json \n{\"sensors\":[{\"id\":34585,\"value\":-3.06,\"time\":1457031003}]}\n</code></pre> <p> Mencoba mengirimnya ke <code>jq</code>: </p> <pre><code>root@test ~ # cat narod.json | jq\n{\n  \"sensors\": [\n    {\n      \"id\": 34585,\n      \"value\": -3.06,\n      \"time\": 1457031003\n    }\n  ]\n}\n</code></pre> <p> Mencoba mendapatkan <code>sensors</code>: </p> <pre><code>root@test ~ # cat narod.json | jq '.sensors'\n[\n  {\n    \"id\": 34585,\n    \"value\": -3.06,\n    \"time\": 1457031003\n  }\n]\n</code></pre> <p> Mencoba mendapatkan <code>root@test ~ # cat narod.json | jq '.sensors'\n[\n  {\n    \"id\": 34585,\n    \"value\": -3.06,\n    \"time\": 1457031003\n  }\n]\n</code> dari <code>sensors</code>: </p> <pre><code>root@test ~ # cat narod.json | jq '.sensors.value'\njq: error (at &lt;stdin&gt;:0): Cannot index array with string \"value\"\n</code></pre>","source":"https://superuser.com/questions/1048504/confused-about-jq-parser","author":"<a href=\"https://superuser.com/users/226274/simwhite\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">SimWhite</span></a>","replies":[{"reply":"Coba <code>jq sensors[].value</code> bukan di komputer saya jadi tidak dapat menguji atau mengirim jawaban lengkap tetapi akan dilakukan nanti","author":"<a href=\"https://superuser.com/users/455668/phil\" target=\"_blank\" rel=\"nofollow noopener\">Phil</a>"},{"reply":"Berhasil! Terima kasih banyak dan bisakah Anda menjelaskan atau memberi saya tautan di mana saya salah?","author":"<a href=\"https://superuser.com/users/226274/simwhite\" target=\"_blank\" rel=\"nofollow noopener\">SimWhite</a>"},{"reply":"<code>.sensors</code> dalam masukan JSON Anda adalah <i> Himpunan </i> , bukan dikt. Tidak <i> memiliki </i> indeks seperti .value - hanya item dalamnya yang melakukannya. Jadi, Anda perlu memberi tahu jq untuk menerapkan indeks ke setiap item larik menggunakan <code>[]</code>","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"}],"answers":[{"answer":"<p> Seperti yang dibahas dalam komentar, dalam kasus khusus ini Anda harus menggunakan: </p> <pre><code>jq sensors[].value\n</code></pre> <p> Ini karena Anda perlu memberi tahu <code>jq</code> untuk mengharapkan sebuah larik (dilambangkan dengan <code>[</code> <code>]</code>). Secara efektif ini mengatakan, &#39;cari di tingkat berikutnya di bawah dalam hierarki.&#39; </p>\n\n<p> Secara umum, ketika Anda menemukan sebuah array (<code>[</code>) di file json Anda, Anda harus memberikan ini dalam kueri Anda: <code>jq array_name[].object_in_array</code> akan mengembalikan konten <code>object_in_array</code>. </p>","votes":"5","source":"https://superuser.com/a/1048678","author":"<a href=\"https://superuser.com/users/455668/phil\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Phil</span></a>","replies":[]},{"answer":"<p> Sesuatu yang perlu diingat saat bekerja dengan array di <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow noopener\" target=\"_blank\"> jq </a> Apakah itu <a href=\"https://stedolan.github.io/jq/manual/#Array/ObjectValueIterator:.%5B%5D\" rel=\"nofollow noopener\" target=\"_blank\"> [] </a> operator akan menghitung setiap nilai array, jadi </p> <pre><code> .sensors[].value\n</code></pre> <p> mengembalikan <code>.value</code> dari semua objek pada <code>.sensors</code>. Ini sama dengan filter </p> <pre><code>   .[\"sensors\"]    # choose value of \"sensors\" key\n | .[]             # enumerate each value\n | .[\"value\"]      # choose value of \"value\" key\n</code></pre> <p> Jika Anda menginginkan <code>.value</code> untuk objek tertentu, sering kali Anda ingin menyertakan file <a href=\"https://stedolan.github.io/jq/manual/#select(boolean_expression)\" rel=\"nofollow noopener\" target=\"_blank\"> Pilih </a> . misalnya </p> <pre><code> .sensors[] | select(.id == 34585) | .value\n</code></pre>","votes":"1","source":"https://superuser.com/a/1248016","author":"<a href=\"https://superuser.com/users/768461/jq170727\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">jq170727</span></a>","replies":[]}]}
