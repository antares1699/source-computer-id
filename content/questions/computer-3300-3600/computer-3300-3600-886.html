{"title":"Mengapa disk 3TB ditampilkan sebagai 746GiB","draft":false,"url":"/mengapa-disk-3tb-ditampilkan-sebagai-746gib-wu3b6wl3","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","ubuntu","hard-drive"],"snippet":"Saya memiliki HDD 3TB dan DVD live Ubuntu 14.04 menunjukkannya sebagai 746.5GiB. Saya telah melihat masalah semacam ini dengan disk lain dalam situasi lain sebelumnya dan tidak pernah menemukan solusi. Saya bahkan...","body":"<p> Saya memiliki HDD 3TB dan DVD live Ubuntu 14.04 menunjukkannya sebagai 746.5GiB. Saya telah melihat masalah semacam ini dengan disk lain dalam situasi lain sebelumnya dan tidak pernah menemukan solusi. Saya bahkan telah meminta Seagate mengganti HDD yang memberi tahu saya bahwa mereka tidak dapat memperbaiki HDD setelah alat pencitraan disk entah bagaimana secara permanen memberi tahu HDD bahwa itu adalah disk yang lebih kecil. </p>\n\n<p> Dua pertanyaan: </p>\n\n<ul>\n<li> Bagaimana ini bisa terjadi? </li>\n<li> Bagaimana saya memperbaikinya? </li>\n</ul>\n\n<p><strong> Latar Belakang HDD untuk kasus ini </strong></p>\n\n<ul>\n<li> Disk yang digunakan untuk menjadi bagian dari ZFS RAIDZ menggunakan disk kosong, bukan partisi. </li>\n<li> itu duduk di rak selama beberapa bulan. </li>\n<li> Saya menggunakan GParted untuk mencoba dan menghapus semua yang ada di disk </li>\n</ul>\n\n<p> Saya sedang menjalankan perintah <pre>dd if=/dev/zero of=/dev/sdd bs=16M</pre> </p>\n\n<p> Sebelum itu saya berlari: </p> <pre>\nroot@ubuntu:/home/ubuntu# dd if=/dev/zero of=/dev/sdd bs=10M count=128\n128+0 records in\n128+0 records out\n1342177280 bytes (1.3 GB) copied, 42.8214 s, 31.3 MB/s\n</pre>\n\n<pre>root@ubuntu:/home/ubuntu# smartctl -i /dev/sdd\nsmartctl 6.2 2013-07-26 r3841 [x86_64-linux-3.13.0-32-generic] (local build)\nCopyright (C) 2002-13, Bruce Allen, Christian Franke, www.smartmontools.org\n\n=== START OF INFORMATION SECTION ===\nModel Family:     Western Digital Caviar Green (AF, SATA 6Gb/s)\nDevice Model:     WDC WD30EZRX-00DC0B0\nSerial Number:    {blanked}\nLU WWN Device Id: 5 0014ee 0036bc22d\nFirmware Version: 80.00A80\nUser Capacity:    3,000,592,982,016 bytes [3.00 TB]\nSector Sizes:     512 bytes logical, 4096 bytes physical\nDevice is:        In smartctl database [for details use: -P show]\nATA Version is:   ACS-2 (minor revision not indicated)\nSATA Version is:  SATA 3.0, 6.0 Gb/s (current: 1.5 Gb/s)\nLocal Time is:    Sun Jul 17 07:44:41 2016 UTC\nSMART support is: Available - device has SMART capability.\nSMART support is: Enabled\n</pre>\n\n<pre>\nroot@ubuntu:/home/ubuntu# gdisk -l /dev/sdd\nGPT fdisk (gdisk) version 0.8.8\n\nPartition table scan:\n  MBR: not present\n  BSD: not present\n  APM: not present\n  GPT: not present\n\nCreating new GPT entries.\nDisk /dev/sdd: 1565565872 sectors, 746.5 GiB\nLogical sector size: 512 bytes\nDisk identifier (GUID): 1F876634-0284-4A1C-8FDF-34A255B9DCCC\nPartition table holds up to 128 entries\nFirst usable sector is 34, last usable sector is 1565565838\nPartitions will be aligned on 2048-sector boundaries\nTotal free space is 1565565805 sectors (746.5 GiB)\n\nNumber  Start (sector)    End (sector)  Size       Code  Name\nroot@ubuntu:/home/ubuntu# \n</pre> <p> Terhubung melalui dok HDD USB. Mungkin inilah sumber masalahnya. Saya akan melakukan rewire sehingga dicolokkan langsung ke port SATA pada motherboard. Sementara itu, inilah info tambahan yang diminta. </p> <pre>\nroot@ubuntu:/home/ubuntu# sg_readcap --16 /dev/sdd\nREAD CAPACITY (16) not supported\nroot@ubuntu:/home/ubuntu# sg_readcap  /dev/sdd\nRead Capacity results:\n   Last logical block address=1565565871 (0x5d50a3af), Number of blocks=1565565872\n   Logical block length=512 bytes\nHence:\n   Device size: 801569726464 bytes, 764436.5 MiB, 801.57 GB\nroot@ubuntu:/home/ubuntu# hdparm -N /dev/sdd\n\n/dev/sdd:\n max sectors   = 5860533168/1(5860533168?), HPA setting seems invalid (buggy kernel device driver?)\n</pre>","source":"https://superuser.com/questions/1101839/why-would-a-3tb-disk-show-as-being-746gib","author":"<a href=\"https://superuser.com/users/231676/beowulfnode42\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">BeowulfNode42</span></a>","replies":[{"reply":"Rupanya karena <code>3000592982016 &#47; 512 = 5860533168 = 0x15d50a3b0</code> dan terpotong menjadi <code>0x5d50a3b0 = 1565565872</code>. Bagaimana cara terhubung ke komputer Anda?","author":"<a href=\"https://superuser.com/users/554702/tom-yan\" target=\"_blank\" rel=\"nofollow noopener\">Tom Yan</a>"},{"reply":"Dapatkan sg3_utils (paket bernama <code>sg3-utils</code> di Ubuntu) dan jalankan <code>sg_readcap -16 &#47;dev&#47;sdd</code>. Jika kapasitasnya dilaporkan dengan benar, mungkin gdisk Anda terlalu tua untuk menangani disk 3TB. Jika tidak, itu akan menjadi kernel, atau enklosur / docking / adaptor USB Anda.","author":"<a href=\"https://superuser.com/users/554702/tom-yan\" target=\"_blank\" rel=\"nofollow noopener\">Tom Yan</a>"},{"reply":"Apa output dari <code>hdparm -N  &#47;dev&#47;sdd</code>?","author":"<a href=\"https://superuser.com/users/432690/kamil-maciorowski\" target=\"_blank\" rel=\"nofollow noopener\">Kamil Maciorowski</a>"},{"reply":"<code>HPA setting seems invalid</code> ini layak untuk diselidiki. Memeriksa <a href=\"https://forum.hddguru.com/viewtopic.php?f=1&t=29918\" rel=\"nofollow noopener\" target=\"_blank\"> kasus serupa </a> Saya telah menemukan; <a href=\"http://www.ultimatebootcd.com/\" rel=\"nofollow noopener\" target=\"_blank\"> CD Boot Ultimate </a> diduga membantu.","author":"<a href=\"https://superuser.com/users/432690/kamil-maciorowski\" target=\"_blank\" rel=\"nofollow noopener\">Kamil Maciorowski</a>"},{"reply":"Masalah terpecahkan dengan baik. Docking USB tidak mendukung perintah SCSI READ CAPACITY (16), yang berarti ketika menerjemahkan kapasitas dari data ATA IDENTIFY DEVICE, paling banyak dapat melaporkan kapasitas 32-bit dengan menanggapi perintah SCSI READ CAPACITY (10), sementara 0x15d50a3b0 membutuhkan 33 bit. Lihat <a href=\"http://www.t10.org/drafts.htm#SBC_Family\" rel=\"nofollow noopener\" target=\"_blank\"> SBC </a> untuk mengetahui detailnya jika diinginkan.","author":"<a href=\"https://superuser.com/users/554702/tom-yan\" target=\"_blank\" rel=\"nofollow noopener\">Tom Yan</a>"},{"reply":"@KamilMiorowski FWIW, ini jelas bukan kasus yang sama, karena kapasitas dalam data ATA IDENTIFY DEVICE (<code>5860533168</code> sektor logis 512 byte) adalah &quot;benar&quot;. Itu berarti HPA tidak aktif. <code>hdparm</code> meludah <code>invalid</code> hanya karena tidak menerima respons yang sesuai untuk perintah ATA READ NATIVE MAX ADDRESS EXT yang dikeluarkannya, kemungkinan karena docking tidak tahu cara membangun data sensor untuk / tidak mengenali bit CK_COND di SCSI ATA PASS- MELALUI perintah. <code>hdparm --verbose</code> akan memberi kita petunjuk tentang itu (<code>sb[]:</code> tepat di atas <code>READ_NATIVE_MAX_ADDRESS_EXT response:</code>).","author":"<a href=\"https://superuser.com/users/554702/tom-yan\" target=\"_blank\" rel=\"nofollow noopener\">Tom Yan</a>"}],"answers":[{"answer":"<pre><code>root@ubuntu:/home/ubuntu# sg_readcap --16 /dev/sdd\nREAD CAPACITY (16) not supported\n</code></pre> <p> Ini berarti ketika dok USB Anda menerjemahkan kapasitas dari data ATA IDENTIFY DEVICE drive (terlihat di <code>hdparm -I</code>/<code>smartctl -i</code>), paling banyak dapat melaporkan ukuran hingga 32-bit (yaitu 0xffffffff, 4294967295) dalam hal jumlah sektor logis. Ini adalah batasan yang diwariskan dari SCSI READ CAPACITY (10): </p> <pre><code>Logical Sector Size | Maximum capacity supported (TiB / TB)\n         512        |              ~2.0 /  ~2.2\n        4096        |             ~16.0 / ~17.6\n</code></pre> <p> Karena drive Anda adalah <a href=\"https://en.wikipedia.org/wiki/Advanced_Format#512e\" rel=\"nofollow noopener\" target=\"_blank\"> AF 512e </a> drive yang memiliki total 5860533168 / 0x15d50a3b0 sektor logis 512-byte, yang membutuhkan 33 bit untuk mewakili, hanya jembatan SATA / USB yang mendukung SCSI READ CAPACITY (16) yang dapat menanganinya dengan benar. Ketika ukuran dipotong menjadi 32-bit, itu berubah dari: </p> <pre><code>101011101010100001010001110110000 (5860533168)\n</code></pre> <p> untuk </p> <pre><code> 01011101010100001010001110110000 (1565565872)\n</code></pre> <hr>\n\n<p> Kernel Linux, atau mungkin semua OS, pada dasarnya tidak akan pernah mengeluarkan perintah ATA IDENTIFY DEVICE &quot;secara langsung&quot; (yaitu dikemas dalam perintah SCSI ATA PASS-THROUGH) ke drive USB, tetapi perintah KAPASITAS BACA SCSI (yang Anda keluarkan secara manual dengan <code>sg_readcap</code>), untuk mendapatkan kapasitasnya. </p>\n\n<p> Hanya ketika drive sebenarnya adalah drive SATA yang terhubung dengan jembatan SATA / USB, perintah akan ditangani oleh Lapisan Terjemahan SCSI-ATA yang diimplementasikan di jembatan, yang kemudian akan mengeluarkan perintah ATA IDENTIFY DEVICE ke drive SATA untuk mendapatkan informasinya perlu membentuk data respons untuk perintah READ CAPACITY. </p>\n\n<p> Tetapi utilitas seperti <code>hdparm</code> dan <code>smartctl</code> (hampir) eksklusif untuk drive ATA, jadi mereka hampir melakukan semuanya dengan ATA PASS-THROUGH. (Juga karena mereka adalah utilitas ruang pengguna, diharapkan Anda, pengguna, hanya akan menggunakannya pada jenis perangkat yang sesuai.) Itulah mengapa Anda akhirnya mendapatkan kapasitas yang berbeda di tempat yang berbeda. </p>","votes":"10","source":"https://superuser.com/a/1102003","author":"<a href=\"https://superuser.com/users/554702/tom-yan\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Tom Yan</span></a>","replies":[{"reply":"Itu jawaban yang bagus tapi ... bisakah masalahnya diatasi? Maksud saya, apakah ada cara untuk membujuk kernel (atau alat pemartisi) untuk menggunakan ukuran yang benar? Saya memiliki masalah serupa dan sayang sekali harus mengganti penutup USB jika satu-satunya masalah adalah tidak melaporkan kapasitas dengan benar.","author":"<a href=\"https://superuser.com/users/77814/a3nm\" target=\"_blank\" rel=\"nofollow noopener\">a3nm</a>"},{"reply":"<i> Membujuk </i> adalah kata yang salah. Ini sederhana <i> tidak bisa </i> dapatkan ukuran yang benar. Tidak ada fasilitas yang tertulis di driver penyimpanan usb untuk mendapatkan ukuran drive dengan <code>ATA IDENTIFY DEVICE</code> di <code>SCSI ATA PASS-THROUGH</code>. Tapi ini Linux, Anda selalu dapat menulis retasan Anda sendiri, jika Anda bisa. (Sudah ada fasilitas, yang dikenal sebagai quirk, bagi Anda untuk menandai drive dan melakukan sesuatu yang berbeda untuk itu.) Dan tidak, tidak disayangkan, tidak menurut saya, barang-barang rusak hanya milik sampah.","author":"<a href=\"https://superuser.com/users/554702/tom-yan\" target=\"_blank\" rel=\"nofollow noopener\">Tom Yan</a>"},{"reply":"Terima kasih atas penunjuknya! Saya setuju lebih mudah untuk hanya membuang barang begitu mereka memiliki masalah, tetapi filosofi ini tidak terlihat berkelanjutan secara lingkungan mengingat lintasan planet kita saat ini, jadi saya rasa itu bukan pertanyaan yang tidak masuk akal untuk melihat apa yang bisa dilakukan dengan barang itu Saya sudah :)","author":"<a href=\"https://superuser.com/users/77814/a3nm\" target=\"_blank\" rel=\"nofollow noopener\">a3nm</a>"},{"reply":"Saya tidak mengerti. Ini hanya masalah Linux. Masalahnya tidak muncul di Win7 saya. Saya mengajukan pertanyaan lain tetapi sekarang tersembunyi karena seseorang mengira itu duplikat dari yang ini. Jika ya, mengapa Win7 dapat menangani 3T sebagai disk sebagai 3T tetapi Linux tidak?","author":"<a href=\"https://superuser.com/users/527817/catscarlet\" target=\"_blank\" rel=\"nofollow noopener\">Catscarlet</a>"}]}]}
