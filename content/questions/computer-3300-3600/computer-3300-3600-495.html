{"title":"Bagaimana cara menambahkan beberapa string di kepala file yang baru dibuat secara otomatis di VIM?","draft":false,"url":"/bagaimana-cara-menambahkan-beberapa-string-di-kepala-file-yang-baru-dibuat-secara-otomatis-di-vim-cfpvij0j","votes":"4","answers_count":"4","categories":["Komputer"],"tags":["linux","vim","automation"],"snippet":"Untuk lebih jelasnya, yang ingin saya lakukan adalah:  jika saya membuat xxx.php,#!/usr/bin/env php akan menjadi baris pertama dari file tersebut  jika saya membuat xxx.py,#!/usr/bin/env python akan ditambahkan terlebih dahulu.  Bagaimana saya bisa...","body":"<p> Untuk lebih jelasnya, yang ingin saya lakukan adalah: </p>\n\n<ul>\n<li> jika saya membuat <code>xxx.php</code>,<code>#!/usr/bin/env php</code> akan menjadi baris pertama dari file tersebut </li>\n<li> jika saya membuat <code>xxx.py</code>,<code>#!/usr/bin/env python</code> akan ditambahkan terlebih dahulu. </li>\n</ul>\n\n<p> Bagaimana saya bisa mendekati ini? Terima kasih! </p>","source":"https://superuser.com/questions/156553/how-to-add-some-string-in-the-head-of-a-new-created-file-automatically-in-vim","author":"<a href=\"https://superuser.com/users/29485/spawnst\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">SpawnST</span></a>","replies":[],"answers":[{"answer":"<p> Setelah beberapa pekerjaan pencarian, saya menemukan <a href=\"https://stackoverflow.com/questions/2706973/vi-script-problem-on-autocmd\" target=\"_blank\" rel=\"nofollow noopener\"> Pos </a> di SO yang dapat menyelesaikan masalah saya menggunakan template. Semoga bermanfaat untuk kalian. </p>\n\n<p> Buat template <code>pythontmp.txt</code> dan <code>phptmp.txt</code> dalam beberapa direktori (contoh: <code>~/.vim/templates/</code>) seperti di bawah ini </p> <pre><code>#!/usr/bin/env python(php)\n</code></pre> <p> Tambahkan pengaturan berikut ke <code>.vimrc</code> </p> <pre><code>autocmd bufnewfile *.py :0r ~/.vim/templates/pythontmp.txt\nautocmd bufnewfile *.php :0r ~/.vim/templates/phptmp.txt\n</code></pre>","votes":"9","source":"https://superuser.com/a/156610","author":"<a href=\"https://superuser.com/users/29485/spawnst\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">SpawnST</span></a>","replies":[{"reply":"+1 jawaban diri baik untuk SU (ini juga cara yang tepat untuk melakukannya).","author":"<a href=\"https://superuser.com/users/35504/msw\" target=\"_blank\" rel=\"nofollow noopener\">msw</a>"}]},{"answer":"<p> Tidak yakin Anda dapat mengatur vim untuk melakukan ini tanpa bantuan.\nAnda dapat membuat skrip pembantu untuk melakukannya untuk Anda. </p>\n\n<p> Dengan asumsi lingkungan linux ...\nSkrip ini akan memeriksa ekstensi file, dan jika perlu membuat file dengan header sebelum memanggil vim. </p> <pre><code>#/bin/bash\n\ntype=`expr \"\\$1\" : \".*\\.\\(.*\\)\"`   # Check the file extension\n\ncase \"$type\" in\n    py) \n    interpreter=python;\n    ;;\n    php)\n    interpreter=php;\n    ;;\nesac\n\nif test ${interpreter+defined}; then echo \"#!/usr/bin/env $interpreter\" &gt; $1 &amp;&amp; /usr/bin/vim $1;\nelse /usr/bin/vim $1;\nfi\n</code></pre> <p> Anda kemudian dapat membuat alias skrip ini untuk dijalankan di tempat vim. </p> <pre><code>alias vim='/path/to/script.sh'\n</code></pre>","votes":"1","source":"https://superuser.com/a/156605","author":"<a href=\"https://superuser.com/users/39705/tim-kane\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Tim Kane</span></a>","replies":[{"reply":"Anda juga dapat menyelidiki vim plugins / scripts","author":"<a href=\"https://superuser.com/users/39705/tim-kane\" target=\"_blank\" rel=\"nofollow noopener\">Tim Kane</a>"},{"reply":"Ya saya sedang melakukannya sekarang. Apa artinya <code>${interpreter+defined}</code>? Saya harus menghapus <code>+defined</code> dan membuatnya berfungsi.","author":"<a href=\"https://superuser.com/users/29485/spawnst\" target=\"_blank\" rel=\"nofollow noopener\">SpawnST</a>"},{"reply":"Ini adalah mekanisme (menggunakan perluasan parameter) untuk menguji apakah variabel $ interpreter telah ditentukan. Anda dapat dengan mudah menulis $ {interpreter + blah} untuk mendapatkan efek yang sama. $ {var + word} # jika var didefinisikan, gunakan &quot;word&quot;; jika tidak, tidak ada","author":"<a href=\"https://superuser.com/users/39705/tim-kane\" target=\"_blank\" rel=\"nofollow noopener\">Tim Kane</a>"}]},{"answer":"<p> Terdapat <a href=\"http://vim.wikia.com/wiki/Category:Automated_Text_Insertion\" rel=\"nofollow noopener\" target=\"_blank\"> banyak plugin </a> yang menawarkan fitur ini. Beberapa bahkan memungkinkan Anda secara otomatis menyimpulkan berbagai hal, atau bahkan mengatur header Anda tergantung folder tempat Anda membuat file baru ( <a href=\"http://code.google.com/p/lh-vim/wiki/muTemplate\" rel=\"nofollow noopener\" target=\"_blank\"> mu-template </a> ). </p>","votes":"1","source":"https://superuser.com/a/156625","author":"<a href=\"https://superuser.com/users/13611/luc-hermitte\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Luc Hermitte</span></a>","replies":[{"reply":"+1 ya, banyak sekali plugin yang membuat &quot;autocmd&quot; bawaan lebih mudah. semuanya berjalan di bawah istilah &quot;template&quot; dan &quot;kerangka&quot;.","author":"<a href=\"https://superuser.com/users/10674/akira\" target=\"_blank\" rel=\"nofollow noopener\">akira</a>"}]},{"answer":"<p> Saya sebenarnya menyukai pendekatan mendefinisikan fungsi vim untuk melakukan pekerjaan, dengan cara ini menjadi lebih mudah untuk melakukan hal-hal yang lebih rumit. Misalnya, jika teks yang disisipkan bergantung pada nama file seperti yang biasa dilakukan dengan C / C ++. C / C ++ saya terlihat seperti ini: </p> <pre><code>autocmd BufNewFile *.{h,hpp} call &lt;SID&gt;insert_c_gates() \n\n...\n\nfunction! s:insert_c_gates()\n   let gatename = &lt;SID&gt;get_gate_name()\n   execute \"normal i#ifndef \" . gatename\n   execute \"normal o#define \" . gatename\n   execute \"normal Go#endif /* \" . gatename . \" */\"\n   normal kk\nendfunction\n</code></pre> <p> Fungsi get_get_name () membentuk nama gerbang dari nama file yang sedang diedit, dan sebenarnya bervariasi tergantung pada proyek yang saya kerjakan karena beberapa proyek ingin diformat dengan cara tertentu. </p>","votes":"1","source":"https://superuser.com/a/156694","author":"<a href=\"https://superuser.com/users/19936/neg-ev\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Neg_EV</span></a>","replies":[{"reply":"Saya rasa solusi Anda lebih kuat meski tidak begitu memahami fungsinya.","author":"<a href=\"https://superuser.com/users/29485/spawnst\" target=\"_blank\" rel=\"nofollow noopener\">SpawnST</a>"},{"reply":"Sebenarnya, bermain dengan <code>:exe</code> + <code>:normal</code> (/ <code>:put</code>) cukup rumit untuk dipertahankan dibandingkan dengan solusi seperti mu-template (lihat <a href=\"http://code.google.com/p/lh-vim/source/browse/mu-template/trunk/after/template/c/internals/c-header.template\" rel=\"nofollow noopener\" target=\"_blank\"> code.google.com/p/lh-vim/source/browse/mu-template/trunk/after/â€¦ </a> ). Mengekstrak fungsi penghasil tajuk cukup mudah selama Plugin Template Expander mendukung panggilan ke fungsi viml &quot;eksternal&quot;.","author":"<a href=\"https://superuser.com/users/13611/luc-hermitte\" target=\"_blank\" rel=\"nofollow noopener\">Luc Hermitte</a>"},{"reply":"Ya intinya bukanlah eksekusi dan kombinasi normal (saya menulis itu bertahun-tahun yang lalu, dan tidak mengubahnya sejak itu) ... tetapi hanya fakta bahwa dengan menempatkan panggilan fungsi di sana Anda memiliki akses ke semua kekuatan skrip vim daripada hanya menyisipkan template. Plugin pasti memberikan kemudahan penggunaan yang bagus, tetapi jika Anda ingin memiliki solusi sendiri tanpa plugin, pendekatan fungsi adalah titik awal yang baik untuk semua solusi.","author":"<a href=\"https://superuser.com/users/19936/neg-ev\" target=\"_blank\" rel=\"nofollow noopener\">Neg_EV</a>"},{"reply":"Apa yang terjadi di func saya adalah bahwa saya memiliki func get_gate_name yang tergantung pada jalur file yang saya tentukan namanya (saya tetap mengatur proyek saya di bawah folder proyek dengan cara yang memungkinkan saya melakukan ini). Kemudian setelah saya memiliki nama, saya memasukkan gerbang (dengan cara yang sangat primitif) dengan menggunakan perintah eksekusi normal. Alasan lain saya melakukan ini adalah karena saya menulis fungsi UpdateGates yang memberikan file dengan gerbang yang ada, saya dapat memperbaruinya sesuai keinginan saya (misalnya, jika saya mengganti nama file). Ini memungkinkan saya untuk menggunakan kembali fungsi di mana solusi template / plugin mungkin tidak semudah melakukan hal yang sama.","author":"<a href=\"https://superuser.com/users/19936/neg-ev\" target=\"_blank\" rel=\"nofollow noopener\">Neg_EV</a>"}]}]}
