{"title":"Apa metode kompresi SquashFS?","draft":false,"url":"/apa-metode-kompresi-squashfs-luzhdykw","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","terminal","compression","squashfs"],"snippet":"Saya punya beberapa file SquashFS, dan saya ingin tahu bagaimana mereka dikompresi sehingga saya dapat memiliki gambaran kasar tentang bagaimana mereka akan tampil saat dipasang.  Satu-satunya binari yang disediakan oleh paket squashfs-tools...","body":"<p> Saya punya beberapa file SquashFS, dan saya ingin tahu bagaimana mereka dikompresi sehingga saya dapat memiliki gambaran kasar tentang bagaimana mereka akan tampil saat dipasang. </p>\n\n<p> Satu-satunya binari yang disediakan oleh paket <code>squashfs-tools</code> adalah <code>mksquashfs</code> dan <code>unsquashfs</code>, yang masing-masing digunakan untuk membuat / menambahkan file SquashFS dan mengekstrak file SquashFS. </p>\n\n<p> Bagaimana cara menentukan metode kompresi apa yang digunakan untuk membuat file SquashFS tertentu? </p>","source":"https://superuser.com/questions/919025/what-was-the-squashfs-compression-method","author":"<a href=\"https://superuser.com/users/83694/deltik\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Deltik</span></a>","replies":[],"answers":[{"answer":"<p> <code>unsquashfs -s</code> tidak memiliki kemampuan untuk menampilkan tipe kompresi yang digunakan sampai <a href=\"https://sourceforge.net/p/squashfs/code/ci/836a2c\" rel=\"nofollow noopener\" target=\"_blank\"> ini berkomitmen pada 07 Agustus 2009 </a> . Ini berarti bahwa jika Anda menjalankan <code>squashfs-tools</code> 4.0 atau lebih lama, Anda tidak akan dapat melihat metode kompresi yang digunakan. </p>\n\n<p> Dari informasi ini, saya memperoleh cara untuk membaca superblok SquashFS 4.0 untuk menentukan metode kompresi yang digunakan (di mana <code>$SQUASHFS</code> adalah jalur ke file SquashFS Anda): </p> <pre><code>dd if=$SQUASHFS bs=1 count=2 skip=20 2&gt;/dev/zero | od -An -tdI | xargs\n</code></pre> <p> Alternatifnya, inilah fungsi untuk mereka yang ingin mengetikkan nama file di akhir baris: </p> <pre><code>sqsh_comp_method(){ dd if=\"$1\" bs=1 count=2 skip=20 2&gt;/dev/zero|od -An -tdI | xargs;};sqsh_comp_method\n</code></pre> <p> Anda akan mendapatkan nomor (antara 1 dan 6 pada SquashFS 4.4). Anda dapat mencocokkan angka tersebut dengan tabel berikut untuk melihat metode kompresi apa yang digunakan: </p> <pre><code>╔═══╦════════════════════╦════════════════════╗\n║ # ║ Compression Method ║ Compatible Version ║\n╠═══╬════════════════════╬════════════════════╣\n║ 1 ║ gzip               ║ 1.0 and newer      ║\n║ 2 ║ lzma               ║ 4.1 and newer      ║\n║ 3 ║ lzo                ║ 4.1 and newer      ║\n║ 4 ║ xz                 ║ 4.2 and newer      ║\n║ 5 ║ lz4                ║ 4.3 and newer      ║\n║ 6 ║ zstd               ║ 4.4 and newer      ║\n╚═══╩════════════════════╩════════════════════╝\n</code></pre> <p><sup><sub> ( <a href=\"https://sourceforge.net/p/squashfs/code/ci/e38956b92f738518c29734399629e7cdb33072d3/tree/squashfs-tools/squashfs_fs.h#l275\" rel=\"nofollow noopener\" target=\"_blank\"> Sumber </a> ) </sub></sup></p>\n\n<p> Perhatikan bahwa perintah <code>dd</code> di atas hanya akan memberikan keluaran yang dapat diandalkan jika file yang Anda tentukan memiliki superblok SquashFS 4.0. Perintah berikut akan menampilkan &quot;<code>Not SquashFS 4.0</code>&quot; jika file <code>$SQUASHFS</code> tidak memiliki nomor ajaib SquashFS 4.0: </p> <pre><code>if [[ \"$(dd if=\"$SQUASHFS\" bs=1 count=4 skip=28 2&gt;/dev/zero | xxd -p)\" != \"04000000\" ]] ; then echo -n \"Not \" ; fi ; echo \"SquashFS 4.0\"\n</code></pre> <h2 class=\"h4\"> Penjelasan </h2>\n\n<p> Dalam sistem file SquashFS 4.0, metode kompresi disimpan di 21 <sup> st </sup> dan 22 <sup> nd </sup> byte dari superblok sebagai tipe data <code>short</code>. <code>dd bs=1 count=2 skip=20</code> akan mengambil <code>short</code>, <code>od -An -tdI</code> akan mengubah <code>short</code> menjadi angka yang dapat dibaca manusia, dan <code>xargs</code> hanya untuk menghilangkan spasi di depan. </p>\n\n<p> Sebelum SquashFS 4.0, hanya ada file <strong> gzip </strong> metode. </p>\n\n<hr>\n\n<h3 class=\"h5\"> Jawaban lama </h3>\n\n<p> <code>unsquashfs</code> memiliki flag <code>-s</code> untuk menampilkan informasi filesystem SquashFS. </p>\n\n<p> Contoh penggunaan: </p> <pre><code>deltik@node51 [/tmp]# unsquashfs -s template.squashfs\nFound a valid SQUASHFS 4:0 superblock on template.squashfs.\nCreation or last append time Thu Apr 30 23:07:23 2015\nFilesystem size 47225242.44 Kbytes (46118.40 Mbytes)\nCompression gzip\nBlock size 131072\nFilesystem is exportable via NFS\nInodes are compressed\nData is compressed\nFragments are compressed\nAlways_use_fragments option is not specified\nXattrs are compressed\nDuplicates are removed\nNumber of fragments 23629\nNumber of inodes 437076\nNumber of ids 1\n</code></pre> <p> Jika Anda hanya ingin jenis kompresi diidentifikasi, Anda dapat menyalurkan output melalui <code>awk '/^Compression/{print $2}'</code>. Contoh: </p> <pre><code>deltik@node51 [/tmp]# unsquashfs -s template.squashfs | awk '/^Compression/{print $2}'\ngzip\n</code></pre>","votes":"7","source":"https://superuser.com/a/919026","author":"<a href=\"https://superuser.com/users/83694/deltik\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Deltik</span></a>","replies":[]},{"answer":"<p> Juga mencari jawaban yang lebih baik. Saya berasumsi Anda ingin tahu karena OS Anda tampaknya tidak mendukung kompresi yang digunakan dalam memberi Anda squashedfs yang dimaksud. Atau mungkin seperti unsquashfs di CentOS6, milik Anda tidak melaporkan jenis Kompresi. </p>\n\n<p> Jadi saya <code>strings | head</code> pada file terkompresi. Baris pertama adalah <code>hsqs</code> dan baris kedua <em> Sebaiknya </em> menunjukkan metode kompresi yang digunakan. Saya yakin saya menggunakan metode ini untuk menentukan bahwa <code>7zXZ</code> yang menunjukkan bahwa 7zip sebenarnya adalah metode tersebut. Namun, dengan <code>gzip</code>, tidak beruntung. Saya harus menggunakan <code>od -b</code> pada file tersebut untuk mendapatkan oktal dump dan mencoba mencocokkan tanda tangan file dengan yang terkait dengan program <code>file</code>. Namun, sekali lagi, tidak beruntung (string yang saya harapkan adalah <code>037 213</code> tetapi saya hanya melihat <code>037 221</code>. </p>","votes":"0","source":"https://superuser.com/a/919068","author":"<a href=\"https://superuser.com/users/437093/otheus\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Otheus</span></a>","replies":[{"reply":"Ada baiknya Anda melihat superblok untuk informasi kompresi. Saya telah memperbarui <a href=\"http://superuser.com/a/919026/83694\" target=\"_blank\" rel=\"nofollow noopener\"> Jawabanku </a> dengan analisis superblok.","author":"<a href=\"https://superuser.com/users/83694/deltik\" target=\"_blank\" rel=\"nofollow noopener\">Deltik</a>"},{"reply":"@Deltik Anda sangat keren.","author":"<a href=\"https://superuser.com/users/437093/otheus\" target=\"_blank\" rel=\"nofollow noopener\">Otheus</a>"}]}]}
