{"title":"UNIX menemukan direktori yang berisi file tertentu (pom.xml) lalu jalankan perintah di direktori tersebut","draft":false,"url":"/unix-menemukan-direktori-yang-berisi-file-tertentu-pomxml-lalu-jalankan-perintah-di-direktori-tersebut-ge4z2x8h","votes":"4","answers_count":"7","categories":["Komputer"],"tags":["unix","find","script"],"snippet":"Saya ingin, dari direktori root, menemukan semua direktori yang berisi nama file tertentu (pom.xml), lalu cd ke direktori tersebut dan jalankan perintah. Saya bisa melakukan ini dalam skrip tetapi saya berharap melakukan...","body":"<p> Saya ingin, dari direktori root, menemukan semua direktori yang berisi nama file tertentu (pom.xml), lalu cd ke direktori tersebut dan jalankan perintah. Saya bisa melakukan ini dalam skrip tetapi saya berharap melakukan ini dengan satu perintah baris. </p>\n\n<p> sejauh ini saya punya </p> <pre><code>find . -type f -name 'pom.xml' |sed 's#\\(.*\\)/.*#\\1#'\n</code></pre> <p> Ini memberikan dir yang saya butuhkan ... sekarang saya perlu cd ke masing-masing dan menjalankan perintah saya </p>","source":"https://superuser.com/questions/118730/unix-find-dirs-that-contain-a-particular-file-pom-xml-then-execute-command-in","author":"<span itemprop=\"name\">Jamie Duncan</span>","replies":[{"reply":"mengapa Anda perlu cd ke direktori untuk menjalankan perintah Anda? Cukup jalankan perintah pada <code>&#47;path&#47;to&#47;pom.xml</code>","author":"User"},{"reply":"Pertanyaan ini dengan jelas mengatakan Anda tidak menulis skrip shell apa pun, itu milik superuser","author":"<a href=\"https://superuser.com/users/1658/tim-post\" target=\"_blank\" rel=\"nofollow noopener\">Tim Post</a>"},{"reply":"@tim dia mencoba untuk menghindari pemrograman yang seharusnya dipikirkan pertama kali oleh programmer mana pun;)","author":"<a href=\"https://superuser.com/users/29367/sfussenegger\" target=\"_blank\" rel=\"nofollow noopener\">sfussenegger</a>"},{"reply":"@ dnagirl perintah menjalankan skrip yang membuat dirs baru dll di dir dengan file pom.xml @ want adalah sebagai satu liner sehingga mudah untuk didistribusikan","author":"User"}],"answers":[{"answer":"<p> temukan has -exec dan -execdir. Untuk membangun maven, Anda akan melakukannya </p> <pre><code># executes `mvn clean install` in any directory where pom.xml was found\nfind . -name pom.xml -execdir mvn clean install \\;\n</code></pre>","votes":"6","source":"https://superuser.com/a/118733","author":"<a href=\"https://superuser.com/users/29367/sfussenegger\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">sfussenegger</span></a>","replies":[{"reply":"<code>-execdir</code> persis seperti yang dibutuhkan.","author":"<a href=\"https://superuser.com/users/15210/william-jackson\" target=\"_blank\" rel=\"nofollow noopener\">William Jackson</a>"}]},{"answer":"<p> Ini akan menemukan direktori: </p> <pre><code>find . -name pom.xml -printf '%h\\n'\n</code></pre> <p> maka Anda dapat membaca direktori dan menjalankan perintah Anda: </p> <pre><code>find . -name pom.xml -printf '%h\\n' | while read dir; do ( cd \"$dir\"; command ... ) done\n</code></pre> <p> Jika Anda paranoid tentang baris baru yang disematkan dalam nama direktori (dan serius, apa yang salah dengan orang-orang?) Anda dapat menggunakan &quot;\\ 0&quot; di printf, dan kemudian menggunakan <code>xargs</code> untuk menjalankan perintah: </p> <pre><code>find . -name pom.xml -printf '%h\\0' | xargs -0 -L 1 sh -c 'dir=\"$0\"; cd \"$dir\"; command ...'\n</code></pre>","votes":"2","source":"https://superuser.com/a/118731","author":"<a href=\"https://superuser.com/users/42323/pointy\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Pointy</span></a>","replies":[]},{"answer":"<p> ada juga: </p> <pre><code>find . -type f -exec mvn -f {} clean install \\;\n</code></pre> <p> Namun, saya pikir Anda harus melihat opsi Maven yang tersedia untuk melakukan ini. Meskipun tidak lagi ada di Maven 3.x, Maven 2.x memiliki opsi <code>-r</code> yang melakukan hal ini. Cara yang lebih baik adalah dengan membuat <code>pom.xml</code> agregat yang berisi file yang diinginkan sebagai modul, lalu Anda dapat menggunakan <code>-rf</code> dan <code>-pl</code> untuk memilih secara selektif mana yang akan dibuat. </p>","votes":"1","source":"https://superuser.com/a/118734","author":"<a href=\"https://superuser.com/users/22391/brett-porter\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Brett Porter</span></a>","replies":[]},{"answer":"<p> Jika yang Anda inginkan adalah menerapkan properti svnignore berdasarkan file yang tidak Anda ketahui jalur absolutnya, Anda dapat menggunakan: </p> <pre><code>#!/bin/sh\nfind -name pom.xml -execdir pwd \\; | while read project_dir\ndo\nsvn propset svn:ignore -F support-tools/svn/svnignore.cfg $project_dir\ndone\n</code></pre> <p> Saya menggunakan yang ini dalam proyek saya saat ini, karena setiap pengembang memiliki checkout svn di lokasi yang berbeda dan tidak mengubah direktori kerja untuk menjalankan perintah svn. Untuk penggunaan tujuan lain </p> <pre><code>find -name -execdir\n</code></pre>","votes":"1","source":"https://superuser.com/a/197331","author":"<a href=\"https://superuser.com/users/51730/marcos-carceles\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Marcos Carceles</span></a>","replies":[]},{"answer":"<p> Bagaimana tentang: </p> <pre><code>find / -type f -name 'pom.xml' -print | while read FILE; do cd `dirname ${FILE}` &amp;&amp; /run/my/script; done\n</code></pre> <p> Jika Anda dapat mengubah skrip sehingga mengambil direktori sebagai argumen, maka berikut ini akan berfungsi: </p> <pre><code>find / -type f -name 'pom.xml' -exec /run/my/script `dirname {}` \\;\n</code></pre>","votes":"0","source":"https://superuser.com/a/197340","author":"<a href=\"https://superuser.com/users/31416/cry-havok\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Cry Havok</span></a>","replies":[]},{"answer":"<p> Untuk menemukan folder unik yang berisi jenis file tertentu, Anda dapat menggunakan: </p>\n\n<p> <code>find . -type f -name *.png | sed 's#\\(.*\\)/.*#\\1#' | uniq</code> </p>\n\n<p> Ini akan mencantumkan semua direktori unik termasuk file PNG. </p>","votes":"0","source":"https://superuser.com/a/565651","author":"<a href=\"https://superuser.com/users/206979/dolphindream\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">DolphinDream</span></a>","replies":[{"reply":"Ini adalah jawaban yang masuk akal –– untuk a <i> berbeda </i> pertanyaan. Ini hanya memiliki hubungan paling tipis dengan pertanyaan yang sebenarnya ditanyakan di sini.","author":"<a href=\"https://superuser.com/users/150988/scott\" target=\"_blank\" rel=\"nofollow noopener\">Scott</a>"}]},{"answer":"<p> Anda bisa menggunakan <code>xargs</code>: </p>\n\n<blockquote> <pre><code> xargs -- construct argument list(s) and execute utility\n</code></pre> <p> RINGKASAN </p> <pre><code>  xargs [-0opt] [-E eofstr] [-I replstr [-R replacements]] [-J replstr]\n        [-L number] [-n number [-x]] [-P maxprocs] [-s size]\n        [utility [argument ...]]\n</code></pre> <p> DESKRIPSI </p> <pre><code> The xargs utility reads space, tab, newline and end-of-file delimited\n strings from the standard input and executes utility with the strings\n as arguments.\n\n Any arguments specified on the command line are given to utility upon\n each invocation, followed by some number of the arguments read from the\n standard input of xargs.  The utility is repeatedly executed until stan-\n dard input is exhausted.\n</code></pre> </blockquote>","votes":"0","source":"https://superuser.com/a/118732","author":"<a href=\"https://superuser.com/users/509207/lenw\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">LenW</span></a>","replies":[]}]}
