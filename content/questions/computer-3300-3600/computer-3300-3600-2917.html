{"title":"Script atau alat untuk mendapatkan alamat IP dari sebuah remote host","draft":false,"url":"/script-atau-alat-untuk-mendapatkan-alamat-ip-dari-sebuah-remote-host-8be6znor","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["networking","bash","script"],"snippet":"Saya ingin menetapkan variabel lingkungan dengan alamat IP dari host jarak jauh yang diberikan. Ini adalah solusi yang saya dapatkan:  export IP=`curl http://network-tools.com/default.asp?host=www.example.com |        grep -oE '&lt;br&gt;[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+' |        cut -c5-`  Ini berfungsi...","body":"<p> Saya ingin menetapkan variabel lingkungan dengan alamat IP dari host jarak jauh yang diberikan. Ini adalah solusi yang saya dapatkan: </p> <pre><code>export IP=`curl http://network-tools.com/default.asp?host=www.example.com | \n       grep -oE '&lt;br&gt;[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+' | \n       cut -c5-`\n</code></pre> <p> Ini berfungsi dengan baik tetapi saya punya beberapa pertanyaan: </p>\n\n<ol>\n<li> Apakah ada alat sederhana untuk mendapatkan hasil yang sama? Saya membutuhkannya untuk bekerja melalui proxy yang membatasi nama host, itulah mengapa saya menggunakan halaman alat jaringan. </li>\n<li> Bagaimana saya bisa menjadikannya sebagai fungsi dari nama host? sesuatu seperti getIP (nama host) </li>\n</ol>","source":"https://superuser.com/questions/449961/script-or-tool-to-get-the-ip-address-of-a-remote-host","author":"<a href=\"https://superuser.com/users/137580/esteban-crespi\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Esteban Crespi</span></a>","replies":[{"reply":"# 3 adalah pertanyaan yang sangat berbeda dari dua pertanyaan lainnya, dan seperti saat ini, sangat luas. Saya ragu itu bahkan bisa dijawab dengan cara yang baik seperti yang tertulis sekarang.","author":"<a href=\"https://superuser.com/users/53590/user\" target=\"_blank\" rel=\"nofollow noopener\">user</a>"}],"answers":[{"answer":"<p> Cobalah sesuatu seperti </p> <pre><code>export IP=`( dig ${HOSTNAME} A +short | tail -n1; \\\n             dig ${HOSTNAME} AAAA +short | tail -n1 ) \\\n           | head -n1`\n</code></pre> <p> Ini akan memberi Anda: </p>\n\n<ul>\n<li> Untuk host dengan setidaknya satu alamat IPv4, (salah satu) alamat IPv4 </li>\n<li> Untuk host tanpa alamat IPv4 tetapi dengan setidaknya satu alamat IPv6, (salah satu) alamat IPv6 </li>\n<li> Untuk host tanpa alamat (IPv4 atau IPv6) sama sekali di DNS, atau jika ada kegagalan penyelesai, nilai kosong </li>\n</ul>\n\n<p> Jika Anda tidak memerlukan kemampuan IPv4 atau IPv6 (pertanyaan Anda sepertinya menunjukkan bahwa Anda sangat tertarik dengan alamat IPv4), hapus saja perintah <code>dig</code> itu (<code>A</code> adalah IPv4, <code>AAAA</code> adalah IPv6). Jadi, jika Anda hanya tertarik dengan alamat IPv4: </p> <pre><code>export IP=`dig ${HOSTNAME} A +short | tail -n1`\n</code></pre> <p> <code>tail -n1</code> memastikan bahwa Anda mendapatkan alamat IP (dalam kasus <code>CNAME</code>, dan mungkin jenis data lainnya, <code>dig</code> mengeluarkan nama kanonis yang direferensikan pada baris pertama). <code>head -n1</code> memastikan bahwa Anda hanya mendapatkan satu alamat dengan mengembalikan hanya baris pertama dari keluaran yang tersisa (tidak perlu dalam kasus hanya satu kelompok alamat, karena <code>tail</code> hanya akan mengembalikan satu alamat). Karena data DNS biasanya disajikan dengan cara round-robin, tidak ada jaminan alamat pasti mana yang akan dikembalikan untuk host dengan banyak alamat. </p>\n\n<p> Saya tidak terlalu paham dengan menulis fungsi bash, tetapi seharusnya relatif mudah untuk mengubahnya menjadi sebuah fungsi. </p>","votes":"5","source":"https://superuser.com/a/449996","author":"<a href=\"https://superuser.com/users/53590/user\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user</span></a>","replies":[{"reply":"Kebanyakan tumpukan lebih memilih IPv6, jika tersedia; akibatnya, Anda mungkin juga menginginkan <code>tail -n 1</code> di tingkat atas, jika Anda ingin meniru urutan penyelesaian host. Kemudian lagi, seluruh pendekatan ini juga tidak menghormati NIS, atau <code>&#47;etc&#47;hosts</code>, atau <code>nsswitch.conf</code>, namun saya tetap menggunakannya secara teratur pada mesin di mana <code>resolveip -s</code> belum tentu tersedia, jadi mungkin saya agak terlalu bertele-tele. ;)","author":"<a href=\"https://superuser.com/users/83893/bmdan\" target=\"_blank\" rel=\"nofollow noopener\">BMDan</a>"},{"reply":"@BMDan Potongan dalam pertanyaan bahkan tidak mendukung IPv6, yang (kemungkinan; sudah sekitar dua tahun sekarang) mengapa saya memilih pemesanan khusus ini.","author":"<a href=\"https://superuser.com/users/53590/user\" target=\"_blank\" rel=\"nofollow noopener\">user</a>"},{"reply":"Saya tidak yakin saya mengerti maksud Anda. Cuplikan yang Anda berikan secara eksplisit menanyakan A dan AAAA, jadi itu peka terhadap IPv6. Saya setuju sejauh pernyataan Anda bahwa Anda berbagi fungsionalitas dengan aslinya, tetapi menurut saya tujuannya adalah untuk <i> memperbaiki </i> tentang apa yang menjadi pertanyaan, bukan hanya untuk membohongi kekurangannya.","author":"<a href=\"https://superuser.com/users/83893/bmdan\" target=\"_blank\" rel=\"nofollow noopener\">BMDan</a>"}]},{"answer":"<p> Coba yang berikut ini: </p>\n\n<ul>\n<li> <code>host www.example.com</code> </li>\n<li> <code>nslookup www.example.com</code> </li>\n<li> <code>dig www.example.com</code> </li>\n</ul>\n\n<p> Bergantung pada seberapa banyak informasi tambahan yang Anda inginkan, pilih kandidat yang sesuai. </p>","votes":"2","source":"https://superuser.com/a/449968","author":"<a href=\"https://superuser.com/users/143340/izzy\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Izzy</span></a>","replies":[{"reply":"Terima kasih atas jawaban Anda, saya telah mencoba ketiganya tetapi tampaknya tidak berhasil (dalam konteks saya). Misalnya <code>host</code> mengembalikan pesan <code>host www.example.com not found: 3(NXDOMAIN)</code>. Saya juga telah membuat file etc / resolv.conf baik dengan ip server dns yang diperoleh dengan perintah <code>ipconfig &#47;all</code> dan dengan ip dns publik Google 8.8.8.8 tidak berhasil. Saya khawatir masalahnya berasal dari semacam batasan yang ditempatkan oleh keamanan jaringan saya.","author":"<a href=\"https://superuser.com/users/137580/esteban-crespi\" target=\"_blank\" rel=\"nofollow noopener\">Esteban Crespi</a>"},{"reply":"Sepertinya ada masalah dengan resolusi DNS di komputer Anda. Perintah <code>dig</code> mungkin berguna di sini, memungkinkan untuk menentukan server nama yang akan digunakan, mis. <code>dig @ns.example.com www.example.com</code> akan menggunakan <code>ns.example.com</code> sebagai server nama (Anda juga dapat menentukan IP di sini). <code>nslookup</code> juga mengizinkan ini (periksa <code>man nslookup</code> untuk detailnya). <code>host</code> akan sangat baik untuk Anda karena hanya mengembalikan IP (tanpa informasi tambahan untuk disaring) - tetapi membutuhkan resolusi DNS untuk bekerja pada host secara langsung.","author":"<a href=\"https://superuser.com/users/143340/izzy\" target=\"_blank\" rel=\"nofollow noopener\">Izzy</a>"}]}]}
