{"title":"Tidak dapat terhubung melalui SSH dan publickey dan pengguna B (pengguna A dapat)","draft":false,"url":"/tidak-dapat-terhubung-melalui-ssh-dan-publickey-dan-pengguna-b-pengguna-a-dapat-cxwplosc","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["ssh","login"],"snippet":"TERPECAHKAN.  Itu adalah bit grup yang dapat ditulis pada direktori home user_B, yang menipu saya.  Saya kehabisan ide untuk yang satu ini. Setiap petunjuk akan sangat dihargai.  Pertimbangkan pengaturan ini:  Server S...","body":"<p><strong> TERPECAHKAN. </strong> Itu adalah bit grup yang dapat ditulis pada direktori home <code>user_B</code>, yang menipu saya. </p>\n\n<p> Saya kehabisan ide untuk yang satu ini. Setiap petunjuk akan sangat dihargai. </p>\n\n<p> Pertimbangkan pengaturan ini: </p>\n\n<ul>\n<li> Server <code>S</code> yang menjalankan Ubuntu, pengguna <code>boldewyn</code>, <code>user_A</code> dan <code>user_B</code> </li>\n<li> Dua laptop <code>user_B</code> dan <code>B</code>, masing-masing dengan pengguna lokal <code>boldewyn</code> (memiliki kunci <code>id_rsa</code> untuk masuk <code>S</code>) dan kunci kedua <code>id_rsa_A</code> / <code>id_rsa_B</code>. Semua kunci disimpan di <code>/home/boldewyn/.ssh</code>. Keduanya menjalankan Ubuntu. </li>\n<li><p> <code>user_A</code> dan <code>user_B</code> pada <code>S</code> memiliki kata sandi kosong, login hanya dapat dilakukan melalui publickey dan SSH. </p> <pre><code>+--------+            +-------------------+            +--------+\n| laptop |            |       server      |            | laptop |\n|   A    |            |         S         |            |   B    |\n|        |            |                   |            |        |\n+--------+    SSH     +-------------------+    SSH     +--------+\n|id_rsa_A|------------|&lt; user_A   user_B &gt;|------------|id_rsa_B|\n+--------+            +-------------------+            +--------+\n|id_rsa  |------------|&lt;    boldewyn     &gt;|------------|id_rsa  |\n+--------+            +-------------------+            +--------+\n</code></pre> </li>\n</ul>\n\n<p><strong> Pekerjaan apa: </strong></p>\n\n<ul>\n<li><p> Masuk dari laptop mana pun sebagai <code>boldewyn</code> (menggunakan <code>id_rsa</code> dan <code>S:/home/boldewyn/.ssh/authorized_keys</code> </p></li>\n<li><p> Masuk dari laptop <code>A</code> sebagai pengguna <code>user_A</code> (menggunakan <code>id_rsa_A</code> dan <code>S:/home/user_A/.ssh/authorized_keys</code>: <code>ssh -i id_rsa_A user_A@S</code>) </p></li>\n</ul>\n\n<p><strong> Masalahku: </strong> Pada laptop <code>B</code> penyetelan yang persis sama gagal untuk <code>user_B</code>. Saya tidak dapat masuk ke <code>S</code>, karena untuk alasan apa pun kunci tidak diterima dan prompt kata sandi muncul (<code>user_B</code> tidak memiliki kata sandi, itu bukan pilihan). </p>\n\n<p><strong> Apa yang telah saya periksa: </strong></p>\n\n<ul>\n<li><p> Di laptop <code>B</code>: </p>\n\n<ul>\n<li> Memeriksa hak <code>~/.ssh</code> dan semua isinya </li>\n<li> letakkan bagian publik dari <code>id_rsa_B</code> di <code>boldewyn</code>s <code>.authorized_keys</code> dan <code>ssh -i id_rsa_B boldewyn@S</code>: berfungsi (kuncinya tidak rusak atau lebih) </li>\n<li> <code>ssh -vvv</code>: Yah, tidak terlalu membantu: Katakan saja pada satu titik, bahwa metode <code>publickey</code> sekarang dilewati. Tidak ada alasan yang diberikan. </li>\n</ul></li>\n<li><p> Di server <code>S</code>: </p>\n\n<ul>\n<li> File <code>user_B</code>s <code>.authorized_keys</code> diperiksa tiga kali </li>\n<li> Memeriksa hak-hak <code>/home/*/.ssh</code> dan semua isinya (terutama dibandingkan <code>user_A</code> dan <code>user_B</code>) </li>\n<li> Memeriksa bahwa <code>$HOME</code> diatur (melalui <code>ssh -i id_rsa_B boldewyn@S</code>) </li>\n<li> Dicentang, bahwa semua pengguna di <code>/etc/ssh/sshd_config</code>s <code>AllowUsers</code> (dan <code>AllowGroups</code>, omong-omong) </li>\n</ul></li>\n</ul>\n\n<p><strong> Barang lain: </strong></p>\n\n<p> Satu-satunya perbedaan yang dapat saya temukan antara <code>user_A</code> dan <code>user_B</code> adalah, bahwa saya membuat yang terakhir dengan <code>adduser -M</code> (jangan buat direktori home; itu sudah ada sebelumnya). Namun, saya memeriksa tiga kali, bahwa <code>/home/user_B</code> dan semua anak yang relevan dimiliki oleh <code>user_B</code> dan kelompok utamanya. </p>","source":"https://superuser.com/questions/222741/cant-connect-via-ssh-and-publickey-and-user-b-user-a-can","author":"<a href=\"https://superuser.com/users/2280/boldewyn\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Boldewyn</span></a>","replies":[{"reply":"Jalankan <code>sshd</code> di S dalam mode debug: <code>sudo sshd -rdp 1234</code> - sering membantu. (<code>-p 1234</code> adalah port sementara yang akan Anda gunakan untuk SSH.)","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"Apakah Anda memeriksa tiga kali bahwa <code>&#47;home&#47;user_B</code> (serta <code>&#47;home&#47;user_B&#47;.ssh</code> dan <code>&#47;home&#47;user_B&#47;.ssh&#47;authorized_keys</code>) memiliki izin yang sesuai yang tidak dapat ditulis kecuali untuk pengguna, yaitu, mode 755 atau lebih ketat?","author":"<a href=\"https://superuser.com/users/42315/gilles-so-stop-being-evil\" target=\"_blank\" rel=\"nofollow noopener\">Gilles &#x27;SO- stop being evil&#x27;</a>"},{"reply":"@grawity: Terima kasih atas petunjuknya. Saya akan mencobanya segera hari ini di malam hari, saat penyiapan telah tersedia.","author":"<a href=\"https://superuser.com/users/2280/boldewyn\" target=\"_blank\" rel=\"nofollow noopener\">Boldewyn</a>"},{"reply":"@ Gilles: Ya, saya lakukan. Bahkan, saya membandingkan file demi file dan dir oleh dir izin yang ditetapkan dalam kasus <code>user_A</code> s (berfungsi) dengan yang untuk <code>user_B</code> (tidak berfungsi). Mereka persis sama (selain kepemilikan file, tentunya).","author":"<a href=\"https://superuser.com/users/2280/boldewyn\" target=\"_blank\" rel=\"nofollow noopener\">Boldewyn</a>"}],"answers":[{"answer":"<p> Apakah Anda sudah memeriksa tiga kali itu <strong> <code>/home/user_B</code> </strong> (serta <code>/home/user_B/.ssh</code> dan <code>/home/user_B/.ssh/authorized_keys</code>) memiliki izin yang sesuai: <strong> tidak dapat ditulis kecuali untuk pengguna </strong> , mis., mode 755 atau lebih ketat? </p>","votes":"8","source":"https://superuser.com/a/223416","author":"<a href=\"https://superuser.com/users/42315/gilles-so-stop-being-evil\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Gilles &#39;SO- stop being evil&#39;</span></a>","replies":[{"reply":"Memecahkan masalah saya!","author":"<a href=\"https://superuser.com/users/208216/mingjiang-shi\" target=\"_blank\" rel=\"nofollow noopener\">Mingjiang Shi</a>"}]},{"answer":"<p> Saya pikir ini mungkin terkait dengan cara Anda membuat kunci tersebut. Saya akan mencoba lagi. Kunci dibuat dengan fasilitas ssh-keygen. Mungkin ketika satu set kunci dibuat, frasa sandi digunakan dalam proses pembuatan. Anda dapat mencoba menekan tombol enter saat Anda diminta memasukkan frasa sandi. Salin bagian pub dari kunci itu ke ubuntu. Pastikan Anda menghapus entri yang melanggar di file .ssh / authorized_keys. Pemikiran kedua: jika cat file pub pastikan Anda menggunakan &gt;&gt; (tambahkan) daripada&gt; (ganti_ saat Anda menyalin file pub ke file authorized_keys. (Cat id_rsa.pub &gt;&gt; .ssh / authorized_keys). </p>\n\n<p> Saya sedikit terkejut. Saya telah menggunakan metode saya di tempat kerja, menggunakan Solaris dan Cygwin, dan di rumah di Linux Lan saya terdiri dari Centos, Slackware, Debian, dan Ubuntu. Mungkinkah kunci pribadi Anda tidak cocok dengan kunci publik? Ketika Anda membuat kunci Anda, Anda mendapatkan pasangan, kunci publik akan disalin secara tradisional ke file kunci .ssh / berotorisasi di bawah direktori home mesin target. Jika Anda membuat ulang kunci, file .pub baru harus disalin. Kunci pribadi baru tidak akan dipasangkan dengan kunci publik lama. Saya perhatikan bahwa Anda tampaknya memiliki folder .authorized_keys di direktori home. Saya belum pernah mencobanya. Saya pikir penempatan normal ada di folder /home/user_name/.ssh/authorized_keys. Saya tidak pernah mengalami masalah dalam menggunakan versi Solaris dari sekitar 6 ke atas, Freebsd, dan berbagai iterasi dan rasa Linux. Semoga berhasil </p>\n\n<p> Alan </p>","votes":"0","source":"https://superuser.com/a/222783","author":"<a href=\"https://superuser.com/users/58932/apolinsky\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">apolinsky</span></a>","replies":[{"reply":"Kuncinya sepertinya baik-baik saja: <i> letakkan bagian publik dari id_rsa_B di boldewyns .authorized_keys dan ssh -i id_rsa_B boldewyn @ S: works (kuncinya tidak rusak atau lebih) </i>","author":"<a href=\"https://superuser.com/users/482/arjan\" target=\"_blank\" rel=\"nofollow noopener\">Arjan</a>"},{"reply":"Terima kasih sudah mencobanya, apolinsky, tapi, ya, seperti yang dikatakan Arjan, saya sudah memeriksa kunci dengan menggunakannya dengan akun <code>boldewyn</code>s.","author":"<a href=\"https://superuser.com/users/2280/boldewyn\" target=\"_blank\" rel=\"nofollow noopener\">Boldewyn</a>"}]}]}
