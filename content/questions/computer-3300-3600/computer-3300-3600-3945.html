{"title":"Resolusi set parameter Powershell dengan parameter eksplisit gagal","draft":false,"url":"/resolusi-set-parameter-powershell-dengan-parameter-eksplisit-gagal-updbsug6","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["powershell"],"snippet":"Katakanlah saya memiliki fungsi ini:  function Foo{    [CmdLetBinding()]    param(        [Parameter(Mandatory=$true,ParameterSetName=\"A\",Position=0)]         [Parameter(Mandatory=$true,ParameterSetName=\"both\",Position=0)]         [int]        $A,        [Parameter(Mandatory=$true,ParameterSetName=\"B\",Position=0)]         [Parameter(Mandatory=$true,ParameterSetName=\"both\",Position=1)]         [int]        $B    )    Write-Host $PsCmdlet.ParameterSetName}  Saya berharap metode ini mengharapkan A, atau B atau keduanya. Tidak...","body":"<p> Katakanlah saya memiliki fungsi ini: </p> <pre><code>function Foo{\n    [CmdLetBinding()]\n    param(\n        [Parameter(Mandatory=$true,ParameterSetName=\"A\",Position=0)] \n        [Parameter(Mandatory=$true,ParameterSetName=\"both\",Position=0)] \n        [int]\n        $A,\n\n        [Parameter(Mandatory=$true,ParameterSetName=\"B\",Position=0)] \n        [Parameter(Mandatory=$true,ParameterSetName=\"both\",Position=1)] \n        [int]\n        $B\n    )\n\n    Write-Host $PsCmdlet.ParameterSetName\n\n}\n</code></pre> <p> Saya berharap metode ini mengharapkan A, atau B atau keduanya. Tidak pernah tidak ada. </p>\n\n<p> Namun, jika saya menyebut ini: </p> <pre><code>Foo -A 1 -B 2 # outputs \"both\" as expected\nFoo -B 3 # error\nFoo -A 4 # error\n</code></pre> <p> Kesalahan yang saya dapatkan adalah: </p> <pre><code>Foo : Parameter set cannot be resolved using the specified named parameters.\nAt c:\\pathto:75 char:4\n+ Foo &lt;&lt;&lt;&lt;  -B 3\n    + CategoryInfo          : InvalidArgument: (:) [Foo], ParameterBindingException\n    + FullyQualifiedErrorId : AmbiguousParameterSet,Foo\n\nFoo : Parameter set cannot be resolved using the specified named parameters.\nAt c:\\pathto.ps1:76 char:4\n+ Foo &lt;&lt;&lt;&lt;  -A 4\n    + CategoryInfo          : InvalidArgument: (:) [Foo], ParameterBindingException\n    + FullyQualifiedErrorId : AmbiguousParameterSet,Foo\n</code></pre> <p> Saya bermasalah, karena seperti yang Anda lihat, saya secara eksplisit menentukan nama parameter. </p>\n\n<p> Bagaimana saya harus menulis fungsi saya agar berfungsi seperti yang diharapkan? </p>","source":"https://superuser.com/questions/530468/powershell-parameter-set-resolution-with-explicit-parameter-fails","author":"<a href=\"https://superuser.com/users/51000/steve-b\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Steve B</span></a>","replies":[{"reply":"<b> Catatan untuk orang lain </b> : Untuk parameter dinamis, tampaknya ada string ajaib untuk menggunakan parameter di semua set parameter - <a href=\"http://powershell.org/wp/forums/topic/trouble-with-dynamic-parameter-positioning-in-parametersets/\" rel=\"nofollow noopener\" target=\"_blank\"> <code>ParameterSetName=&quot;__AllParameterSets&quot;</code> </a>","author":"<a href=\"https://superuser.com/users/180163/kylemit\" target=\"_blank\" rel=\"nofollow noopener\">KyleMit</a>"}],"answers":[{"answer":"<p> Anda mungkin ingin menerapkan pemeriksaan parameter dalam fungsi Anda. MS mengatakan bahwa set Parameter harus memiliki satu parameter yang unik untuk set parameternya. Jadi, setiap set parameter harus memiliki satu parameter yang bukan milik set parameter lain, yang merupakan alasan kesalahan Anda saat mencoba memanggil fungsi dengan hanya satu parameter, ia tidak tahu parameter mana yang disetel untuk ditetapkan b / c parameter yang diberikan tidak unik untuk set parameter tertentu. Saya datang dekat dengan </p> <pre><code> function Foof{\n[CmdLetBinding(DefaultParameterSetName=\"None\")]\nparam(\n\n    [Parameter(Mandatory=$false,ParameterSetName=\"A\")]\n    [Parameter(Position=0)]\n    [int]\n    $A,\n\n    [Parameter(Mandatory=$false,ParameterSetName=\"B\")]\n    [Parameter(Mandatory=$false,ParameterSetName=\"both\")]  \n    [Parameter(Position=1)]\n    [int]\n    $B,\n\n    [Parameter(Mandatory=$false,ParameterSetName=\"both\")]  \n    [int]\n    $C=$true\n\n)\n\nWrite-Host $PsCmdlet.ParameterSetName\nwrite-host \"A=$A and B=$B and C=$C\"\n\n}\n</code></pre> <p> Saya pikir menetapkan <code>$C</code> nilai default akan memberikan perilaku yang Anda harapkan, tetapi tidak b / c parameter harus dideklarasikan secara eksplisit saat memanggil fungsi. </p>\n\n<p> Anda akan melihat saya menyetel DefaultParameterSetName ke &quot;None&quot;. Apa yang dilakukan ini adalah memberi Anda puasa untuk memeriksa kasus jika tidak ada parameter yang dikirimkan. </p>\n\n<p> Anda dapat melakukan sesuatu seperti memeriksa apakah <code>$PsCmdlet.ParameterSetName -eq \"None\"</code> lalu <code>Read-Host</code> variabel apa pun yang ingin Anda berikan, atau hanya menampilkan kesalahan yang mengatakan variabel <code>a</code> atau <code>b</code> harus disediakan. </p>\n\n<p><a href=\"http://technet.microsoft.com/en-us/library/hh847743.aspx\" rel=\"nofollow noopener\" target=\"_blank\"> http://technet.microsoft.com/en-us/library/hh847743.aspx </a></p>","votes":"6","source":"https://superuser.com/a/531525","author":"<a href=\"https://superuser.com/users/35868/mdmoore313\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">MDMoore313</span></a>","replies":[{"reply":"Saya mengakhiri dengan menghapus fitur set parameter. Dalam fungsi saya, saya mulai sekarang dengan pemeriksaan parameter seperti yang Anda sarankan: <code>if((-Not $A) -and (-not $b)) { throw &quot;Did you read the documentation? No? Shame on you!*&quot; }</code>","author":"<a href=\"https://superuser.com/users/51000/steve-b\" target=\"_blank\" rel=\"nofollow noopener\">Steve B</a>"}]}]}
