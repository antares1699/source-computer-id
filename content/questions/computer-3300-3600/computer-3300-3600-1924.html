{"title":"Mengapa .bashrc saya terbaca ketika saya menjalankan perintah noninteractive melalui ssh","draft":false,"url":"/mengapa-bashrc-saya-terbaca-ketika-saya-menjalankan-perintah-noninteractive-melalui-ssh-stmgnqx1","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","bash","ssh","terminal","shell"],"snippet":"Saya telah menambahkan setiap file konfigurasi bash saya (~/.bashrc,~/.bash_profile,~/.profile) dengan echo NAME_OF_FILE, yaitu saya mendapatkan &#39;.bashrc&#39; ketika saya mencari di ~/.bashrc.  Apa yang membingungkan saya adalah mengapa saya mendapatkan dan menunjukkan bahwa...","body":"<p> Saya telah menambahkan setiap file konfigurasi bash saya (<code>~/.bashrc</code>,<code>~/.bash_profile</code>,<code>~/.profile</code>) dengan <code>echo NAME_OF_FILE</code>, yaitu saya mendapatkan &#39;.bashrc&#39; ketika saya mencari di <code>~/.bashrc</code>. </p>\n\n<p> Apa yang membingungkan saya adalah mengapa saya mendapatkan dan menunjukkan bahwa ~ / .bashrc disertakan ketika saya menjalankan perintah di atas ssh. Misalnya, jika saya melakukannya: </p> <pre><code>ssh localhost echo hi\n</code></pre> <p> saya mendapat </p> <pre><code>.bashrc\nhi\n</code></pre> <p> Mengapa mendapatkan <code>~/.bashrc</code> bersumber dalam konteks ini? Bukankah seharusnya itu TIDAK bersumber karena ini harus menjalankan sesi bash non-interaktif? </p>\n\n<p> Memang, <code>ssh localhost tty</code> memberi saya &#39;not a tty&#39; (didahului oleh &#39;.bashrc&#39; yang menunjukkan bahwa <code>~/.bashrc</code> tetap bersumber di). </p>\n\n<p> Saya telah <code>grep</code> mengambil semua file konfigurasi saya untuk perintah yang bersumber pada <code>~/.bashrc</code> secara eksplisit, dan tidak ada yang menjelaskannya. </p>\n\n<p> (Saya hanya memiliki <code>tty -s &amp;&amp; shopt -q login_shell &amp;&amp; [[ -r ~/.bashrc ]] &amp;&amp; . ~/.bashrc</code> di <code>.bash_profile</code> saya sehingga saya mendapatkan &#39;.bashrc&#39; bahkan dalam shell login interaktif, tetapi ini tidak menjelaskan masalah ssh — saya dapat mengomentarinya dan saya masih mendapatkan perilaku yang sama dengan contoh ssh di atas) </p>\n\n<p> Bagaimana cara men-debug ini? </p>","source":"https://superuser.com/questions/750747/why-does-my-bashrc-get-read-when-i-run-noninteractive-commands-over-ssh","author":"<a href=\"https://superuser.com/users/117243/pskocik\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">PSkocik</span></a>","replies":[{"reply":"Mungkinkah variabel BASH_ENV Anda?","author":"<a href=\"https://superuser.com/users/153888/m4573r\" target=\"_blank\" rel=\"nofollow noopener\">m4573r</a>"}],"answers":[{"answer":"<p> Dari halaman manual <code>bash</code>: </p> <pre><code>Bash attempts to determine when it is being run with its standard input\nconnected to a a network  con‐nection,  as  if  by  the remote shell daemon,\nusually rshd, or the secure shell daemon sshd.  If bash\ndetermines it is being run in this fashion, it reads and executes commands\nfrom  ~/.bashrc,  if  that file  exists and is readable.\n</code></pre> <p> Yaitu. <code>~/.bashrc</code> akan dijalankan ketika Anda memanggilnya melalui <code>ssh</code>, terlepas dari apakah Anda memiliki tty atau tidak. </p>\n\n<p> Jika Anda hanya ingin <code>.bashrc</code> Anda berjalan saat Anda interaktif, coba ini di bagian atas: </p> <pre><code># If not running interactively, don't do anything\n[[ \"$-\" != *i* ]] &amp;&amp; return\n</code></pre> <p> Jika itu tidak berhasil, coba ini: </p> <pre><code>[ -z \"$PS1\" ] &amp;&amp; return\n</code></pre>","votes":"8","source":"https://superuser.com/a/750767","author":"<a href=\"https://superuser.com/users/275997/lqueryvg\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Lqueryvg</span></a>","replies":[{"reply":"Halaman manual agak tidak jelas, karena kebanyakan alat koneksi jarak jauh - rshd, telnetd, sshd - lampirkan stdin / stdout bash ke pseudoterminal, <i> tidak </i> langsung ke soket jaringan (yang sebenarnya tidak mungkin untuk sshd). Akan memeriksa kode sumber nanti.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"Keduanya tidak berfungsi di CentOS 7.","author":"<a href=\"https://superuser.com/users/193529/yildizabdullah\" target=\"_blank\" rel=\"nofollow noopener\">yildizabdullah</a>"},{"reply":"@yildizabdullah Anda perlu debug. Mulailah dengan menambahkan gema atau <code>set -x</code> di bagian atas dan lihat apakah <code>.bashrc</code> Anda dipanggil. Kemudian periksa nilai variabel tersebut.","author":"<a href=\"https://superuser.com/users/275997/lqueryvg\" target=\"_blank\" rel=\"nofollow noopener\">Lqueryvg</a>"},{"reply":"@Lqueryvg Saya menambahkan perintah <code>echo</code> di atas dan itu berjalan. Artinya, .bashrc dipanggil.","author":"<a href=\"https://superuser.com/users/193529/yildizabdullah\" target=\"_blank\" rel=\"nofollow noopener\">yildizabdullah</a>"},{"reply":"Lakukan <code>set</code> dan <code>env</code> - coba cari tahu <code>$-</code> dan <code>$PS1</code> apa yang disetel. (Saya mulai bertanya-tanya apakah Anda benar-benar di tahun <code>bash</code>.). Ketik <code>bash</code> untuk mendapatkan sub-shell - sehingga Anda benar-benar tahu bahwa Anda sedang dalam bash - dan lihat nilainya di sana.","author":"<a href=\"https://superuser.com/users/275997/lqueryvg\" target=\"_blank\" rel=\"nofollow noopener\">Lqueryvg</a>"}]}]}
