{"title":"Perintah xargs berfungsi di ubuntu, tetapi tidak untuk mac","draft":false,"url":"/perintah-xargs-berfungsi-di-ubuntu-tetapi-tidak-untuk-mac-kikkwzdc","votes":"4","answers_count":"5","categories":["Komputer"],"tags":["macos","bash"],"snippet":"Saya memiliki baris kode berikut yang saya gunakan untuk memperbarui variabel tanggal pribadi saya di proyek saya ke tanggal hari ini. Baris ini berfungsi di terminal Ubuntu, tetapi terminal Mac tampaknya tertinggal...","body":"<p> Saya memiliki baris kode berikut yang saya gunakan untuk memperbarui variabel tanggal pribadi saya di proyek saya ke tanggal hari ini. Baris ini berfungsi di terminal Ubuntu, tetapi terminal Mac tampaknya tertinggal jauh. Sayangnya, saya menyalin cuplikan ini dari beberapa situs, jadi saya tidak yakin bagaimana tepatnya cara kerjanya. Saran? </p> <pre><code>grep -ilr --exclude=revar.sh --exclude=README.md \"[DATE]\" * |\n    grep -v .git | xargs -i@ sed -i \"s/\\[DATE\\]/${today}/g\" @\n</code></pre>","source":"https://superuser.com/questions/132283/xargs-command-works-on-ubuntu-but-not-mac","author":"<a href=\"https://superuser.com/users/24986/corey-hart\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Corey hart</span></a>","replies":[{"reply":"@ Migrator: Ini adalah pertanyaan pemrograman, menggunakan skrip shell sebagai bahasa (dan untuk tujuan memperbarui file kode sumber). Ini bisa jadi cocok untuk <i> kedua </i> SO dan SU, tapi karena ditanya di SO, kenapa harus migrasi?","author":"User"}],"answers":[{"answer":"<h3 class=\"h5\"> Bagaimana tepatnya itu bekerja </h3>\n\n<ol>\n<li><p> Buat daftar nama file: </p> <pre><code>grep -ilr --exclude=revar.sh --exclude=README.md \"[DATE]\" *\n</code></pre> <p> Cari secara rekursif (-r) untuk file dan buat daftar (-l) nama-nama yang isi file cocok dengan case-insensitively (-i) regex &#39;[DATE]&#39; (yang berarti bahwa file tersebut berisi salah satu dari 8 karakter &quot;AaDdEeTt&quot;); kecualikan nama revar.sh dan README.md, dan </p></li>\n<li><p> Hapus semua nama file dari daftar yang berisi karakter diikuti dengan &#39;git&#39; (jadi nama file &#39;agitator&#39; akan dihapus): </p> <pre><code>grep -v .git\n</code></pre> </li>\n<li><p> Proses file satu per satu, dengan menerapkan skrip &#39;sed&#39; tertentu ke file. Dalam notasi modern (POSIX - dan MacOS X, dan Linux, AIX, HP-UX, Solaris, dll): </p> <pre><code>xargs -I@ sed -i \"s/\\[DATE\\]/${today}/g\" @\n</code></pre> <p> Opsi &#39;-i&#39; untuk &#39;sed&#39; berarti menimpa file input setelah diproses. Ini adalah ekstensi GNU dan BSD untuk &#39;sed&#39; yang tidak ditentukan dalam standar POSIX. </p></li>\n</ol>\n\n<h3 class=\"h5\"> Apa yang tidak masuk akal tentang itu </h3>\n\n<p> Skrip ini dapat dikritik di berbagai tingkatan. </p>\n\n<ul>\n<li> String pencarian pertama salah; itu harus memiliki garis miring terbalik sebelum tanda kurung; kebanyakan file mengandung setidaknya satu dari huruf &#39;dateDATE&#39;. </li>\n<li> Grep kedua mungkin dimaksudkan untuk menghapus apa pun di bawah direktori &#39;.git&#39; dan perlu diperbaiki. </li>\n<li> Perintah &#39;sed&#39; tidak peka huruf besar / kecil saat mencari &#39;[DATE]&#39;, tidak seperti &#39;grep&#39; yang pertama. </li>\n</ul>\n\n<h3 class=\"h5\"> Bagaimana memperbaikinya </h3>\n\n<p> Jadi, salah satu dari dua alternatif masuk akal. </p>\n\n<p> Antara: </p> <pre><code>grep -ilr --exclude=revar.sh --exclude=README.md \"\\[DATE\\]\" * |\ngrep -v '\\.git/' |\nxargs sed -i \"s/\\[[Dd][Aa][Tt][Ee]\\]/${today}/g\"\n</code></pre> <p> Atau: </p> <pre><code>grep -lr --exclude=revar.sh --exclude=README.md \"\\[DATE\\]\" * |\ngrep -v '\\.git/' |\nxargs sed -i \"s/\\[DATE\\]/${today}/g\"\n</code></pre> <p> Seperti yang dicatat oleh Donal Fellows, dalam konteks ini tidak perlu menggunakan opsi &#39;-i&#39; atau &#39;-I&#39; ke &#39;xargs&#39;. </p>\n\n<h3 class=\"h5\"> Apakah ini berguna bahkan saat diperbaiki? </h3>\n\n<p> Ini hanya membuat saya bingung bagaimana itu berguna. Pada hari pertama, semua kemunculan &#39;[DATE]&#39; dipetakan ke &#39;2010-04-17&#39;; apa yang terjadi keesokan harinya? Bagaimana Anda menghapus peta tanggal sebelum Anda berkomitmen ke repositori git? </p>\n\n<p> Namun, setidaknya Anda sekarang tahu apa fungsinya dan bagaimana cara kerjanya. </p>","votes":"4","source":"https://superuser.com/a/132286","author":"<a href=\"https://superuser.com/users/3089/jonathan-leffler\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Jonathan Leffler</span></a>","replies":[{"reply":"Saya berasumsi semacam pelaporan. Terkadang tidak ada gunanya menyelidiki terlalu dalam ...","author":"User"},{"reply":"Seperti yang dikatakan @Donal, Anda benar-benar tidak ingin tahu mengapa saya membutuhkan ini. Contoh kedua Anda sebenarnya adalah apa yang saya cari, terima kasih atas penjelasannya yang lengkap. Penasaran, itu tidak meneruskan stdin ke dalam perintah sed, itu hanya meneruskan nama file dalam perintah sed. Ada ide? (Saya sangat kecewa dengan istilah Mac btw). Berikut kesalahan untuk referensi: &#39;sed: 1: &quot;changelog&quot;: perintah c mengharapkan \\ diikuti teks&#39;","author":"<a href=\"https://superuser.com/users/24986/corey-hart\" target=\"_blank\" rel=\"nofollow noopener\">Corey hart</a>"},{"reply":"@Corey: Apakah &#39;$ {today}&#39; seperti &#39;17 / 04/2010 &#39;? Jika demikian, Anda perlu mengubah notasi &#39;s ///&#39; menjadi &#39;s %%%&#39; sebagai gantinya - menggunakan% atau karakter lain yang tidak muncul di salah satu pola untuk memisahkan bagian-bagian operasi pengganti. Saya tidak yakin bagaimana Anda mendapatkan &#39;sed&#39; berpikir ada perintah perubahan dalam campuran. Kamu benar; xargs memperbaiki banyak hal sehingga perintah yang dieksekusi memiliki / dev / null untuk inputnya, dan nama file yang akan dioperasikan sebagai argumen. Apa yang salah dengan istilah Mac yang tidak diperbaiki dengan beralih dari tcsh ke cangkang waras? Dan mana yang Anda sukai di sistem lain?","author":"<a href=\"https://superuser.com/users/3089/jonathan-leffler\" target=\"_blank\" rel=\"nofollow noopener\">Jonathan Leffler</a>"}]},{"answer":"<p> BSD <code>xargs</code> tidak memiliki <code>-i</code>, dan opsi itu sudah usang di GNU xargs (kapan panduan ini ditulis? 1995?). Gunakan <code>-I</code> sebagai gantinya. </p>","votes":"6","source":"https://superuser.com/a/132284","author":"<a href=\"https://superuser.com/users/26316/ignacio-vazquez-abrams\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ignacio Vazquez-Abrams</span></a>","replies":[{"reply":"Terima kasih, hanya banyak yang bisa saya pelajari dalam sehari jadi saya sangat bergantung pada apa yang saya baca di internet. Kejatuhan adalah artikel lama yang kurasa.","author":"<a href=\"https://superuser.com/users/24986/corey-hart\" target=\"_blank\" rel=\"nofollow noopener\">Corey hart</a>"},{"reply":"Ya, di mac harus menggunakan <code>-I</code>, mis. <code>redis-cli   keys &#39;foo*&#39; | xargs -I@ echo @</code>","author":"<a href=\"https://superuser.com/users/536992/zhuguowei\" target=\"_blank\" rel=\"nofollow noopener\">zhuguowei</a>"}]},{"answer":"<p> Opsi <code>-i</code> ke <code>xargs</code> tidak pernah diperlukan bila tempat untuk melakukan penggantian ada di akhir string; di situlah nama file akan diletakkan. Dan BSD <code>xargs</code> (yang disediakan OSX) juga tidak mendukung opsi itu. Jadi coba ini: </p> <pre><code>grep -ilr --exclude=revar.sh --exclude=README.md \"[DATE]\" * |\n    grep -v .git | xargs sed -i \"s/\\[DATE\\]/${today}/g\"\n</code></pre>","votes":"3","source":"https://superuser.com/a/132285","author":"<a href=\"https://superuser.com/users/36798/donal-fellows\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Donal Fellows</span></a>","replies":[]},{"answer":"<p> Adapun flag -i untuk sed di Mac OS X untuk mengedit file di tempat Anda harus menambahkan string kosong sebagai argumen: </p> <pre><code>sed -i \"\" 's/regex/replace/g' file\n\nsed -i \"\" 's/regex/'\"${var}\"'/g' file   # create sed expression using string concatenation\n</code></pre>","votes":"1","source":"https://superuser.com/a/132287","author":"<span itemprop=\"name\">bashfu</span>","replies":[{"reply":"Atau ekstensi yang akan digunakan untuk membuat nama file cadangan. <code>sed -i &quot;.BAK&quot; &#39;s&#47;regex&#47;replace&#47;g&#39; file</code> akan membuat file cadangan bernama &quot;file.BAK&quot;.","author":"<a href=\"https://superuser.com/users/310/dennis-williamson\" target=\"_blank\" rel=\"nofollow noopener\">Dennis Williamson</a>"}]},{"answer":"<p> Dengan menggunakan perluasan parameter Bash, Anda juga dapat menghindari masalah pemformatan sed hampir secara otomatis: </p> <pre><code># some basic Bash parameter expansion examples to play with\nvar='ddd/abc/ddd'\nvar=\"$(date)\"\nvar=$'\\\\\\n'\n\necho abc | sed 's/b/'\"${var}\"'/g'\necho abc | sed 's/b/'\"${var//\\//\\\\/}\"'/g'\n</code></pre>","votes":"0","source":"https://superuser.com/a/132288","author":"<span itemprop=\"name\">bashfu</span>","replies":[]}]}
