{"title":"Jaringan rumah hanya menerima alamat MAC tertentu dari LAN","draft":false,"url":"/jaringan-rumah-hanya-menerima-alamat-mac-tertentu-dari-lan-upgjopaw","votes":"4","answers_count":"5","categories":["Komputer"],"tags":["iptables","ubuntu-10.04"],"snippet":"Saya memiliki Ubuntu 10 sebagai router dengan WAN (eth0) dan LAN (eth1). Bagaimana cara membatasi eth1 untuk hanya menerima paket dari alamat MAC tertentu dan menghapus sisanya? Saya juga akan mengatur DHCP...","body":"<p> Saya memiliki Ubuntu 10 sebagai router dengan WAN (eth0) dan LAN (eth1). Bagaimana cara membatasi eth1 untuk hanya menerima paket dari alamat MAC tertentu dan menghapus sisanya? Saya juga akan mengatur DHCP ke alamat MAC tertentu, namun siapa pun dapat mengatur alamat IP secara manual. Saya memiliki 4-6 perangkat saya sendiri yang dapat menggunakan jaringan. </p>","source":"https://superuser.com/questions/254774/home-network-to-accept-only-certain-mac-addresses-from-lan","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Pablo</span></a>","replies":[{"reply":"FWIW, siapa pun dapat mengatur alamat MAC secara manual juga.","author":"<a href=\"https://superuser.com/users/5081/insyte\" target=\"_blank\" rel=\"nofollow noopener\">Insyte</a>"},{"reply":"Tetapi mereka hampir tidak bisa menebak yang saya gunakan :)","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\">Pablo</a>"},{"reply":"Yang harus mereka lakukan hanyalah mengendus ...","author":"<a href=\"https://superuser.com/users/5081/insyte\" target=\"_blank\" rel=\"nofollow noopener\">Insyte</a>"},{"reply":"mengendus wifi? ini bukan lingkungan yang tidak bersahabat :) Jaringan kabel tidak dapat diakses. Saya terhubung melalui jembatan Wifi dan perlu membatasi tamu tak diundang dari wifi.","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\">Pablo</a>"},{"reply":"Ya, hirup wifi. Ini lebih mudah daripada mengendus kabel karena tidak memerlukan akses fisik. MAC klien dikirim dengan jelas bahkan pada jaringan WPA. (Kamu <i> adalah </i> menggunakan WPA2, ya? WEP itu ... konyol.)","author":"<a href=\"https://superuser.com/users/5081/insyte\" target=\"_blank\" rel=\"nofollow noopener\">Insyte</a>"},{"reply":"@Insyte Whitelisting kartu kabel seharusnya mencegah hal itu, bukan? Tidak mengatakan itu harus menjadi satu-satunya lapisan ...","author":"<a href=\"https://superuser.com/users/62183/cmc\" target=\"_blank\" rel=\"nofollow noopener\">cmc</a>"}],"answers":[{"answer":"<p> Seperti yang saya sebutkan di komentar, saya tidak berpikir ini memberi Anda keamanan nyata, atau bahkan keamanan lebih dari pemblokiran berdasarkan IP, tetapi sesuatu seperti ini seharusnya melakukannya: </p> <pre><code>/sbin/iptables -A INPUT -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:XX -j ACCEPT\n</code></pre> <p> Dengan asumsi, tentu saja, kebijakan default Anda adalah DROP. </p>","votes":"3","source":"https://superuser.com/a/254775","author":"<a href=\"https://superuser.com/users/5081/insyte\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Insyte</span></a>","replies":[{"reply":"Maaf, kebijakan default adalah SETUJU. Dengan cara apapun?","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\">Pablo</a>"},{"reply":"Kemudian ubah ke DROP ... lalu gunakan perintah ini.","author":"<a href=\"https://superuser.com/users/69303/bart-de-vos\" target=\"_blank\" rel=\"nofollow noopener\">Bart De Vos</a>"},{"reply":"Nah, bagaimana cara meniadakan cara yang jika TIDAK ditentukan mac, maka DROP?","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\">Pablo</a>"}]},{"answer":"<p> Inilah awal untuk Anda: </p> <pre><code>iptables -P FORWARD DROP\niptables -I FORWARD -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:XX -j ACCEPT\niptables -I FORWARD -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:BB -j ACCEPT\niptables -P INPUT DROP\niptables -I INPUT -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:XX -j ACCEPT\niptables -I INPUT -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:BB -j ACCEPT\n</code></pre> <p> Semua alamat mac selain <code>XX:XX:XX:XX:XX:XX</code> dan <code>XX:XX:XX:XX:XX:BB</code> tidak akan dapat mengakses router atau internet Anda. </p>","votes":"3","source":"https://superuser.com/a/254776","author":"<span itemprop=\"name\">Steven</span>","replies":[{"reply":"apakah itu benar-benar harus juga di tabel FORWARD? Dalam kasus apa ini mungkin berhasil?","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\">Pablo</a>"}]},{"answer":"<p> ( Saya <strong> pengguna63709 </strong> ; entah bagaimana login Google OpenID saya dan login MyOpenID saya terpecah, padahal sebenarnya sama di Stack Overflow) </p>\n\n<p> <code>arptables</code> memiliki kebijakannya sendiri. Melakukan <strong> tidak </strong> rancu dengan kebijakan <code>iptables</code>. </p>\n\n<p> Karena Anda ingin &quot;membatasi [ <em> sic </em> ] eth1 untuk hanya menerima paket dari alamat MAC tertentu dan membuang sisanya &quot;, Anda akan melakukannya <strong> ingin </strong> kebijakan DROP default. </p>\n\n<p> (BTW, saya melakukan sedikit kesalahan dalam aturan arptables di atas. Seharusnya :) </p> <pre><code>arptables -P IN DROP\narptables -A IN -i eth1 --source-mac &lt;allowed_mac_address&gt; -j ACCEPT\narptables -A IN -i eth1 --source-mac &lt;allowed_mac_address&gt; -j ACCEPT\n... and so on ...\n</code></pre> <p> (Perhatikan lagi, itu <strong> <code>IN</code> </strong> adalah rantai bawaan <em> secara khusus </em> hanya ditemukan di arptables. Baca baca <a href=\"http://linux.die.net/man/8/arptables\" rel=\"nofollow noopener\" target=\"_blank\"> halaman manual arptables </a> untuk informasi lebih lanjut). </p>","votes":"1","source":"https://superuser.com/a/254778","author":"<a href=\"https://superuser.com/users/70507/pepoluan\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">pepoluan</span></a>","replies":[{"reply":"Untuk beberapa alasan itu berfungsi selama pengujian, tetapi tidak berfungsi ketika saya memulainya ... tidak ada koneksi internet sama sekali.","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\">Pablo</a>"},{"reply":"@ Michael itu aneh ... di mana Anda meletakkan perintah arptables? satu-satunya alasan yang dapat saya pikirkan: <code>-P IN DROP</code> berfungsi, tetapi aturan <code>-A IN -i eth1</code> gagal karena perintah arptables dipanggil sebelum eth1 sepenuhnya aktif. coba tempatkan perintah di <code>&#47;etc&#47;rc.local</code>. jangan lupa letakkan di path lengkap ke arptables (<code>&#47;sbin&#47;arptables</code> IIRC)","author":"<a href=\"https://superuser.com/users/70507/pepoluan\" target=\"_blank\" rel=\"nofollow noopener\">pepoluan</a>"},{"reply":"Saya meletakkannya di tempat yang sama (di atas) iptables init, pada <code>&#47;etc&#47;NetworkManager&#47;dispatcher.d&#47;01ifupdown</code>. Sekali lagi, ini berfungsi ketika saya baru saja menjalankan skrip dari shell. Saya juga mencoba <code>rc.local</code>. Bagaimanapun, saya telah menggunakan iptables untuk itu seperti yang disebutkan di sini. Akan mendukung jawaban Anda juga, karena itu berguna untuk mengetahuinya! Terima kasih","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\">Pablo</a>"},{"reply":"@Michael hmmmm ... sungguh aneh ... hal lain yang terpikir oleh saya adalah perbedaan shell yang digunakan oleh skrip startup (<code>sh</code> bukan <code>bash</code>). Anda tidak menggunakan sintaks khusus bash, bukan?","author":"<a href=\"https://superuser.com/users/70507/pepoluan\" target=\"_blank\" rel=\"nofollow noopener\">pepoluan</a>"}]},{"answer":"<p> Anda mungkin tertarik <strong> <code>arptables</code> </strong> . </p>\n\n<p> Semacam iptables, tapi khusus untuk layer 2. Meski bisa juga &#39;mengintip&#39; beberapa informasi L3. </p> <pre><code>arptables -P IN DROP\narptables -A IN --source-hw &lt;allowed_mac_address&gt; -j ACCEPT\narptables -A IN --source-hw &lt;allowed_mac_address&gt; -j ACCEPT\n... and so on ...\n</code></pre> <p> Setiap kali ada Alamat MAC baru yang ingin Anda izinkan, lakukan saja <code>arptables -A IN --source-hw &lt;address&gt; -j ACCEPT</code>. Kebijakan DROP memastikan alamat lain akan, eh, dihapus. </p>","votes":"0","source":"https://superuser.com/a/254777","author":"<a href=\"https://superuser.com/users/70507/pepoluan\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">pepoluan</span></a>","replies":[{"reply":"bagaimana cara meniadakan alamat mac jika kebijakan default DITERIMA?","author":"<a href=\"https://superuser.com/users/34535/pablo\" target=\"_blank\" rel=\"nofollow noopener\">Pablo</a>"}]},{"answer":"<p> Michael, Anda tidak dapat menentukan lebih dari satu sumber mac per aturan sehingga Anda memerlukan seperangkat aturan seperti berikut (jika Anda akan menggunakan iptables) </p> <pre><code>#Rules for allowing your mac addresses\n/sbin/iptables -A FORWARD -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:11 -j ACCEPT\n/sbin/iptables -A FORWARD -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:22 -j ACCEPT\n/sbin/iptables -A FORWARD -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:33 -j ACCEPT\n#One final rule to drop all packets which do not match one of the rules above (are not from one of your allowed macs)\n/sbin/iptables -A FORWARD -i eth1 -j DROP\n</code></pre> <p> Perhatikan bahwa ini ada di rantai FORWARD dan <strong> tidak </strong> rantai INPUT. Dengan memiliki aturan ini dalam rantai MAJU, router linux Anda tidak akan membiarkan mac apa pun kecuali yang diizinkan untuk mengirim atau menerima lalu lintas apa pun melalui router. Mereka masih dapat berkomunikasi dengan mesin di subnet yang sama dengan milik mereka (karena itu tidak mengharuskan mereka melewati router). </p>\n\n<p> Anda juga dapat mengontrol siapa yang dapat terhubung ke router Anda dengan menduplikasi aturan di atas untuk rantai input. </p> <pre><code>#Rules for allowing your mac addresses\n/sbin/iptables -A INPUT -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:11 -j ACCEPT\n/sbin/iptables -A INPUT -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:22 -j ACCEPT\n/sbin/iptables -A INPUT -i eth1 -m mac --mac-source XX:XX:XX:XX:XX:33 -j ACCEPT\n#One final rule to drop all packets which do not match one of the rules above (are not from one of your allowed macs)\n/sbin/iptables -A INPUT -i eth1 -j DROP\n</code></pre> <p> Membaca komentar Anda tentang salah satu jawaban singkat lainnya tentang kasus mana yang digunakan FORWARD dan INPUT, berikut adalah penjelasan singkatnya. </p>\n\n<p><strong> MENERUSKAN </strong> hanya berlaku untuk paket pergi <em> melalui </em> router Anda ke subnet lain atau ke dunia luar (melalui antarmuka WAN). <strong> MEMASUKKAN </strong> berlaku untuk paket yang ditujukan untuk diakhiri pada router itu sendiri (mis. koneksi SSH ke router / kotak linux itu sendiri). </p>","votes":"0","source":"https://superuser.com/a/255787","author":"<a href=\"https://superuser.com/users/71082/fahad-yousuf\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Fahad Yousuf</span></a>","replies":[]}]}
