{"title":"Rekaman video ffmpeg terhenti setelah &quot;Data yang tidak valid ditemukan saat memproses masukan&quot;","draft":false,"url":"/rekaman-video-ffmpeg-terhenti-setelah-quotdata-yang-tidak-valid-ditemukan-saat-memproses-masukanquot-ksjq6xq3","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["video","ffmpeg","vlc-media-player","recording","vhs"],"snippet":"Saya mencoba merekam kaset VHS lama saya menggunakan perangkat perekam video USB dan perintah berikut:  ffmpeg -f alsa -ac 2 -i default -f v4l2 -standard pal -i /dev/video0 -c:v libx264 -qp 0...","body":"<p> Saya mencoba merekam kaset VHS lama saya menggunakan perangkat perekam video USB dan perintah berikut: </p> <pre><code>ffmpeg -f alsa -ac 2 -i default -f v4l2 -standard pal -i /dev/video0 -c:v libx264 -qp 0 -preset fast -strict -2 zzz.mp4\n</code></pre> <p> namun terkadang, secara tidak terduga selama perekaman, ffmpeg membekukan perekaman video dan tetap berada di frame terakhir (audio terus direkam). Pesan kesalahannya seperti ini: </p> <pre><code>[video4linux2,v4l2 @ 0x23e51a0] Dequeued v4l2 buffer contains 414720 bytes, but 829440 were expected. Flags: 0x00002005. \n/dev/video0: Invalid data found when processing input\n</code></pre> <p> Saya menemukan hampir tidak ada informasi di internet tentang ini.\nSaya menemukan masalah yang dijelaskan sebagai permintaan fitur di sini: <a href=\"https://trac.ffmpeg.org/ticket/4795\" rel=\"nofollow noopener\" target=\"_blank\"> https://trac.ffmpeg.org/ticket/4795 </a></p>\n\n<p> Selain itu, saya mengalami masalah dengan pesan peringatan sebelum kesalahan ini, yang tampaknya tidak terkait dan tampaknya tidak memengaruhi perekaman video, tetapi saya juga bertanya-tanya apa artinya: </p> <pre><code>[video4linux2,v4l2 @ 0x23e51a0] Thread message queue blocking; consider raising the thread_queue_size option (current value: 8)\n[alsa @ 0x23cc360] Thread message queue blocking; consider raising the thread_queue_size option (current value: 8)\n</code></pre> <p> Menggunakan trial-and-error, tampaknya peringatan hilang saat saya setel\n<code>-f v4l2 -thread_queue_size 32</code> dan <code>-f alsa -thread_queue_size 2048</code>. Saya tidak tahu kenapa.\nKetika saya menaikkan ukuran antrian utas untuk input video, misalnya menjadi 512 saya tidak memiliki peringatan tetapi saya telah menjatuhkan bingkai. </p>\n\n<p> Saya berharap saya dapat menggunakan ffmpeg untuk rekaman saya. VLC tidak memiliki masalah perekaman, tetapi saya juga mengalami masalah dengan parameter, saya belum cukup mempelajarinya. Jika seseorang dapat menyarankan perintah alternatif untuk vlc, untuk merekam lossless, saya akan beralih ke vlc ... </p>\n\n<p> Output lengkap dari ffmpeg adalah: </p> <pre><code>$ ffmpeg -f alsa -ac 2 -i default -f v4l2 -standard pal -i /dev/video0 -c:v libx264 -qp 0 -preset fast -strict -2 zzz.mp4\nffmpeg version 2.7.6-0ubuntu0.15.10.1 Copyright (c) 2000-2016 the FFmpeg developers\n  built with gcc 5.2.1 (Ubuntu 5.2.1-22ubuntu2) 20151010\n  configuration: --prefix=/usr --extra-version=0ubuntu0.15.10.1 --build-suffix=-ffmpeg --toolchain=hardened --libdir=/usr/lib/x86_64-linux-gnu --incdir=/usr/include/x86_64-linux-gnu --enable-gpl --enable-shared --disable-stripping --enable-avresample --enable-avisynth --enable-frei0r --enable-gnutls --enable-ladspa --enable-libass --enable-libbluray --enable-libbs2b --enable-libcaca --enable-libcdio --enable-libflite --enable-libfontconfig --enable-libfreetype --enable-libfribidi --enable-libgme --enable-libgsm --enable-libmodplug --enable-libmp3lame --enable-libopenjpeg --enable-openal --enable-libopus --enable-libpulse --enable-librtmp --enable-libschroedinger --enable-libshine --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvorbis --enable-libvpx --enable-libwavpack --enable-libwebp --enable-libxvid --enable-libzvbi --enable-opengl --enable-x11grab --enable-libdc1394 --enable-libiec61883 --enable-libzmq --enable-libssh --enable-libsoxr --enable-libx264 --enable-libopencv --enable-libx265\n  libavutil      54. 27.100 / 54. 27.100\n  libavcodec     56. 41.100 / 56. 41.100\n  libavformat    56. 36.100 / 56. 36.100\n  libavdevice    56.  4.100 / 56.  4.100\n  libavfilter     5. 16.101 /  5. 16.101\n  libavresample   2.  1.  0 /  2.  1.  0\n  libswscale      3.  1.101 /  3.  1.101\n  libswresample   1.  2.100 /  1.  2.100\n  libpostproc    53.  3.100 / 53.  3.100\nGuessed Channel Layout for  Input Stream #0.0 : stereo\nInput #0, alsa, from 'default':\n  Duration: N/A, start: 1457422230.571465, bitrate: 1536 kb/s\n    Stream #0:0: Audio: pcm_s16le, 48000 Hz, 2 channels, s16, 1536 kb/s\nInput #1, video4linux2,v4l2, from '/dev/video0':\n  Duration: N/A, start: 4454.267377, bitrate: 165888 kb/s\n    Stream #1:0: Video: rawvideo (UYVY / 0x59565955), uyvy422, 720x576, 165888 kb/s, 25 fps, 25 tbr, 1000k tbn, 1000k tbc\nFile 'zzz.mp4' already exists. Overwrite ? [y/N] y\nNo pixel format specified, yuv422p for H.264 encoding chosen.\nUse -pix_fmt yuv420p for compatibility with outdated media players.                                \n[libx264 @ 0x231cd00] using cpu capabilities: MMX2 SSE2Fast SSSE3 SSE4.2 LZCNT\n[libx264 @ 0x231cd00] profile High 4:4:4 Predictive, level 3.0, 4:2:2 8-bit\n[libx264 @ 0x231cd00] 264 - core 146 r2555 0c21480 - H.264/MPEG-4 AVC codec - Copyleft 2003-2015 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x1:0x111 me=hex subme=6 psy=0 mixed_ref=1 me_range=16 chroma_me=1 trellis=0 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=0 chroma_qp_offset=0 threads=3 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc=cqp mbtree=0 qp=0\nOutput #0, mp4, to 'zzz.mp4':\n  Metadata:\n    encoder         : Lavf56.36.100\n    Stream #0:0: Video: h264 (libx264) ([33][0][0][0] / 0x0021), yuv422p, 720x576, q=-1--1, 25 fps, 12800 tbn, 25 tbc\n    Metadata:\n      encoder         : Lavc56.41.100 libx264\n    Stream #0:1: Audio: aac ([64][0][0][0] / 0x0040), 48000 Hz, stereo, fltp, 128 kb/s\n    Metadata:\n      encoder         : Lavc56.41.100 aac\nStream mapping:\n  Stream #1:0 -&gt; #0:0 (rawvideo (native) -&gt; h264 (libx264))\n  Stream #0:0 -&gt; #0:1 (pcm_s16le (native) -&gt; aac (native))\nPress [q] to stop, [?] for help\n[video4linux2,v4l2 @ 0x231a180] Thread message queue blocking; consider raising the thread_queue_size option (current value: 8)\n[alsa @ 0x2301360] Thread message queue blocking; consider raising the thread_queue_size option (current value: 8)\n[video4linux2,v4l2 @ 0x231a180] Dequeued v4l2 buffer contains 414720 bytes, but 829440 were expected. Flags: 0x00002005.\n/dev/video0: Invalid data found when processing input\nframe= 1962 fps= 17 q=-1.0 Lsize=  409086kB time=00:01:53.53 bitrate=29516.7kbits/s    \nvideo:407234kB audio:1777kB subtitle:0kB other streams:0kB global headers:0kB muxing overhead: 0.018333%\n[libx264 @ 0x231cd00] frame I:346   Avg QP: 0.00  size:186290\n[libx264 @ 0x231cd00] frame P:1616  Avg QP: 0.00  size:218162\n[libx264 @ 0x231cd00] mb I  I16..4: 92.3%  0.0%  7.7%\n[libx264 @ 0x231cd00] mb P  I16..4: 76.1%  0.0% 22.8%  P16..4:  0.2%  0.5%  0.4%  0.0%  0.0%    skip: 0.0%\n[libx264 @ 0x231cd00] 8x8 transform intra:0.0% inter:76.8%\n[libx264 @ 0x231cd00] coded y,uvDC,uvAC intra: 100.0% 100.0% 100.0% inter: 100.0% 100.0% 100.0%\n[libx264 @ 0x231cd00] i16 v,h,dc,p:  0% 100%  0%  0%\n[libx264 @ 0x231cd00] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 10% 78%  3%  1%  2%  3%  1%  3%  1%\n[libx264 @ 0x231cd00] i8c dc,h,v,p:  1% 98%  0%  0%\n[libx264 @ 0x231cd00] Weighted P-Frames: Y:31.7% UV:20.6%\n[libx264 @ 0x231cd00] ref P L0: 52.8% 47.2%\n[libx264 @ 0x231cd00] kb/s:42508.35\n</code></pre>","source":"https://superuser.com/questions/1048637/ffmpeg-video-recording-freezes-after-invalid-data-found-when-processing-input","author":"<a href=\"https://superuser.com/users/563915/vassilis-kotaras\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Vassilis Kotaras</span></a>","replies":[{"reply":"Output konsol lengkap dari perintah Anda diperlukan.","author":"<a href=\"https://superuser.com/users/110524/llogan\" target=\"_blank\" rel=\"nofollow noopener\">llogan</a>"},{"reply":"Saya menambahkan output dalam pesan asli","author":"<a href=\"https://superuser.com/users/563915/vassilis-kotaras\" target=\"_blank\" rel=\"nofollow noopener\">Vassilis Kotaras</a>"},{"reply":"Saya heran bahwa hampir tidak ada orang yang memiliki masalah serupa. Apakah saya sangat langka? Saya menemukan hampir tidak ada informasi tentang ini, dan tidak ada solusi :(","author":"<a href=\"https://superuser.com/users/563915/vassilis-kotaras\" target=\"_blank\" rel=\"nofollow noopener\">Vassilis Kotaras</a>"},{"reply":"Saya akui saya tidak benar-benar melihat pertanyaan Anda, tetapi karena pengembangan FFmpeg sangat aktif, langkah pertama adalah menguji <code>ffmpeg</code> terbaru dari cabang master git saat ini. <a href=\"http://johnvansickle.com/ffmpeg/\" rel=\"nofollow noopener\" target=\"_blank\"> Unduh </a> .","author":"<a href=\"https://superuser.com/users/110524/llogan\" target=\"_blank\" rel=\"nofollow noopener\">llogan</a>"},{"reply":"Saya menginstal ffmpeg dan codec terbaru mengikuti petunjuk di sini: <a href=\"https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu\" rel=\"nofollow noopener\" target=\"_blank\"> trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu </a> dan versi ffmpeg sekarang menjadi N-79065-g7d9e064 (kenapa angka ini aneh?). Sebelumnya, versi yang saya miliki adalah 2.7.6, dari repositori Ubuntu). Bagaimanapun, saya mendapatkan kesalahan yang persis sama, &quot;buffer dequeued v4l2 berisi 414720 byte, dll&quot;. Saya curiga bahwa ini terjadi ketika sinyal video dari kaset VHS buruk dan gambar tidak stabil, tetapi saya tidak bisa berbuat apa-apa.","author":"<a href=\"https://superuser.com/users/563915/vassilis-kotaras\" target=\"_blank\" rel=\"nofollow noopener\">Vassilis Kotaras</a>"}],"answers":[{"answer":"<p> Ini diselesaikan di FFmpeg v4.3 oleh <a href=\"https://github.com/FFmpeg/FFmpeg/commit/b761ae072a169eb183abe0785a258b9787e267d3\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/FFmpeg/FFmpeg/commit/b761ae072a169eb183abe0785a258b9787e267d3 </a> yang membuat kesalahan ini menjadi peringatan dan tampaknya melewatkan bingkai sebagai gantinya. </p>\n<p> v4.3 dirilis pada 15 Juni. </p>","votes":"4","source":"https://superuser.com/a/1566332","author":"<a href=\"https://superuser.com/users/497001/sameer-puri\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Sameer Puri</span></a>","replies":[]},{"answer":"<p> Saya tidak dapat menemukan solusi apa pun untuk masalah ffmpeg ini, dan saya baru-baru ini menemukannya <a href=\"http://linux.goeszen.com/digitising-vhs-tapes-on-linux.html\" rel=\"nofollow noopener\" target=\"_blank\"> artikel ini </a> pepatah: </p>\n\n<blockquote>\n  <p> Sepertinya, perangkat stk1160 mengirimkan bingkai yang rusak ini ke\n  perangkat v4l2 dan setelah mencapai ffmpeg, perangkat akan tersedak dan melaporkan\n  bingkai tidak valid. Meskipun itu adalah bagian dari kualitas &quot;jujur&quot;\n  ffmpeg, saya menganggapnya bug di sini karena keluar dari proses transcoding\n  dan membuat ffmpeg tidak cocok untuk tugas yang sedang dikerjakan. </p>\n</blockquote>\n\n<p> Jadi, saya mulai menggunakan mencoder.\nBlog ini membantu saya untuk mulai menggunakan mencoder: <a href=\"http://easycap.blogspot.com/p/command-line-tv.html\" rel=\"nofollow noopener\" target=\"_blank\"> http://easycap.blogspot.com/p/command-line-tv.html </a></p>\n\n<p> Saya mengkompilasi MPlayer (yang berisi mencoder) menggunakan kode sumber yang diberikan di <a href=\"http://www.mplayerhq.hu\" rel=\"nofollow noopener\" target=\"_blank\"> http://www.mplayerhq.hu </a></p>","votes":"3","source":"https://superuser.com/a/1067603","author":"<a href=\"https://superuser.com/users/563915/vassilis-kotaras\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Vassilis Kotaras</span></a>","replies":[{"reply":"Coba ffmpeg dengan perintah ini: <code>ffmpeg -f alsa -ac 2 -i default -f v4l2 -standard pal -err_detect ignore_err -i &#47;dev&#47;video0 -c:v libx264 -qp 0 -preset fast -strict -2 zzz.mp4</code>","author":"<a href=\"https://superuser.com/users/114058/gyan\" target=\"_blank\" rel=\"nofollow noopener\">Gyan</a>"},{"reply":"Saya baru saja mencoba. Hal yang sama terjadi :(","author":"<a href=\"https://superuser.com/users/563915/vassilis-kotaras\" target=\"_blank\" rel=\"nofollow noopener\">Vassilis Kotaras</a>"}]},{"answer":"<p> Ini masih bug di ffmpeg 3.3. Meskipun ffplay pulih dengan benar setelah kesalahan ini (yang bagi saya terjadi pada perubahan adegan / penerusan cepat), ffmpeg hanya berhenti memproses bingkai. Saya memiliki masalah yang sama dengan <a href=\"https://www.amazon.de/CSL-Software-Videoadapter-Bearbeitung-Nachbearbeitung-vergoldete/dp/B00EOMIDXG/ref=sr_1_1?ie=UTF8&qid=1492780106&sr=8-1&keywords=csl+video+grabber\" rel=\"nofollow noopener\" target=\"_blank\"> ini </a> perangkat, dan saya tidak bisa mendapatkan mencoder untuk menggunakan parameter yang tepat (khususnya mengenai deinterlacing) yang saya inginkan, jadi saya menggunakan kombinasi mencoder (AVI mentah ke stdout) dan ffmpeg (yadif deinterlace, audio peta, encode x264 dan mux ke mkv) yang berfungsi dengan baik. </p>\n\n<p> Anda tentu saja dapat menyimpan data AVI mentah secara langsung, tetapi dengan ~ 70GByte / jam saya tidak memiliki cukup ruang untuk itu. </p>\n\n<p> (Sebagian diambil dari <a href=\"http://linux.goeszen.com/digitising-vhs-tapes-on-linux.html\" rel=\"nofollow noopener\" target=\"_blank\"> sini </a> ) </p>\n\n<p> <code>mencoder -endpos 1:40:00 tv:// -tv device=/dev/video0:input=4:norm=PAL:width=720:height=576:alsa:adevice=hw.3:forceaudio:buffersize=128 -oac pcm -ovc copy -o - -really-quiet | ffmpeg -i - -vf yadif=mode=send_field:parity=tff  -map_channel 0.1.1 -c:a flac -c:v libx264 -preset veryfast -crf 16 011.mkv</code> </p>","votes":"1","source":"https://superuser.com/a/1201935","author":"<a href=\"https://superuser.com/users/474381/phiresky\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">phiresky</span></a>","replies":[]}]}
