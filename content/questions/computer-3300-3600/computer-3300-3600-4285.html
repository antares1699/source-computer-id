{"title":"BASH - Periksa apakah pipa tanpa nama kosong","draft":false,"url":"/bash-periksa-apakah-pipa-tanpa-nama-kosong-fgcf1wqh","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["bash","pipe"],"snippet":"Masalah saya adalah, saya ingin skrip yang membaca konten dari pipa, memeriksa apakah kosong dan mengeluarkannya jika tidak, seperti yang terlihat di sini:  #!/bin/bashvar=$(cat -)if [ -n \"$var\" ]then...","body":"<p> Masalah saya adalah, saya ingin skrip yang membaca konten dari pipa, memeriksa apakah kosong dan mengeluarkannya jika tidak, seperti yang terlihat di sini: </p> <pre><code>#!/bin/bash\nvar=$(cat -)\nif [ -n \"$var\" ]\nthen\n    echo \"$var\"\nelse\n    echo \"Pipe was empty\"\nfi\n</code></pre> <p> Masalahnya, cat membaca dari stdin, jika pipanya kosong. Adakah cara untuk mencegah kucing melakukan itu? Atau kucing adalah alat yang salah untuk digunakan di sini? </p>","source":"https://superuser.com/questions/275835/bash-check-if-unnamed-pipe-is-empty","author":"<a href=\"https://superuser.com/users/78503/mechmk1\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">MechMK1</span></a>","replies":[],"answers":[{"answer":"<p> Gunakan <code>read -t 0 -N 0</code> untuk mendeteksi apakah data tersedia di stdin. Gunakan <code>test -t 0</code> atau <code>tty</code> untuk mencoba mendeteksi jika pipa tersambung ke stdin. </p>","votes":"5","source":"https://superuser.com/a/275838","author":"<a href=\"https://superuser.com/users/26316/ignacio-vazquez-abrams\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ignacio Vazquez-Abrams</span></a>","replies":[{"reply":"Saya yakin <code>-t 0</code> dan <code>-N 0</code> adalah mubazir.","author":"<a href=\"https://superuser.com/users/36565/hello71\" target=\"_blank\" rel=\"nofollow noopener\">Hello71</a>"},{"reply":"Cara apa pun untuk menyatukannya dalam skrip, karena saya tidak yakin bagaimana menyadarinya. Maaf, tapi saya jarang menggunakan baca (hanya baca -n atau baca apa adanya)","author":"<a href=\"https://superuser.com/users/78503/mechmk1\" target=\"_blank\" rel=\"nofollow noopener\">MechMK1</a>"},{"reply":"<code>if test -t 0; then echo &quot;None&quot;; else echo &quot;$(cat -)&quot;; fi</code> Baru saja ditemukan dengan coba-coba","author":"<a href=\"https://superuser.com/users/78503/mechmk1\" target=\"_blank\" rel=\"nofollow noopener\">MechMK1</a>"}]},{"answer":"<p> <code>test -t 0</code>, tidak berhasil dalam kasus saya, dan orang-orang <a href=\"https://stackoverflow.com/questions/2456750/detect-presence-of-stdin-contents-in-shell-script\" target=\"_blank\" rel=\"nofollow noopener\"> sini </a> katakan itu &quot;non-deterministik&quot; atau sesuatu. Saya suka solusi <code>wc -c</code> (hitung byte), bagus dan sederhana. Input kosong memiliki 1 byte, sedangkan satu karakter mis. <code>echo \"a\" | wc -c</code> memberikan 2 </p> <pre><code>| (read line; if [ $(echo \"$line\" | wc -c) -gt 1 ]; then echo \"$line\"; fi) |\n</code></pre> <p> Output ini tetap dapat menggunakan pipa, berkat braket sekitar <code>read; if ...</code> Lihat <a href=\"https://stackoverflow.com/a/15170225/2668831\" target=\"_blank\" rel=\"nofollow noopener\"> Tanya Jawab ini </a></p>","votes":"1","source":"https://superuser.com/a/909164","author":"<a href=\"https://superuser.com/users/244556/louis-maddox\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Louis Maddox</span></a>","replies":[{"reply":"Anda juga memerlukan opsi <code>-t</code> (batas waktu), jika tidak, <code>read</code> akan menunggu masukan pengguna jika pipa kosong.","author":"<a href=\"https://superuser.com/users/202304/suzana\" target=\"_blank\" rel=\"nofollow noopener\">Suzana</a>"}]}]}
