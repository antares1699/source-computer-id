{"title":"Cara mengaktifkan systemd di WSL2: Ubuntu 20 dan CentOS 8","draft":false,"url":"/cara-mengaktifkan-systemd-di-wsl2-ubuntu-20-dan-centos-8-ickftznz","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","windows-subsystem-for-linux","systemd","init","systemctl"],"snippet":"Saya menggunakan WSL2 (Subsistem Windows untuk Linux, v2) dan mendapatkan CentOS 8 WSL dari:  https://github.com/yuk7/CentWSL  Dan Ubuntu 20 WSL yang diunduh dari Windows Store tidak mengaktifkan systemd juga.  Dapat dijalankan seperti biasa,...","body":"<p> Saya menggunakan WSL2 (Subsistem Windows untuk Linux, v2) dan mendapatkan CentOS 8 WSL dari: <br>\n<a href=\"https://github.com/yuk7/CentWSL\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/yuk7/CentWSL </a></p>\n\n<p> Dan Ubuntu 20 WSL yang diunduh dari Windows Store tidak mengaktifkan <code>systemd</code> juga. </p>\n\n<p> Dapat dijalankan seperti biasa, namun <code>systemd</code> tidak berjalan, meskipun ada di sistem file: </p> <pre><code>$ cat /etc/*-release | grep NAME\nNAME=\"CentOS Linux\"\nPRETTY_NAME=\"CentOS Linux 8 (Core)\"\nCPE_NAME=\"cpe:/o:centos:centos:8\"\n\n$ stat /lib/systemd/systemd\n  File: /lib/systemd/systemd\n  Size: 2523648         Blocks: 4936       IO Block: 4096   regular file\nDevice: 2h/2d   Inode: 1407374884100769  Links: 1\nAccess: (0755/-rwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2020-05-31 13:17:53.497597100 +0700\nModify: 2020-04-10 04:52:32.000000000 +0700\nChange: 2020-05-30 12:06:52.791586300 +0700\n Birth: -\n\n$ systemctl\nSystem has not been booted with systemd as init system (PID 1). Can't operate.\nFailed to connect to bus: Host is down\n</code></pre> <p> <code>/sbin/init</code> sudah merupakan tautan simbolis ke <code>systemd</code>: </p> <pre><code>$ stat /sbin/init\n  File: /sbin/init -&gt; ../lib/systemd/systemd\n  Size: 22              Blocks: 0          IO Block: 4096   symbolic link\nDevice: 2h/2d   Inode: 2251799814381086  Links: 1\nAccess: (0777/lrwxrwxrwx)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2020-04-10 04:52:20.000000000 +0700\nModify: 2020-04-10 04:52:20.000000000 +0700\nChange: 2020-05-30 12:06:53.461589000 +0700\n Birth: -\n</code></pre> <p> Saya menemukan 2 file init: </p> <pre><code>/init\n/sbin/init --&gt; /lib/systemd/systemd\n</code></pre> <p> Mungkinkah kernel Linux WSL2 memuat <code>/init</code> bukan <code>/sbin/init</code>? </p>\n\n<p> Bagaimana cara mengaktifkan <code>systemd</code> di distro ini, agar daemon seperti sshd, nginx, dll dapat berjalan? Perlu menyentuh <code>/sbin/init</code> atau file semacam itu? </p>","source":"https://superuser.com/questions/1556609/how-to-enable-systemd-on-wsl2-ubuntu-20-and-centos-8","author":"<a href=\"https://superuser.com/users/540404/datdinhquoc\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">datdinhquoc</span></a>","replies":[],"answers":[{"answer":"<p> Saya memiliki solusi di sini tetapi tidak berfungsi untuk layanan yang secara eksplisit membutuhkan systemd: </p>\n\n<p> Masih menggunakan <code>/init</code> dan bukan <code>/sbin/init</code> di WSL2, berfungsi untuk layanan biasa, bukan yang secara eksplisit memerlukan &#39;systemd&#39;. </p>\n\n<p> Cari tahu di mana systemctl berada: </p>\n\n<p> <code>which systemctl</code> </p>\n\n<p> Gunakan jalur ke systemctl untuk perintah berikut. </p>\n\n<p> Instal Python 2 (jika tidak tersedia secara default): </p> <pre><code>sudo dnf install python2 -y\nsudo ln -s /usr/bin/python2 /usr/bin/python\n</code></pre> <p> Bungkus systemctl dengan Python (atau biarkan systemctl bekerja dengan systemd bukan pada PID 1): </p> <pre><code>sudo mv /usr/bin/systemctl /usr/bin/systemctl.old\ncurl https://raw.githubusercontent.com/gdraheim/docker-systemctl-replacement/master/files/docker/systemctl.py &gt;temp\nsudo mv temp /usr/bin/systemctl\nsudo chmod +x /usr/bin/systemctl\n</code></pre> <p> Uji systemctl: </p> <pre><code>sudo dnf install nginx -y\nsudo systemctl start nginx\ncurl localhost\nsudo systemctl stop nginx\n</code></pre>","votes":"5","source":"https://superuser.com/a/1556780","author":"<a href=\"https://superuser.com/users/540404/datdinhquoc\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">datdinhquoc</span></a>","replies":[]},{"answer":"<p> Saya menemukan ini berguna: </p>\n<ul>\n<li><a href=\"https://github.com/DamionGans/ubuntu-wsl2-systemd-script\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/DamionGans/ubuntu-wsl2-systemd-script </a>\n<ol>\n<li> Script untuk menginstal alat yang dibutuhkan </li>\n<li> Script untuk memulai systemd di namespace terpisah </li>\n<li> Script untuk menjalankan script di namespace systemd </li>\n</ol>\n</li>\n<li><a href=\"https://github.com/arkane-systems/genie\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/arkane-systems/genie </a>\n<ul>\n<li> Ideologi yang hampir sama, tetapi sebagai biner tunggal. </li>\n</ul>\n<ul>\n<li> Membutuhkan DotNet </li>\n<li> Membutuhkan mesin (yaitu tidak berfungsi pada CentOS7) </li>\n</ul>\n</li>\n</ul>","votes":"2","source":"https://superuser.com/a/1601950","author":"<a href=\"https://superuser.com/users/1240641/mehul-ingale\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">mehul_ingale</span></a>","replies":[{"reply":"&quot;itu harus cukup jelas.&quot; - Tidak, mau menjelaskan?","author":"<a href=\"https://superuser.com/users/83283/ramhound\" target=\"_blank\" rel=\"nofollow noopener\">Ramhound</a>"},{"reply":"@Ramhound Saya minta maaf, saya tidak bermaksud terdengar sombong. File readme menjelaskannya dengan cukup baik, jadi saya pikir tidak akan melakukannya lagi. Bagian mana yang bermasalah.","author":"<a href=\"https://superuser.com/users/1240641/mehul-ingale\" target=\"_blank\" rel=\"nofollow noopener\">mehul_ingale</a>"},{"reply":"Tautan mungkin hilang, selalu merupakan praktik yang baik untuk membagikan semua informasi di sini dan jika tidak memungkinkan untuk memberikan penjelasan singkat.","author":"<a href=\"https://superuser.com/users/95744/odys\" target=\"_blank\" rel=\"nofollow noopener\">Odys</a>"},{"reply":"Saya agak baru dalam hal ini, jadi tidak tahu itu, akan mencoba mematuhinya di masa depan. Terimakasih atas infonya","author":"<a href=\"https://superuser.com/users/1240641/mehul-ingale\" target=\"_blank\" rel=\"nofollow noopener\">mehul_ingale</a>"},{"reply":"Hati-hati dengan tautan pertama itu. Tampaknya skrip tidak berfungsi pada versi terbaru, dan pengelola telah mengarsipkan repo.","author":"<a href=\"https://superuser.com/users/235533/foobarbecue\" target=\"_blank\" rel=\"nofollow noopener\">foobarbecue</a>"}]}]}
