{"title":"Dengan variabel Bash, apa perbedaan antara $ myvar dan &quot;$ myvar&quot;? (Perilaku aneh tertentu)","draft":false,"url":"/dengan-variabel-bash-apa-perbedaan-antara-myvar-dan-quot-myvarquot-perilaku-aneh-tertentu-bj3rf7ek","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","command-line","bash"],"snippet":"Pertanyaan Umum:  Di Bash, saya tahu bahwa menggunakan variabel myvar dapat dilakukan dengan dua cara:  # Define a variable:bash$ myvar=\"two words\"# Method one to dereference:bash$ echo $myvartwo words...","body":"<p><strong> Pertanyaan Umum: </strong></p>\n\n<p> Di Bash, saya tahu bahwa menggunakan variabel <code>myvar</code> dapat dilakukan dengan dua cara: </p> <pre><code># Define a variable:\nbash$ myvar=\"two words\"\n\n# Method one to dereference:\nbash$ echo $myvar\ntwo words\n\n# Method two to dereference:\nbash$ echo \"$myvar\"\ntwo words\n</code></pre> <p> Dalam kasus di atas, perilakunya identik. Ini karena cara kerja <code>echo</code>. Di utilitas Unix lainnya, apakah kata-kata tersebut dikelompokkan bersama dengan tanda kutip ganda akan membuat perbedaan besar: </p> <pre><code>bash$ myfile=\"Cool Song.mp3\"\nbash$ rm \"$myfile\"            # Deletes \"Cool Song.mp3\".\nbash$ rm $myfile              # Tries to delete \"Cool\" and \"Song.mp3\".\n</code></pre> <p> Saya bertanya-tanya apa signifikansi yang lebih dalam dari perbedaan ini. Yang terpenting, bagaimana saya dapat melihat dengan tepat apa yang akan diteruskan ke perintah, sehingga saya dapat melihat apakah perintah tersebut dikutip dengan benar? </p>\n\n<p><strong> Contoh Ganjil Khusus: </strong></p>\n\n<p> Saya hanya akan menulis kode dengan perilaku yang diamati: </p> <pre><code>bash$ mydate=\"--date=format:\\\"%Y-%m-%d T%H\\\"\"\nbash$ git log \"$mydate\"    # This works great.\nbash$ git log $mydate\nfatal: ambiguous argument 'T%H\"': unknown revision or path not in the working tree.\n</code></pre> <p> Mengapa saya membutuhkan tanda kutip ganda? Apa sebenarnya yang dilihat git-log setelah variabel didereferensi tanpa tanda kutip ganda? </p>\n\n<p> Tapi sekarang lihat ini: </p> <pre><code>bash$ nospace=\"--date=format:\\\"%Y-%m-%d\\\"\"\nbash$ git log $nospace        # Now THIS works great.\nbash$ git log \"$nospace\"      # This kind of works, here is a snippet:\n\n# From git-log output:\nDate:   \"2018-04-12\"\n</code></pre> <p> Yuck, mengapa keluaran yang dicetak sekarang memiliki tanda kutip ganda? Sepertinya jika tanda kutip ganda tidak diperlukan, tanda kutip ganda tidak dihapus, tanda kutip tersebut diartikan sebagai karakter tanda kutip literal jika dan hanya jika tidak diperlukan. </p>\n\n<p><strong> Apa Git diteruskan sebagai argumen? </strong> Saya berharap saya tahu bagaimana mencari tahu. </p>\n\n<p> Untuk membuat masalah lebih kompleks, saya menulis skrip Python menggunakan <code>argparse</code> yang hanya mencetak semua argumen (seperti yang ditafsirkan Bash, jadi dengan literal kutip ganda di mana Bash menganggapnya sebagai bagian dari argumen, dan dengan kata-kata yang dikelompokkan atau tidak dikelompokkan sebagai Bash menganggapnya cocok), dan skrip Python <code>argparse</code> berperilaku sangat rasional. Sayangnya, saya pikir <code>argparse</code> mungkin diam-diam memperbaiki masalah yang diketahui dengan Bash dan dengan demikian mengaburkan hal-hal kacau yang Bash berikan padanya. Itu hanya tebakan, saya tidak tahu. Mungkin git-log diam-diam mengacaukan apa yang Bash berikan padanya. </p>\n\n<p> Atau mungkin saya sama sekali tidak tahu apa yang sedang terjadi. </p>\n\n<p> Terima kasih. </p>\n\n<p><strong> Edit yang Diedit: </strong> Izinkan saya mengatakan ini sekarang, sebelum ada jawaban: Saya tahu bahwa saya bisa <strong> mungkin </strong> gunakan tanda kutip tunggal di sekitar semuanya, lalu jangan hindari tanda kutip ganda. Ini sebenarnya bekerja agak lebih baik untuk masalah awal saya menggunakan git-log, tetapi saya mengujinya dalam beberapa konteks lain dan itu hampir sama tidak terduga dan tidak dapat diandalkan. Sesuatu yang aneh sedang terjadi dengan mengutip variabel di dalam. Saya bahkan tidak akan memposting semua hal aneh yang terjadi dengan tanda kutip tunggal. </p>\n\n<p><strong> Edit 2 - Ini juga tidak berfungsi: </strong> Saya baru saja mendapat ide bagus ini, tetapi tidak berhasil sama sekali: </p> <pre><code>bash$ mydate=\"--date=format:%Y-%m-%d\\ T%H\"\nbash$ git log \"$mydate\"\n\n# Git log output has this:\nDate:   2018-04-12\\ T23\n</code></pre> <p> Jadi tidak ada kutipan yang membungkusnya, <strong> tapi </strong> itu memiliki karakter garis miring terbalik literal dalam string tanggal. Juga, <code>git log $mydate</code> tanpa kesalahan tanda kutip, dengan spasi garis miring terbalik di variabel. </p>","source":"https://superuser.com/questions/1313649/with-bash-variables-what-is-the-difference-between-myvar-and-myvar-specif","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">SerMetAla</span></a>","replies":[{"reply":"Apakah Q ini hanya tentang git? Atau spasi?","author":"<a href=\"https://superuser.com/users/307834/xen2050\" target=\"_blank\" rel=\"nofollow noopener\">Xen2050</a>"},{"reply":"@ Xen2050 Sejujurnya saya tidak yakin apakah masalahnya terkait dengan Git. Saya cukup yakin ini berkaitan dengan Bash. Mungkin saja Git telah merusak sesuatu, atau argparse Python telah memperbaiki sesuatu, karena mereka memiliki perilaku yang berbeda. Selain itu, nilai yang benar-benar saya inginkan berisi -, =,:, [spasi],%, dan juga kutipan ganda atau kutipan tunggal, jadi mungkin nilai yang sangat sulit untuk digunakan sama sekali.","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\">SerMetAla</a>"}],"answers":[{"answer":"<p> Pendekatan yang berbeda: </p>\n\n<p> Saat Anda menjalankan <code>git log --format=\"foo bar\"</code>, kutipan tersebut tidak diinterpretasikan oleh git - mereka dihapus oleh shell (dan melindungi teks kutipan dari pemisahan). Ini menghasilkan satu argumen: </p>\n\n<ul>\n<li> <code>--format=foo bar</code> </li>\n</ul>\n\n<p> Namun, saat tidak dikutip <em> variabel </em> diperluas, hasilnya melewati pemisahan kata, tetapi <em> tidak </em> melalui unquoting. Jadi jika variabel Anda berisi <code>--format=\"foo bar\"</code>, itu diperluas menjadi argumen berikut: </p>\n\n<ul>\n<li> <code>--format=\"foo</code> </li>\n<li> <code>bar\"</code> </li>\n</ul>\n\n<p> Ini dapat diverifikasi menggunakan: </p>\n\n<ul>\n<li> <pre>printf '%s\\n' $variable</pre> </li>\n</ul>\n\n<p> ... serta skrip sederhana yang mencetak argumen yang diterima. </p>\n\n<ul>\n<li> <pre>#!/usr/bin/env perl\nfor $i (0..$#ARGV) {\n    print ($i+1).\" = \".$ARGV[$i].\"\\n\";\n}\n</pre> </li>\n<li> <pre>#!/usr/bin/env python3\nimport sys\nfor i, arg in enumerate(sys.argv):\n    print(i, \"=\", arg)\n</pre> </li>\n</ul>\n\n<p> Jika Anda selalu memiliki bash tersedia, solusi yang lebih disukai adalah menggunakan <em> Himpunan </em> variabel: </p> <pre><code>myvar=( --format=\"foo bar\" )\n</code></pre> <p> Dengan ini, penguraian biasa dilakukan selama penugasan, bukan selama perluasan. Anda menggunakan sintaks ini untuk memperluas konten variabel, setiap elemen mendapatkan argumennya sendiri: </p> <pre><code>git log \"${myvar[@]}\"\n</code></pre>","votes":"4","source":"https://superuser.com/a/1313659","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user1686</span></a>","replies":[{"reply":"Saya telah menerima jawaban ini, ini jauh lebih membantu daripada yang lain. Terima kasih.","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\">SerMetAla</a>"},{"reply":"Harap tambahkan ini di bagian paling atas, karena ini adalah inti dari jawaban: <code>mydate=&quot;--date=format:%Y-%m-%d T%H&quot;</code> Ini tidak menggunakan variabel array (yang luar biasa), dan ini menekankan solusi yang berfungsi yang mengubah hanya satu karakter dari kode masalah asli. Terima kasih.","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\">SerMetAla</a>"},{"reply":"@SerMetAla Saya hanya ingin tahu: apa masalahnya secara spesifik dengan hanya menggunakan pendekatan yang saya tunjukkan, yaitu <code>mydate=&quot;--date=format:%Y-%m-%d T%H&quot;</code> dan <code>git log &quot;$mydate&quot;</code>?","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"},{"reply":"@slhck Saya pikir jawaban yang ideal adalah jawaban ini, yang telah saya terima, ditambah satu cuplikan dari jawaban Anda, idealnya ditambahkan di bagian atas jawaban ini. Saya sebenarnya akan menggunakan satu cuplikan dari jawaban Anda, terima kasih. Jawaban ini berisi penjelasan yang benar tentang cara melihat apa yang sebenarnya dilihat oleh git-log, menggunakan <code>printf</code> di Bash itu sendiri (saya uji) atau Python (saya uji) atau Perl (saya tidak menguji, saya percaya dengan ekstrapolasi). Jawaban ini juga menekankan apa yang pada dasarnya terjadi dalam cuplikan berguna Anda: Bash is <b> menambahkan </b> tanda kutip ganda yang diperlukan, jadi sebaiknya saya tidak mengetiknya.","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\">SerMetAla</a>"},{"reply":"@SerMetAla Ok, mengerti, saya hanya berpikir ada masalah tertentu yang tidak saya mengerti. (Minor nit: Bash tidak pernah menambahkan tanda kutip sendiri; itu sebenarnya menghapusnya.)","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"},{"reply":"@slhck Intinya, jawaban Anda menyiratkan bahwa <code>git log --date=format:&quot;%Y-%m-%d T%H&quot;</code> tidak akan berfungsi, meskipun Anda tidak berpikir Anda menyiratkannya. Anda mengatakan &quot;garis shell akan menjadi berikut sebelum dieksekusi&quot; - tetapi itulah yang saya inginkan! Saya ingin baris itu. Anda gagal menjelaskan mengapa pemisahan kata terjadi dengan satu cara pada variabel dan cara berbeda pada teks yang diketik langsung. Pemisahan kata yang berbeda adalah inti dari jawabannya. Anda juga tidak memberikan cara untuk melihat apa yang akan dilihat oleh git-log sebagai argumen, Anda hanya mengatakannya (dengan benar) dengan fiat. Jawaban ini menjelaskan bagaimana membuktikannya.","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\">SerMetAla</a>"},{"reply":"@slhck Tidak ada artinya mengatakan apakah Bash menambahkan kutipan lalu menghapusnya selama pengelompokan kata, atau menghapus dua tanda kutip dan &quot;mengingat&quot; cara melakukan pengelompokan kata nanti. Ketika dilakukan dengan benar, karakter kutipan menghilang, tetapi kapan mereka dihapus? Cara saya mengkonseptualisasikannya adalah &quot;kutipan ditambahkan dan kemudian dihapus&quot;, tetapi Anda juga dapat mengkonseptualisasikannya sebagai &quot;kutipan tidak pernah diperlukan sama sekali&quot;. (Kode sumber mungkin benar-benar menunjukkan bahwa yang satu &quot;lebih benar&quot; daripada yang lain, tetapi Anda dapat menerapkannya dengan cara apa pun dan memberikan perilaku yang sama.)","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\">SerMetAla</a>"},{"reply":"<b> Pertanyaan baru: </b> Bagaimana jika saya ingin mengubah ini: <code>git log --format=fuller --date=format:&quot;%Y-%m-%d T%H&quot;</code> menjadi ini: <code>git log &quot;$myfavoriteoptions&quot;</code> - Apakah itu mungkin?","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\">SerMetAla</a>"},{"reply":"Saya yakin saya sudah menjawabnya di &quot;Gunakan array&quot;.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"}]},{"answer":"<h3 class=\"h5\"> Mengapa perintah asli Anda tidak berfungsi? </h3> <pre><code>bash$ mydate=\"--date=format:\\\"%Y-%m-%d T%H\\\"\"\nbash$ git log \"$mydate\"    # This works great.\nbash$ git log $mydate\nfatal: ambiguous argument 'T%H\"': unknown revision or path not in the working tree.\n</code></pre> <p> Anda bertanya: </p>\n\n<blockquote>\n  <p> Mengapa saya membutuhkan tanda kutip ganda? Apa sebenarnya yang dilihat git-log setelah variabel didereferensi tanpa tanda kutip ganda? </p>\n</blockquote>\n\n<p> Jika Anda tidak menggunakan tanda kutip ganda sekitar <code>$mydate</code>, variabel akan diperluas kata demi kata, dan baris shell akan menjadi berikut sebelum dijalankan: </p> <pre><code>git log --date=format:\"%Y-%m-%d T%H\"\n                      ^————————————^—————— literal quotes\n</code></pre> <p> Di sini, Anda (tidak perlu) menambahkan tanda kutip literal dengan menggunakan <code>\\\"</code> dalam tugas variabel. </p>\n\n<p> Karena perintah akan dijalani <a href=\"https://www.gnu.org/software/bash/manual/html_node/Word-Splitting.html\" rel=\"nofollow noopener\" target=\"_blank\"> pemisahan kata </a> , <code>git</code> akan menerima tiga argumen, <code>log</code>, <code>--date-format:\"%Y-%m%-d</code> dan <code>T%H\"</code>, oleh karena itu mengeluh karena tidak menemukan komit atau objek bernama <code>T%H\"</code>. </p>\n\n<hr>\n\n<h3 class=\"h5\"> Apa pendekatan yang benar? </h3>\n\n<p> Jika Anda ingin menyatukan argumen, jika argumen tersebut berisi spasi, Anda harus membungkus argumen dalam tanda kutip. <a href=\"http://mywiki.wooledge.org/Quotes\" rel=\"nofollow noopener\" target=\"_blank\"><strong> Umumnya, selalu bungkus variabel dalam tanda kutip ganda. </strong></a></p>\n\n<p> Ini berfungsi bahkan jika ada spasi di dalam variabel: </p> <pre><code>mydate=\"--date=format:%Y-%m-%d T%H\"\ngit log \"$mydate\"\n</code></pre> <p> Sekarang argumen ketiga untuk <code>git</code> adalah <code>$mydate</code>, termasuk spasi yang Anda tentukan sebelumnya. Semua kutipan dihilangkan oleh shell sebelum diteruskan ke <code>git</code>. </p>\n\n<p> Anda tidak memerlukan kutipan tambahan — jika yang Anda inginkan hanyalah <code>git</code> untuk melihat satu argumen, bungkus argumen itu dalam tanda kutip saat meneruskan variabel <code>\"$mydate\"</code>. </p>\n\n<hr>\n\n<p> Juga, Anda bertanya: </p> <pre><code>bash$ nospace=\"--date=format:\\\"%Y-%m-%d\\\"\"\nbash$ git log $nospace        # Now THIS works great.\nbash$ git log \"$nospace\"      # This kind of works, here is a snippet:\n\n# From git-log output:\nDate:   \"2018-04-12\"\n</code></pre> <p> Pertanyaanmu: </p>\n\n<blockquote>\n  <p> Yuck, mengapa keluaran yang dicetak sekarang memiliki tanda kutip ganda? </p>\n</blockquote>\n\n<p> Karena Anda sudah termasuk lagi <em> harfiah </em> kutipan dalam argumen (dengan menghindarinya), yang berubah menjadi, katakanlah, kutipan &quot;nyata&quot; ketika Anda lupa mengutip variabel dalam perintah Anda yang sebenarnya. Saya mengatakan &quot;lupakan&quot; karena menggunakan variabel yang tidak dikutip dalam perintah shell biasanya hanya membuat Anda mendapat masalah — dan di sini membalikkan kesalahan yang Anda buat saat menentukan variabel di tempat pertama. </p>\n\n<p> PS: Saya tahu ini semua membingungkan, tapi itu Bash, dan mengikuti beberapa aturan yang jelas. Tidak ada serangga di sini. SEBUAH <a href=\"https://www.dwheeler.com/essays/filenames-in-shell.html\" rel=\"nofollow noopener\" target=\"_blank\"> esai terkait </a> tentang nama file di shell juga sangat terbuka, karena menyentuh masalah penanganan spasi di Bash. </p>","votes":"2","source":"https://superuser.com/a/1313658","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">slhck</span></a>","replies":[{"reply":"Anda mengatakan beberapa hal yang benar, bagaimanapun, perintah berikut <b> berhasil </b> dan itulah yang saya inginkan: <code>git log --date=format:&quot;%Y-%m-%d T%H&quot;</code> Anda mengatakannya seolah-olah tidak berhasil, tetapi berhasil. Juga, tidak ada cara lain untuk membuatnya berhasil.","author":"<a href=\"https://superuser.com/users/247485/sermetala\" target=\"_blank\" rel=\"nofollow noopener\">SerMetAla</a>"},{"reply":"Ya, tentu saja perintah itu berfungsi saat Anda mengetiknya secara langsung. Ini hanya tidak berfungsi saat Anda pertama kali menetapkan argumen (format tanggal) ke variabel yang berisi tanda kutip literal, lalu memperluas variabel itu.","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"},{"reply":"@SerMetAla Perbedaan penting adalah antara tanda kutip sintaksis (yang berarti <i> sekitar </i> data, dan apa yang Anda inginkan) dan kutipan literal (yaitu <i> bagian dari </i> data, dan apa yang Anda dapatkan setelah Anda memasukkan tanda kutip pada nilai variabel).","author":"<a href=\"https://superuser.com/users/7778/gordon-davisson\" target=\"_blank\" rel=\"nofollow noopener\">Gordon Davisson</a>"}]}]}
