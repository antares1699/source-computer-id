{"title":"rsync menyalin lambat dari satu disk ke disk lainnya","draft":false,"url":"/rsync-menyalin-lambat-dari-satu-disk-ke-disk-lainnya-wi54a6t8","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","performance","ubuntu-12.04","rsync"],"snippet":"Saya mendapat dua drive dengan model yang sama yang terhubung menggunakan SATA.  Saat membandingkan kecepatan baca menggunakan hdparm -t /dev/sdX, kecepatan sekitar 160MB/s dikembalikan. Saat membandingkan kecepatan tulis menggunakan dd if=/dev/zero of=testfile...","body":"<p> Saya mendapat dua drive dengan model yang sama yang terhubung menggunakan SATA. </p>\n\n<p> Saat membandingkan kecepatan baca menggunakan <code>hdparm -t /dev/sdX</code>, kecepatan sekitar <code>160MB/s</code> dikembalikan. Saat membandingkan kecepatan tulis menggunakan <code>dd if=/dev/zero of=testfile bs=1M count=500 conv=fdatasync</code>, kecepatan sekitar <code>140MB/s</code> dikembalikan. </p>\n\n<p> Namun, saat menyalin satu file 10GB menggunakan <code>rsync --progress /mnt/hd1/file /mnt/hd2/file</code>, kecepatan tulis hanya sekitar <code>35MB/s</code>. </p>\n\n<p> Mengapa sangat lambat? Bagaimana saya bisa membuatnya lebih cepat? </p>","source":"https://superuser.com/questions/614289/rsync-slow-copy-from-one-disk-to-another","author":"<a href=\"https://superuser.com/users/145121/zulakis\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Zulakis</span></a>","replies":[{"reply":"Model apa? Apakah itu SSD? Ini umum dengan SSD bahwa kecepatan tulis beberapa jika tidak jauh lebih rendah dari kecepatan baca.","author":"<a href=\"https://superuser.com/users/44887/dan-d\" target=\"_blank\" rel=\"nofollow noopener\">Dan D.</a>"},{"reply":"Mereka adalah HDD normal. Saat melakukan benchmarking, kecepatan tulis juga <code>140mb&#47;s+</code>. Sepertinya ada masalah dengan rsync.","author":"<a href=\"https://superuser.com/users/145121/zulakis\" target=\"_blank\" rel=\"nofollow noopener\">Zulakis</a>"},{"reply":"Kemudian ada kemungkinan file tersebut agak terfragmentasi. Dan pencarian yang tidak tercakup dalam tolok ukur Anda adalah yang membatasi kecepatan transfer. Apa yang <code>filefrag &#47;mnt&#47;hd1&#47;file </code> katakan ketika dijalankan sebagai root?","author":"<a href=\"https://superuser.com/users/44887/dan-d\" target=\"_blank\" rel=\"nofollow noopener\">Dan D.</a>"},{"reply":"&quot;6 extends ditemukan&quot;. Apakah ini nilai yang baik atau buruk?","author":"<a href=\"https://superuser.com/users/145121/zulakis\" target=\"_blank\" rel=\"nofollow noopener\">Zulakis</a>"},{"reply":"Itu adalah nilai bagus yang rendah dan itu menghilangkan pencarian sebagai penyebabnya.","author":"<a href=\"https://superuser.com/users/44887/dan-d\" target=\"_blank\" rel=\"nofollow noopener\">Dan D.</a>"}],"answers":[{"answer":"<p> Menurut banyak situs yang saya temukan saat meneliti masalah ini (misalnya <a href=\"http://lwn.net/Articles/400489/\" rel=\"nofollow noopener\" target=\"_blank\"> ini </a> satu), ini normal karena hambatan rsync biasanya adalah daya CPU. </p>\n\n<p> Hasil dengan dd dan cp mendekati kecepatan yang awalnya saya patokan. Sepertinya dual core 2,2Ghz tidak cukup untuk rsync kecepatan hdd. </p>\n\n<p> Selama penelitian lebih lanjut saya juga menemukan tentang <a href=\"https://lists.samba.org/archive/rsync/2007-June/017853.html\" rel=\"nofollow noopener\" target=\"_blank\"> ini </a> : </p>\n\n<blockquote>\n  <p> Benar, rsync tidak memiliki opsi untuk menonaktifkan checksum pasca transfer\n  sama sekali. Saya menerapkan patch ke rsync 2.6.9 yang menambahkan opsi\n  --trust-append yang membatasi checksum pasca transfer ke bagian yang ditambahkan, bukan seluruh file. Patch terpasang. Seharusnya begitu\n  cukup baik, tetapi jika Anda benar-benar ingin menonaktifkan checksum\n  sepenuhnya, cukup komentari panggilan sum_update yang tersisa di match.c\n  dan penerima. c. </p>\n</blockquote>\n\n<p> Rsync selalu memeriksa seluruh file yang membutuhkan banyak waktu. Dengan menggunakan patch yang disebutkan di atas, saya berhasil meningkatkan kecepatan rsync menjadi sekitar 90MB / s. Masih tidak bagus, tapi jauh lebih baik dari sebelumnya. Sayangnya, patch belum berhasil masuk ke rsync-trunk. </p>","votes":"7","source":"https://superuser.com/a/614311","author":"<a href=\"https://superuser.com/users/145121/zulakis\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Zulakis</span></a>","replies":[]},{"answer":"<p> Saya memiliki masalah yang persis sama (di Linux), yaitu: 35BM / s. </p>\n\n<p> Ternyata rsync terikat dengan CPU DAN tidak memicu gubernur sesuai permintaan cpu, sehingga CPU macet pada kecepatan paling lambat (800MHz dalam kasus saya vs 3000MHz) </p>\n\n<p> Anda dapat menguji dengan menggunakan: </p>\n\n<p> cat / proc / cpuinfo | grep MHz </p>\n\n<p> Cara mengatasinya adalah menyetel pengatur CPU. </p>\n\n<p> echo &quot;70&quot;&gt; / sys / devices / system / cpu / cpufreq / ondemand / up_threshold </p>\n\n<p> Untuk membuatnya permanen, letakkan di /etc/rc.local </p>\n\n<p> Lihat penjelasannya: <a href=\"http://random-linux-stuff.blogspot.co.nz/2013/01/boost-performance-of-ondemand-cpu.html\" rel=\"nofollow noopener\" target=\"_blank\"> http://random-linux-stuff.blogspot.co.nz/2013/01/boost-performance-of-ondemand-cpu.html </a></p>","votes":"4","source":"https://superuser.com/a/728807","author":"<a href=\"https://superuser.com/users/307597/jfp\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">jfp</span></a>","replies":[]}]}
