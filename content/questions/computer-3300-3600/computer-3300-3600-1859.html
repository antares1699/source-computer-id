{"title":"Bagaimana cara membagi dan bergabung tanpa transcoding file video AVC / MPEG-TS di Windows dengan ffmpeg?","draft":false,"url":"/bagaimana-cara-membagi-dan-bergabung-tanpa-transcoding-file-video-avc-mpeg-ts-di-windows-dengan-ffmpeg-jwrjzl2y","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["windows","ffmpeg","video-editing","mpeg"],"snippet":"Saya juga mencari solusi Linux (dalam format  pertanyaan terpisah  )  Saya memiliki dua file video yang direkam dengan ekstensi .ts. Saya perlu menghapus beberapa bagian dari yang pertama, membagi yang kedua, dan...","body":"<p> Saya juga mencari solusi Linux (dalam format <a href=\"https://unix.stackexchange.com/q/232711/32012\" target=\"_blank\" rel=\"nofollow noopener\"> pertanyaan terpisah </a> ) </p>\n<p> Saya memiliki dua file video yang direkam dengan ekstensi <code>.ts</code>. Saya perlu menghapus beberapa bagian dari yang pertama, membagi yang kedua, dan kemudian menggabungkan file pertama dengan bagian pertama (split) dari file kedua. </p>\n<p> Keduanya memiliki karakteristik yang sama: </p> <pre><code>Format                                   : MPEG-TS\nFile size                                : 3.16 GiB\nDuration                                 : 1h 39mn\nOverall bit rate mode                    : Variable\nOverall bit rate                         : 4 527 Kbps\n\nVideo\nID                                       : 720 (0x2D0)\nMenu ID                                  : 6181 (0x1825)\nFormat                                   : AVC\nFormat/Info                              : Advanced Video Codec\nFormat profile                           : High@L4\nFormat settings, CABAC                   : Yes\nFormat settings, ReFrames                : 4 frames\nCodec ID                                 : 27\nDuration                                 : 1h 39mn\nWidth                                    : 1 440 pixels\nHeight                                   : 1 080 pixels\nDisplay aspect ratio                     : 16:9\nFrame rate                               : 25.000 fps\nColor space                              : YUV\nChroma subsampling                       : 4:2:0\nBit depth                                : 8 bits\nScan type                                : MBAFF\n</code></pre> <p> Mereka juga berisi beberapa trek audio dan subtitle. </p>\n<p> Saya ingin memprosesnya tanpa mentranskode file, setidaknya dapat menghapus awal, dll. </p>\n<h1 class=\"h3\"> <code>FFMPEG</code>: </h1>\n<p> <code>ffmpeg -i source.mts</code> memberikan: </p> <pre><code>Input #0, mpegts, from 'source1.mts':\n      Duration: 01:40:00.76, start: 2995.511878, bitrate: 4526 kb/s\n      Program 6181\n        Stream #0:0[0x46](fra,fra): Subtitle: dvb_teletext ([6][0][0][0] / 0x0006)\n        Stream #0:1[0x2d0]: Video: h264 (High) ([27][0][0][0] / 0x001B), yuv420p, 1440x1080 [SAR 4:3 DAR 16:9], 25 fps, 25 tbr, 90k tbn, 50 tbc\n        Stream #0:2[0x2da](fra): Audio: aac (HE-AAC) ([15][0][0][0] / 0x000F), 48000 Hz, stereo, fltp, 73 kb/s\n        Stream #0:3[0x2db](qaa): Audio: aac (HE-AAC) ([15][0][0][0] / 0x000F), 48000 Hz, stereo, fltp, 67 kb/s\n        Stream #0:4[0x2dc](deu): Audio: aac (HE-AAC) ([15][0][0][0] / 0x000F), 48000 Hz, stereo, fltp, 49 kb/s\n        Stream #0:5[0x2dd](qad): Audio: aac (HE-AAC) ([15][0][0][0] / 0x000F), 48000 Hz, stereo, fltp, 57 kb/s\n</code></pre> <p> Saya rasa ini dapat dilakukan dengan sangat baik dengan <code>ffmpeg</code>, yang juga merupakan lintas platform, sebagai perintah yang saya temukan <a href=\"https://www.techsupportalert.com/content/best-free-software-cut-split-or-merge-video-files.htm#comment-115665\" rel=\"nofollow noopener\" target=\"_blank\"> sini </a> untuk menghapus sebagian dari satu file. </p> <pre><code>ffmpeg -i InputFile -vcodec copy -acodec copy -ss 00:12:34.567 -t 00:34:56.789 OutputFile\n</code></pre> <p> berfungsi, kecuali fakta bahwa input memiliki empat trek audio dan dengan cara ini hanya audio pertama (<code>Stream #0:2[0x2da](fra)</code>) yang diambil. Yang saya inginkan adalah: semua audio, baik yang ketiga (<code>Stream #0:3[0x2db](qaa)</code>). Bagaimana cara menyesuaikan? </p>\n<p> <code>ffmpeg</code> karenanya harus bekerja untuk: </p>\n<p><strong> 1. Potong bagian awal file pertama (hapus 2 menit pertama dari file 1 jam 40 menit) </strong></p>\n<p><strong> 2. Bagi file kedua (1 jam) menjadi dua bagian (setelah 3,05 menit) </strong></p>\n<p><strong> 3. Gabung (tambahkan) ke akhir file pertama bagian 3,05 menit yang diperoleh dari pemisahan file kedua. </strong></p>\n<hr>\n<p> Apa yang telah saya coba: </p>\n<p> Openshot: tidak dapat memproses tanpa transcoding. </p>\n<p> Avidemux (Linux): ketika mencoba menyimpannya tertulis <em> &quot;Ini tidak kompatibel dengan MPEG - Anda tidak dapat menggunakan codec Salin.&quot; </em></p>\n<p> Avidemux di Windows: audio tidak sinkron. </p>","source":"https://superuser.com/questions/979633/how-to-split-and-join-without-transcoding-avc-mpeg-ts-video-files-in-windows-wit","author":"<span itemprop=\"name\">user162573</span>","replies":[{"reply":"Semua yang akan saya tambahkan adalah bahwa mengingat perubahan dalam cakupan pertanyaan, saya akan berhati-hati jika pertanyaan unix.SE Anda tetap terbuka, karena dapat dilihat sebagai posting silang, yang tidak disukai. Terserah Anda untuk memutuskan apakah keduanya perlu tetap terbuka, dan saya sendiri tidak membuat penilaian tetapi saya curiga orang lain mungkin akan melihatnya seperti itu.","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"@bertieb - Meskipun jawaban umum dapat diberikan, pertanyaan U&amp;L saya sekarang berdiri sebagai pertanyaan yang berbeda, karena menanyakan solusi Linux umum, sementara yang ini meminta solusi FFMPEG di Windows. - Saya memang telah membuat jawaban untuk Linux berdasarkan jawaban Anda di sini, dan memposting di sini versi sederhana dari jawaban Anda, menambahkan juga kemungkinan solusi GUI.","author":"User"}],"answers":[{"answer":"<h2 class=\"h4\"> Bagaimana cara membagi dan menggabungkan file menggunakan <code>ffmpeg</code> sambil tetap mempertahankan semua trek audio? </h2>\n<p> Seperti yang Anda temukan, salinan bitstream hanya akan memilih <strong> satu </strong> trek (audio), sesuai dengan <a href=\"http://ffmpeg.org/ffmpeg.html#Stream-selection\" rel=\"nofollow noopener\" target=\"_blank\"> dokumentasi spesifikasi aliran </a> : </p>\n<blockquote>\n<p> Secara default, <code>ffmpeg</code> hanya menyertakan satu aliran dari setiap jenis (video, audio, subtitle) yang ada di file input dan menambahkannya ke setiap file output. Ini memilih yang &quot;terbaik&quot; dari masing-masing berdasarkan kriteria berikut: untuk video, ini adalah aliran dengan resolusi tertinggi, untuk audio, ini adalah aliran dengan saluran paling banyak, untuk subtitle, ini adalah aliran subtitle pertama. Dalam kasus di mana beberapa aliran dari jenis yang sama memiliki laju yang sama, aliran dengan indeks terendah dipilih. </p>\n</blockquote>\n<p> Memilih <em> semua </em> trek audio: </p> <pre><code>ffmpeg -i InputFile.ts-c copy -ss 00:12:34.567 -t 00:34:56.789 -map 0:v -map 0:a FirstFile.ts\n</code></pre> <p> Untuk memilih <em> ketiga </em> trek audio: </p> <pre><code>ffmpeg -i InputFile.ts -c copy -ss 00:12:34.567 -t 00:34:56.789 -map 0:v -map 0:a:2 FirstFile.ts\n</code></pre> <p> Anda dapat membaca lebih lanjut tentang dan melihat contoh lain dari pemilihan aliran di <a href=\"http://ffmpeg.org/ffmpeg.html#Advanced-options\" rel=\"nofollow noopener\" target=\"_blank\"> opsi lanjutan </a> bagian dari dokumentasi <code>ffmpeg</code>. </p>\n<p> Saya juga akan menggabungkan <code>-vcodec copy -acodec copy</code> dari perintah asli Anda menjadi <code>-c copy</code> seperti di atas untuk kekompakan ekspresi. </p>\n<h1 class=\"h3\"> Membagi: </h1>\n<p> Jadi, gabungkan mereka dengan apa yang ingin Anda capai dalam dua file dalam hal pemisahan untuk bergabung kembali nanti: </p> <pre><code>ffmpeg -i InputOne.ts -ss 00:02:00.0 -c copy -map 0:v -map 0:a OutputOne.ts\nffmpeg -i InputTwo.ts -c copy -t 00:03:05.0 -map 0:v -map 0:a OutputTwo.ts\n</code></pre> <p> akan memberimu: </p>\n<ul>\n<li><strong> <code>OutputOne.ts</code> </strong> , yaitu segalanya <em> setelah </em> dua menit pertama dari file masukan pertama </li>\n<li><strong> <code>OutputTwo.ts</code> </strong> , yang merupakan <em> pertama </em> 3 menit dan 5 detik dari file masukan kedua </li>\n</ul>\n<h1 class=\"h3\"> Ikuti: </h1>\n<p> <code>ffmpeg</code> mendukung penggabungan file tanpa pengkodean ulang, <a href=\"https://trac.ffmpeg.org/wiki/Concatenate\" rel=\"nofollow noopener\" target=\"_blank\"> dijelaskan secara ekstensif dalam dokumentasi rangkaiannya </a> . </p>\n<p> Buat daftar file yang akan Anda ikuti (misalnya <code>join.txt</code>): </p> <pre><code>file '/path/to/files/OutputOne.ts'\nfile '/path/to/files/OutputTwo.ts'\n</code></pre> <p> Kemudian perintah <code>ffmpeg</code> Anda dapat menggunakan <code>concat demuxer</code>: </p> <pre><code> ffmpeg -f concat -i join.txt -c copy FinalOutput.ts\n</code></pre> <p> Karena Anda bekerja dengan aliran transportasi <code>mpeg</code> (<code>.ts</code>), Anda <em> Sebaiknya </em> dapat menggunakan concat <strong> protokol </strong> demikian juga: </p> <pre><code>ffmpeg -i &quot;concat:OutputOne.ts|OutputTwo.ts&quot; -c copy -bsf:a aac_adtstoasc output.mp4\n</code></pre> <p> Seperti contoh di halaman concat yang ditautkan di atas. Saya akan menyerahkan itu kepada Anda untuk bereksperimen. </p>","votes":"4","source":"https://superuser.com/a/979660","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">bertieb</span></a>","replies":[{"reply":"Saya lupa menyertakan video <code>-map</code>ping, terima kasih atas pengingatnya. Saya telah memperbarui pertanyaan tentang cara menggabungkan (menggabungkan) file video bersama-sama sesuai hasil edit Anda.","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"Pengeditan saya mencakup bagian tentang menggabungkan file. Saya masih tidak yakin apa yang Anda maksud dengan &#39;split&#39; tetapi saya senang Anda memiliki perintah yang berfungsi :)","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"Berapa banyak keluaran yang Anda inginkan? Satu, file terakhir yang digabungkan? Atau apakah Anda membutuhkan <i> kedua </i> bagian dari perpecahan pada file kedua disimpan?","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"Untuk menjaga <i> semua </i> streaming (video, audio, subtitle), ganti semua <code>-map</code> dengan satu: <code>-map 0</code>","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"harap edit konten <code>join.txt</code>: jalur ke file harus dalam keadaan koma terbalik agar dapat berfungsi. tetapi tidak ada solusi untuk bergabung yang memungkinkan menyimpan semua audio, karena hanya default / pertama yang dipilih","author":"User"},{"reply":"Tangkapan bagus, saya berani bersumpah saya memilikinya di revisi sebelumnya. Jalur relatif juga akan berfungsi.","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"apakah ada cara untuk menggabungkan file dengan semua audio? mereka hilang kecuali yang default saat bergabung. atau saya akan memilih pada tahap sebelumnya yang disukai dan menggunakannya di kedua file untuk digabungkan","author":"User"},{"reply":"Jika <code>concat</code>demuxer <i> juga </i> hanya mengambil trek &#39;terbaik&#39; (mengharapkannya bekerja secara berbeda, tetapi ini adalah <code>ffmpeg</code> ...), saya akan menyertakan <code>-map 0</code> pada langkah itu juga.","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"menarik, komentar di bawah <a href=\"http://askubuntu.com/a/370190/47206\" target=\"_blank\" rel=\"nofollow noopener\"> sini </a> mengatakan <code>-ss</code> harus digunakan sebelum <code>-i</code>, sedangkan <code>-t</code> harus setelah <code>-i</code>. Juga: <a href=\"http://trac.ffmpeg.org/wiki/Seeking\" rel=\"nofollow noopener\" target=\"_blank\"> trac.ffmpeg.org/wiki/Seeking </a> dan <a href=\"http://askubuntu.com/a/547995/47206\" target=\"_blank\" rel=\"nofollow noopener\"> askubuntu.com/a/547995/47206 </a>","author":"User"},{"reply":"Penempatan perintah <code>ffmpeg</code> sangat penting. <code>-ss</code> dapat digunakan sebelum atau sesudah <code>-i</code> untuk metode yang sedikit berbeda dalam mencapai hal yang sama (pencarian akurat-bingkai). Sebagai alternatif, Anda dapat menggunakan <code>-to</code> jika Anda lebih suka menentukan waktu berakhir, daripada durasi (<code>-t</code>).","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"mengganti <code>ffmpeg</code> dengan <code>avconv</code> bekerja dengan baik saya kira di Linux. Apakah ini juga tersedia untuk Windows?","author":"User"},{"reply":"<code>ffmpeg</code> tersedia untuk sistem Windows melalui <a href=\"http://ffmpeg.zeranoe.com/builds/\" rel=\"nofollow noopener\" target=\"_blank\"> Zeranoe </a> , Iya. Saya lebih suka tidak membahas <code>ffmpeg</code> vs <code>avconv</code>, tapi lihat <a href=\"http://superuser.com/questions/507386/why-would-i-choose-libav-over-ffmpeg-or-is-there-even-a-difference\" title=\"why would i choose libav over ffmpeg or is there even a difference\" target=\"_blank\" rel=\"nofollow noopener\"> superuser.com/questions/507386/… </a> dan <a href=\"http://stackoverflow.com/questions/9477115/what-are-the-differences-and-similarities-between-ffmpeg-libav-and-avconv/9477756#9477756\" title=\"what are the differences and similarities between ffmpeg libav and avconv\" target=\"_blank\" rel=\"nofollow noopener\"> stackoverflow.com/questions/9477115/… </a>","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"},{"reply":"Setelah &quot;Untuk memilih semua trek audio:&quot;, ubah perintah dengan menambahkan spasi setelah <code>InputFile.ts</code>","author":"User"}]},{"answer":"<p> Sebagai jawaban yang disederhanakan berdasarkan yang utama: </p>\n\n<p> Untuk menyimpan data setelah titik awal (sampai akhir): </p> <pre><code>ffmpeg -i INPUT -c copy -ss START_TIME -map 0 OUTPUT\n</code></pre> <p> Untuk menyimpan data di antara dua titik waktu: </p> <pre><code>ffmpeg -i INPUT -c copy -ss START_TIME -to END_TIME -map 0 OUTPUT\n</code></pre> <p> Untuk menyimpan data dengan durasi tertentu setelah titik tertentu: </p> <pre><code>ffmpeg -i INPUT -c copy -ss START_TIME -t DURATION_TIME -map 0 OUTPUT\n</code></pre> <p> Untuk menyimpan data dengan durasi tertentu setelah dimulai: </p> <pre><code>ffmpeg -i INPUT -c copy -t DURATION_TIME -map 0 OUTPUT\n</code></pre> <p> Untuk menjaga data dari awal hingga titik waktu: </p> <pre><code>ffmpeg -i INPUT -c copy -to TIME_POINT -map 0 OUTPUT\n</code></pre> <p><strong> TIME mungkin berupa angka dalam detik, atau dalam jj: mm: ss [.xxx] </strong></p>\n\n<hr>\n\n<p> Untuk menggabungkan file, buat file bernama <code>join.txt</code> dengan konten </p> <pre><code>file 'path-to-INPUT1'\nfile 'path-to-INPUT2'\nfile...etc\n</code></pre> <p> kemudian </p> <pre><code> ffmpeg -f concat -i join.txt OUTPUT\n</code></pre> <p> Atau: </p>\n\n<p> Untuk bergabung dengan file mpeg (termasuk file transport) </p> <pre><code> ffmpeg -i \"concat:INPUT-1|INPUT-2\" -c copy -bsf:a aac_adtstoasc OUTPUT\n</code></pre> <hr>\n\n<p> Sebagai solusi GUI, saya telah mencoba Avidemux tetapi hasilnya buruk. Saat mencari solusi Linux, saya menemukan komentar ini <a href=\"https://kdenlive.org/comment/14163#comment-14163\" rel=\"nofollow noopener\" target=\"_blank\"> sini </a> menunjuk ke <strong> Avidemux setiap malam </strong> : </p>\n\n<p><em> &quot;Anda dapat mencoba Avidemux, tetapi bukan yang stabil. Anda harus mencoba versi win32 (ya, untuk windows) dengan&quot; Wine &quot;. Ini mendukung H.264 dan Anda harus menggunakan panah ganda untuk mengetahui bingkai utama karena Anda dapat [ tidak] memotong di mana-mana (karena hal &quot;long gop&quot; ...). Tetapi, karena setiap perangkat lunak seperti ini, Anda dapat melakukan HANYA CUTS jika tidak maka akan dirender (dalam hal transisi, efek, dll.). <a href=\"http://avidemux.org/nightly/win32/\" rel=\"nofollow noopener\" target=\"_blank\"> http://avidemux.org/nightly/win32/ </a> &quot; </em></p>\n\n<p> Saya telah mengujinya di Linux / Wine tetapi seharusnya berfungsi di Windows juga. </p>\n\n<p><a href=\"https://i.stack.imgur.com/gfiIT.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/gfiIT.png\" alt=\"enter image description here\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a></p>\n\n<p> Untuk menggabungkan file, gunakan <em> Buka File </em> untuk menambahkan file pertama, lalu <em> File-Tambahkan </em> untuk sisanya. </p>\n\n<p> Untuk menyimpan: <em> File - Simpan. </em></p>","votes":"4","source":"https://superuser.com/a/980680","author":"<span itemprop=\"name\">user162573</span>","replies":[]}]}
