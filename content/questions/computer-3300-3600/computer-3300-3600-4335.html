{"title":"Menambahkan pengguna ke lingkungan chroot","draft":false,"url":"/menambahkan-pengguna-ke-lingkungan-chroot-umtoczt9","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","ubuntu","chroot","debootstrap"],"snippet":"Saya telah membuat sistem chroot di Ubuntu saya menggunakan schroot dan debrootstrap, berdasarkan ubuntu minimal. Namun setiap kali saya tidak bisa menambahkan pengguna baru ke dalam lingkungan chroot ini. Inilah yang terjadi....","body":"<p> Saya telah membuat sistem chroot di Ubuntu saya menggunakan schroot dan debrootstrap, berdasarkan ubuntu minimal. Namun setiap kali saya tidak bisa menambahkan pengguna baru ke dalam lingkungan chroot ini. Inilah yang terjadi. </p>\n\n<ol>\n<li> Saya memasukkan schroot sebagai root dan menambahkan pengguna baru. (Mencoba perintah adduser dan useradd) </li>\n<li> Nama pengguna terdaftar di file / etc / passwd dan saya bisa &#39;su&#39; ke pengguna baru. Sejauh ini bagus. </li>\n<li> Ketika saya keluar dari schroot, dan masuk kembali ke schroot, pengguna yang saya buat telah menghilang !! Pengguna tersebut juga tidak disebutkan di / etc / passwd. </li>\n</ol>\n\n<p> Bagaimana cara menjadikan pengguna baru permanen? </p>","source":"https://superuser.com/questions/239545/adding-user-to-chroot-environment","author":"<a href=\"https://superuser.com/users/65382/neo\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Neo</span></a>","replies":[{"reply":"Ini terdengar aneh. Pertama-tama, coba pastikan bahwa direktori sudah benar, baik saat Anda berada di dalam chroot maupun di luar. Kemudian, lakukan <code>cat &#47;etc&#47;passwd</code> setelah membuat pengguna, lalu logout, dan <code>cat</code> file yang sama, sekarang dengan direktori chroot diawali. Apakah itu berubah?","author":"<a href=\"https://superuser.com/users/62395/maxelost\" target=\"_blank\" rel=\"nofollow noopener\">maxelost</a>"}],"answers":[{"answer":"<p> Oh, saya menemukan jawabannya sendiri. Schroot memiliki fitur yang disebut &quot;sesi&quot; di mana lingkungan saat ini dapat dipertahankan. Setiap kali seseorang logout tanpa membuat &quot;sesi&quot;, schroot membawa semuanya ke status bersih dan karenanya menghapus pengguna juga.\nSeseorang dapat memulai sesi menggunakan </p> <pre><code>schroot -c mychroot -b \n</code></pre>","votes":"4","source":"https://superuser.com/a/240380","author":"<a href=\"https://superuser.com/users/65382/neo\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Neo</span></a>","replies":[{"reply":"Terima kasih atas idenya, tetapi perhatikan bahwa pengguna tidak akan bertahan setelah reboot sistem. Saya menambahkan jawaban yang sepertinya menghadapinya.","author":"<a href=\"https://superuser.com/users/196656/nia\" target=\"_blank\" rel=\"nofollow noopener\">NIA</a>"}]},{"answer":"<p> Sebenarnya, ada solusi yang lebih baik, yang saya temukan <a href=\"http://linux.die.net/man/7/schroot-faq\" rel=\"nofollow noopener\" target=\"_blank\"> FAQ schroot </a> , di bagian <strong> Mengapa schroot menimpa file konfigurasi di chroot? </strong></p>\n<blockquote>\n<p> Secara default, schroot menyalin ke database sistem NSS (&#39;passwd&#39;,\n&#39;shadow&#39;, &#39;group&#39;, &#39;gshadow&#39;, &#39;services&#39;, &#39;protocols&#39;, &#39;networks&#39;, dan\n&#39;hosts&#39;, dll.) ke dalam chroot. Alasannya adalah karena chroot\nlingkungan bukanlah sistem yang sepenuhnya terpisah, dan itu menyalinnya\nover membuat mereka tetap tersinkronisasi. Namun, ini tidak selalu diinginkan, <em> terutama jika menginstal paket di chroot menciptakan sistem\npengguna dan grup yang tidak ada di host, karena ini akan\nmenghilang saat database disalin </em> . </p>\n</blockquote>\n<p><strong> Pendeknya: </strong> setiap kali Anda memulai sesi schroot baru, atau setelah reboot sistem host, schroot mengambil <code>/etc/passwd</code> dan beberapa file lain dari sistem nyata Anda dan menyalinnya ke dalam chroot, sehingga kehilangan semua pengguna baru darinya. Solusi yang disarankan dijelaskan dalam FAQ ini: Anda dapat menonaktifkan penyalinan file ini: </p>\n<ol>\n<li> Buka <code>/etc/schroot/default/nssdatabases</code> (di sistem nyata Anda, tentu saja) </li>\n<li> Anda akan melihat daftar yang disebut <a href=\"http://en.wikipedia.org/wiki/Name_Service_Switch\" rel=\"nofollow noopener\" target=\"_blank\"> Database NSS </a> , yang disalin dari sistem nyata. </li>\n<li> Baris komentar <code>passwd</code>, <code>group</code> dan <code>shadow</code>, sehingga file terlihat seperti ini: </li>\n</ol>\n<h3 class=\"h5\"> / etc / schroot / default / nssdatabases </h3> <pre><code># System databases to copy into the chroot from the host system.\n#\n# &lt;database name&gt;\n#passwd\n#shadow\n#group\nservices\nprotocols\nnetworks\nhosts\n</code></pre> <p> Sekarang jika Anda kembali ke dalam chroot dan membuat beberapa pengguna, atau menginstal beberapa postgresql dll, pengguna baru tidak akan hilang. Bahkan setelah reboot! </p>","votes":"2","source":"https://superuser.com/a/580190","author":"<a href=\"https://superuser.com/users/196656/nia\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">NIA</span></a>","replies":[]}]}
