{"title":"Mengapa file tar.gz saya rusak setelah menggunakan bash ftp untuk memindahkan file ke server jauh?","draft":false,"url":"/mengapa-file-targz-saya-rusak-setelah-menggunakan-bash-ftp-untuk-memindahkan-file-ke-server-jauh-dpzndhru","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","bash","ftp","tar"],"snippet":"Saya mencadangkan file tar.gz di server lokal, lalu ftp ke server jarak jauh. Jika saya menariknya ke desktop saya melalui klien ftp dari server lokal, file tersebut berfungsi dengan baik. Jika saya...","body":"<p> Saya mencadangkan file tar.gz di server lokal, lalu ftp ke server jarak jauh. Jika saya menariknya ke desktop saya melalui klien ftp dari server lokal, file tersebut berfungsi dengan baik. Jika saya menariknya ke desktop saya melalui klien ftp dari server jarak jauh, ukurannya beberapa byte lebih kecil dan rusak. Saya telah mencoba menggunakan klien untuk memaksa ascii dan mode biner, dan tidak ada yang merusak file, jadi saya tidak mengerti mengapa hal itu akan menyebabkan kerusakan pada skrip. Ada ide? File ditransfer dengan baik, itu tidak akan terbuka. Terima kasih sebelumnya. </p> <pre><code>cd $FSBACKDIR\nATTACH='for file in *$DATE.tar.gz; do echo -n -e \"put ${file}\\n\"; done'\nftp -nv &lt;&lt;EOF\nopen $FTPHOST\nuser $FTPUSER $FTPPASS\ncd $FTPDIR\n$ATTACH\nquit\nEOF\n</code></pre>","source":"https://superuser.com/questions/447897/why-is-my-tar-gz-file-corrupt-after-using-bash-ftp-to-move-file-to-a-remote-serv","author":"<a href=\"https://superuser.com/users/145501/josh\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Josh</span></a>","replies":[],"answers":[{"answer":"<p> Bagi saya, ini tampaknya masih menjadi masalah mode ASCII vs. mode biner, terlepas dari pengujian yang Anda lakukan dengan klien desktop Anda. Klien desktop Anda mungkin lebih pintar daripada klien FTP baris perintah di server pengirim (server lokal tempat Anda menjalankan skrip). </p>\n\n<p> Misalnya, jika server lokal adalah Windows (yang menggunakan CRLF sebagai akhiran baris) dan server jarak jauh adalah Unix (yang hanya menggunakan LF sebagai akhiran baris), dan Anda tidak menentukan mode biner dan perangkat lunak FTP Anda tidak otomatis- mendeteksinya dan melakukan hal yang benar, maka Anda akan menggunakan mode ASCII untuk transfer, yang akan menghapus CR dari pasangan CRLF mana pun. Jika tarball Anda yang di-gzip kebetulan memiliki pola byte 0x0d0a yang muncul di mana saja, itu akan kehilangan 0x0d. </p>\n\n<p> Jika klien FTP baris perintah pada sistem pengiriman Anda (saya rasa itu adalah server lokal Anda) seperti yang ada di sistem saya, yang harus Anda lakukan untuk menguji teori ini adalah menambahkan perintah <code>binary</code> sebelum atau setelah <code>cd</code> garis: </p> <pre><code>cd $FSBACKDIR  \nATTACH='for file in *$DATE.tar.gz; do echo -n -e \"put ${file}\\n\"; done'  \nftp -nv &lt;&lt;EOF  \nopen $FTPHOST  \nuser $FTPUSER $FTPPASS  \nbinary  \ncd $FTPDIR  \n$ATTACH  \nquit  \nEOF  \n</code></pre> <p> Satu pemikiran terakhir: Jika bukan mode ASCII vs binary, saya akan melihat apakah mungkin FTP ALG di gateway NAT antara server lokal dan jarak jauh Anda (atau antara server jarak jauh dan desktop Anda) entah bagaimana merusak file. sedang transit. Saya kira itu juga bisa menjadi jenis proxy lain di antara host, tidak secara khusus ALG FTP gateway NAT. </p>","votes":"11","source":"https://superuser.com/a/447952","author":"<a href=\"https://superuser.com/users/30792/spiff\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Spiff</span></a>","replies":[{"reply":"Terima kasih. @Piff. Saya pasti telah meletakkan &#39;biner&#39; di tempat yang salah ketika saya mencobanya sebelumnya. Saya kira saya perlu tidur di atasnya dan meminta seseorang memberi tahu saya untuk terus fokus di tempat yang sudah saya lihat. Sangat dihargai.","author":"<a href=\"https://superuser.com/users/145501/josh\" target=\"_blank\" rel=\"nofollow noopener\">Josh</a>"}]}]}
