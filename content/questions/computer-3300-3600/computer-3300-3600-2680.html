{"title":"MDADM RAID-0 tidak bertambah ukurannya setelah berkembang di AWS Linux dengan EBS","draft":false,"url":"/mdadm-raid-0-tidak-bertambah-ukurannya-setelah-berkembang-di-aws-linux-dengan-ebs-u9xsvk7b","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","raid","software-raid","mdadm","raid-0"],"snippet":"Saya ingin menumbuhkan Raid0 dari 2 disk menjadi 3 (masing-masing 1TB EBS di Amazon AWS) tetapi ukurannya tidak berubah setelahnya. RAID dimulai dengan dua disk sdc dan sdd dan yang baru adalah...","body":"<p> Saya ingin menumbuhkan Raid0 dari 2 disk menjadi 3 (masing-masing 1TB EBS di Amazon AWS) tetapi ukurannya tidak berubah setelahnya. RAID dimulai dengan dua disk sdc dan sdd dan yang baru adalah sdf. </p>\n\n<p> Inilah perintah tumbuh: </p> <pre><code>sudo mdadm --grow /dev/md0 --raid-devices=3 --add /dev/xvdf \n</code></pre> <p> setelah beberapa jam mdstats menunjukkan info berikut (menggunakan <code>cat /proc/mdstat</code>): </p> <pre><code>Personalities : [raid0] [raid6] [raid5] [raid4] \nmd0 : active raid0 xvdf[3] xvdd[1] xvdc[0]\n  3221223936 blocks super 1.2 512k chunks\n</code></pre> <p> jadi saya berharap ini berhasil tetapi <code>df -h</code> memberi saya: </p> <pre><code>Filesystem      Size  Used Avail Use% Mounted on\n/dev/md0        2.0T  1.6T  297G  85% /mnt/md0\n</code></pre> <p> dan <code>sudo mdadm --detail /dev/md0</code> menunjukkan: </p> <pre><code>/dev/md0:\n        Version : 1.2\n  Creation Time : Tue Jul 22 16:05:40 2014\n     Raid Level : raid0\n     Array Size : 3221223936 (3072.00 GiB 3298.53 GB)\n   Raid Devices : 3\n  Total Devices : 3\n    Persistence : Superblock is persistent\n\n    Update Time : Sun Sep  7 01:37:39 2014\n          State : clean \n Active Devices : 3\nWorking Devices : 3\n Failed Devices : 0\n  Spare Devices : 0\n\n     Chunk Size : 512K\n\nNumber   Major   Minor   RaidDevice State\n   0     202       32        0      active sync   /dev/sdc\n   1     202       48        1      active sync   /dev/sdd\n   3     202       80        2      active sync   /dev/sdf\n</code></pre> <p> jadi RAID tampaknya memiliki 3 perangkat dan ukuran yang benar (3072 GB) tetapi <code>df</code> tidak menunjukkan ini. Anehnya, disk baru (sdf) terdaftar sebagai nomor 3 dan nomor 2 tidak terdaftar. </p>\n\n<p> Catatan: Saya memang menggunakan EBS &quot;kosong&quot; tanpa pemformatan apa pun - haruskah disk RAID baru diformat sebelum ditambahkan ke RAID (yang sudah diformat)? </p>\n\n<p> Apa yang saya lewatkan? Apakah saya harus (sebagian) memformat disk RAID baru (masih ada data di RAID yang saya perlukan (tetapi saya memiliki Cadangan))? Apakah <code>df</code> salah membaca RAID atau apakah RAID tumbuh belum selesai? </p>","source":"https://superuser.com/questions/808391/mdadm-raid-0-does-not-increased-size-after-grow-on-aws-linux-with-ebs","author":"<a href=\"https://superuser.com/users/348426/j%c3%b6rg-rech\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">J&#246;rg Rech</span></a>","replies":[{"reply":"Bisakah Anda memberi tahu saya AMI-id / region mana yang Anda kerjakan ini? Saya telah mencoba ini selama beberapa minggu dan saya hanya bisa membuatnya berfungsi di ArchLinux.","author":"<a href=\"https://superuser.com/users/162969/saad-malik\" target=\"_blank\" rel=\"nofollow noopener\">Saad Malik</a>"},{"reply":"Wilayah itu seharusnya tidak penting. Tapi saya menggunakan AmazonLinux, Ubuntu atau Debian.","author":"<a href=\"https://superuser.com/users/348426/j%c3%b6rg-rech\" target=\"_blank\" rel=\"nofollow noopener\">J&#xF6;rg Rech</a>"}],"answers":[{"answer":"<p> Langkah Anda tidak menyebutkan perluasan sistem file sebenarnya yang ada di / dev / md0. Anda memperluas RAID (yang merupakan disk &#39;fisik&#39;) dan kemudian Anda perlu memperluas sistem berkas (ext4 atau sejenisnya) di atasnya untuk membuat <code>df</code> melihatnya. </p>","votes":"7","source":"https://superuser.com/a/808393","author":"<a href=\"https://superuser.com/users/5156/jess\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Jess</span></a>","replies":[{"reply":"Saya memformat RAID asli dengan 2 disk menggunakan <code>sudo mkfs.ext4 &#47;dev&#47;md0</code>. Bagaimana cara mengubah / memperluas sistem file dari disk ketiga (tanpa memformat seluruh RAID)?","author":"<a href=\"https://superuser.com/users/348426/j%c3%b6rg-rech\" target=\"_blank\" rel=\"nofollow noopener\">J&#xF6;rg Rech</a>"},{"reply":"Terima kasih atas idenya: Setelah Googleing sedikit tentang sistem file, saya perhatikan bahwa saya hanya perlu mengubah ukuran sistem file menggunakan perintah <code>resize2fs &#47;dev&#47;md0</code>","author":"<a href=\"https://superuser.com/users/348426/j%c3%b6rg-rech\" target=\"_blank\" rel=\"nofollow noopener\">J&#xF6;rg Rech</a>"}]}]}
