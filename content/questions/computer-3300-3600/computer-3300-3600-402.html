{"title":"Penjadwal tugas berbasis Linux sederhana dengan dependensi pekerjaan? [Tutup]","draft":false,"url":"/penjadwal-tugas-berbasis-linux-sederhana-dengan-dependensi-pekerjaan-tutup-fsjyswwq","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["linux","cron","scheduled-tasks"],"snippet":"Saya mengelola sistem pergudangan data yang melibatkan banyak pekerjaan dependen (impor data, transformasi, dll). Saya telah menggunakan Linux crontab untuk mengelolanya sampai ketergantungan antar pekerjaan menjadi rumit.  Pada dasarnya saya mencari beberapa...","body":"<div>\r\n            \r\n\r\n    </div>\r\n\r\n<p> Saya mengelola sistem pergudangan data yang melibatkan banyak pekerjaan dependen (impor data, transformasi, dll). Saya telah menggunakan Linux <code>crontab</code> untuk mengelolanya sampai ketergantungan antar pekerjaan menjadi rumit. </p>\n\n<p> Pada dasarnya saya mencari beberapa pengganti <code>cron</code> yang membantu saya dengan skenario berikut: </p>\n\n<ul>\n<li><p> Jalankan pekerjaan A di <code>00:05</code> (mudah). Biasanya ini adalah tugas impor. </p></li>\n<li><p> Jadwalkan pekerjaan B, C, D untuk dijalankan setelah pekerjaan A selesai. Pekerjaan D hanya berjalan 30 menit setelah pekerjaan A selesai (untuk mendistribusikan beban). Ini adalah pekerjaan transformasi. </p></li>\n<li><p> Job E berjalan saat semua B, C, D selesai. Biasanya ini adalah pekerjaan yang membawa data agregat ke database front-end web. </p></li>\n</ul>\n\n<p> Semua ini terjadi di node yang sama. </p>\n\n<p> Saya membayangkan itu terlihat seperti grafik topologi. </p> <pre><code>A--&gt; B --------------&gt;---&gt; E\n \\-&gt; C -------------/   /\n \\-&gt; (delay 30mins) -&gt; D\n</code></pre> <p> Apakah ada alat sederhana berbasis linux yang mendukung ini? Saya sudah memeriksanya <a href=\"http://nerds.airbnb.com/introducing-chronos/\" rel=\"nofollow noopener\" target=\"_blank\"> Chronos Airbnb </a> tapi tampaknya berlebihan untuk kebutuhanku. </p>\n\n<p> Sunting: Skenario di atas hanyalah versi sederhana dari apa yang terjadi. Kami memiliki lebih banyak pekerjaan harian dan ketergantungannya jauh lebih rumit. Jadi saya sebenarnya mencari beberapa &quot;cron on steroid&quot; daripada skrip bash kasus per kasus untuk memenuhi setiap skenario. </p>","source":"https://superuser.com/questions/594931/simple-linux-based-task-scheduler-with-job-dependencies","author":"<a href=\"https://superuser.com/users/38887/huy\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">huy</span></a>","replies":[{"reply":"Saya kira menggunakan server CI Jenkins akan berlebihan juga. Tetap saja, itu akan berhasil.","author":"<a href=\"https://superuser.com/users/22317/daniel-beck\" target=\"_blank\" rel=\"nofollow noopener\">Daniel Beck&#9830;</a>"},{"reply":"Kamu <i> bisa </i> lakukan ini dengan skrip bash yang cukup sederhana yang berjalan pada 00:05 (melalui crond apa pun), mulai pekerjaan A dan menunggu penyelesaiannya, lalu mulai B dan C di latar belakang serta subproses latar belakang yang menunggu 30 menit lalu mulai D , lalu tunggu semuanya selesai sebelum memulai E, lalu saat E selesai cukup keluar. Berikan sedikit penanganan kesalahan untuk tindakan yang baik dan Anda harus melakukannya dengan baik. Tautan yang mungkin berguna: <a href=\"http://stackoverflow.com/q/356100/486504\" target=\"_blank\" rel=\"nofollow noopener\"> stackoverflow.com/q/356100/486504 </a> <a href=\"http://stackoverflow.com/a/6041820/486504\" target=\"_blank\" rel=\"nofollow noopener\"> stackoverflow.com/a/6041820/486504 </a> Google &quot;bash menunggu subproses&quot; atau serupa.","author":"<a href=\"https://superuser.com/users/53590/user\" target=\"_blank\" rel=\"nofollow noopener\">user</a>"},{"reply":"Michael: Terima kasih. Padahal kasus penggunaan saya jauh lebih rumit dari itu. Saya telah memperbarui pertanyaan untuk mencerminkan.","author":"<a href=\"https://superuser.com/users/38887/huy\" target=\"_blank\" rel=\"nofollow noopener\">huy</a>"},{"reply":"Jadi Anda sedang mencari alat sederhana untuk menangani versi yang lebih kompleks yang tidak ditentukan dari apa yang Anda gunakan sebagai contoh ... Terus terang, jika demikian, saya tidak yakin pertanyaan yang ada dapat dijawab. Kemudian <i> setidaknya </i> jelaskan mengapa alternatif yang Anda temukan &quot;berlebihan&quot; untuk kebutuhan Anda, dan apa <i> spesifik </i> fitur yang Anda butuhkan.","author":"<a href=\"https://superuser.com/users/53590/user\" target=\"_blank\" rel=\"nofollow noopener\">user</a>"},{"reply":"<a href=\"http://vicerveza.homeunix.net/~viric/soft/ts/\" rel=\"nofollow noopener\" target=\"_blank\"> vicerveza.homeunix.net/~viric/soft/ts </a> - di repo Debian.","author":"<a href=\"https://superuser.com/users/51705/lawrencec\" target=\"_blank\" rel=\"nofollow noopener\">LawrenceC</a>"}],"answers":[{"answer":"<p> Seperti yang disarankan Michael Kj√∂rling di komentar, Anda seharusnya dapat melakukan ini dengan skrip bash sederhana. Sesuatu seperti ini: </p> <pre><code>#!/usr/bin/env bash\n\n## Log file to which the \"echo\" commands bellow will write\nlogfile=\"/tmp/$$.log\"\n\n## Change \"ls /etc &gt;/dev/null \" to reflect the actual \n## jobs you want to run but keep the  \"&amp;&amp; echo job N finished\" as is.\njobA=\"ls /etc &gt;/dev/null\"\njobB=\"ls /etc &gt;/dev/null &amp;&amp; echo 'job B finished' &gt;&gt; $logfile\"\njobC=\"ls /etc &gt;/dev/null &amp;&amp; echo 'job C finished' &gt;&gt; $logfile\"\njobD=\"ls /etc &gt;/dev/null &amp;&amp; echo 'job D finished' &gt;&gt; $logfile\"\njobE=\"ls /etc &gt;/dev/null\";\n\n## Run job A, launch jobs B and C as soon as A is finished\n## and launch job D 30 minutes after A finishes.\neval $jobA &amp;&amp; (sleep 30 &amp;&amp; eval $jobD) &amp; eval $jobB &amp; eval $jobC &amp;\n\n\n## Now, monitor the logfile and run job E when the rest have finished\nwhile true; do\n    lines=`wc -l $logfile | cut -f 1 -d ' '`;\n    echo \"$logfile : $lines\"\n    ## The logfile will contain 4 lines if all jobs have finished\n    if [ \"$lines\" -eq 3 ];\n    then\n      ## Run job E\n      eval $jobE \n      ## Delete the logfile\n      rm $logfile\n      ## exit the script\n      exit 0;\n    fi\n    ## Only check if the jobs are finished once a minute\n    sleep 60;\ndone\n</code></pre> <p> Jika Anda menggunakan <code>cron</code> untuk meluncurkan skrip ini pada 00:05, skrip ini akan melakukan apa yang Anda inginkan. Trik utama di sini adalah penggunaan <a href=\"http://linux.about.com/od/Bash_Scripting_Solutions/a/Subshells-In-Bash-Scripts.htm\" rel=\"nofollow noopener\" target=\"_blank\"> subkulit </a> <code>()</code> dan <code>&amp;&amp;</code>. Subkelompok memungkinkan Anda menjalankan beberapa pekerjaan latar belakang dan <code>&amp;&amp;</code> hanya menjalankan pekerjaan setelah pekerjaan lain berhasil keluar. </p>","votes":"6","source":"https://superuser.com/a/595054","author":"<a href=\"https://superuser.com/users/151431/terdon\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">terdon</span></a>","replies":[{"reply":"Terima kasih atas bantuan Anda @terdon. Maaf saya tidak lebih jelas tentang situasi saya. Jumlah pekerjaan yang saya miliki jauh lebih banyak dari itu, dan antar ketergantungan jauh lebih rumit. Skenario yang saya gambarkan hanyalah versi sederhana dari apa yang biasanya akan terjadi.","author":"<a href=\"https://superuser.com/users/38887/huy\" target=\"_blank\" rel=\"nofollow noopener\">huy</a>"}]},{"answer":"<p> Ini terlihat menarik: </p>\n\n<ul>\n<li><a href=\"https://airflow.incubator.apache.org/\" rel=\"nofollow noopener\" target=\"_blank\"> https://airflow.incubator.apache.org/ </a>\n\n<blockquote>\n  <p> tidak begitu sederhana tetapi kuat dan didukung oleh apache, dikonfigurasi oleh kode, banyak digunakan sekarang </p>\n</blockquote></li>\n<li><a href=\"https://www.digdag.io/\" rel=\"nofollow noopener\" target=\"_blank\"> https://www.digdag.io/ </a>\n\n<blockquote>\n  <p> java airflow seperti, lebih mudah dikonfigurasi </p>\n</blockquote></li>\n<li><a href=\"https://github.com/thieman/dagobah\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/thieman/dagobah </a>\n\n<blockquote>\n  <p> Penjadwal pekerjaan berbasis DAG sederhana dengan Python </p>\n</blockquote></li>\n<li><a href=\"https://github.com/spotify/luigi\" rel=\"nofollow noopener\" target=\"_blank\"> https://github.com/spotify/luigi </a> (oleh spotify) <blockquote>\n  <p> Luigi adalah modul Python yang membantu Anda membangun pipeline yang kompleks\n  pekerjaan batch. </p>\n</blockquote></li>\n</ul>\n\n<p> Ini semua adalah proyek python (harapkan digdag) yang bertujuan mengganti cron dengan GUI yang bagus untuk melihat grafik ketergantungan. </p>\n\n<p> Saya dulu menggunakan bash untuk hal ini, tetapi semakin buruk ketika Anda tumbuh menjadi sistem yang kompleks. </p>","votes":"4","source":"https://superuser.com/a/938012","author":"<a href=\"https://superuser.com/users/455605/thibault-ketterer\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">thibault ketterer</span></a>","replies":[]},{"answer":"<p> BMC Software membuat produk bernama Control-M yang cocok untuk deskripsi masalah Anda. Namun, ini tidak gratis :( </p>\n\n<p> Kami menggunakannya untuk mengelola sekitar 500 pekerjaan dalam produksi, dan mendekati 400 di lingkungan pengujian. Anda menginstal klien di mesin apa pun yang Anda butuhkan, lalu menyiapkan pekerjaan di server Control-M untuk dijalankan di klien. Ada banyak sekali parameter yang dapat dikonfigurasi dan kriteria penjadwalan, yang semuanya dapat diatur melalui GUI atau baris perintah. Bagian yang paling pas untuk masalah Anda adalah bahwa masalah ini berkembang saat menyiapkan kondisi input / output untuk pekerjaan sehingga Anda dapat memiliki ketergantungan hanya dengan menyeret dan melepaskan antar pekerjaan. Kami menggunakannya untuk menyiapkan aliran alur kerja dari 20+ pekerjaan sekaligus. </p>","votes":"2","source":"https://superuser.com/a/706374","author":"<a href=\"https://superuser.com/users/292959/ben\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">ben</span></a>","replies":[]}]}
