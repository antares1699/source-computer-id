{"title":"Menggunakan ffmpeg untuk mengekstrak segmen di tengah video panjang","draft":false,"url":"/menggunakan-ffmpeg-untuk-mengekstrak-segmen-di-tengah-video-panjang-cdx77w1m","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["ffmpeg","libav"],"snippet":"Saya perlu mengekstrak interval 30 detik dari tengah video, sambil mengubahnya menjadi webm. ffmpeg tampak seperti satu baris yang sempurna:  ffmpeg -i long.mkv -vcodec libvpx -b:v 1M -ss 02:00:00 -t 00:00:30 -threads...","body":"<p> Saya perlu mengekstrak interval 30 detik dari tengah video, sambil mengubahnya menjadi webm. ffmpeg tampak seperti satu baris yang sempurna: </p> <pre><code>ffmpeg -i long.mkv -vcodec libvpx -b:v 1M -ss 02:00:00 -t 00:00:30 -threads 4 out.webm\n</code></pre> <p> Yang mengejutkan saya, itu segera menelan semua memori yang tersedia dan hal-hal mulai bertukar jadi saya membunuhnya. Setelah tidak menemukan kesalahan yang jelas - dan mengingat saya jarang menggunakan ffmpeg - saya mencoba avconv. Itu tidak melaporkan melakukan apa pun dan penggunaan memori (perlahan) tumbuh ke arah yang sama. </p>\n\n<p> Setelah beberapa tes dengan: </p> <pre><code> -ss 02:00:00 -t 00:00:01\n -ss 00:00:01 -t 00:00:01\n -ss 00:01:00 -t 00:00:01\n</code></pre> <p> Sepertinya ffmpeg memuat seluruh film hingga <code>-ss</code> di memori, atau sesuatu seperti itu. Bagaimanapun, tampaknya itu tidak cocok untuk operasi semacam ini. Pertanyaan saya adalah, apakah saya melakukan sesuatu yang salah dan ffmpeg sebenarnya dapat melakukan operasi ini dengan penggunaan sumber daya yang wajar? Jika ffmpeg tidak dimaksudkan untuk ini atau hanya konyol tentang cara melakukannya, apakah ada alternatif yang tidak melibatkan menyeret dan menjatuhkan persegi panjang ke dalam garis waktu dan menggunakan gunting kecil dan bilah gulir? </p> <pre><code>debian@pc:~/ ffmpeg -version\nffmpeg version 0.8.16-6:0.8.16-1, Copyright (c) 2000-2014 the Libav developers\n  built on Sep 16 2014 23:10:48 with gcc 4.7.2\nThe ffmpeg program is only provided for script compatibility and will be removed\nin a future release. It has been deprecated in the Libav project to allow for\nincompatible command line syntax improvements in its replacement called avconv\n(see Changelog for details). Please use avconv instead.\nffmpeg 0.8.16-6:0.8.16-1\nlibavutil    51. 22. 2 / 51. 22. 2\nlibavcodec   53. 35. 0 / 53. 35. 0\nlibavformat  53. 21. 1 / 53. 21. 1\nlibavdevice  53.  2. 0 / 53.  2. 0\nlibavfilter   2. 15. 0 /  2. 15. 0\nlibswscale    2.  1. 0 /  2.  1. 0\nlibpostproc  52.  0. 0 / 52.  0.100\n</code></pre> <p> Saya juga mencoba dengan versi terbaru dari situs ffmpeg dan hasilnya sama dengan avconv - tidak menelan memori saya sekaligus, tetapi sepertinya tidak melakukan apa-apa: </p> <pre><code>frame=    0 fps=0.0 q=-1.0 size=       4kB time=00:00:00.00 bitrate=N/A    \n</code></pre> <p> Dan terus meningkatkan penggunaan memori. Untuk klip satu detik menurut saya itu harus instan dan hampir tidak menggunakan memori apa pun. </p>","source":"https://superuser.com/questions/957519/using-ffmpeg-to-extract-segment-in-the-middle-of-long-video","author":"<a href=\"https://superuser.com/users/202306/alex\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Alex</span></a>","replies":[{"reply":"Sejauh yang saya tahu, itu harus membaca beberapa dari 2 jam tidak ada, kali ini tidak melakukan apa-apa. kemudian 30 detik bekerja dan kemudian berakhir.","author":"<a href=\"https://superuser.com/users/478960/schwertspize\" target=\"_blank\" rel=\"nofollow noopener\">Schwertspize</a>"},{"reply":"Itu harus menyandikan film dan membuang apa pun hingga mencapai posisi yang ditunjukkan oleh <code>ss</code>. Saya tidak pernah mengamati penggunaan memori melakukan hal-hal seperti ini, tetapi mungkin Anda dapat membatasi memori prosesnya?","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"},{"reply":"@Alex bisakah kamu <a href=\"https://trac.ffmpeg.org/wiki/Seeking\" rel=\"nofollow noopener\" target=\"_blank\"> gunakan <code>-ss</code> sebagai parameter masukan </a> ? Akan menghindari penundaan pencarian keluaran. YAITU: <code>ffmpeg -ss 02:00:00 -i long.mkv -vcodec libvpx -b:v 1M -t 00:00:30 -threads 4 out.webm</code>. Meninggalkan sebagai komentar dan bukan jawaban jika Anda membutuhkan pencarian yang akurat dalam bingkai; jika berhasil untuk Anda, saya akan menuliskannya sebagai jawaban :)","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\">bertieb</a>"}],"answers":[{"answer":"<p> Menggunakan <code>-ss</code> setelah <code>-i</code> di <code>ffmpeg</code> membutuhkan waktu lama! </p>\n<p> Ini karena Anda mencari titik di <strong> keluaran </strong> , bukan masukannya. Per <a href=\"https://trac.ffmpeg.org/wiki/Seeking\" rel=\"nofollow noopener\" target=\"_blank\"> <code>ffmpeg</code> manual tentang mencari </a> : </p>\n<blockquote>\n<p><strong> Pencarian masukan </strong></p>\n<p> Parameter <code>-ss</code> perlu ditentukan di suatu tempat sebelum <code>-i</code>: </p>\n<p> ... Masukan akan diurai menggunakan <strong> keyframes </strong> , yang mana <strong> sangat cepat </strong> ... </p>\n</blockquote>\n<p> dibandingkan dengan: </p>\n<blockquote>\n<p><strong> Pencarian Output </strong></p>\n<p> Parameter <code>-ss</code> perlu ditentukan setelah <code>-i</code>: </p>\n<p> ... Ini akan dilakukan <strong> sangat lambat </strong> , bingkai demi bingkai ... </p>\n</blockquote>\n<p> dalam pertanyaan Anda, Anda menentukan yang terakhir. Ini akan jauh lebih cepat jika Anda menggunakan <em> pencarian masukan </em> sebagai gantinya: </p> <pre><code>ffmpeg -ss 02:00:00 -i long.mkv -vcodec libvpx -b:v 1M -t 00:00:30 -threads 4 out.webm\n</code></pre> <p> Tetapi jika Anda benar-benar membutuhkan pencarian dengan bingkai yang akurat, Anda dapat menggabungkan keduanya: </p> <pre><code>ffmpeg -ss 01:59:30 -i long.mkv -ss 30 -vcodec libvpx -b:v 1M -t 00:00:30 -threads 4 out.webm\n</code></pre> <p><em> (pencarian cepat ke 01:59:30, lalu cari frame-by-frame ke 02:00:00, yaitu +30) </em></p>\n<p> Anda mungkin sudah sadar, tetapi jika tidak, ini harus menjelaskan bahwa <code>ffmpeg</code> pilih-pilih tentang penempatan opsi dan sakelar! </p>","votes":"7","source":"https://superuser.com/a/958025","author":"<a href=\"https://superuser.com/users/461558/bertieb\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">bertieb</span></a>","replies":[]}]}
