{"title":"Mengapa SSH tidak mengaktifkan .bash_profile?","draft":false,"url":"/mengapa-ssh-tidak-mengaktifkan-bash-profile-rq0pibx9","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["bash","ssh"],"snippet":"Pemahaman saya adalah bahwa ssh $host \"source ~/.bash_profile ; echo $PATH \".:/mnt/spark-1.4.1/bin:/mnt/spark-1.4.1/sbin:/mnt/scala-2.11.2/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin akan selalu dipanggil melalui login SSH.  Namun saya tidak melihat berbagai pengaturan diaktifkan kecuali saya melakukan hal berikut:  ssh...","body":"<p> Pemahaman saya adalah bahwa <pre><code>ssh $host \"source ~/.bash_profile ; echo $PATH \"\n\n.:/mnt/spark-1.4.1/bin:/mnt/spark-1.4.1/sbin:/mnt/scala-2.11.2/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n</code></pre> akan selalu dipanggil melalui login SSH. </p>\n\n<p> Namun saya tidak melihat berbagai pengaturan diaktifkan kecuali saya melakukan hal berikut: </p> <pre><code>ssh $host \"source ~/.bash_profile ; echo $PATH \"\n\n.:/mnt/spark-1.4.1/bin:/mnt/spark-1.4.1/sbin:/mnt/scala-2.11.2/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n</code></pre> <p> Ketika saya hanya melakukan: </p> <pre><code>ssh $host \"echo $PATH \"\n</code></pre> <p> Info PATH hanyalah defaultnya </p> <pre><code> /usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n</code></pre> <p> Pengguna adalah root dan shell default adalah bash. </p> <pre><code>$ ll /bin/sh\nlrwxrwxrwx 1 root root 4 Aug  6 19:54 /bin/sh -&gt; bash\n</code></pre> <p><strong> Memperbarui </strong> cangkang root <strong> aku s </strong> pesta </p> <pre><code>grep root /etc/passwd\nroot:x:0:0:root:/root:/bin/bash\n</code></pre>","source":"https://superuser.com/questions/952084/why-is-ssh-not-invoking-bash-profile","author":"<a href=\"https://superuser.com/users/212970/stephenboesch\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">StephenBoesch</span></a>","replies":[{"reply":"Saya baru saja memperhatikan ini: dari contoh Anda, saya cukup yakin Anda pernah <b> tidak </b> telah menjalankan perintah yang menurut Anda telah Anda jalankan. Misalnya, <code>ssh $host &quot;echo $PATH&quot;</code> akan menggemakan mesin / akun lokal <code>$PATH</code>, karena tanda kutip ganda tidak memblokir perluasan parameter atau perluasan tilde, sehingga hal-hal tersebut diperluas pada mesin lokal sebelum perintah <code>ssh</code> dijalankan. Jika Anda ingin melihat <code>$PATH</code> untuk mesin yang Anda gunakan SSH, Anda perlu menggunakan tanda kutip tunggal di sekitar perintah jarak jauh: <code>ssh $host &#39;echo $PATH&#39;</code>","author":"<a href=\"https://superuser.com/users/30792/spiff\" target=\"_blank\" rel=\"nofollow noopener\">Spiff</a>"},{"reply":"@Piff Cukup adil. Saya menulis ini hampir sebulan yang lalu dan telah melakukan pekerjaan yang &#39;lebih baik&#39; baru-baru ini dalam melakukan kutipan dengan benar. Pagi ini saya menjalankan ssh $ host &#39;echo $ SPARK_HOME&#39;. Itu menggunakan tanda kutip tunggal dan kembali tanpa apa-apa. Variabel itu disetel dalam .bash_profile","author":"<a href=\"https://superuser.com/users/212970/stephenboesch\" target=\"_blank\" rel=\"nofollow noopener\">StephenBoesch</a>"}],"answers":[{"answer":"<p> ssh dengan perintah akan <strong> TIDAK </strong> memulai shell login. Jadi bash_profile tidak bersumber. </p>\n\n<p> Lihat detailnya <a href=\"https://unix.stackexchange.com/questions/332531/why-does-remote-bash-source-bash-profile-instead-of-bashrc\" target=\"_blank\" rel=\"nofollow noopener\"> sini </a></p>","votes":"4","source":"https://superuser.com/a/1425151","author":"<a href=\"https://superuser.com/users/1021326/nullas\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">nullas</span></a>","replies":[]},{"answer":"<p> Apakah Anda memiliki kumpulan file <code>.bashrc</code>? Itu bisa rusak atau rusak atau memiliki sesuatu yang menyebabkan pemrosesan <code>.bashrc</code> tersendat dan gagal. Dan akibatnya, tidak sampai ke titik di mana ia dapat mencerna / memproses <code>.bash_profile</code> dengan rapi. </p>\n\n<p> Seperti yang ditunjukkan <a href=\"https://shreevatsa.wordpress.com/2008/03/30/zshbash-startup-files-loading-order-bashrc-zshrc-etc/\" rel=\"nofollow noopener\" target=\"_blank\"> di situs ini </a> , <code>.bashrc</code> memuat sebelum <code>.bash_profile</code>: </p> <pre><code>+----------------+-----------+-----------+------+\n|                |Interactive|Interactive|Script|\n|                |login      |non-login  |      |\n+----------------+-----------+-----------+------+\n|/etc/profile    |   A       |           |      |\n+----------------+-----------+-----------+------+\n|/etc/bash.bashrc|           |    A      |      |\n+----------------+-----------+-----------+------+\n|~/.bashrc       |           |    B      |      |\n+----------------+-----------+-----------+------+\n|~/.bash_profile |   B1      |           |      |\n+----------------+-----------+-----------+------+\n|~/.bash_login   |   B2      |           |      |\n+----------------+-----------+-----------+------+\n|~/.profile      |   B3      |           |      |\n+----------------+-----------+-----------+------+\n|BASH_ENV        |           |           |  A   |\n+----------------+-----------+-----------+------+\n|                |           |           |      |\n+----------------+-----------+-----------+------+\n|                |           |           |      |\n+----------------+-----------+-----------+------+\n|~/.bash_logout  |    C      |           |      |\n+----------------+-----------+-----------+------+\n</code></pre> <p> Saya akan merekomendasikan untuk memeriksa <code>.bashrc</code> itu dan bahkan mungkin untuk sementara mengganti nama itu seperti <code>.bashrc_off</code> untuk menonaktifkannya untuk menguji teori sebelum men-debug lebih jauh. </p>","votes":"3","source":"https://superuser.com/a/952087","author":"<a href=\"https://superuser.com/users/167207/giacomo1968\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Giacomo1968</span></a>","replies":[{"reply":"Zero ~ / .bashrc, /etc/bash.bashrc, ~ / .bash_login, ~ / .profile pada sistem ini. Hanya ~ / .bash_profile dan ~ / .bash_logout","author":"<a href=\"https://superuser.com/users/212970/stephenboesch\" target=\"_blank\" rel=\"nofollow noopener\">StephenBoesch</a>"},{"reply":"@javadba Lihat grid di atas. Mungkin saja konfigurasi Bash startup yang lebih umum tersedak seperti <code>&#47;etc&#47;profile</code> atau bahkan <code>&#47;etc&#47;bash.bashrc</code>. Periksa dan mungkin ada &quot;gremlin&quot; di dekat akhir file.","author":"<a href=\"https://superuser.com/users/167207/giacomo1968\" target=\"_blank\" rel=\"nofollow noopener\">Giacomo1968</a>"},{"reply":"Terima kasih, ini adalah AMI untuk Spark yang tidak saya sentuh / etc / profile -dan yang terlihat cukup umum. Tidak ada /etc/.bash.bashrc.","author":"<a href=\"https://superuser.com/users/212970/stephenboesch\" target=\"_blank\" rel=\"nofollow noopener\">StephenBoesch</a>"},{"reply":"Apakah Anda keberatan untuk melihatnya, saya telah memperbarui OP. Masalah ini membunuh saya - karena tanpa .bash_profile TIDAK ADA cara bagi saya untuk mengatur lingkungan ssh jarak jauh.","author":"<a href=\"https://superuser.com/users/212970/stephenboesch\" target=\"_blank\" rel=\"nofollow noopener\">StephenBoesch</a>"},{"reply":"@javadba Tidak tahu apa yang terjadi. Maaf. Tidak dapat membantu Anda lebih jauh.","author":"<a href=\"https://superuser.com/users/167207/giacomo1968\" target=\"_blank\" rel=\"nofollow noopener\">Giacomo1968</a>"}]},{"answer":"<p> Apa yang terakhir tentang <code>/bin/sh</code>? Jika shell default root disetel ke <code>/bin/sh</code>, maka <code>bash</code> akan dipanggil dalam mode kompatibilitas shell Bourne POSIX, di mana skrip startup khusus <code>bash</code> tidak akan dijalankan. </p>","votes":"0","source":"https://superuser.com/a/952177","author":"<a href=\"https://superuser.com/users/30792/spiff\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Spiff</span></a>","replies":[{"reply":"Itu adalah komentar bahwa / bin / sh terhubung dengan bash pada sistem - jika ssh default menggunakan / bin / sh (yang saya tidak yakin).","author":"<a href=\"https://superuser.com/users/212970/stephenboesch\" target=\"_blank\" rel=\"nofollow noopener\">StephenBoesch</a>"},{"reply":"@javadba Jadi, periksa dan beri tahu kami apa shell pengguna root disetel ke sistem yang Anda gunakan untuk SSH. SSH baru saja melakukan login. Shell default dari akun yang Anda masuki adalah shell yang digunakan. Jika disetel ke <code>&#47;bin&#47;sh</code>, itu masalah Anda. Jika Anda ingin menggunakan <code>.bash_profile</code>, Anda harus memanggil <code>bash</code> sebagai <code>bash</code>, karena <code>bash</code> terlihat untuk melihat apakah itu dipanggil sebagai <code>sh</code> dan mengubah perilaku menjadi lebih seperti <code>sh</code>.","author":"<a href=\"https://superuser.com/users/30792/spiff\" target=\"_blank\" rel=\"nofollow noopener\">Spiff</a>"},{"reply":"cangkang root <i> aku s </i> bash (OP diperbarui)","author":"<a href=\"https://superuser.com/users/212970/stephenboesch\" target=\"_blank\" rel=\"nofollow noopener\">StephenBoesch</a>"}]}]}
