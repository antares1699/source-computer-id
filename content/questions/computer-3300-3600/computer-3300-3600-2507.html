{"title":"Bagaimana cara memetakan pengguna root klien NFS ke pengguna root server NFS?","draft":false,"url":"/bagaimana-cara-memetakan-pengguna-root-klien-nfs-ke-pengguna-root-server-nfs-cqs6oluy","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","nfs"],"snippet":"Kami mengalami masalah saat menggunakan NFS. Kami tidak dapat menulis ke direktori di mesin klien NFS jika direktori itu dibuat di server NFS. Alasannya sepertinya karena izin file / direktori dan pemetaan...","body":"<p> Kami mengalami masalah saat menggunakan NFS. Kami tidak dapat menulis ke direktori di mesin klien NFS jika direktori itu dibuat di server NFS. Alasannya sepertinya karena izin file / direktori dan pemetaan pengguna. </p>\n\n<p><strong> Pengaturan kami: </strong></p>\n\n<p> Kami memiliki 2 node EC2 - Ubuntu 16.04.2 LTS </p>\n\n<p> Server NFS diinstal pada satu mesin: </p> <pre><code>ubuntu@master:~$ less /etc/exports\n/home/ubuntu/data *(rw,no_subtree_check,sync,insecure)\n</code></pre> <p> Dir yang sama dipasang di komputer lain: </p> <pre><code>sudo mkdir /home/ubuntu/data\nsudo mount -t nfs masterIp:/home/ubuntu/data /home/ubuntu/data\n</code></pre> <p><strong> Masalah yang kami miliki: </strong></p>\n\n<p> Ketika kita membuat dir di NFS di master, itu dibuat seperti ini: </p> <pre><code># sudo mkdir /home/ubuntu/data/Test\n# sudo ls -all /home/ubuntu/data\ndrwxr-xr-x  2 root  root       4096 Jul  5 07:19 Test\n</code></pre> <p> Master tidak memiliki masalah dalam mengakses direktori ini, membuat file insideeetc. Tetapi ketika kami mencoba membuat file dari node slave di dalam Test dir, kami mendapat kesalahan Izin ditolak. </p>\n\n<p> Ketika kami membuat dir dari mesin klien NFS, tampilannya seperti ini: </p> <pre><code># sudo mkdir /home/ubuntu/data/Test2\n# sudo ls -all /home/ubuntu/data\ndrwxr-xr-x  2 root  root       4096 Jul  5 07:19 Test\ndrwxr-xr-x  2 nobody nogroup   4096 Jul  5 07:21 Test2\n</code></pre> <p> Jadi tampaknya pengguna root klien NFS dipetakan ke none @ nogroup saat menulis ke direktori NFS dan dengan demikian tidak dapat menulis ke direktori yang dibuat oleh pengguna root di server NFS.\nKita perlu memetakan pengguna root klinet NFS ke pengguna root server NFS sehingga keduanya dapat bekerja secara bebas dengan direktori di mana pun kita membuatnya. </p>","source":"https://superuser.com/questions/1225848/how-to-map-nfs-client-root-user-to-nfs-server-root-user","author":"<a href=\"https://superuser.com/users/339154/maxnevermind\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">MaxNevermind</span></a>","replies":[],"answers":[{"answer":"<p> Gunakan opsi <code>no_root_squash</code> dalam entri <code>/etc/exports</code> Anda. Dari halaman manual untuk <code>exports</code>: </p>\n\n<blockquote>\n  <p> Pemetaan ID Pengguna </p>\n  \n  <p> nfsd mendasarkan kontrol aksesnya ke file di mesin server di\n  uid dan gid disediakan di setiap permintaan RPC NFS. Perilaku normal a\n  yang diharapkan pengguna adalah dia dapat mengakses file-nya di server saja\n  seperti yang dia lakukan pada sistem file normal. Ini membutuhkan cairan yang sama\n  dan gids digunakan pada klien dan mesin server. Ini bukan\n  selalu benar, juga tidak selalu diinginkan. </p>\n  \n  <p> Sangat sering, tidak diinginkan bahwa pengguna root pada mesin klien\n  juga diperlakukan sebagai root saat mengakses file di server NFS. Untuk\n  akhir ini, <em> uid 0 biasanya dipetakan ke id yang berbeda: yang disebut\n  anonim atau <strong> tak seorangpun </strong> uid </em> . Mode operasi ini (disebut &#39;root\n  squashing &#39;) adalah defaultnya, dan dapat dimatikan dengan <code>no_root_squash</code>. </p>\n</blockquote>","votes":"7","source":"https://superuser.com/a/1226152","author":"<a href=\"https://superuser.com/users/85115/larssend\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Larssend</span></a>","replies":[]}]}
