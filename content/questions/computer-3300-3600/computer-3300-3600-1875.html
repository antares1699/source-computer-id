{"title":"Cp -R rekursif yang tidak disengaja, sekarang tidak dapat menghapus file menggunakan Trash atau rm","draft":false,"url":"/cp-r-rekursif-yang-tidak-disengaja-sekarang-tidak-dapat-menghapus-file-menggunakan-trash-atau-rm-ujlhuuq5","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["macos","bash","unix"],"snippet":"Setelah salah ketik di jalur saat menggunakan cp, sepertinya saya secara tidak sengaja menyalin folder ke folder itu sendiri secara rekursif, dan sekarang saya tidak dapat menghapus folder itu menggunakan rm -rf,...","body":"<p> Setelah salah ketik di jalur saat menggunakan <code>cp</code>, sepertinya saya secara tidak sengaja menyalin folder ke folder itu sendiri secara rekursif, dan sekarang saya tidak dapat menghapus folder itu menggunakan <code>rm -rf</code>, atau Sampah di Mac OS X <code>Finder</code>. File tersebut terletak di startup (karena itu HFS + J) disk. </p>\n\n<p> Output dari <code>rm -rf</code> hanya <code>Directory not empty</code> diulang, seperti: </p> <pre><code>rm: o/old/old/old/old/old/old/old/old: Directory not empty\nrm: o/old/old/old/old/old/old/old: Directory not empty\nrm: o/old/old/old/old/old/old: Directory not empty\nrm: o/old/old/old/old/old: Directory not empty\nrm: o/old/old/old/old: Directory not empty\nrm: o/old/old/old: Directory not empty\nrm: o/old/old: Directory not empty\nrm: o/old: Directory not empty\nrm: o: Directory not empty\n</code></pre> <p> Apa yang harus saya lakukan untuk menghapus folder ini? </p>\n\n<p> Saya sudah mencoba mengganti nama folder pertama, seperti yang Anda lihat, untuk mempersingkat jalur file. Folder tersebut dipindahkan ke denda <code>Trash</code>, tetapi tidak akan dihapus karena dialog peringatan berikut: </p> <pre><code>The operation can’t be completed because the item is in use.\n</code></pre>","source":"https://superuser.com/questions/930312/accidental-recursive-cp-r-now-cant-delete-file-using-either-trash-or-rm","author":"<a href=\"https://superuser.com/users/367694/galexite\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">galexite</span></a>","replies":[{"reply":"Coba <code>lsof o</code> untuk melihat siapa yang menggunakan direktori Anda <code>o</code>. Kemudian Anda dapat melihat apa yang harus ditutup. Mungkin Anda telah membuka terminal di direktori itu, dan / atau Anda memulai beberapa program dari direktori itu.","author":"<a href=\"https://superuser.com/users/257269/hastur\" target=\"_blank\" rel=\"nofollow noopener\">Hastur</a>"},{"reply":"<code>lsof o</code> tidak mengembalikan apa-apa, @Hastur","author":"<a href=\"https://superuser.com/users/367694/galexite\" target=\"_blank\" rel=\"nofollow noopener\">galexite</a>"},{"reply":"<code>fuser o</code> mengembalikan <code>o: </code>","author":"<a href=\"https://superuser.com/users/367694/galexite\" target=\"_blank\" rel=\"nofollow noopener\">galexite</a>"}],"answers":[{"answer":"<p> Mencoba </p> <pre><code>find o -delete\n</code></pre> <p> atau </p> <pre><code>find o -depth -delete\n</code></pre> <p> <code>-depth</code> memberitahu <code>find</code> untuk pergi ke bagian terdalam dari pohon direktori terlebih dahulu,\ndan kemudian bekerja kembali. Halaman manual mengatakan,\n&quot;Penggunaan <code>-delete</code> secara otomatis mengaktifkan opsi <code>-depth</code>.&quot;\nJika versi <code>find</code> Anda tidak mendukung <code>-delete</code>, coba </p> <pre><code>find o -depth -exec rm -rf {} \";\"\n</code></pre>","votes":"5","source":"https://superuser.com/a/930376","author":"<a href=\"https://superuser.com/users/150988/scott\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Scott</span></a>","replies":[{"reply":"Terima kasih atas sarannya, tapi sayangnya, tidak berhasil: <code>No space left on device</code>","author":"<a href=\"https://superuser.com/users/367694/galexite\" target=\"_blank\" rel=\"nofollow noopener\">galexite</a>"},{"reply":"Anehnya, <code>df -h</code> mengembalikan <code>15Gi free</code>","author":"<a href=\"https://superuser.com/users/367694/galexite\" target=\"_blank\" rel=\"nofollow noopener\">galexite</a>"},{"reply":"Itu tidak masuk akal; perintah ini seharusnya tidak menulis apa pun ke sistem file. (Untuk memisahkan rambut; delete / <code>rm</code> / unlink akan menimpa entri direktori dengan nul, dan mengubah daftar gratis untuk menambahkan blok yang tidak dialokasikan ke dalamnya, tetapi seharusnya tidak melakukan apa pun yang seharusnya mencoba <i> mengalokasikan </i> blok bebas dari daftar gratis.) Satu penjelasan adalah bahwa <code>find</code> perlu menulis file sementara untuk menyimpan struktur direktori dari pohon direktori &quot;<code>o</code>&quot; Anda saat membacanya. Periksa <code>df -h &#47;tmp</code>.","author":"<a href=\"https://superuser.com/users/150988/scott\" target=\"_blank\" rel=\"nofollow noopener\">Scott</a>"},{"reply":"Saya khawatir tanggapan yang sama dari <code>df -h</code>","author":"<a href=\"https://superuser.com/users/367694/galexite\" target=\"_blank\" rel=\"nofollow noopener\">galexite</a>"},{"reply":"Sebenarnya, ini <code>11 Gi</code>, tapi itu karena saya telah menggunakan komputer saya sejak itu, tapi tetap saja","author":"<a href=\"https://superuser.com/users/367694/galexite\" target=\"_blank\" rel=\"nofollow noopener\">galexite</a>"},{"reply":"&#39;Tidak ada ruang tersisa di perangkat&#39; berbicara tentang kumpulan sistem file. Anda harus mengganti nama direktori agar memiliki nama yang lebih pendek. Jika Anda mengubah perintah find di atas untuk menjalankan perintah <code>mv</code> alih-alih perintah <code>rm</code>, ini dapat memberi Anda efek yang diinginkan. <code>find old -depth -exec mv {} o \\;</code>. Saya berharap saya akan membaca jawaban ini lebih dekat sebelum menjalankan loop <code>for</code> beberapa kali.","author":"<a href=\"https://superuser.com/users/519788/bradley-m-handy\" target=\"_blank\" rel=\"nofollow noopener\">Bradley M Handy</a>"},{"reply":"Saya akan memperbaiki komentar saya sebelumnya. Perintah find yang benar yang bekerja dengan satu eksekusi adalah <code>find [root-dir] -depth -name &#39;[name]&#39; -execdir mv {} a \\;</code>. Saya harus mencari nama direktori unik dalam hierarki saya agar ini berfungsi. Ditambah saya harus mengubah <code>-exec</code> menjadi <code>-execdir</code> sehingga perintah akan dipanggil dari direktori yang berisi file yang cocok.","author":"<a href=\"https://superuser.com/users/519788/bradley-m-handy\" target=\"_blank\" rel=\"nofollow noopener\">Bradley M Handy</a>"}]},{"answer":"<p> Nah, saya baru saja mengalami masalah yang sama. Saya menyelesaikannya dengan mempersingkat nama <em> setiap </em> salah satu dari direktori bersarang. </p>\n\n<p> Karena ini adalah masalah satu kali, saya tidak mencoba menghasilkan sihir skrip cerdas apa pun. Saya baru saja menulis </p> <pre><code>for FILE in $(ls); do mv $FILE a; cd a; done\n</code></pre> <p> di cangkang, lalu tekan <kbd> panah atas </kbd> untuk memanggil perintah lagi, dan <kbd> kembali </kbd> . Dengan satu jari di setiap tombol, saya hanya mengulang dua kali penekanan tombol dengan cepat hingga direktori terdalam. Kemudian <code>cd ~</code> dan <code>cd</code> ke akar pohon yang salah. <code>rm -r</code> reguler sekarang menyelesaikan pekerjaan. </p>","votes":"2","source":"https://superuser.com/a/981772","author":"<a href=\"https://superuser.com/users/367966/mathias-laurin\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Mathias Laurin</span></a>","replies":[{"reply":"Saya memang mencoba ini. Saya mengatur semua nama direktori menjadi &#39;o&#39;, tetapi tidak berhasil: mereka tetap tidak akan menghapus. Ini adalah ide yang bagus dan patut dicoba jika Anda pernah mengalami masalah seperti itu.","author":"<a href=\"https://superuser.com/users/367694/galexite\" target=\"_blank\" rel=\"nofollow noopener\">galexite</a>"},{"reply":"Saya juga melakukan &#39;cp ​​-R&#39; secara tidak sengaja. Perintah rm gagal pada file jauh di bawah pohon direktori karena jalur bersarang. Saya harus melakukan <code>rm -rf old&#47; 2&gt;&amp;1 | less</code> untuk menemukan seberapa dalam file tersebut. Kemudian saya menjalankan loop <code>for</code> ini beberapa kali untuk mempersingkat jalur cukup untuk menghapus file. Terima kasih.","author":"<a href=\"https://superuser.com/users/519788/bradley-m-handy\" target=\"_blank\" rel=\"nofollow noopener\">Bradley M Handy</a>"}]},{"answer":"<p> Jika Anda mengerti, itu sudah jelas.\nKarena Anda tidak dapat mengulang jauh di lubuk hati, Anda harus memindahkan direktori yang satu tingkat lebih dalam hanya satu tingkat ke atas. Setelah itu direktori dengan kedalaman &quot;satu&quot; tetap ada yang bisa dihapus. </p>\n\n<p> Anggaplah Anda memiliki direktori &quot;tak terbatas&quot; a / a / a / a / a / a / a / .... </p>\n\n<p> lalu Anda melakukan: </p> <pre><code>mv a/a b\nrm -r a\nmv b/a a\nrm -r b\n</code></pre> <p> Ulangi sampai tidak ada direktori yang tersisa. </p>\n\n<p> Skrip berikut melakukannya: (Anda harus menekan ctrl-c setelah selesai) </p> <pre><code>while [ true ]; do mv a/a b; rm -r a; mv b/a a; rm -r b; done\n</code></pre> <p> Karena namanya identik, skrip &#39;membalik&#39; di antara dua nama sementara. </p>","votes":"1","source":"https://superuser.com/a/1007263","author":"<a href=\"https://superuser.com/users/78301/dirk-thannh%c3%a4user\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Dirk Thannh&#228;user</span></a>","replies":[]}]}
