{"title":"Salin daftar file yang mempertahankan struktur direktori, tanpa skrip","draft":false,"url":"/salin-daftar-file-yang-mempertahankan-struktur-direktori-tanpa-skrip-g7uverzd","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["command-line","unix","cygwin"],"snippet":"Adakah cara untuk menyalin daftar file, yang berbagi direktori dasar yang sama, dengan mempertahankan struktur direktori relatifnya? File dengan jalur relatif dicantumkan dalam file teks.  edit  Saya memiliki nama file yang tercantum...","body":"<p> Adakah cara untuk menyalin daftar file, yang berbagi direktori dasar yang sama, dengan mempertahankan struktur direktori relatifnya? File dengan jalur relatif dicantumkan dalam file teks. <strong> edit </strong> Saya memiliki nama file yang tercantum dalam file teks biasa. </p>\n\n<p> Saya ingin melakukan ini <em> tanpa </em> menggunakan skrip (tanpa bash / batch / python / ruby ​​/ lua / etc.), mirip dengan cara <code>wget -i</code> bekerja untuk url. (Alasan saya adalah itu akan memberikan solusi overhead / non-standar untuk tugas yang cukup umum.) </p>\n\n<p> Saya sudah mencoba <code>cat list.txt | xargs -I % cp % new_folder</code> dari <a href=\"https://superuser.com/questions/180251/copy-list-of-files\" target=\"_blank\" rel=\"nofollow noopener\"> Salin daftar file </a> tetapi itu tidak mempertahankan jalur direktori relatif. </p>\n\n<p> Saya akan melakukan ini untuk mengekspor pilihan file saya (yang sudah saya miliki dalam file teks) dari struktur direktori yang memiliki banyak file (terjadi dari waktu ke waktu). </p>","source":"https://superuser.com/questions/667995/copy-a-list-of-files-preserving-directory-structure-without-scripts","author":"<a href=\"https://superuser.com/users/129520/n611x007\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">n611x007</span></a>","replies":[{"reply":"alasan lain untuk menggunakan perintah yang berdiri sendiri daripada skrip khusus adalah karena program cenderung sudah diinstal atau memiliki paket / penginstal yang dapat ditemukan di internet dengan mengingat program itu. <i> nama </i> sendirian, sementara harus menulisnya lagi setiap kali atau membawa skrip Anda sendiri ke mana-mana entah bagaimana terasa kurang bermanfaat (bahkan jika Anda tidak memiliki masalah dengan keterampilan Anda).","author":"<a href=\"https://superuser.com/users/129520/n611x007\" target=\"_blank\" rel=\"nofollow noopener\">n611x007</a>"}],"answers":[{"answer":"<p><em> tar cvf <strong> - </strong> ./filesAndDirecotries | (cd targetDirectory; tar xvf <strong> - </strong> ) </em></p>\n\n<p> TAR (Tape Archive adalah perintah lama untuk membuat file arsip) dapat menulis ke stdin (parameter &quot;-&quot; untuk file) dan pipa dan membaca dari stdin di direktori kedua. </p>\n\n<p> Perintah di atas pertama-tama membuat file tar dan menulis ke stdin dan disalurkan ke shell dan mengubah direktori dan untar file dengan membacanya dari stdin. </p>","votes":"5","source":"https://superuser.com/a/668094","author":"<a href=\"https://superuser.com/users/268581/unixuser\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">unixUser</span></a>","replies":[{"reply":"Saya tidak cukup jelas dalam pertanyaan saya bahwa saya mencoba menggunakan file teks yang mencantumkan nama file, dan mencari opsi untuk menggunakan file teks itu dari program yang dapat menyalin. Namun solusi ini sangat bagus, dan menuntun saya ke arah yang benar karena menurut saya ini dapat dilakukan melalui sakelar <code>-T</code>: <code>-T, --files-from F: get names to extract or create from file F</code>","author":"<a href=\"https://superuser.com/users/129520/n611x007\" target=\"_blank\" rel=\"nofollow noopener\">n611x007</a>"},{"reply":"Saya akan menerima ini karena ini paling mendekati apa yang ada dalam pikiran saya dan menempatkan saya di jalur yang benar. Saya telah mengedit pertanyaan untuk menunjukkan keberadaan file teks. Anda dapat memperbarui jawaban Anda jika Anda mau. Akhirnya saya menggunakan <code>tar cvf - -T filelist.txt | tar xvf - -C newdir</code>","author":"<a href=\"https://superuser.com/users/129520/n611x007\" target=\"_blank\" rel=\"nofollow noopener\">n611x007</a>"}]},{"answer":"<p> Itu <a href=\"https://superuser.com/a/668094/129520\" target=\"_blank\" rel=\"nofollow noopener\"> menjawab </a> dari <a href=\"https://superuser.com/users/268581/unixuser\" target=\"_blank\" rel=\"nofollow noopener\"> unixUser </a> menempatkan saya di jalur yang benar. Ternyata <code>tar</code> dapat membaca nama file dan direktori dari file teks dengan <code>-T</code>, dan bahkan dapat mengubah direktori dengan <code>-C</code>: </p> <pre><code>tar cvf - -T filelist.txt | tar xvf - -C newdir\n</code></pre> <p> Ini menjawab pertanyaan saya. </p>\n\n<hr>\n\n<p> sumber </p>\n\n<p> Untuk <em> dapatkan informasi ini </em> dari <em> ide unixUser memberi saya </em> , Saya sudah <a href=\"https://duckduckgo.com/?q=tar+files+from+a+text+file\" rel=\"nofollow noopener\" target=\"_blank\"> merunduk </a> <em> file tar dari file teks </em> , mengarah ke <em> trpn </em> (Q) dan <em> Tinkster </em> (A) <a href=\"https://www.linuxquestions.org/questions/linux-general-1/tar-from-contents-of-a-text-file-154721/\" rel=\"nofollow noopener\" target=\"_blank\"> konversi di linuxquestions.org </a> . Secara bersamaan memeriksa <a href=\"http://linuxcommand.org/lc3_man_pages/tar1.html\" rel=\"nofollow noopener\" target=\"_blank\"> halaman manual tar </a> untuk opsi apa pun yang ada hubungannya dengan <em> mengajukan </em> , kedua pencarian mengarah ke tombol <code>-T</code>! Untuk menghindari mengandalkan shell untuk mengubah direktori, saya juga <a href=\"https://blog.mozilla.org/metrics/2011/08/25/do-90-of-people-not-use-ctrlf/\" rel=\"nofollow noopener\" target=\"_blank\"> dicari </a> itu untuk apapun <em> direktori </em> opsi terkait dan menemukan saklar <code>-C</code>. - Saya melihat bahwa <code>tar</code> mungkin <em> itu </em> perintah yang dimaksudkan untuk mengelompokkan (salinan) file dengan berbagai cara. </p>\n\n<p> Dengan ini, seseorang dapat menggunakan beberapa biner tar tanpa * bergantung pada skrip. Sungguh menakjubkan betapa bergunanya tar. </p>\n\n<hr>\n\n<p> (*: dari <strong> Pilihan </strong> : Saya menemukan bash / perl / python / apapun a <em> terlalu umum </em> alat untuk ini <em> cukup tepat </em> tugas. Namun, sebagai <a href=\"https://superuser.com/questions/667995/copy-a-list-of-files-preserving-directory-structure-without-scripts/668303#comment844751_668014\" target=\"_blank\" rel=\"nofollow noopener\"> menunjukkan </a> oleh <a href=\"https://superuser.com/users/1686/grawity\" target=\"_blank\" rel=\"nofollow noopener\"> grawity </a> , pipa nyaman - <a href=\"http://www.perlmonks.org/?node_id=56149\" rel=\"nofollow noopener\" target=\"_blank\"> tanpa mereka </a> seseorang harus dipaksa untuk membuat file perantara, misalnya. <code>tar cvf intermediate.tar -T filelist.txt</code> dan <code>tar xvf intermediate.tar -C newdir</code>.) </p>","votes":"5","source":"https://superuser.com/a/668303","author":"<a href=\"https://superuser.com/users/129520/n611x007\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">n611x007</span></a>","replies":[]},{"answer":"<p> Secara teknis, contoh yang Anda berikan sudah menggunakan bash. Dan itulah mengapa shell dapat ditulis di tempat pertama - ini adalah tugas yang sangat sederhana sehingga tidak perlu alat / program khusus. <em> hanya untuk itu. </em></p> <pre>\ncat list.txt | xargs -n1 dirname | sort | uniq | xargs -I% mkdir -p new_folder/%\ncat list.txt | xargs -I% cp % new_folder/%\n</pre> <p> Atau: </p> <pre>\ncat list.txt | while read path; do\n    mkdir -p \"new_folder/${path%/*}\" && cp \"$path\" \"new_folder/$path\"\ndone\n</pre> <p> Atau: </p> <pre>\ncat list.txt | xargs -I% install -Dm0644 % new_folder/%\n</pre> <p> Atau: </p> <pre>\ncat list.txt | while read path; do\n    install -Dm0644 \"$path\" \"new_folder/$path\"\ndone\n</pre> <p> (<code>install</code> lebih pendek tetapi sayangnya tidak mempertahankan mode.) </p>","votes":"1","source":"https://superuser.com/a/668014","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user1686</span></a>","replies":[{"reply":"Anda benar tentang bash, tetapi saya telah membuat perbedaan atas dasar bahwa memperkenalkan aliran kontrol dan variabel benar-benar berlebihan untuk ini dan semakin banyak ketergantungan yang Anda perkenalkan, semakin bergantung solusi pada platform. Saya juga tidak senang dengan substitusi string tetapi itu adalah contoh terdekat yang saya dapatkan. Di sisi lain, sebagian besar platform telah memahami pipa, jadi ini adalah ketergantungan yang lebih kecil. Solusi pertama Anda yang memperbaiki contoh paling mendekati, terima kasih!","author":"<a href=\"https://superuser.com/users/129520/n611x007\" target=\"_blank\" rel=\"nofollow noopener\">n611x007</a>"},{"reply":"Ada platform yang dengan mudah menjalankan Perl tetapi tidak memiliki bash atau xargs (Windows) atau bahkan pipa yang mudah digunakan (VMS).","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"},{"reply":"Benar lagi. Saya kira saya sudah mencoba menjelaskan preferensi saya. Di sisi lain, perintah <code>tar</code> tampaknya sesuai dengan kebutuhan saya; Saya tidak tahu ada tombol <code>-T</code>. Saya pikir bagus untuk memiliki opsi ini tersedia seperti di sini dan jawaban Anda juga menjelaskan bagaimana hal ini biasanya dilakukan.","author":"<a href=\"https://superuser.com/users/129520/n611x007\" target=\"_blank\" rel=\"nofollow noopener\">n611x007</a>"},{"reply":"Di sisi lain, saya harus lebih mengenal VMS. Saya tidak pernah menggunakannya tetapi tidak mengira itu tidak memiliki pipa. Saya ingin tahu VMS apa yang bisa digunakan di sini karena yang ini juga menggunakan pipa. Mungkinkah itu hanya mengandalkan skrip? (di Windows, ada <a href=\"http://sourceforge.net/projects/unxutils/\" rel=\"nofollow noopener\" target=\"_blank\"> unxutils </a> , <a href=\"http://gnuwin32.sourceforge.net/packages.html\" rel=\"nofollow noopener\" target=\"_blank\"> gnuwin32 </a> , <a href=\"http://cygwin.com\" rel=\"nofollow noopener\" target=\"_blank\"> cygwin </a> , <a href=\"http://msysgit.github.io/\" rel=\"nofollow noopener\" target=\"_blank\"> lingkungan msysgit </a> dan <a href=\"http://alternativeto.net/software/gow/\" rel=\"nofollow noopener\" target=\"_blank\"> begitu seterusnya </a> , untuk memberikan keakraban / fitur)","author":"<a href=\"https://superuser.com/users/129520/n611x007\" target=\"_blank\" rel=\"nofollow noopener\">n611x007</a>"},{"reply":"@naxa: Nah, sebagian besar VMS sudah mati. Meskipun tampaknya antarmuka baris perintahnya memiliki dukungan untuk pipa di versi yang lebih baru (file <a href=\"http://h71000.www7.hp.com/doc/83final/9996/9996pro_155.html\" rel=\"nofollow noopener\" target=\"_blank\"> <code>PIPE</code> </a> kata kunci), tetapi pasti tidak dirancang untuk itu - sebagai perbandingan, bahkan Windows CLI lebih mirip Unix.","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\">user1686</a>"}]}]}
