{"title":"Panjang maksimum jalur file: 259 atau 258 karakter?","draft":false,"url":"/panjang-maksimum-jalur-file-259-atau-258-karakter-spsrmjuu","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["windows","file-management","path","filenames"],"snippet":"Saya mencoba untuk memahami berapa panjang maksimum yang valid dari jalur file.  Untuk ini, saya menggunakan pengelola file Windows default, di Windows 7, dan skrip PowerShell berikut:  Get-ChildItem | Select Name, FullName,...","body":"<p> Saya mencoba untuk memahami berapa panjang maksimum yang valid dari jalur file. </p>\n<p> Untuk ini, saya menggunakan pengelola file Windows default, di Windows 7, dan skrip PowerShell berikut: </p> <pre><code>Get-ChildItem | Select Name, FullName, @{N=&quot;Path Length&quot;;E={$_.FullName.Length}} | Format-List\n</code></pre> <p> Saya membuka pengelola, membuat file <code>abc.txt</code> di <code>C:\\</code>, dan kemudian menambahkan huruf ke <code>abc</code> selama pengelola file mengizinkannya. (Sebenarnya, saya menggunakan salin dan tempel, tentu saja. Ini jauh lebih cepat.) </p>\n<p> Kemudian saya melakukan tes yang sama di <code>C:\\aaa</code> dan <code>C:\\aaa\\bbb</code>. </p>\n<p> Untuk beberapa alasan, hasilnya berbeda. Panjang maksimum pada <code>C:\\aaa</code> dan <code>C:\\aaa\\bbb</code> adalah 259 karakter, tetapi panjang maksimum pada <code>C:\\</code> adalah 258 karakter. Mengapa? </p> <pre><code>C:\\abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefgh.txt\n258 characters\n\nC:\\aaa\\abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcde.txt\n259 characters\n\nC:\\aaa\\bbb\\abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_a.txt\n259 characters\n</code></pre> <p><em><strong> memperbarui </strong></em></p>\n<p> Dari mail-archive.com, daftar Python: </p>\n<p> ( <a href=\"https://www.mail-archive.com/python-list@python.org/msg444514.html\" rel=\"nofollow noopener\" target=\"_blank\"> https://www.mail-archive.com/python-list@python.org/msg444514.html </a> ) </p>\n<blockquote>\n<p> batas panjang jalur DOS klasik (misalnya 247, 258, atau 259 karakter tergantung pada konteksnya). </p>\n</blockquote>\n<p> Penjelasan di bawah adalah milik saya. </p>\n<p> 247 adalah singkatan dari panjang maksimum jalur direktori: 260 - 12 - 1 = 247. Di sini, 12 adalah singkatan dari 8.3 nama file dan 1 adalah singkatan dari NUL terminator. Misalnya, <code>C:\\foo</code> atau <code>C:\\foo\\bar</code> </p>\n<p> 259 adalah singkatan dari panjang maksimum jalur a <em><strong> mengajukan </strong></em> ( <em><strong> bukan direktori </strong></em> ) terletak <em><strong> tidak </strong></em> di root drive. Misalnya, <code>C:\\foo\\aaa.txt</code> </p>\n<p> 258 adalah singkatan dari panjang jalan maksimum a <em><strong> mengajukan </strong></em> ( <em><strong> bukan direktori </strong></em> ) terletak <em><strong> di </strong></em> root drive. Misalnya, <code>C:\\aaa.txt</code> </p>\n<p> Jadi sebenarnya ada 3 batasan: 247, 258, dan 259. </p>\n<p> Tetapi mengapa kami memiliki batas 258 untuk file di root drive dan 259 untuk file di direktori lain? </p>\n<p> Lihat juga: <a href=\"https://www.mail-archive.com/python-dev@python.org/msg106171.html\" rel=\"nofollow noopener\" target=\"_blank\"> https://www.mail-archive.com/python-dev@python.org/msg106171.html </a></p>\n<blockquote>\n<p> MAX_PATH, yang membatasi jalur file menjadi 259 karakter yang remeh (tanpa penghentian null); direktori saat ini hingga 258 karakter (tanpa garis miring terbalik dan null); dan jalur direktori baru ke 247 karakter (kurangi 12 dari 259 untuk menyisakan ruang untuk nama file 8,3). </p>\n</blockquote>\n<p> Namun, kutipan kedua tidak masuk akal bagi saya. Saya tidak mengerti mengapa orang ini berbicara tentang garis miring terbalik. Garis miring terbalik mungkin terjadi ketika kita berbicara tentang direktori, tetapi bukan file! </p>","source":"https://superuser.com/questions/1620259/the-maximum-length-of-the-path-of-a-file-259-or-258-characters","author":"<a href=\"https://superuser.com/users/581276/john-c-j\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">john c. j.</span></a>","replies":[{"reply":"Dia mengatakan &quot;tanpa garis miring terbalik&quot;. Jadi maksud Anda bahwa garis miring terbalik tidak diperlukan, tidak melawan apa yang dikatakan. Dengan kata lain, C: \\ Windows, NOT C: \\ Windows \\","author":"<a href=\"https://superuser.com/users/401839/toogam\" target=\"_blank\" rel=\"nofollow noopener\">TOOGAM</a>"},{"reply":"Saya tidak merasa cukup tertarik dengan pertanyaan ini untuk menemukan sumber untuk semua detailnya, tetapi saya percaya kebenaran yang sebenarnya adalah ada banyak batasan. Explorer mungkin adalah beberapa, apakah dalam direktori root mungkin yang lain, sistem file mungkin yang lain, panjang baris perintah mungkin relevan, batasan lain seperti API atau SQL dari batasan luas OS. Mungkin ada beberapa batasan, yang mungkin berinteraksi satu sama lain dengan satu cara pada beberapa versi Windows, dan batas yang agak tidak signifikan mungkin lebih signifikan dengan versi Windows lainnya. Saya tidak mengatakan itu harus seperti ini, tetapi itu sederhana. :(","author":"<a href=\"https://superuser.com/users/401839/toogam\" target=\"_blank\" rel=\"nofollow noopener\">TOOGAM</a>"}],"answers":[{"answer":"<blockquote>\n<p> Untuk beberapa alasan, hasilnya berbeda. Panjang maksimum di C: \\ aaa dan C: \\ aaa \\ bbb adalah 259 karakter, tetapi panjang maksimum di C: \\ adalah 258 karakter. Mengapa? </p>\n</blockquote>\n<p> Saya pikir apa yang Anda tanyakan adalah berapa panjang maksimum jalur yang biasanya diizinkan oleh Windows Explorer. <strong> Ini 260 karakter. </strong></p>\n<p> Itu memungkinkan 248 karakter untuk jalur ditambah nama file yang memungkinkan untuk 12 karakter. </p>\n<p><strong> Nama file contoh Anda berbeda karena karakter null. </strong></p>\n<blockquote>\n<p> Dalam edisi Windows sebelum Windows 10 versi 1607, panjang maksimum jalur adalah MAX_PATH, yang didefinisikan sebagai 260 karakter. Di versi Windows yang lebih baru, mengubah kunci registri atau menggunakan alat Kebijakan Grup diperlukan untuk menghapus batas. </p>\n</blockquote>\n<blockquote>\n<p> Di Windows API (dengan beberapa pengecualian yang dibahas di paragraf berikut), panjang maksimum untuk jalur adalah MAX_PATH, yang didefinisikan sebagai 260 karakter. Lintasan lokal disusun dalam urutan berikut: huruf kandar, titik dua, garis miring terbalik, komponen nama yang dipisahkan oleh garis miring terbalik, dan karakter null penghentian. Misalnya, jalur maksimum pada drive D adalah &quot;D: \\ beberapa string jalur 256 karakter&quot; di mana &quot;&quot; mewakili karakter null penghentian yang tidak terlihat untuk halaman kode sistem saat ini. (Karakter &lt;&gt; digunakan di sini untuk kejelasan visual dan tidak dapat menjadi bagian dari string jalur yang valid.) </p>\n</blockquote>\n<p> Sumber: </p>\n<ul>\n<li><p><a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file?redirectedfrom=MSDN#maximum-path-length-limitation\" rel=\"nofollow noopener\" target=\"_blank\"> Batasan Panjang Jalur Maksimum </a></p>\n</li>\n<li><p><a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation\" rel=\"nofollow noopener\" target=\"_blank\"> Batasan Panjang Jalur Maksimum </a></p>\n</li>\n</ul>","votes":"2","source":"https://superuser.com/a/1620266","author":"<a href=\"https://superuser.com/users/83283/ramhound\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ramhound</span></a>","replies":[{"reply":"Ini menjawab mengapa saya tidak dapat membuat jalur lebih dari 259 karakter (ini karena batas 260 karakter dan karakter penghentian NUL), tetapi tidak menjawab mengapa saya tidak dapat membuat jalur lebih dari 258 karakter di root drive.","author":"<a href=\"https://superuser.com/users/581276/john-c-j\" target=\"_blank\" rel=\"nofollow noopener\">john c. j.</a>"}]},{"answer":"<p> Ada dua batasan yang perlu dipertimbangkan: yang pertama adalah panjang jalur maksimum, yang lainnya adalah panjang nama file maksimum. Di NTFS, <a href=\"http://dubeyko.com/development/FileSystems/NTFS/ntfsdoc.pdf\" rel=\"nofollow noopener\" target=\"_blank\"> nama file dapat berisi hingga 255 poin kode UTF-16 </a> , tanpa byte nol (lihat halaman 12). </p>\n<p> <code>abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefghijklmnopqrstuvwxyz_abcdefgh.txt</code> persis panjangnya 255 karakter. </p>","votes":"2","source":"https://superuser.com/a/1620485","author":"<a href=\"https://superuser.com/users/414739/stephen-kitt\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Stephen Kitt</span></a>","replies":[]},{"answer":"<p> Saya memiliki penjelasan sederhana untuk perbedaannya: Kode buruk di Windows 7,\nditulis ulang lagi di Windows 10. Saya akan menunjukkan di bawah mengapa saya berpikir begitu dan\napa aturan tentang panjang nama file di Windows 7 dan 10. </p>\n<p> Tapi pertama-tama, komentar kecil: Batas 260 <a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation\" rel=\"nofollow noopener\" target=\"_blank\"> MAX_PATH </a> adalah artefak dari versi Windows yang lebih lama. Itu tidak dapat diubah, karena\nWindows API banyak menggunakannya dalam struktur datanya, misalnya dalam <a href=\"https://docs.microsoft.com/en-us/previous-versions/ms915521(v=msdn.10)\" rel=\"nofollow noopener\" target=\"_blank\"> WIN32_FIND_DATA </a> ,\nsehingga meningkatkannya di API akan menyebabkan kelebihan memori dalam aplikasi yang sudah ada.\nItulah mengapa nama file yang lebih panjang harus diizinkan secara eksplisit di file <a href=\"https://docs.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation#enable-long-paths-in-windows-10-version-1607-and-later\" rel=\"nofollow noopener\" target=\"_blank\"> registri </a> dan program perlu menyatakan kemampuannya untuk menangani nama panjang dalam manifesnya. </p>\n<p> Saya juga mencatat bahwa drive-letter (<code>C:\\</code>) hanya disertakan dalam teks dan\ntidak terkait dengan tabel disk Windows (MFT).\nWindows mengetahui dengan baik disk tempat file itu berada. </p>\n<p> Di bawah ini adalah pengujian saya di Windows 7, di mana temuan saya menguatkan temuan saya\nposter: </p>\n<p><a href=\"https://i.stack.imgur.com/8UwP5.jpg\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/8UwP5.jpg\" alt=\"enter image description here\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a></p>\n<p> Aturan berikut dapat diturunkan: </p>\n<ul>\n<li> Huruf Drive tidak masuk ke dalam perhitungan batas (<code>C:</code>) </li>\n<li> Garis miring balik terdepan tidak masuk ke dalam perhitungan batas (<code>C:\\</code>) </li>\n<li> Sisanya dibatasi hingga 256 karakter, yang mencakup garis miring ke belakang menengah </li>\n<li> File root dapat mencapai 255 karakter, yang tidak dapat dilakukan oleh file dalam folder. </li>\n</ul>\n<p> Hasil yang tidak masuk akal ini menunjukkan dengan kuat ke arah kode yang ditulis dengan buruk. </p>\n<p> Sebagai permulaan, sejauh menyangkut MFT, setiap komponen jalur adalah\nterpisah dan memiliki batas panjang yang sama persis dengan komponen lainnya\n(sub-folder), jadi tidak ada alasan yang melekat pada tabel disk untuk\nmembatasi panjang nama file hanya karena mereka termasuk dalam beberapa\nmap. </p>\n<p> Kedua, kami memiliki pertanyaan mengapa file root dibatasi hingga 255 karakter,\nketika sepertinya itu seharusnya 256, karena itu adalah satu-satunya elemen\ndi jalurnya (yang kami lihat bisa mencapai 256 karakter). </p>\n<p> Dalam pencarian penjelasan, saya berteori bahwa 255 adalah batas nyata\nuntuk nama file yang diputuskan oleh Microsoft,\ndan sisanya hanyalah kode yang ditulis dengan buruk. </p>\n<p> Untuk memverifikasi teori ini saya menguji untuk melihat perilaku Windows 10.\nSaya telah mengulangi di bawah operasi yang sama (diperlukan izin Administrator\nuntuk menulis ke <code>C:\\</code>): </p>\n<p><a href=\"https://i.stack.imgur.com/Qs9NC.jpg\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/Qs9NC.jpg\" alt=\"enter image description here\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a></p>\n<p> Seperti yang terlihat di atas, perilaku di sini jauh lebih logis:\nKomponen perantara dari jalur tidak lagi dihitung hingga batasnya\nukuran nama file, yang selalu 255 karakter. </p>\n<p> Menjadi jelas bahwa selama ini niat Microsoft untuk mengizinkan\nnama file 255 karakter, tetapi ini dinonaktifkan di Windows 7 oleh\nkode yang memperhitungkan jalur, dan tanpa alasan yang benar-benar bagus. </p>\n<p> Penggalian lebih lanjut menemukan dokumentasi untuk NTFS <a href=\"https://flatcap.org/linux-ntfs/ntfs/attributes/file_name.html\" rel=\"nofollow noopener\" target=\"_blank\"> Atribut - $ FILE_NAME (0x30) </a> ,\nyang menentukan satu byte untuk panjang nama file (pada offset 0x40).\nIni menjelaskan dengan baik batas 255 karakter.\n(Lihat juga FireEye <a href=\"https://www.fireeye.com/blog/threat-research/2012/09/incident-response-ntfs-indx-buffers-part-2-internal.html\" rel=\"nofollow noopener\" target=\"_blank\"> Bagian 2: Struktur Internal Atribut Nama File </a> ). </p>\n<p> Anekdot kecil: Menurut hukum Microsoft tentang konservasi bug,\nWindows 10 Explorer tidak mampu menghapus file 255 karakter\ndi <code>C:\\</code>, <code>C:\\Temp</code> dan <code>C:\\Temp\\abc</code>.\nSaya harus masuk ke Command Prompt perintah <code>del 12*</code> untuk menyingkirkannya.\n(Perbaiki satu bug sambil memperkenalkan yang lain ...) </p>","votes":"2","source":"https://superuser.com/a/1620952","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">harrymc</span></a>","replies":[{"reply":"<i> &quot;Sisanya dibatasi hingga 255 karakter, yang mencakup garis miring ke belakang menengah.&quot; </i> - Tidak yakin saya mengerti Anda dengan benar. Misalnya, dalam pengujian terakhir pada gambar pertama, Anda memiliki <code>C:\\Temp\\abc\\247chars</code>. Setelah mengecualikan huruf drive, titik dua, dan garis miring terbalik di depan, nilainya menjadi <code>Temp\\abc\\247chars</code>, dan terdiri dari 256 karakter, bukan 255.","author":"<a href=\"https://superuser.com/users/581276/john-c-j\" target=\"_blank\" rel=\"nofollow noopener\">john c. j.</a>"},{"reply":"Aha, mengerti. Ngomong-ngomong, saya tidak melihat ada perbedaan antara temuan-temuan di luar (&quot;temuan saya sedikit berbeda dari poster&quot;). Ini dia, untuk siapa saja yang mungkin menganggapnya berguna: <a href=\"https://pastebin.com/raw/vPpDKKB8\" rel=\"nofollow noopener\" target=\"_blank\"> pastebin.com/raw/vPpDKKB8 </a>","author":"<a href=\"https://superuser.com/users/581276/john-c-j\" target=\"_blank\" rel=\"nofollow noopener\">john c. j.</a>"},{"reply":"Baik. Lihat jawaban yang benar.","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\">harrymc</a>"}]}]}
