{"title":"Gnu parallel dan ack tidak bermain bagus karena stdin, pipe","draft":false,"url":"/gnu-parallel-dan-ack-tidak-bermain-bagus-karena-stdin-pipe-9wqhqqhk","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["bash","ack","gnu-parallel"],"snippet":"Saya mencoba menggunakan parallel dan ack bersama-sama untuk melakukan pencarian secara paralel. Namun, ack tampaknya bersikeras menggunakan stdin jika menemukan dirinya dalam pipa, bahkan jika Anda memberikan file untuk dicari:  $ echo...","body":"<p> Saya mencoba menggunakan <code>parallel</code> dan <code>ack</code> bersama-sama untuk melakukan pencarian secara paralel. Namun, <code>ack</code> tampaknya bersikeras menggunakan <code>stdin</code> jika menemukan dirinya dalam pipa, bahkan jika Anda memberikan file untuk dicari: </p> <pre><code>$ echo hello &gt; test.txt\n\n$ ack hello test.txt\nhello\n\n$ echo test.txt | xargs ack hello\nhello\n\n$ echo test.txt | parallel ack hello {}\n\n# ack thinks it should be searching stdin:\n$ echo test.txt | parallel ack -f {}\n-\n\n# even though parallel is indeed passing test.txt:\n$ echo test.txt | parallel --dry-run ack hello {}\nack hello test.txt\n</code></pre> <p> Apa yang harus saya lakukan agar <code>ack</code> dan <code>parallel</code> dapat bermain dengan baik? </p>","source":"https://superuser.com/questions/747303/gnu-parallel-and-ack-not-playing-nicely-due-to-stdin-pipe","author":"<a href=\"https://superuser.com/users/70130/mgalgs\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">mgalgs</span></a>","replies":[{"reply":"Pertimbangkan untuk menjalankan <code>parallel --bibtex</code> sekali untuk menghindari <code>--no-notice</code>.","author":"<a href=\"https://superuser.com/users/41337/ole-tange\" target=\"_blank\" rel=\"nofollow noopener\">Ole Tange</a>"}],"answers":[{"answer":"<p> Ini juga terjadi pada cabang dev saat ini (<code>9cc2407</code>). Alasan untuk ini adalah ketika input standar adalah pipa, ack mencoba membantu dan mengasumsikan Anda mencoba mencari aliran input itu. Kami belum pernah melihat perilaku ini sebelumnya, jadi saya telah membahasnya di milis pengembang ack. Sementara itu, Anda dapat menggunakan <code>--nofilter</code> untuk mengganti perilaku default ack. </p>","votes":"4","source":"https://superuser.com/a/747710","author":"<a href=\"https://superuser.com/users/319285/hoelzro\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">hoelzro</span></a>","replies":[]},{"answer":"<p> Masalahnya adalah karena baris ini pada <code>ack</code>: </p> <pre><code>$is_filter_mode = -p STDIN;\n</code></pre> <p> Jadi dua situasi ini diperlakukan berbeda di <code>ack</code>: </p> <pre><code>cat file | ack ...\nack &lt; file ...\n</code></pre> <p> Solusi untuk Anda tampaknya adalah dengan menambahkan <code>cat</code>: </p> <pre><code>echo test.txt | parallel cat {} \\| ack hello\n</code></pre> <p> Ini bekerja di <code>ack</code> 2.12. </p>","votes":"2","source":"https://superuser.com/a/747727","author":"<a href=\"https://superuser.com/users/41337/ole-tange\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ole Tange</span></a>","replies":[]},{"answer":"<p> Menurut saya ack sakit: Perilakunya tidak deterministik, tetapi menghasilkan keluaran yang berbeda dari waktu ke waktu. Di sini saya menjalankan perintah yang sama 100 kali. 54 di antaranya memberi &quot;halo: Tidak ada file atau direktori seperti itu&quot;. Catatan <code>ack</code> dijalankan oleh <code>bash</code> bukan oleh GNU Parallel. </p> <pre><code>$ seq 100 | parallel -N0 echo ack hello test.txt &gt; test.sh\n$ bash test.sh 2&gt;&amp;1 | sort | uniq -c\n 54 hello: No such file or directory\n100 hi\n</code></pre> <p> Saya dapat mereproduksi perilaku ini saat menjalankan ini dengan tangan 100 kali: </p> <pre><code>$ ack hello test.txt\n&lt;&lt;Sometimes:&gt;&gt; hello: No such file or directory\nhi\n</code></pre>","votes":"0","source":"https://superuser.com/a/747547","author":"<a href=\"https://superuser.com/users/41337/ole-tange\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Ole Tange</span></a>","replies":[{"reply":"hmm, saya tidak dapat mereproduksi hasil ini. Itu konsisten untuk saya.","author":"<a href=\"https://superuser.com/users/70130/mgalgs\" target=\"_blank\" rel=\"nofollow noopener\">mgalgs</a>"},{"reply":"Saya baru saja menguji di Linux Mint 15 dan Debian 7.0: Saya masih mendapatkan hasil yang tidak konsisten. O / S apa yang kamu jalankan?","author":"<a href=\"https://superuser.com/users/41337/ole-tange\" target=\"_blank\" rel=\"nofollow noopener\">Ole Tange</a>"},{"reply":"Hah. Arch Linux. <code>ack 2.12</code>, <code>perl 5.18.2</code>.","author":"<a href=\"https://superuser.com/users/70130/mgalgs\" target=\"_blank\" rel=\"nofollow noopener\">mgalgs</a>"},{"reply":"Saya dapat mereproduksi temuan Anda dengan <code>ack 2.12</code>.","author":"<a href=\"https://superuser.com/users/41337/ole-tange\" target=\"_blank\" rel=\"nofollow noopener\">Ole Tange</a>"}]}]}
