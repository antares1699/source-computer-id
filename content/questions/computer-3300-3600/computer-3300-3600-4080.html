{"title":"Bagaimana cara mencetak pohon dir dari arsip 7zip?","draft":false,"url":"/bagaimana-cara-mencetak-pohon-dir-dari-arsip-7zip-s7tcmmln","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["bash","archiving","7-zip","tree"],"snippet":"Sebelum mengekstrak archive.7z, saya selalu memeriksa apa yang ada di samping:  $ 7z l archive.7z...SKIP...2010-01-01 00:00:00 .....        25856         7367  jsloader/resource/gre/modules/source-editor-textarea.jsm2010-01-01 00:00:00 .....         4656         1669  jsloader/resource/gre/modules/FileUtils.jsm2010-01-01 00:00:00 .....         1856...","body":"<p> Sebelum mengekstrak <code>archive.7z</code>, saya selalu memeriksa apa yang ada di samping: </p> <pre><code>$ 7z l archive.7z\n\n...SKIP...\n\n2010-01-01 00:00:00 .....        25856         7367  jsloader/resource/gre/modules/source-editor-textarea.jsm\n2010-01-01 00:00:00 .....         4656         1669  jsloader/resource/gre/modules/FileUtils.jsm\n2010-01-01 00:00:00 .....         1856          943  jsloader/resource/gre/modules/DownloadPaths.jsm\n2010-01-01 00:00:00 .....         7096         2724  jsloader/resource/gre/modules/CertUtils.jsm\n2010-01-01 00:00:00 .....          540          346  jsloader/resource/gre/modules/jsdebugger.jsm\n2010-01-01 00:00:00 .....        12964         4225  jsloader/resource/gre/modules/CommonDialog.jsm\n2010-01-01 00:00:00 .....         9692         3272  jsloader/resource/gre/modules/NetworkHelper.jsm\n2010-01-01 00:00:00 .....        11252         3503  jsloader/resource/gre/modules/AutocompletePopup.jsm\n------------------- ----- ------------ ------------  ------------------------\n                              17928547      5269642  1489 files, 0 folders\n</code></pre> <p> Ini akan mencetak pesan panjang, jika <code>archive.7z</code> berisi banyak file dan direktori. </p>\n\n<p> Itu tidak terlalu berguna. Karena saya tidak bisa melihat keseluruhan struktur <code>archive.7z</code>. </p>\n\n<p> Dimungkinkan untuk mencetak pohon dir sebelum mengekstraknya. </p> <pre><code>├── jsloader\n│   └── resource\n│       └── gre\n│           ├── components\n│           └── modules\n│               ├── devtools\n│               ├── services-crypto\n│               ├── services-sync\n│               │   ├── engines\n│               │   └── ext\n│               └── tabview\n</code></pre> <p> Saya menggunakan <code>tree -d archive</code> untuk mendapatkan pohon setelah menjalankan <code>7z x archive.7z -oarchive</code>. </p>\n\n<p> Jika saya hanya dapat mengekstrak direktori <code>archive.7z</code>, <br> Saya dapat menjalankan <code>tree -d archive ; rm -r archive</code> untuk mendapatkan pohon itu. </p>","source":"https://superuser.com/questions/425097/how-to-print-dir-tree-of-a-7zip-archive","author":"<a href=\"https://superuser.com/users/39544/kev\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">kev</span></a>","replies":[],"answers":[{"answer":"<p> Retas cepat: </p> <pre><code>#!/bin/sh\n7z l \"${1}\" |\\\ntail -n +17 |\\\nsed 's/.\\{53\\}//' |\\\ntac |\\\nawk 'NR&gt;2 {\n    n=split($6, a, \"/\")\n    {for (i=1; i&lt;n; i++)\n        printf \"   \"\n    }\n    print a[n]\n}'\n</code></pre> <p> Simpan sebagai <code>7ztree</code>, gunakan sebagai </p> <pre><code>$ 7ztree archive.7z\njsloader\n   resource\n      gre\n         modules\n            NetworkHelper.jsm\n            CommonDialog.jsm\n            jsdebugger.jsm\n            CertUtils.jsm\n            DownloadPaths.jsm\n            FileUtils.jsm\n            source-editor-textarea.jsm\n</code></pre> <ul>\n<li> <code>tail</code> digunakan untuk menghapus informasi yang tidak relevan. <code>17</code> di sini, <code>53</code> untuk <code>sed</code> dan <code>2</code> untuk <code>awk</code> adalah angka ajaib yang benar setidaknya pada versi 7-zip saya. </li>\n<li> <code>sed</code> akan menghapus 53 karakter ajaib pertama (ini untuk penanganan spasi yang lebih baik pada <code>awk</code>). </li>\n<li> <code>tac</code> digunakan untuk membalikkan masukan (jika tidak, pohon akan terbalik seperti cara 7z menyajikan daftar). </li>\n</ul>\n\n<p> Memang mudah, tetapi unik, untuk menambahkan logika untuk mendapatkan output mewah yang sama seperti yang dimiliki <code>tree</code>. </p>\n\n<p> <code>awk</code> dapat digunakan untuk memfilter dan membalikkan baris dalam satu perintah alih-alih <code>tail</code> dan <code>tac</code>, tetapi itu akan sedikit lebih berbelit-belit. </p>\n\n<p><strong> EDIT: </strong> Menambahkan <code>sed</code> untuk menangani ruang dengan lebih baik. Dan pada catatan itu, versi <code>sed</code> murni dengan output yang sama seperti skrip di atas dalam bentuknya saat ini: </p> <pre><code>#!/bin/sh\n7zr l ../testing.7z |\\\ntail -n +17 |\\\ntac |\\\ntail -n +3 |\\\nsed 's/.\\{53\\}//; s#[^/]*/#   #g'\n</code></pre> <p> tetapi ini tidak akan mudah untuk mendapatkan hasil yang lebih bagus. </p>\n\n<hr>\n\n<p><strong> EDIT2: </strong> Dan beberapa <a href=\"http://en.wikipedia.org/wiki/Perl_golf#Perl_pastimes\" rel=\"nofollow noopener\" target=\"_blank\"> Golf Perl </a> ! :-D </p> <pre><code>#!/usr/bin/perl\nmy @lines;\nmy $i=0;\nwhile(&lt;&gt;) {next if ++$i&lt;17; push @lines,substr $_,53}\nfor my $i (reverse 0..$#lines-2) {print ' 'x3x$lines[$i]=~tr#/##.$lines[$i]}\n</code></pre> <p> Jika seseorang menambahkan beberapa jeda baris di dalamnya, itu mungkin cara termudah untuk membangun format keluaran yang bagus. </p>","votes":"5","source":"https://superuser.com/a/425192","author":"<a href=\"https://superuser.com/users/49184/daniel-andersson\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Daniel Andersson</span></a>","replies":[]},{"answer":"<p> Anda dapat menjalankan skrip bash kecil untuk melakukan pekerjaan Anda untuk Anda. Karena saya tidak memiliki akses ke Linux dan tidak cukup waktu saat ini, saya hanya dapat memberikan ringkasan. </p>\n\n<ul>\n<li> daftar isi arsip </li>\n<li> Gunakan split atau perintah apa pun pilihan Anda untuk mengekstrak jalur </li>\n<li> keluarkan nama folder sekali </li>\n<li> untuk setiap karakter &quot;/&quot; yang Anda temukan, Anda membuat indentasi pada keluaran Anda </li>\n</ul>\n\n<p> Ini akan memberi Anda keluaran yang mirip dengan pohon. Anda juga dapat menulis program C ++ kecil untuk mencetaknya untuk Anda, yang mungkin lebih mudah atau lebih cantik. </p>","votes":"1","source":"https://superuser.com/a/425109","author":"<a href=\"https://superuser.com/users/134066/andreas\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Andreas</span></a>","replies":[]}]}
