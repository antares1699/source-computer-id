{"title":"PHP CLI tidak menghormati batas memori di php.ini","draft":false,"url":"/php-cli-tidak-menghormati-batas-memori-di-phpini-wtpclxbu","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["memory","php","php-cli","php.ini"],"snippet":"Saya menggunakan drush, yang merupakan aplikasi php baris perintah untuk mengelola situs web drupal. Saya menjalankan perintah untuk mengimpor banyak data, yang menyebabkan saya mencapai batas memori php.  PHP Fatal error:  Allowed...","body":"<p> Saya menggunakan drush, yang merupakan aplikasi php baris perintah untuk mengelola situs web drupal. Saya menjalankan perintah untuk mengimpor banyak data, yang menyebabkan saya mencapai batas memori php. </p> <pre><code>PHP Fatal error:  Allowed memory size of 536870912 bytes exhausted ...\n</code></pre> <p> Artinya 512MB jika saya mengerjakan matematika dengan benar (536870912/1024/1024 = 512). Saya telah mengubah arahan di php.ini yang digunakan drush: </p> <pre><code>$&gt; drush status\n  ...\n  PHP configuration      :  /etc/php5/cli/php.ini \n$&gt; grep memory /etc/php5/cli/php.ini \n; Maximum amount of memory a script may consume (128MB)\n; http://php.net/memory-limit\nmemory_limit = 1024M \n</code></pre> <p> Tapi saya masih mencapai batas 512 MB! Saya menjalankan mesin virtual, yang pengaturan memorinya saya ubah dari 512 menjadi 1025 MB RAM untuk memungkinkan drush berjalan. </p> <pre><code>$&gt; free -m\n             total       used       free     shared    buffers     cached\nMem:          1010        578        431          0         14        392\n-/+ buffers/cache:        172        837\nSwap:          382          0        382\n</code></pre> <p> Jadi dikatakan ada sekitar 431 MB kosong, sekarang saya telah meningkatkan vm hingga 1024. Saya kira setengah dari memori digunakan untuk menjalankan GUI, tapi saya tidak mengerti bagaimana GUI berjalan dengan baik ketika vm memiliki ram 512 MB. </p>\n\n<p> Mengapa cli PHP masih mencapai batas memori 512 MB? Jika itu mencapai batas memori sistem, bukankah seharusnya itu mati sekitar 431MB, yang menurut perintah <code>free</code> tersedia? </p>","source":"https://superuser.com/questions/506318/php-cli-not-respecting-memory-limit-in-php-ini","author":"<a href=\"https://superuser.com/users/13743/user13743\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user13743</span></a>","replies":[{"reply":"Anda membingungkan batas memori virtual dengan batas memori fisik. Batas memori PHP adalah batas memori virtual. Keluaran <code>free</code> adalah semua memori fisik. Juga, Anda salah tentang setengah dari memori yang digunakan untuk menjalankan GUI. Memori digunakan sebagian besar untuk buffer dan cache. Sistem tidak perlu repot-repot membuatnya gratis karena sudah memiliki memori bebas yang cukup, jadi ini akan menjadi usaha yang sia-sia.","author":"<a href=\"https://superuser.com/users/94136/david-schwartz\" target=\"_blank\" rel=\"nofollow noopener\">David Schwartz</a>"},{"reply":"Kemungkinan besar, Anda memiliki lebih dari satu file <code>php.ini</code> (periksa sesuatu seperti <code>&#47;etc&#47;php5&#47;cli</code>) dan sedang mengedit yang salah atau Anda memiliki pengaturan <code>ini_set(&#39;memory_limit&#39;, &#39;512M&#39;);</code> dalam file <code>settings.php</code> atau sejenisnya yang disertakan.","author":"<a href=\"https://superuser.com/users/94136/david-schwartz\" target=\"_blank\" rel=\"nofollow noopener\">David Schwartz</a>"},{"reply":"@ David - Saya memiliki ini_set () tambahan di coedbase berkeliaran dari kode pemecahan masalah. JIKA Anda memposting jawaban itu, saya akan memberi suara positif dan menerimanya.","author":"<a href=\"https://superuser.com/users/13743/user13743\" target=\"_blank\" rel=\"nofollow noopener\">user13743</a>"}],"answers":[{"answer":"<p> Kemungkinan besar, Anda memiliki lebih dari satu file php.ini (periksa sesuatu seperti <code>/etc/php5/cli</code>) dan sedang mengedit yang salah atau Anda memiliki pengaturan <code>ini_set('memory_limit', '512M');</code> dalam file <code>settings.php</code> atau sejenisnya yang disertakan. </p>","votes":"5","source":"https://superuser.com/a/506717","author":"<a href=\"https://superuser.com/users/94136/david-schwartz\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">David Schwartz</span></a>","replies":[]},{"answer":"<p> Untuk orang lain yang mencari pertanyaan ini seperti saya di Google - jalankan perintah ini: </p> <pre><code>php --ini\n</code></pre> <p> Untuk melihat konfigurasi mana yang digunakan php-cli.\nAnda akan melihat sesuatu seperti ini: </p> <pre><code>Loaded Configuration File:         /etc/php/7.1/cli/php.ini\n</code></pre> <p> Atau seperti ini: </p> <pre><code>Loaded Configuration File:         /opt/php-7.0.26/etc/php.ini\n</code></pre> <p> Mungkin Anda mencoba mengubah konfigurasi di file yang salah. </p>","votes":"2","source":"https://superuser.com/a/1368866","author":"<a href=\"https://superuser.com/users/956265/a-maksymiuk\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">A.Maksymiuk</span></a>","replies":[]},{"answer":"<p> Di Mac misalnya </p>\n<p> <code>/etc/php5/cli</code> untuk baris perintah, jadi Anda perlu mengubah <code>/etc/php5/cgi/php.ini</code> </p>\n<p> Seharusnya itu berhasil! </p>","votes":"0","source":"https://superuser.com/a/627906","author":"<a href=\"https://superuser.com/users/243235/espaciomore\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">espaciomore</span></a>","replies":[]}]}
