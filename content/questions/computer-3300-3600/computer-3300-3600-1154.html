{"title":"Bagaimana cara ssh ke mesin jarak jauh yang tidak dapat dijangkau dengan melakukan tunneling melalui server yang dapat dijangkau semua orang?","draft":false,"url":"/bagaimana-cara-ssh-ke-mesin-jarak-jauh-yang-tidak-dapat-dijangkau-dengan-melakukan-tunneling-melalui-server-yang-dapat-dijangkau-semua-orang-0xm0us7o","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["macos","unix","ssh","tunnel"],"snippet":"Mesin:  Mari kita panggil mesin saya  macbook  .  Saya memiliki server di tah interwebs. Sebut saja  server  .  Saya memiliki Mac Mini di tempat lain yang dapat saya akses melalui berbagi layar...","body":"<h3 class=\"h5\"> Mesin: </h3>\n\n<ul>\n<li> Mari kita panggil mesin saya <strong> macbook </strong> . </li>\n<li> Saya memiliki server di tah interwebs. Sebut saja <strong> server </strong> . </li>\n<li> Saya memiliki Mac Mini di tempat lain yang dapat saya akses melalui berbagi layar iChat. Sebut saja <strong> mini </strong> . </li>\n</ul>\n\n<h3 class=\"h5\"> Jangkauan: </h3>\n\n<ul>\n<li><strong> server </strong> tidak bisa melihat keduanya <strong> macbook </strong> maupun <strong> mini </strong> . </li>\n<li><strong> macbook </strong> bisa melihat <strong> server </strong> tapi tidak <strong> mini </strong> . </li>\n<li><strong> mini </strong> bisa melihat <strong> server </strong> , tapi tidak <strong> macbook </strong> . </li>\n</ul>\n\n<p> Berbagi layar lambat. Saya ingin koneksi SSH ke <strong> mini </strong> . Koneksi langsung tidak mungkin dilakukan karena router, NAT, dll. </p>\n\n<p> Yang ingin saya lakukan adalah menghubungkan keduanya <strong> macbook </strong> dan <strong> mini </strong> untuk <strong> server </strong> melalui SSH, membuat terowongan yang sesuai, sehingga dari <strong> macbook </strong> Saya dapat menjalankan perintah <code>ssh â€¦</code> untuk menyambung ke <strong> mini </strong> dengan menyalurkan koneksi melalui <strong> server </strong> . </p>\n\n<p> Jadi pertanyaan saya adalah, perintah apa yang harus saya jalankan, di mesin mana, agar ini berfungsi? </p>\n\n<p> Untuk membuatnya tetap sederhana, harap gunakan <strong> server </strong> , <strong> mini </strong> , <strong> macbook </strong> sebagai nama host dalam jawaban Anda. </p>","source":"https://superuser.com/questions/170758/how-to-ssh-to-an-unreachable-remote-machine-by-tunneling-through-a-server-that-e","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">kch</span></a>","replies":[{"reply":"Anda dapat mengalami korsleting sehingga dengan menyiapkan ipv6 di kedua mesin, gogo6 adalah salah satu opsi - ini sedikit bekerja, tetapi pada akhirnya akan lebih mudah dalam jangka panjang","author":"<a href=\"https://superuser.com/users/10165/journeyman-geek\" target=\"_blank\" rel=\"nofollow noopener\">Journeyman Geek&#9830;</a>"},{"reply":"Ya itu akan luar biasa tapi saya bahkan tidak tahu harus mulai dari mana. Mau memposting jawaban?","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"}],"answers":[{"answer":"<p> Hanya dibutuhkan satu terowongan ssh. Dari mini: </p>\n\n<p> <code>ssh -N -R 0.0.0.0:8022:localhost:22 serverUser@server</code> </p>\n\n<p> Sekarang Anda bisa terhubung dari macbook ke server dengan <code>ssh -p 8022 miniUser@server</code> </p>\n\n<p> Pastikan <code>GatewayPorts</code> disetel ke <code>yes</code> di server <code>/etc/ssh/sshd_config</code>. </p>\n\n<p> Selain itu, Anda mungkin ingin mendefinisikan beberapa hal di ~ / .ssh / config: </p> <pre><code>Host gate.mini\n    HostName server\n    Port 8022\n    HostKeyAlias mini\n</code></pre> <p> Hal ini memungkinkan Anda melakukan <code>ssh miniUser@gate.mini</code> yang lebih koheren, dan pada saat yang sama tidak perlu repot dengan ketidakcocokan sidik jari server. </p>","votes":"6","source":"https://superuser.com/a/172299","author":"<a href=\"https://superuser.com/users/45221/lloeki\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Lloeki</span></a>","replies":[{"reply":"Kedengarannya luar biasa, tetapi saya mendapatkan kesalahan saat mencoba menyambungkan dari macbook: ssh: sambungkan ke host port MyActualServer 8022: Sambungan ditolak","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"Mungkinkah ini yang disalahkan? &quot;Menentukan bind_address jarak jauh hanya akan berhasil jika opsi GatewayPorts server diaktifkan (lihat sshd_config (5)).&quot;","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"Oke, itu saja, saya bisa membuatnya berfungsi dengan menyetel <code>GatewayPorts</code> ke <code>yes</code> di <code>&#47;etc&#47;ssh&#47;sshd_config</code>. Bisakah Anda memperbarui jawaban Anda dengan detail yang mengganggu ini?","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"}]},{"answer":"<p> Di Mac Mini lakukan: </p> <pre><code>ssh -R 1234:localhost:22 serverUser@server\n</code></pre> <p> Ini akan meneruskan koneksi ke port 1234 server ke port 22 di Mac Mini. </p>\n\n<p> Kemudian, di MacBook lakukan: </p> <pre><code>ssh -L 1235:localhost:1234 serverUser@server\n</code></pre> <p> Ini akan meneruskan koneksi ke port 1235 di MacBook ke port 1234 di server (yang kemudian akan diteruskan ke Mac Mini dengan perintah di atas). </p>\n\n<p> Terakhir, untuk mendapatkan koneksi Anda yang sebenarnya, di MacBook lakukan: </p> <pre><code>ssh -p 1235 miniUser@localhost\n</code></pre> <p> Yang terhubung ke port 1235 di MacBook, yang diteruskan ke port 1234 di server, yang diteruskan ke port 22 di Mac Mini. Port 1234 dan 1235 dapat diatur ke <a href=\"http://www.iana.org/assignments/port-numbers\" rel=\"nofollow noopener\" target=\"_blank\"> lebih atau kurang </a> terserah Anda - dan bisa jadi sama (saya menggunakan nomor yang berbeda agar penjelasannya lebih jelas). Demikian pula, port 22 harus diubah jika SSH di Mac Mini Anda mendengarkan di port yang berbeda. </p>","votes":"4","source":"https://superuser.com/a/170803","author":"<a href=\"https://superuser.com/users/44268/scott\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Scott</span></a>","replies":[{"reply":"Mengagumkan. Singkat dan langsung ke inti nya.","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"Jadi, saya memperbaiki perintah Anda dan memposting jawaban baru karena saya tidak memiliki perwakilan untuk mengedit jawaban Anda secara langsung. Jika Anda ingin melakukan pengeditan ini, saya dengan senang hati akan menerima jawaban Anda dan menghapus milik saya.","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"Permintaan maaf saya. Saya selalu lupa menambahkan server saat melakukan port forwarding. Saya akhirnya mencari melalui riwayat terminal saya dan menemukan perintah dari saat terakhir kali saya menggunakannya - jauh lebih mudah daripada benar-benar mempelajarinya. ;-) Apakah perintah ketiga dalam jawaban Anda benar-benar berfungsi? Menurut pemahaman saya, itu akan mencoba untuk terhubung ke mini secara langsung daripada melalui terowongan.","author":"<a href=\"https://superuser.com/users/44268/scott\" target=\"_blank\" rel=\"nofollow noopener\">Scott</a>"},{"reply":"Ups, maksud saya localhost di sana.","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"Mengapa Anda menghilangkan opsi -N? Bukan berarti itu perlu, tetapi apakah Anda tidak menyukainya?","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"lol @ menggantikan mini untuk localhost - setidaknya saya di perusahaan yang baik dengan perintah SSH saya campur aduk. :-) Adapun no -N: no, saya memilih untuk tidak menggunakannya - ini mengingatkan saya bahwa koneksi saya terbuka, dan membuat saya tidak mengutak-atik ps ketika saya ingin mematikannya. Ini juga tidak sepenuhnya penting untuk memecahkan masalah, dan dapat dengan mudah ditambahkan oleh mereka, seperti Anda sendiri, yang lebih suka menggunakannya.","author":"<a href=\"https://superuser.com/users/44268/scott\" target=\"_blank\" rel=\"nofollow noopener\">Scott</a>"},{"reply":"-N bukan -f. Prosesnya tetap di latar depan, Anda tidak mendapatkan shell. Jadi, Anda tidak perlu mengutak-atik ps, cukup ^ c. Keuntungan bagi saya sebenarnya adalah tidak memiliki cangkang terbuka. Kalau tidak, saya cenderung berpikir itu hanya shell jarak jauh yang menganggur dan menutupnya, dan daaamn, baru saja kehilangan terowongan saya.","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"Kecuali jika saya meletakkannya di latar belakang, jendela terminal tidak dapat digunakan lagi. Jika itu masalahnya, saya lebih suka memiliki shell jika saya perlu menjalankan perintah di komputer lain - yang, sembilan dari sepuluh, saya lakukan. Bagaimanapun, itu jelas masalah atau preferensi. Anda lebih suka dengan -N, saya lebih suka tanpa.","author":"<a href=\"https://superuser.com/users/44268/scott\" target=\"_blank\" rel=\"nofollow noopener\">Scott</a>"},{"reply":"Ya, soal preferensi tentu saja. Saya hanya mengoceh untuk memenuhi keingintahuan pengunjung yang tak ada habisnya.","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"}]},{"answer":"<p> Anda dapat menyalurkan perintah apa pun melalui sesi ssh. Itu berarti Anda juga dapat menyalurkan perintah ssh melalui ssh. </p>\n\n<p> Ini akan terlihat seperti ini: </p> <pre><code>ssh -t userOnServer@url.of.server ssh userOnMini@url.of.mini\n</code></pre> <p> Ini membuka sesi ssh ke <em> server </em> dan dari sana langsung membuka sesi ssh kedua ke <em> mini </em> . Dengan terowongan ssh ini seharusnya bekerja tanpa masalah dari Anda <em> macbook </em> mesin. Setidaknya mengingat itu <em> mini </em> dapat dijangkau dari <em> server </em> . </p>\n\n<p><strong> Persyaratan: </strong></p>\n\n<ul>\n<li> ssh aktif <em> macbook </em>  </li>\n<li> ssh server dan ssh client aktif <em> server </em>  </li>\n<li> ssh server dan ssh client aktif <em> mini </em>  </li>\n</ul>\n\n<p> Mungkin bagus untuk membuat alias jadi Anda tidak perlu mengetik ini setiap kali ingin terhubung. Juga pikirkan tentang kata sandi kurang koneksi ke <em> server </em> jadi Anda tidak perlu memasukkan 2 kata sandi untuk koneksi terowongan ini. </p>","votes":"0","source":"https://superuser.com/a/170769","author":"<a href=\"https://superuser.com/users/29387/fgysin-reinstate-monica\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">fgysin reinstate Monica</span></a>","replies":[{"reply":"server tidak dapat melihat mini.","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"pertanyaan yang diperbarui dengan detail jangkauan. menyebalkan bahwa Anda telah berusaha keras untuk mendapatkan jawaban yang bagus namun tidak berguna: P","author":"<a href=\"https://superuser.com/users/3685/kch\" target=\"_blank\" rel=\"nofollow noopener\">kch</a>"},{"reply":"Sudahlah :)","author":"<a href=\"https://superuser.com/users/29387/fgysin-reinstate-monica\" target=\"_blank\" rel=\"nofollow noopener\">fgysin reinstate Monica</a>"}]}]}
