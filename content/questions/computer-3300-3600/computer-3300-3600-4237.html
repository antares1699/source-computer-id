{"title":"File Batch yang menyalin 2 baris pertama dari file teks ke file teks lain","draft":false,"url":"/file-batch-yang-menyalin-2-baris-pertama-dari-file-teks-ke-file-teks-lain-yep2k5gb","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["windows-7","batch-file","find"],"snippet":"Saya memiliki file teks A.txt  Pinging [xx.xx.xx.xx] with 32 bytes of data:Request timed out.Ping statistics for xx.xx.xx.xx:Packets: Sent = 1, Received = 0, Lost = 1 (100% loss)  Saya...","body":"<p> Saya memiliki file teks A.txt </p> <pre><code>Pinging [xx.xx.xx.xx] with 32 bytes of data:\n\nRequest timed out.\n\nPing statistics for xx.xx.xx.xx:\nPackets: Sent = 1, Received = 0, Lost = 1 (100% loss)\n</code></pre> <p> Saya ingin menyalin 2 baris pertama dari file ini ke file B.txt lain, mis. </p> <pre><code>Pinging [xx.xx.xx.xx] with 32 bytes of data:\nRequest timed out.\n</code></pre> <p> Saya tahu saya dapat menggunakan FOR / F untuk melakukan loop melalui baris di file. Saya tahu cara melewati dua baris pertama, tetapi tidak hanya membacanya. Saya juga mencoba melakukannya dengan menggunakan FOR / F dengan DO ECHO dan perintah FIND terkait dan juga perintah FINDSTR langsung (dalam kedua kasus mencari &quot;Pinging&quot; dan &quot;Request&quot;) tetapi saya tidak bisa bekerja dengan baik. </p>","source":"https://superuser.com/questions/309473/batch-file-that-copies-the-first-2-lines-of-a-text-file-into-another-text-file","author":"<a href=\"https://superuser.com/users/89918/sc\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">SC.</span></a>","replies":[{"reply":"Anda bisa menggunakan gnuwin32 perintah head, ketik file.a | head -n 2 tapi itu benar-benar perintah * nix. tapi menarik untuk mengetahui apakah itu bisa dilakukan di batch / windows.","author":"<a href=\"https://superuser.com/users/42672/barlop\" target=\"_blank\" rel=\"nofollow noopener\">barlop</a>"}],"answers":[{"answer":"<p> Saya telah memposting seluruh kode di bawah ini, tetapi daging asli ada di sini: </p> <pre><code>:: set counter\nset c=0\nfor /f \"delims=|\" %%i in (%1) do (\n:: increment counter for each line read\n  set /a c=!c!+1\n  if !c! leq %3 echo %%i &gt;&gt; %2\n)\n</code></pre> <p> Pada dasarnya Anda mengatur variabel penghitung c ke 0, lalu menaikkannya untuk setiap baris yang dibaca dari file teks. Anda menguji penghitung terhadap garis maks dan menggemakannya ke file keluaran jika kurang dari atau sama. </p>\n\n<p> Parameter <code>\"delims=|\"</code> di loop for mencegahnya memecah baris menjadi token pada karakter spasi dan dengan demikian hanya mengeluarkan sebagian baris. Variabel <code>!c!</code> yang tidak biasa adalah cara mereferensikan variabel yang menggunakan ekspansi tertunda. Jika Anda baru saja menggunakan <code>%c%</code>, nilainya tidak akan pernah berubah di dalam loop <code>for</code>. </p>\n\n<p> Anda menyediakan skrip dengan tiga parameter: file masukan, file keluaran dan # baris ke keluaran. % 1,% 2 dan% 3 mewakili masing-masing parameter input ini dalam skrip. </p> <pre><code> @echo off\n\nREM ======================================================================\nREM\nREM NAME: \nREM\nREM AUTHOR: Scott McKinney\nREM DATE  : \nREM\nREM PURPOSE: \nREM COMMENT: \nREM DEPENDENCIES:\nREM\nREM Revisions:\nREM\nREM ======================================================================\n\nsetlocal ENABLEEXTENSIONS\nsetlocal ENABLEDELAYEDEXPANSION\n\nset a=%1\nif \"%1\"==\"\" goto HELP\nif \"%a:~0,2%\"==\"/?\" goto HELP\nif \"%a:~0,2%\"==\"-?\" goto HELP\nif \"%a:~0,2%\"==\"/h\" goto HELP\nif \"%a:~0,2%\"==\"/H\" goto HELP\nif \"%a:~0,2%\"==\"-h\" goto HELP\nif \"%a:~0,2%\"==\"-H\" goto HELP\nif \"%a:~0,3%\"==\"--h\" goto HELP\nif \"%a:~0,3%\"==\"--H\" goto HELP\n\n:: set counter\nset c=0\nfor /f \"delims=|\" %%i in (%1) do (\n:: increment counter for each line read\n  set /a c=!c!+1\n  if !c! leq %3 echo %%i &gt;&gt; %2\n)\ngoto END\n\n:HELP\necho.\necho Usage: %0 ^&lt;input file^&gt; ^&lt;output file^&gt; ^&lt;n lines^&gt;\necho.\necho. Outputs the first ^&lt;n^&gt; lines from ^&lt;input file^&gt; to ^&lt;output file^&gt;.\necho.\n:END\n</code></pre>","votes":"6","source":"https://superuser.com/a/309903","author":"<a href=\"https://superuser.com/users/18495/scott-mckinney\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Scott McKinney</span></a>","replies":[{"reply":"Hanya catatan untuk referensi di masa mendatang, tetapi jika Anda mengaktifkan perluasan perintah (<code>setlocal enableextensions</code>), Anda dapat menggunakan <code>if &#47;i</code> untuk melakukan pencocokan tidak peka huruf besar / kecil. Itu akan memotong beberapa baris kode untuk Anda dan mempermudah pemeliharaan.","author":"<a href=\"https://superuser.com/users/75477/bacon-bits\" target=\"_blank\" rel=\"nofollow noopener\">Bacon Bits</a>"},{"reply":"@Bacon Bits Saya akan menambahkan apa yang Anda katakan, ekstensi cmd diaktifkan secara default. btw ekspansi tertunda tidak ..","author":"<a href=\"https://superuser.com/users/42672/barlop\" target=\"_blank\" rel=\"nofollow noopener\">barlop</a>"},{"reply":"+1 Saya telah menguji jawaban ini dan tampaknya berhasil dan saya melihat logikanya","author":"<a href=\"https://superuser.com/users/42672/barlop\" target=\"_blank\" rel=\"nofollow noopener\">barlop</a>"},{"reply":"Terima kasih Scott. Beranikah saya bertanya apa itu &quot;Ekspansi Tertunda&quot;?","author":"<a href=\"https://superuser.com/users/89918/sc\" target=\"_blank\" rel=\"nofollow noopener\">SC.</a>"},{"reply":"Biasanya, ketika variabel lingkungan digunakan dalam file batch, nilainya diperluas satu kali sebelum eksekusi. Itu tidak diperiksa selanjutnya untuk melihat apakah itu telah berubah setiap kali dipanggil. Khususnya dengan loop, Anda dapat mengalami masalah dengan variabel yang tidak berubah. Ekspansi yang tertunda (<code>setlocal enabledelayedexpansion</code>) memungkinkan Anda memberi tahu sistem untuk menunggu memperluas variabel. Anda menetapkan variabel tertunda dengan <code>!</code> bukan <code>%</code>, jadi Anda akan mengatakan <code>!variable!</code> bukan <code>%variable%</code>. Lihat <code>setlocal &#47;?</code> dan <code>set &#47;?</code>. Mereka secara teknis lebih lambat untuk diproses, tetapi saya tidak pernah menyadarinya.","author":"<a href=\"https://superuser.com/users/75477/bacon-bits\" target=\"_blank\" rel=\"nofollow noopener\">Bacon Bits</a>"},{"reply":"ya set /? menjelaskannya dengan contoh. Saya baru mengetahuinya baru-baru ini .. Defaultnya, tanpa perluasan yang tertunda, adalah perilaku paling konyol yang muncul saat melakukan% blah% dalam pernyataan IF atau FOR. Jika Anda memiliki latar belakang pemrograman, Anda akan melihat .. dari dokumentasi itu. Nyalakan ekspansi yang tertunda dan itu berfungsi dengan baik! dan Anda kemudian menggunakan! var! daripada% var%, meskipun orang masih cenderung menggunakan% blah% saat mereka bisa menggunakannya, dan! bla! saat mereka membutuhkannya.","author":"<a href=\"https://superuser.com/users/42672/barlop\" target=\"_blank\" rel=\"nofollow noopener\">barlop</a>"}]}]}
