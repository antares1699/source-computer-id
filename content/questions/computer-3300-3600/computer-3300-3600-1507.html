{"title":"Bagaimana cara menghindari beberapa detik video kosong saat menggunakan salinan -vcodec?","draft":false,"url":"/bagaimana-cara-menghindari-beberapa-detik-video-kosong-saat-menggunakan-salinan-vcodec-ihq2wo4t","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","ffmpeg","video-codecs","video-conversion"],"snippet":"Saya memproses video yang diupload pengguna di server web CentOS dengan ffmpeg. Saya perlu mengonversi setiap video ke ukuran dan format standar, lalu mengekstrak klip sampel 30 detik dari setiap video. Saya...","body":"<p> Saya memproses video yang diupload pengguna di server web CentOS dengan ffmpeg. Saya perlu mengonversi setiap video ke ukuran dan format standar, lalu mengekstrak klip sampel 30 detik dari setiap video. Saya ingin menggunakan tanda &quot;-vcodec copy&quot; dalam perintah ekstraksi untuk menghindari pengkodean kedua kalinya. </p>\n\n<p> Perintah ini berfungsi untuk konversi awal saya: </p> <pre><code>ffmpeg -i uploaded.mov -f mp4 -vcodec libx264 -vpre medium -acodec libfaac -r 15 -b 360k -ab 48k -ar 22050 -s 480x320 formatted.mp4\n</code></pre> <p> Dan ini <em> terkadang </em> bekerja untuk ekstraksi: </p> <pre><code>ffmpeg -i formatted.mp4 -vcodec copy -acodec copy -ss 0 -t 30 formatted_sample.mp4\n</code></pre> <p> Namun, ketika saya menjalankan perintah ekstraksi pada beberapa video, klip sampel yang diekstrak dimulai dengan beberapa detik video kosong. Audio langsung dimulai tetapi video tidak mulai selama 3-6 detik. </p>\n\n<p> Untuk mendemonstrasikan masalahnya, saya telah mengunggah dua klip video dan menjalankan perintah di atas padanya. Saya membuat klip pertama di Final Cut Express dan mengkodekannya dengan Handbrake sebelum mengunggah ke server web: </p>\n\n<p> 1a) <a href=\"http://www.arlomedia.com/projects/ffmpeg/band.mp4\" rel=\"nofollow noopener\" target=\"_blank\"> klip yang diunggah </a></p>\n\n<p> 1b) <a href=\"http://www.arlomedia.com/projects/ffmpeg/band_formatted.mp4\" rel=\"nofollow noopener\" target=\"_blank\"> dikonversi dengan perintah pertama </a></p>\n\n<p> 1c) <a href=\"http://www.arlomedia.com/projects/ffmpeg/band_formatted_sample.mp4\" rel=\"nofollow noopener\" target=\"_blank\"> diekstrak dengan perintah kedua, kehilangan enam detik pertama </a></p>\n\n<p> Sebagai perbandingan, klip kedua ini berasal dari situs web Apple dan tidak menunjukkan masalah: </p>\n\n<p> 2a) <a href=\"http://www.arlomedia.com/projects/ffmpeg/trailer.mov\" rel=\"nofollow noopener\" target=\"_blank\"> klip yang diunggah </a></p>\n\n<p> 2b) <a href=\"http://www.arlomedia.com/projects/ffmpeg/trailer_formatted.mp4\" rel=\"nofollow noopener\" target=\"_blank\"> dikonversi dengan perintah pertama </a></p>\n\n<p> 2c) <a href=\"http://www.arlomedia.com/projects/ffmpeg/trailer_sample.mp4\" rel=\"nofollow noopener\" target=\"_blank\"> diekstrak dengan perintah kedua, tidak ada masalah </a></p>\n\n<p> Adakah yang bisa melihat apa yang berbeda dari dua klip sumber? Dan jika demikian, apakah ada yang dapat saya lakukan dalam perintah konversi sehingga ketika perintah ekstraksi dijalankan, klip disiapkan untuk menghindari video yang hilang? </p>\n\n<p> Ngomong-ngomong, awalnya saya mengalami masalah dengan ffmpeg 0.6.1 yang diinstal dari yum, tetapi saya memutakhirkan ke versi git terbaru dan masalahnya tetap ada. </p>","source":"https://superuser.com/questions/358155/how-can-i-avoid-a-few-seconds-of-blank-video-when-using-vcodec-copy","author":"<a href=\"https://superuser.com/users/105670/arlomedia\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">arlomedia</span></a>","replies":[{"reply":"Seberapa sering bingkai utama muncul dalam video sumber? Jika tidak dimulai dengan bingkai utama, keluaran mungkin tidak menampilkan apa pun hingga menyentuh bingkai berikutnya.","author":"<a href=\"https://superuser.com/users/1378/macho-matt\" target=\"_blank\" rel=\"nofollow noopener\">Macho Matt</a>"}],"answers":[{"answer":"<p> Saran Matt tentang bingkai utama, dikombinasikan dengan petunjuk tepat waktu yang dikirim ke milis ffmpeg, membawa saya ke sebuah solusi, meskipun saya tidak yakin apakah itu solusi terbaik. </p>\n\n<p> Pertama, saya harus memindahkan opsi -ss dan -t dalam perintah ekstraksi saya sehingga mereka muncul sebelum opsi -i. Ini menyebabkan ekstraksi dimulai pada bingkai utama paling awal berikutnya. Jadi katakanlah saya menggunakan -ss 25 -t 15 untuk mengekstrak dari 0:25 menjadi 0:40 di klip saya, tetapi saya memiliki bingkai utama setiap 10 detik. Sebelumnya saya akan mendapatkan sampel 15 detik dimulai dengan video kosong 5 detik. Sekarang saya akan mendapatkan sampel 20 detik, berjalan dari 0:20 hingga 0:40, tetapi tanpa video kosong. Dengan kata lain, saya menghindari video kosong tetapi kehilangan akurasi pemilihan klip saya. </p>\n\n<p> Untuk mengatasinya, saya harus menambahkan opsi -g ke perintah konversi saya untuk memformat ulang bingkai utama. Saya menggunakan -g 15 dengan -r 15 untuk membuat bingkai utama setiap detik. Ini memungkinkan saya memilih lokasi sampel ke detik terdekat, jadi -ss 25 -t 15 akan memberi saya klip 15 detik yang saya minta. Saya mengharapkan keyframe ekstra untuk membuat klip penuh saya lebih besar, tetapi hanya sekitar 2% lebih besar dalam pengujian saya, dan itu adalah trade-off yang bagus untuk proyek saya. </p>\n\n<p> Jadi, saya mengubah dua perintah saya di atas menjadi: </p> <pre><code>ffmpeg -i uploaded.mov -f mp4 -vcodec libx264 -vpre medium -acodec libfaac -r 15 -g 15 -b 360k -ab 48k -ar 22050 -s 480x320 formatted.mp4\n\nffmpeg -ss 0 -t 30 -i formatted.mp4 -vcodec copy -acodec copy formatted_sample.mp4\n</code></pre> <p> Dan semuanya tampak baik-baik saja. Jika seseorang memiliki solusi yang lebih efisien, silakan posting dan saya akan mengubah jawaban yang saya pilih. </p>","votes":"9","source":"https://superuser.com/a/358969","author":"<a href=\"https://superuser.com/users/105670/arlomedia\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">arlomedia</span></a>","replies":[{"reply":"Saya tidak tahu bahwa menggunakan posisi yang berbeda untuk opsi <code>ss</code> dan <code>t</code> akan menyebabkan hasil yang berbeda.","author":"<a href=\"https://superuser.com/users/48078/slhck\" target=\"_blank\" rel=\"nofollow noopener\">slhck</a>"},{"reply":"Ya, saya belum melihat dokumentasi apa pun tentang itu, tetapi seseorang memposting ke daftar ffmpeg-user, &quot;Pencarian keyframe dapat terjadi jika Anda memintanya (yaitu Anda meletakkan -ss sebelum -i).&quot;","author":"<a href=\"https://superuser.com/users/105670/arlomedia\" target=\"_blank\" rel=\"nofollow noopener\">arlomedia</a>"},{"reply":"Jika saya membutuhkan presisi yang lebih pendek dari 1 detik, saya tidak yakin bagaimana melakukan itu, terutama mengingat <a href=\"https://superuser.com/questions/1356862/how-to-add-additional-key-frames-to-video-using-ffmpeg\" title=\"how to add additional key frames to video using ffmpeg\" target=\"_blank\" rel=\"nofollow noopener\"> superuser.com/questions/1356862/â€¦ </a>","author":"<a href=\"https://superuser.com/users/74576/ryan\" target=\"_blank\" rel=\"nofollow noopener\">Ryan</a>"}]}]}
