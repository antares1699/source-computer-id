{"title":"Mengapa sudo ganda mengubah izin?","draft":false,"url":"/mengapa-sudo-ganda-mengubah-izin-xzn7jln3","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","permissions","sudo","amazon-ec2","amazon-web-services"],"snippet":"Konteks:  ssh dimasukkan ke dalam instance AWS t1.micro yang menjalankan Amazon Linux 2013.09, menggunakan default ec2-user. Saya mencoba mencantumkan konten direktori postgresql default:  Ada apa disana?  $ ls /var/lib/pgsql9/ls: cannot open...","body":"<h3 class=\"h5\"> Konteks: </h3>\n\n<p> <code>ssh</code> dimasukkan ke dalam instance AWS t1.micro yang menjalankan Amazon Linux 2013.09, menggunakan default <code>ec2-user</code>. Saya mencoba mencantumkan konten direktori postgresql default: </p>\n\n<p><em> Ada apa disana? </em></p> <pre><code>$ ls /var/lib/pgsql9/\n\nls: cannot open directory /var/lib/pgsql9/: Permission denied\n</code></pre> <p><em> Baik. Siapa pemilik ini? </em></p> <pre><code>$ ls -l /var/lib | grep pgsql\ndrwx------ 4 postgres postgres 4096 Jun 22 16:06 pgsql9\n</code></pre> <p><em> Ah. Saya konyol. </em></p> <pre><code>$ sudo -u postgres ls /var/lib/pgsql9/\n\nWe trust you have received the usual lecture from the local System\nAdministrator. It usually boils down to these three things:\n\n    #1) Respect the privacy of others.\n    #2) Think before you type.\n    #3) With great power comes great responsibility.\n\n[sudo] password for ec2-user:\n</code></pre> <p><em> ... Apa? <code>ec2-user</code> punya password? Waktunya untuk senjata yang lebih besar. </em></p> <pre><code>$ sudo sudo -u postgres ls /var/lib/pgsql9/\nbackups  data\n</code></pre> <p><strong><em> Keberhasilan! </em></strong> Sekarang, buka superuser.com untuk mencari tahu apa yang terjadi.  &lt;/em&gt; </p>\n\n<h3 class=\"h5\"> Mengapa <code>sudo sudo</code> berperilaku berbeda dari <code>sudo</code>? </h3>","source":"https://superuser.com/questions/772428/why-does-a-double-sudo-modify-permissions","author":"<a href=\"https://superuser.com/users/337909/kdbanman\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">kdbanman</span></a>","replies":[{"reply":"Anda tahu, <code>sudo ls &#47;var&#47;lib&#47;pgsql9</code> juga bisa digunakan. <code>root</code> dapat mengakses barang-barang meskipun tidak ada dalam izin","author":"<a href=\"https://superuser.com/users/224330/nathan-c\" target=\"_blank\" rel=\"nofollow noopener\">Nathan C</a>"},{"reply":"Terima kasih! Saya merasa sangat konyol karena tidak mencobanya.","author":"<a href=\"https://superuser.com/users/337909/kdbanman\" target=\"_blank\" rel=\"nofollow noopener\">kdbanman</a>"}],"answers":[{"answer":"<p> Amazon EC2 dibangun seperti Ubuntu: tidak ada akses <code>root</code> dan semuanya dilakukan dengan <code>sudo</code> sebagai gantinya. </p>\n\n<p> Apa yang perintah <code>sudo</code> Anda lakukan adalah mencoba meniru <code>postgres</code>, membutuhkan izin untuk melakukannya. <code>ec2-user</code> tidak memiliki izin ini, jadi <code>sudo</code> akan meminta kata sandi (yang akan gagal karena tidak memilikinya). </p>\n\n<p> Ketika Anda melakukan <code>sudo sudo</code>, Anda memanggil <code>sudo</code> kedua sebagai root yang memiliki izin untuk menyamar sebagai pengguna lain, sehingga perintah tersebut berfungsi. Karena cara <code>sudo</code> dikonfigurasi (baris NOPASSWD di sudoers), tidak perlu kata sandi untuk dieksekusi sebagai root. </p>","votes":"6","source":"https://superuser.com/a/772434","author":"<a href=\"https://superuser.com/users/224330/nathan-c\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Nathan C</span></a>","replies":[{"reply":"Saya harus membacanya beberapa kali. Jadi, <code>myuser@1.2.3.4 $ sudo &lt;command&gt;</code> mengeksekusi <code>&lt;command&gt;</code> sebagai <code>root</code>, dan perintah <code>sudo</code> melihat <code>myuser</code> sebagai pelaksana <code>sudo</code>. Merangkai mereka sebagai <code>myuser@1.2.3.4 $ sudo sudo ...</code> berarti bahwa <code>sudo</code> bagian dalam melihat <code>root</code> sebagai pelaksana, yang memiliki izin untuk menyamar sebagai pengguna mana pun. Apakah saya benar?","author":"<a href=\"https://superuser.com/users/337909/kdbanman\" target=\"_blank\" rel=\"nofollow noopener\">kdbanman</a>"},{"reply":"Itu betul.","author":"<a href=\"https://superuser.com/users/224330/nathan-c\" target=\"_blank\" rel=\"nofollow noopener\">Nathan C</a>"},{"reply":"ini menyelamatkan hariku.","author":"<a href=\"https://superuser.com/users/639990/soorena\" target=\"_blank\" rel=\"nofollow noopener\">Soorena</a>"}]}]}
