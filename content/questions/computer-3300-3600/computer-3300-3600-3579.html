{"title":"Apakah pg_ident.conf berfungsi?","draft":false,"url":"/apakah-pg-identconf-berfungsi-wgp5omjf","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","postgresql"],"snippet":"Ketika saya mencoba menjalankan psql, dikatakan:  psql --versionpsql (PostgreSQL) 9.3.12psqlpsql: FATAL:  Peer authentication failed for user \"testuser\"  Ini pg_hba.conf saya:  # Database administrative login by Unix domain socketlocal...","body":"<p> Ketika saya mencoba menjalankan psql, dikatakan: </p> <pre><code>psql --version\npsql (PostgreSQL) 9.3.12\npsql\npsql: FATAL:  Peer authentication failed for user \"testuser\"\n</code></pre> <p> Ini <code>pg_hba.conf</code> saya: </p> <pre><code># Database administrative login by Unix domain socket\nlocal   all             postgres                                peer\n\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# \"local\" is for Unix domain socket connections only\nlocal   all             all                                     peer    map=testmap\n# IPv4 local connections:\nhost    all             all             127.0.0.1/32            md5\n# IPv6 local connections:\nhost    all             all             ::1/128                 md5\n</code></pre> <p> Ini <code>pg_ident.conf</code> saya: </p> <pre><code># MAPNAME       SYSTEM-USERNAME         PG-USERNAME\ntestmap         testuser                postgres\n</code></pre> <p> Dan <code>postgresql.conf</code>: </p> <pre><code>data_directory = '/var/lib/postgresql/9.3/main'\nhba_file = '/etc/postgresql/9.3/main/pg_hba.conf'\nident_file = '/etc/postgresql/9.3/main/pg_ident.conf'\nexternal_pid_file = '/var/run/postgresql/9.3-main.pid'\nlisten_addresses = '*'\nport = 5432\nmax_connections = 100\nunix_socket_directories = '/var/run/postgresql'\nssl = true\nssl_cert_file = '/etc/ssl/certs/ssl-cert-snakeoil.pem'\nssl_key_file = '/etc/ssl/private/ssl-cert-snakeoil.key'\nshared_buffers = 128MB\nlog_line_prefix = '%t '\nlog_timezone = 'UTC'\ndatestyle = 'iso, mdy'\ntimezone = 'UTC'\nlc_messages = 'C'\nlc_monetary = 'C'\nlc_numeric = 'C'\nlc_time = 'C'\ndefault_text_search_config = 'pg_catalog.english'\n</code></pre> <p> Versi PostgreSQL: 9.3.12 </p>\n\n<p> Apa yang saya lakukan salah? </p>","source":"https://superuser.com/questions/1069138/is-pg-ident-conf-working","author":"<a href=\"https://superuser.com/users/586602/sata\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">sata</span></a>","replies":[],"answers":[{"answer":"<p> Tujuan dari peta ini adalah untuk <code>testuser</code> untuk login sebagai pengguna db <code>postgres</code>. </p>\n\n<p> Pada <code>pg_hba.conf</code>, kata kunci <code>map</code> harus berlaku untuk pengguna <code>postgres</code>. </p>\n\n<p> Juga dalam pemanggilan psql, <code>postgres</code> sebagai pengguna harus secara eksplisit diberikan sebagai argumen. </p>\n\n<p> Ini bekerja untuk saya: </p>\n\n<p> pg_hba.conf: </p> <pre>\n# Database administrative login by Unix domain socket\nlocal   all             postgres                                peer  map=testmap\n\n# TYPE  DATABASE        USER            ADDRESS                 METHOD\n\n# \"local\" is for Unix domain socket connections only\nlocal   all             all                                     peer   \n</pre> <p> Doa: </p> <pre><code>psql -U postgres\n</code></pre> <p> Pastikan untuk memuat ulang layanan setelah mengubah file konfigurasi. </p>","votes":"6","source":"https://superuser.com/a/1070534","author":"<a href=\"https://superuser.com/users/183101/daniel-v%c3%a9rit%c3%a9\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Daniel V&#233;rit&#233;</span></a>","replies":[{"reply":"ini benar-benar perilaku yang aneh","author":"<a href=\"https://superuser.com/users/586602/sata\" target=\"_blank\" rel=\"nofollow noopener\">sata</a>"},{"reply":"<code>testmap != testuser </code>","author":"<a href=\"https://superuser.com/users/94957/pedro-lobito\" target=\"_blank\" rel=\"nofollow noopener\">Pedro Lobito</a>"}]}]}
