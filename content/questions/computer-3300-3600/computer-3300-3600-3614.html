{"title":"Bagaimana cara melampirkan DBUS sesi melalui ssh dengan andal?","draft":false,"url":"/bagaimana-cara-melampirkan-dbus-sesi-melalui-ssh-dengan-andal-bokprfml","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["linux","ssh","dbus"],"snippet":"Saya hampir tidak berhasil menggunakan alat yang bergantung pada dbus melalui ssh (misalnya pactl - antarmuka baris perintah pulseaudio - yang memilih keluaran audio).  Saya tahu cara mengekspor alamat DBUS sesi secara...","body":"<p> Saya hampir tidak berhasil menggunakan alat yang bergantung pada dbus melalui ssh (misalnya <code>pactl</code> - antarmuka baris perintah pulseaudio - yang memilih keluaran audio). </p>\n\n<p> Saya tahu cara mengekspor alamat DBUS sesi secara manual ke <code>DBUS_SESSION_BUS_ADDRESS</code>, tetapi masih hampir semua aplikasi gagal dengan pesan seperti <code>connection refused at pa_context_new()</code>. </p>\n\n<p> Ini, sayangnya, cocok dengan semua reservasi terhadap dbus, kdbus (dan systemd) ... </p>\n\n<p> Jadi langkah apa yang sebenarnya diperlukan untuk membuat aplikasi apa pun yang bergantung pada DBUS dijalankan melalui ssh seperti yang akan dilakukan dari sesi desktop? <br> Apakah ada cara yang tidak rapuh dan tidak rawan kesalahan untuk mendapatkan alamat bus tanpa bergantung pada skrip sepanjang layar? <br> Apa lagi yang diperlukan - selain dari alamat - untuk memungkinkan koneksi? </p>","source":"https://superuser.com/questions/1003950/how-to-reliably-attach-to-session-dbus-over-ssh","author":"<a href=\"https://superuser.com/users/115052/dronus\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">dronus</span></a>","replies":[{"reply":"Mungkin aku akan mencampurkan sesuatu bersama ... As <i> beberapa </i> Aplikasi dbus berfungsi, mis. penampil dbus <code>d-feet</code>, saya rasa ini lebih berkaitan dengan soket pulseaudio selain koneksi dbusnya.","author":"<a href=\"https://superuser.com/users/115052/dronus\" target=\"_blank\" rel=\"nofollow noopener\">dronus</a>"},{"reply":"Di sisi lain, pulseaudio menggunakan dbus dan harus menemukan dan mengautentikasi soketnya sendiri juga jika dbus yang tepat tersedia.","author":"<a href=\"https://superuser.com/users/115052/dronus\" target=\"_blank\" rel=\"nofollow noopener\">dronus</a>"}],"answers":[{"answer":"<p><strong> pactl <em> tidak </em> tergantung pada D-Bus </strong> - ini hanyalah salah satu dari berbagai metode yang mungkin digunakan untuk menemukan soket kontrol. Yang sekarang selalu di lokasi yang sama - <code>$XDG_RUNTIME_DIR/pulse/native</code> (pada pulseaudio v3.0). Jadi keluhan asli tidak masuk akal. Saya yakin <code>strace -e connect pactl info</code> akan mengungkapkan bahwa kesalahan &quot;Sambungan ditolak&quot; berasal dari mencoba menyambung ke pulseaudio itu sendiri, bukan ke D-Bus. </p>\n\n<ul>\n<li><p> Satu kemungkinan penyebab: Jika strace menampilkan pactl yang mencoba menggunakan <code>/var/run/pulse/native</code> alih-alih jalur per pengguna, $ XDG_RUNTIME_DIR mungkin tidak disetel. Anda dapat mengaturnya secara manual (ke <code>/run/user/$UID</code>), namun, akan lebih baik untuk mencari tahu mengapa tidak diatur secara otomatis. </p>\n\n<p> Variabel $ XDG_RUNTIME_DIR disetel oleh pam_systemd.so; pastikan bahwa file konfigurasi <code>/etc/pam.d/sshd</code> Anda akhirnya mencantumkan modul itu (terkadang secara langsung, tetapi lebih sering dengan menyertakan sub-konfigurasi seperti <code>system-login</code> atau <code>common-session</code>). </p></li>\n</ul>\n\n<hr>\n\n<p> Konon, saat Anda perlu menggunakan <em> lain </em> program melalui SSH - program yang <em> melakukan </em> bergantung pada bus sesi - ada tiga opsi umum: </p>\n\n<ul>\n<li><p> Untuk melampirkan ke bus pengguna &#39;baru&#39;: </p>\n\n<p> Beberapa sistem / distro mungkin sudah pindah ke model &quot;bus pengguna&quot;, di mana alih-alih sejumlah bus sesi, hanya ada satu untuk setiap UID. Alamatnya adalah <code>unix:path=/run/user/$UID/bus</code> dengan dbus-daemon, atau <code>kernel:path=/sys/fs/kdbus/$UID-user/bus</code> dengan kdbus. </p>\n\n<p> Versi terbaru sd-bus, libdbus, gdbus akan secara otomatis mencoba alamat ini jika $ DBUS_SESSION_BUS_ADDRESS atau $ DISPLAY tidak disetel. Hal ini membuat model &quot;bus pengguna&quot; menjadi jawaban paling andal untuk pertanyaan pertama Anda, karena yang perlu Anda ketahui hanyalah UID Anda sendiri. (Sebagian besar pendekatan yang melibatkan model &quot;bus sesi&quot; tradisional <em> tidak bisa </em> dapat diandalkan, karena mungkin ada sejumlah dari mereka, tidak persis satu ...) </p></li>\n<li><p> Untuk melampirkan ke bus sesi &#39;tradisional&#39;: </p>\n\n<p> Alamat bus sesi biasanya dipilih secara acak, untuk menghindari konflik. Namun, untuk berbagai tujuan (terutama untuk fungsi &quot;bus autolaunch&quot;), alamat disimpan di <code>~/.dbus/session-bus/$MACHINE_ID-$DISPLAY</code> (perkiraan). </p>\n\n<p> Jadi Anda dapat menyetel $ DBUS_SESSION_BUS_ADDRESS secara manual seperti sebelumnya, tetapi Anda juga dapat menyetel $ DISPLAY sebagai gantinya, dan program akan menemukan bus sesi yang cocok berdasarkan tampilan X11. </p></li>\n<li><p> Untuk memulai a <em> baru </em> Bus sesi (khusus): </p> <pre><code>dbus-launch --exit-with-session /bin/bash\n</code></pre> </li>\n</ul>","votes":"6","source":"https://superuser.com/a/1003965","author":"<a href=\"https://superuser.com/users/1686/user1686\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">user1686</span></a>","replies":[]}]}
