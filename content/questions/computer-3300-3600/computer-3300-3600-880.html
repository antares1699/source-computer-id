{"title":"Tidak dapat menghapus disk fisik yang tidak digunakan dari kumpulan Storage Spaces","draft":false,"url":"/tidak-dapat-menghapus-disk-fisik-yang-tidak-digunakan-dari-kumpulan-storage-spaces-gisu5oys","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["storage-spaces"],"snippet":"Saya memiliki array Storage Spaces 6-drive cermin di Windows 10, terbuat dari drive 2x 4TB dan 4x 3TB.  Salah satu drive 4TB menunjukkan kegagalan, jadi saya telah menggantinya dan saat ini memiliki...","body":"<p> Saya memiliki array Storage Spaces 6-drive cermin di Windows 10, terbuat dari drive 2x 4TB dan 4x 3TB. </p>\n\n<p> Salah satu drive 4TB menunjukkan kegagalan, jadi saya telah menggantinya dan saat ini memiliki drive ke-7 (4TB) yang terpasang dan ditambahkan ke pool. Sebelum menambahkan drive secara fisik, saya mengklik &quot;Hapus&quot; pada drive yang mengkhawatirkan melalui UI panel kontrol dan membiarkannya mentransfer data dari drive itu, lalu menambahkan drive baru. </p>\n\n<p> Menurut UI, drive tersebut telah &quot;0,00% digunakan&quot; dan &quot;Mempersiapkan penghapusan&quot; selama berminggu-minggu sekarang. </p>\n\n<p> Sementara itu, pool Storage Spaces memberi peringatan &quot;Ketahanan yang berkurang; periksa bagian Drive fisik&quot;. Bagian drive fisik mengatakan semua drive lainnya baik-baik saja. </p>\n\n<p> Mencoba untuk menghapus disk melalui PowerShell dengan <code>Remove-PhysicalDisk</code> memperingatkan saya bahwa menghapusnya &quot;akan menyebabkan masalah dengan kemampuan toleransi kesalahan [pool]&quot;. Ketika saya dengan keras kepala mencoba cara apa pun, saya mendapatkan pesan kesalahan &quot;Salah satu disk fisik yang ditentukan tidak dapat dihapus karena masih digunakan&quot; </p>\n\n<p> Lihat tangkapan layar untuk detail dari semua yang dijelaskan di atas: </p>\n\n<p><a href=\"https://i.stack.imgur.com/NaI8m.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/NaI8m.png\" alt=\"Overall pool status in UI\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a>\n<a href=\"https://i.stack.imgur.com/HDJpn.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/HDJpn.png\" alt=\"Zero percent usage of drive being removed\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a>\n<a href=\"https://i.stack.imgur.com/8uu1E.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/8uu1E.png\" alt=\"PowerShell drive and pool info\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a>\n<a href=\"https://i.stack.imgur.com/swNdl.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/swNdl.png\" alt=\"Error when removing drive through PowerShell\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a>\n<a href=\"https://i.stack.imgur.com/r5JQN.png\" rel=\"nofollow noopener\" target=\"_blank\"><img src=\"https://i.stack.imgur.com/r5JQN.png\" alt=\"Overall drive capacity\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></a></p>","source":"https://superuser.com/questions/1126541/cant-remove-unused-physical-disk-from-storage-spaces-pool","author":"<a href=\"https://superuser.com/users/194395/dave\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Dave</span></a>","replies":[{"reply":"Mengapa Anda tidak menambahkan disk baru sebelum mencoba menghapus yang lama? Apakah ada cukup ruang pada disk yang tersisa untuk data (Paritas atau) Mirror dari penyimpanan Tangguh Anda? Jika saya mengerti dengan baik Anda memiliki cermin 2 arah. Berapakah jumlah total data yang tidak dicerminkan? Saya kira jika Anda ingin menghapus disk sebelum memasukkan yang baru, Anda akan memiliki ruang maksimum untuk (4Gb + 4 * 3Gb = 16Gb -&gt;) 8 Gb data yang tidak dicerminkan. BTW Disk Anda belum terdaftar sebagai <a href=\"https://support.microsoft.com/en-us/help/12438/windows-10-storage-spaces\" rel=\"nofollow noopener\" target=\"_blank\"> Siap dilepas </a> jadi beberapa proses masih menggunakannya. Temukan!","author":"<a href=\"https://superuser.com/users/257269/hastur\" target=\"_blank\" rel=\"nofollow noopener\">Hastur</a>"},{"reply":"Mengikuti <a href=\"https://jvrtech.net/2015/01/02/windows-storage-spaces-remove-physical-disk-from-storage-pool-with-powershell/\" rel=\"nofollow noopener\" target=\"_blank\"> artikel ini </a> dan melaporkan kesalahan.","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\">harrymc</a>"},{"reply":"@Hastur - Windows melaporkan 5,59 TB digunakan di Explorer (sebelum mirroring), masing-masing drive lain menunjukkan ~ 65% penggunaan, jadi saya pikir harus ada banyak kapasitas","author":"<a href=\"https://superuser.com/users/194395/dave\" target=\"_blank\" rel=\"nofollow noopener\">Dave</a>"},{"reply":"@harrymc - <code>Repair-VirtualDisk</code> berputar, saya akan memperbarui setelah selesai","author":"<a href=\"https://superuser.com/users/194395/dave\" target=\"_blank\" rel=\"nofollow noopener\">Dave</a>"},{"reply":"Pekerjaan (melalui <code>Get-StorageJob</code>) telah di pertengahan 40-an% selesai selama ~ 2 hari berturut-turut, dengan nilai yang berfluktuasi (sepertinya hampir naik hingga 48%, lalu turun menjadi 42%, dll.)","author":"<a href=\"https://superuser.com/users/194395/dave\" target=\"_blank\" rel=\"nofollow noopener\">Dave</a>"},{"reply":"Sudahkah Anda mencoba mematikan, secara fisik menghapus disk yang buruk, lalu reboot?","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\">harrymc</a>"},{"reply":"Coba saja ... Reboot, konfirmasi bahwa disk fisik masih Retired, lalu jalankan <code>Repair-VirtualDisk</code> lagi, buka PowerShell ke-2 dan jalankan <code>Get-StorageJob</code> (berulang kali). Sejauh ini tampaknya hasil yang sama persis seperti dengan drive yang terhubung: Saya melihat 2 pekerjaan &quot;Perbaikan&quot;, satu IsBackgroundTask dan satu tidak. Pekerjaan IsBackgroundTask == false memiliki ElapsedTime 2.22: 39: 14, Status Berjalan, dan PercentComplete tampaknya terus-menerus dimulai pada pertengahan 40-an, naik beberapa% perlahan, lalu pergi ke 0%, lalu kembali ke pertengahan- 40-an","author":"<a href=\"https://superuser.com/users/194395/dave\" target=\"_blank\" rel=\"nofollow noopener\">Dave</a>"},{"reply":"Mungkin lebih baik membiarkannya berjalan selama beberapa hari dan berharap yang terbaik. Membangun kembali RAID dari awal akan menyakitkan.","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\">harrymc</a>"},{"reply":"Aku akan membiarkannya terus berjalan. Mungkin seiring waktu kisaran% yang tampaknya tetap dalam akan merambat ke atas? Sementara itu, dapatkah Anda memposting artikel itu sebagai jawaban yang tepat untuk pertanyaan ini sehingga saya dapat memberi Anda setidaknya sedikit pujian?","author":"<a href=\"https://superuser.com/users/194395/dave\" target=\"_blank\" rel=\"nofollow noopener\">Dave</a>"},{"reply":"Selesai sesuai permintaan.","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\">harrymc</a>"}],"answers":[{"answer":"<p> Artikel <a href=\"https://jvrtech.net/2015/01/02/windows-storage-spaces-remove-physical-disk-from-storage-pool-with-powershell/\" rel=\"nofollow noopener\" target=\"_blank\"> Hapus disk fisik dari kumpulan penyimpanan dengan PowerShell </a> memiliki prosedur ini menggunakan PowerShell: </p>\n\n<ol>\n<li> Untuk memverifikasi bahwa semua drive dalam keadaan sehat dan operasional: <br> <code>Get-PhysicalDisk</code> </li>\n<li> Dapatkan FriendlyName perangkat: <br> <code>Get-PhysicalDisk | ft FriendlyName</code> </li>\n<li> Hentikan disk: <br> <code>Set-PhysicalDisk -FriendlyName \"&lt;DeviceName&gt;\" -Usage Retired</code> </li>\n<li> Temukan nama Disk Virtual: <br> <code>Get-VirtualDisk</code> <br> Jika namanya terlalu panjang gunakan: <br> <code>Get-VirtualDisk | ft -AutoSize</code> </li>\n<li> Untuk setiap Disk Virtual di kolam penyimpanan lakukan: <br> <code>Repair-VirtualDisk -FriendlyName \"YourVirtualDisk\"</code> </li>\n<li> Buka jendela PowerShell baru untuk memantau perbaikan dengan: <br> <code>Get-StorageJob</code> </li>\n<li> Hapus PhysicalDisk jika semua perbaikan berhasil dilakukan: <br> <code>Get-PhysicalDisk | Where-Object { $_.Usage -eq ‘Retired’}</code> </li>\n<li> Tetapkan disk ke variabel: <br> <code>$DiskToRemove = Get-PhysicalDisk | Where-Object { $_.Usage -eq ‘Retired’}</code> </li>\n<li> Temukan nama kolam penyimpanan: <br> <code>Get-StoragePool</code> </li>\n<li> Hapus disk fisik dari kolam penyimpanan: <br> <code>Remove-PhysicalDisk -PhysicalDisks $DiskToRemove -StoragePoolFriendlyName \"Storage pool\"</code> </li>\n</ol>\n\n<p> Jika <code>Repair-VirtualDisk</code> membutuhkan waktu lama untuk dieksekusi, biarkan berjalan dengan sendirinya,\nsebelum memutuskan untuk memformat ulang dan membangun kembali larik Storage Spaces ini. </p>","votes":"10","source":"https://superuser.com/a/1132706","author":"<a href=\"https://superuser.com/users/8672/harrymc\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">harrymc</span></a>","replies":[]}]}
