{"title":"Bagaimana saya tahu apakah akan reboot setelah memutakhirkan paket di Ubuntu?","draft":false,"url":"/bagaimana-saya-tahu-apakah-akan-reboot-setelah-memutakhirkan-paket-di-ubuntu-fapws71v","votes":"4","answers_count":"3","categories":["Komputer"],"tags":["ubuntu","ubuntu-server"],"snippet":"Saya memiliki PC yang menjalankan server Ubuntu.  Terkadang ketika saya ssh ke dalamnya, saya mendapat pesan bahwa beberapa paket perlu ditingkatkan.  Saya memutakhirkan perangkat lunak dengan menjalankan (sebagai root)  aptitude update &amp;&amp;...","body":"<p> Saya memiliki PC yang menjalankan server Ubuntu. </p>\n\n<p> Terkadang ketika saya ssh ke dalamnya, saya mendapat pesan bahwa beberapa paket perlu ditingkatkan. </p>\n\n<p> Saya memutakhirkan perangkat lunak dengan menjalankan (sebagai root) </p> <pre><code>aptitude update &amp;&amp; aptitude safe-upgrade\n</code></pre> <p> Terkadang itu sudah cukup. Tapi terkadang saya perlu reboot juga, dan saya tidak diberitahu ini sampai saya ssh di kemudian hari. Bagaimana saya bisa mengetahuinya lebih cepat? </p>\n\n<p> Idealnya saya ingin meningkatkan dengan menjalankan sesuatu seperti </p> <pre><code>aptitude update &amp;&amp; aptitude safe-upgrade &amp;&amp;\nif aptitude needs-reboot ; then shutdown -r now ; fi\n</code></pre> <p> tetapi perintah <code>aptitude needs-reboot</code> tidak ada. Apa yang harus saya jalankan? </p>\n\n<hr>\n\n<p> Klarifikasi: </p>\n\n<ul>\n<li> Sebenarnya saya memiliki dua PC, satu menjalankan 10.04 (lucid) dan yang lainnya menjalankan 11.04 (rapi). Saya berharap ini akan menjadi solusi yang sama untuk keduanya. </li>\n<li> Harap hanya solusi baris perintah yang ketat. Salah satu PC ini tidak memiliki layar, dan keduanya tidak memiliki keyboard. </li>\n</ul>","source":"https://superuser.com/questions/316755/how-do-i-know-whether-to-reboot-after-upgrading-packages-in-ubuntu","author":"<a href=\"https://superuser.com/users/5636/dave4420\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">dave4420</span></a>","replies":[],"answers":[{"answer":"<p> Salah satu cara sub-par --- mungkin khusus untuk Ubuntu --- adalah dengan memeriksa keberadaan file ini: </p> <pre><code>/var/run/reboot-required\n</code></pre> <p> Jika ada, diperlukan reboot. </p>\n\n<p> Jadi fungsi Bash di <code>.bash_rc</code> (dan rekan.) Bisa melakukan pekerjaan itu: </p> <pre><code>function needs_reboot {\n  if [ -f /var/run/reboot-required ]; then\n    read -p \"Restart needed. Reboot? (y/N) \" answer;\n    if [ \"$answer\" = \"y\" -o \"$answer\" = \"Y\" ]; then\n      reboot;\n    fi\n  else\n    echo \"No restart\";\n  fi\n}\n</code></pre> <p> Darimana ide ini berasal? MOTD diperbarui pada saat login dengan proses <code>pam_motd</code>, membaca isinya dari direktori <code>/etc/update-motd.d</code>. Dalam direktori ini, ada skrip <code>/etc/update-motd.d/98-reboot-required</code> (di Ubuntu 12_04) yang memeriksa keberadaan <code>/var/run/reboot-required</code> kami. Tampaknya begitulah saran untuk booting ulang diputuskan. Jadi fungsi di atas hanya melakukan pemeriksaan yang sama, secara interaktif. </p>\n\n<p> Saya sangat ingin mendapatkannya langsung dari APT, tetapi untuk saat ini, ini berfungsi ... </p>","votes":"6","source":"https://superuser.com/a/853053","author":"<a href=\"https://superuser.com/users/34796/eric-platon\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Eric Platon</span></a>","replies":[]},{"answer":"<p> Bagaimana dengan ini (jalankan sebagai root):\n<code>apt-get update &amp;&amp; apt-get dist-upgrade --dry-run | grep linux-; if [ $? -eq 0 ]; then yes | apt-get dist-upgrade &amp;&amp; reboot; else yes | apt-get dist-upgrade; fi</code> </p>\n\n<p> Jika ada update kernel <code>grep linux-</code> akan mengembalikan 0 dan kemudian Anda akan reboot. Perintah <code>yes</code> dapat diganti dengan <code>apt-get dist-upgrade --assume-yes</code>. Tidak akan ada reboot jika tidak ditemukan pembaruan kernel. </p>","votes":"1","source":"https://superuser.com/a/317931","author":"<a href=\"https://superuser.com/users/66579/grs\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">grs</span></a>","replies":[]},{"answer":"<p> Anda hanya perlu melakukan boot ulang jika kernel telah diupgrade. </p>","votes":"0","source":"https://superuser.com/a/316764","author":"<a href=\"https://superuser.com/users/60426/bahamat\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">bahamat</span></a>","replies":[{"reply":"Apakah ada cara mudah untuk membuat skrip itu, tanpa menggunakan parsing keluaran <code>aptitude safe-upgrade</code>?","author":"<a href=\"https://superuser.com/users/5636/dave4420\" target=\"_blank\" rel=\"nofollow noopener\">dave4420</a>"}]}]}
