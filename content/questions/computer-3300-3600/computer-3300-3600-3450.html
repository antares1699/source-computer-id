{"title":"Scdaemon tidak akan mendeteksi Yubikey di Windows 10","draft":false,"url":"/scdaemon-tidak-akan-mendeteksi-yubikey-di-windows-10-dys88eqn","votes":"4","answers_count":"1","categories":["Komputer"],"tags":["windows","windows-10","gpg4win","yubikey"],"snippet":"Ini baru saja dimulai setelah saya memperbarui ke Windows 10 1803 (x64). Saya telah memperbarui Gpg4Win ke versi terbaru (3.1.2), tetapi ini tidak memperbaiki apa pun.  Saya telah mencoba yang berikut ini:...","body":"<p> Ini baru saja dimulai setelah saya memperbarui ke Windows 10 1803 (x64). Saya telah memperbarui Gpg4Win ke versi terbaru (3.1.2), tetapi ini tidak memperbaiki apa pun. </p>\n<p> Saya telah mencoba yang berikut ini: </p>\n<ul>\n<li> Hapus Minidriver ( <a href=\"https://forum.yubico.com/viewtopicbe08.html?f=35&t=2756\" rel=\"nofollow noopener\" target=\"_blank\"> https://forum.yubico.com/viewtopicbe08.html?f=35&amp;t=2756 </a> ) </li>\n<li> Ganti chuid ( <a href=\"https://forum.yubico.com/viewtopicb199.html?f=35&t=2757\" rel=\"nofollow noopener\" target=\"_blank\"> https://forum.yubico.com/viewtopicb199.html?f=35&amp;t=2757 </a> ) </li>\n<li> Hapus semua driver yang terkait dengan Yubikey sehingga mereka bisa diinstal ulang menggunakan Usbdeview Nirsoft </li>\n<li> Hapus entri untuk Yubikey dari <code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Cryptography\\Calais\\SmartCards</code> </li>\n<li> Nonaktifkan dan aktifkan kembali antarmuka CCID menggunakan alat Yubico </li>\n<li> Mulai ulang layanan Smartcard </li>\n<li> Bunuh dan mulai ulang scdaemon dan gpg-connect-agent </li>\n<li> (jelas) reboot </li>\n</ul>\n<p> Tak satu pun dari ini memperbaikinya, dan saya hampir kehabisan ide saat ini.\nIni adalah satu-satunya pembaca kartu pintar di mesin saya (selain dari TPM), dan Yubikey telah diuji untuk bekerja dengan gpg di Linux. </p>\n<p> Yubikey ditampilkan sebagai <code>Identity Device (NIST SP 800-73 [PIV])</code> </p>\n<h2 class=\"h4\"> Beberapa log: </h2>\n<p> Gpg kembali: </p> <pre><code>$ gpg --card-status\ngpg: selecting openpgp failed: No such device\ngpg: OpenPGP card not available: No such device\n</code></pre> <p> Certutil kembali: </p> <pre><code>$ certutil -scinfo\n\n\n=======================================================\nAnalyzing card in reader: Yubico Yubikey 4 OTP+U2F+CCID 0\n\n--------------===========================--------------\n================ Certificate 0 ================\n--- Reader: Yubico Yubikey 4 OTP+U2F+CCID 0\n---   Card: Identity Device (NIST SP 800-73 [PIV])\nProvider = Microsoft Base Smart Card Crypto Provider\nKey Container = (null) [Default Container]\n\nCannot open the AT_SIGNATURE key for reader: Yubico Yubikey 4 OTP+U2F+CCID 0\nCannot open the AT_KEYEXCHANGE key for reader: Yubico Yubikey 4 OTP+U2F+CCID 0\n\n--------------===========================--------------\n================ Certificate 0 ================\n--- Reader: Yubico Yubikey 4 OTP+U2F+CCID 0\n---   Card: Identity Device (NIST SP 800-73 [PIV])\nProvider = Microsoft Smart Card Key Storage Provider\nKey Container = (null) [Default Container]\n\nCannot open the  key for reader: Yubico Yubikey 4 OTP+U2F+CCID 0\n\n--------------===========================--------------\n\nDone.\nCertUtil: -SCInfo command completed successfully.\n</code></pre> <p> Log oleh Scdaemon menunjukkan sesuatu (menurut saya) mungkin menarik, karena tampaknya mendeteksi pembaca: </p> <pre><code>2018-07-26 18:13:36 scdaemon[13612] detected reader 'Windows Hello for Business 9'\n2018-07-26 18:13:36 scdaemon[13612] detected reader 'Yubico Yubikey 4 OTP+U2F+CCID 0'\n2018-07-26 18:13:36 scdaemon[13612] reader slot 0: not connected\n2018-07-26 18:13:36 scdaemon[13612] DBG: leave: apdu_open_reader =&gt; slot=0 [pc/sc]\n2018-07-26 18:13:36 scdaemon[13612] DBG: enter: apdu_connect: slot=0\n2018-07-26 18:13:36 scdaemon[13612] pcsc_control failed: insufficient buffer (0x80100008)\n2018-07-26 18:13:36 scdaemon[13612] pcsc_vendor_specific_init: GET_FEATURE_REQUEST failed: 65538\n2018-07-26 18:13:36 scdaemon[13612] reader slot 0: active protocol: T1\n2018-07-26 18:13:36 scdaemon[13612] slot 0: ATR=3B 8D 01 80 FB A0 00 00 03 97 42 54 46 59 04 01 CF\n2018-07-26 18:13:36 scdaemon[13612] DBG: pcsc_get_status_change:  changed present excl inuse\n2018-07-26 18:13:36 scdaemon[13612] DBG: leave: apdu_connect =&gt; sw=0x0\n2018-07-26 18:13:36 scdaemon[13612] DBG: send apdu: c=00 i=A4 p1=00 p2=0C lc=2 le=-1 em=0\n2018-07-26 18:13:36 scdaemon[13612] DBG:   PCSC_data: 00 A4 00 0C 02 3F 00\n2018-07-26 18:13:36 scdaemon[13612] DBG:  response: sw=6A82  datalen=0\n2018-07-26 18:13:36 scdaemon[13612] DBG: send apdu: c=00 i=A4 p1=04 p2=00 lc=6 le=-1 em=0\n2018-07-26 18:13:36 scdaemon[13612] DBG:   PCSC_data: 00 A4 04 00 06 D2 76 00 01 24 01\n2018-07-26 18:13:36 scdaemon[13612] DBG:  response: sw=6A82  datalen=0\n2018-07-26 18:13:36 scdaemon[13612] can't select application 'openpgp': Not supported\n2018-07-26 18:13:36 scdaemon[13612] DBG: enter: apdu_close_reader: slot=0\n2018-07-26 18:13:36 scdaemon[13612] DBG: enter: apdu_disconnect: slot=0\n2018-07-26 18:13:36 scdaemon[13612] DBG: leave: apdu_disconnect =&gt; sw=0x0\n2018-07-26 18:13:36 scdaemon[13612] DBG: leave: apdu_close_reader =&gt; 0x0 (close_reader)\n2018-07-26 18:13:36 scdaemon[13612] DBG: chan_0x00000188 -&gt; ERR 100696144 No such device &lt;SCD&gt;\n</code></pre>","source":"https://superuser.com/questions/1343569/scdaemon-wont-detect-yubikey-on-windows-10","author":"<a href=\"https://superuser.com/users/545849/vagaerg\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">vagaerg</span></a>","replies":[],"answers":[{"answer":"<p> Masalah tampaknya menginstal Office365 menambahkan pembaca Smartcard virtual untuk <code>Windows Hello for Business</code>, mekanisme otentikasi berdasarkan Microsoft Passport. </p>\n\n<p> Saya pikir (berdasarkan log) ini menyebabkan <code>scdaemon</code> macet, karena dapat menemukan dua pembaca: yang satu ini, dan Yubikey; tetapi tidak mencoba untuk menginisialisasi yang terakhir, gagal setelah mencoba pembaca virtual <code>Windows Hello for Business</code>. Log untuk certutil juga menunjukkan sertifikat tidak dapat diambil untuk pembaca virtual Windows Hello di mesin saya, jadi ini mungkin yang menyebabkan <code>scdaemon</code> macet. </p>\n\n<p> Masalah ini diselesaikan dengan mengatur <code>Yubico Yubikey 4 OTP+U2F+CCID 0</code> (nama yang saya dapatkan dari log) pada pengaturan Kleopatra, di bawah tab Smartcard. </p>\n\n<p> YMMV, tetapi yang akan saya rekomendasikan adalah sebagai berikut: </p>\n\n<ul>\n<li> Setel level Debugging ke 4, dan setel jalur untuk file log pada tab <code>smartcards</code> di Kleopatra </li>\n<li> Cari nama smartcard Yubikey Anda di logfile: harus ada baris yang dimulai dengan <code>detected reader</code>, dalam kasus saya menyatakan <code>detected reader 'Yubico Yubikey 4 OTP+U2F+CCID 0'</code> </li>\n<li> Salin nama itu ke bidang <code>Connect to reader at port N</code> di Kleopatra </li>\n<li> Anda sekarang dapat menonaktifkan logging lagi untuk mengurangi sampah yang dihasilkan. </li>\n</ul>\n\n<p> Silakan lihat gambar untuk referensi: </p>\n\n<p><img src=\"https://raw.pabloarteaga.com/public_images/stackexchange_yubikey.png\" alt=\"Screenshot\" class=\"img-fluid d-block my-2\" loading=\"lazy\"></p>","votes":"6","source":"https://superuser.com/a/1343581","author":"<a href=\"https://superuser.com/users/545849/vagaerg\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">vagaerg</span></a>","replies":[]}]}
