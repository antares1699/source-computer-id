{"title":"Mengapa IGNOREEOF tidak berfungsi di Zsh?","draft":false,"url":"/mengapa-ignoreeof-tidak-berfungsi-di-zsh-8nzwspkd","votes":"4","answers_count":"2","categories":["Komputer"],"tags":["linux","bash","shell","zsh"],"snippet":"Saya sering menggunakan Ctrl-D untuk keluar dari sesi python interaktif tetapi terkadang saya tidak sengaja menekannya saat sesi python tidak aktif. Ini akan menghasilkan pengiriman EOF ke shell dan kemudian menutupnya (tanpa...","body":"<p> Saya sering menggunakan Ctrl-D untuk keluar dari sesi python interaktif tetapi terkadang saya tidak sengaja menekannya saat sesi python tidak aktif. Ini akan menghasilkan pengiriman EOF ke shell dan kemudian menutupnya (tanpa meminta konfirmasi). Saya telah sampai pada dua solusi dari googling sekitar: </p>\n\n<ol>\n<li> <code>set -o ignoreeof</code> </li>\n<li> <code>export IGNOREEOF=10</code> </li>\n</ol>\n\n<p> Opsi pertama bekerja dengan sempurna di zsh shell dan bash shell saya.\nNamun, opsi kedua tampaknya hanya berfungsi di bash. Saat aku di zsh,\nberapa pun nomor yang saya tetapkan untuk <code>IGNOREEOF</code>, ia mengirimkan EOF seperti tidak ditetapkan. </p>\n\n<p> Adakah yang bisa membantu dengan mengapa ZSH berperilaku seperti ini atau itu hanya hasil dari beberapa pengaturan env yang aneh di shell zsh saya? </p>","source":"https://superuser.com/questions/1243138/why-does-ignoreeof-not-work-in-zsh","author":"<a href=\"https://superuser.com/users/758322/zhenhua\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">Zhenhua</span></a>","replies":[{"reply":"<code>IGNOREEOF</code> tidak terdaftar di bagian <code>PARAMETERS USED BY THE SHELL</code> <i> zsh </i> halaman manual, jadi saya curiga halaman Google Anda tidak benar tentang <code>IGNOREEOF</code> bekerja di <i> zsh </i> .","author":"<a href=\"https://superuser.com/users/195224/mpy\" target=\"_blank\" rel=\"nofollow noopener\">mpy</a>"},{"reply":"<a href=\"http://www.zsh.org/mla/users/2001/msg00240.html\" rel=\"nofollow noopener\" target=\"_blank\"> Sini </a> adalah skrip yang menggunakan pengeditan garis zsh untuk meniru fitur IGNOREEOF bash.","author":"<a href=\"https://superuser.com/users/7778/gordon-davisson\" target=\"_blank\" rel=\"nofollow noopener\">Gordon Davisson</a>"},{"reply":"Coba <code>setopt ignoreeof</code> yang merupakan zsh yang setara dengan fitur bash.","author":"<a href=\"https://superuser.com/users/766629/okapi\" target=\"_blank\" rel=\"nofollow noopener\">okapi</a>"}],"answers":[{"answer":"<p> Zsh tidak menggunakan parameter <code>IGNOREEOF</code> seperti yang dilakukan Bash. Sebaliknya, ini adalah opsi yang harus Anda atur melalui bawaan <code>setopt</code>. Dari <code>zshoptions(1)</code>: </p>\n\n<blockquote>\n  <p> IGNORE_EOF (-7) </p>\n  \n  <p> Jangan keluar di akhir file. Mengharuskan penggunaan keluar atau keluar sebagai gantinya. <strong> Namun, sepuluh EOF berturut-turut akan menyebabkan shell tetap keluar </strong> , untuk menghindari cangkang menggantung jika tty-nya hilang. </p>\n  \n  <p> Selain itu, jika opsi ini disetel dan Editor Garis Zsh digunakan, widget yang diimplementasikan oleh fungsi shell dapat terikat ke EOF (biasanya Control-D) tanpa mencetak pesan peringatan normal. Ini hanya berfungsi untuk widget normal, bukan untuk widget penyelesaian. </p>\n</blockquote>\n\n<p> - <em> Paragraf kedua penting jika Anda ingin meniru Bash&#39;s IGNOREEOF; Lihat di bawah </em></p>\n\n<p> Anda dapat mengaktifkan opsi ini dengan menambahkan yang berikut ini ke konfigurasi shell Anda: </p> <pre><code>setopt ignore_eof    # Option names are case-insensitive and underscores are optional.\n</code></pre> <h3 class=\"h5\"> Emulating Bash (Opsional) </h3>\n\n<p> Jika Anda ingin meniru perilaku Bash untuk dapat menentukan jumlah <kbd> Ctrl </kbd> + <kbd> D </kbd> urutan sebelum keluar dari shell, maka Anda dapat menambahkan yang berikut ini <a href=\"https://www.zsh.org/mla/users/2001/msg00243.html\" rel=\"nofollow noopener\" target=\"_blank\"> Definisi widget ZLE </a> * untuk konfigurasi Anda: </p> <pre class=\"lang-bsh prettyprint-override\"><code># Emulate Bash $IGNOREEOF behavior\nbash-ctrl-d() {\n  if [[ $CURSOR == 0 &amp;&amp; -z $BUFFER ]]\n  then\n    [[ -z $IGNOREEOF || $IGNOREEOF == 0 ]] &amp;&amp; exit\n    if [[ $LASTWIDGET == bash-ctrl-d ]]\n    then\n      (( --__BASH_IGNORE_EOF &lt;= 0 )) &amp;&amp; exit\n    else\n      (( __BASH_IGNORE_EOF = IGNOREEOF-1 ))\n    fi\n    zle send-break\n  else\n    zle delete-char-or-list\n  fi\n}\n</code></pre> <p> Kemudian, tambahkan widget ke ZLE dan buat keybind untuknya: </p> <pre><code>zle -N bash-ctrl-d\nbindkey '^D' bash-ctrl-d\n</code></pre> <p><strong> Anda masih perlu menyetel opsi <code>ignore_eof</code> </strong> namun sebaliknya <kbd> Ctrl </kbd> + <kbd> D </kbd> akan mengabaikan ZLE dan segera keluar dari shell apapun widget ini. Lihat paragraf kedua dari potongan halaman manual di awal jawaban. </p>\n\n<p> * - Penghargaan untuk widget ini diberikan kepada penulis aslinya, Christoph Lange, dan Bart Schaefer atas koreksinya </p>","votes":"6","source":"https://superuser.com/a/1309966","author":"<a href=\"https://superuser.com/users/228445/zeroknight\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">ZeroKnight</span></a>","replies":[{"reply":"Setelah melakukan <code>setopt ignore_eof </code> iterm2 membeku untuk sementara @ZeroKnight","author":"<a href=\"https://superuser.com/users/723632/alper\" target=\"_blank\" rel=\"nofollow noopener\">alper</a>"}]},{"answer":"<p> Saya menemukan: </p> <pre><code>   zle send-break\n</code></pre> <p> dan </p> <pre><code>    zle delete-char-or-list\n</code></pre> <p> menyebabkan LASTWIDGET selalu menjadi zle-line-init dan tidak pernah bash-ctrl-d, sehingga shell tidak pernah berakhir. Saya harus menghapus baris tersebut agar __BASH_IGNORE_EOF dikurangi.\nSeperti dalam: </p> <pre><code># 2x ctrl-d to exit ...\nexport IGNOREEOF=1\n\n# bash like ctrl-d wrapper for IGNOREEOF\nsetopt ignore_eof\nfunction bash-ctrl-d() {\n  if [[ $CURSOR == 0 &amp;&amp; -z $BUFFER ]]\n  then\n    [[ -z $IGNOREEOF || $IGNOREEOF == 0 ]] &amp;&amp; exit\n    if [[ \"$LASTWIDGET\" == \"bash-ctrl-d\" ]]\n    then\n      (( --__BASH_IGNORE_EOF &lt;= 0 )) &amp;&amp; exit\n    else\n      (( __BASH_IGNORE_EOF = IGNOREEOF ))\n    fi\n  fi\n}\nzle -N bash-ctrl-d\nbindkey \"^d\" bash-ctrl-d\n</code></pre> <p> Saya menggunakan zsh 5.1.1.\nTerima kasih,\n-m </p>","votes":"1","source":"https://superuser.com/a/1509672","author":"<a href=\"https://superuser.com/users/675652/m-kelly\" target=\"_blank\" rel=\"nofollow noopener\"><span itemprop=\"name\">M Kelly</span></a>","replies":[]}]}
